.charsheet {
    font-family: 'Uncial Antiqua', serif;
    background: linear-gradient(135deg, #2a211b, #1a1411);
    color: #e4d8c4;
    border: 3px solid #a47149;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(164, 113, 73, 0.3);
  }
  
  .sheet-section-title {
    background: linear-gradient(to right, #e4d8c4, #c3a97b);
    color: #3a2a1a;
    padding: 4px 10px;
    border-radius: 5px;
    font-weight: bold;
  }
  
  /* ==== ONGLETS ==== */
  .sheet-tab-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 1em;
    justify-content: center;
  }
  
  .sheet-tab-button {
    background: linear-gradient(to bottom, #e4d8c4, #c2a97b);
    border: 2px solid #7c5e3b;
    border-radius: 6px;
    color: #3a2a1a;
    font-family: 'Uncial Antiqua', serif;
    font-weight: bold;
    padding: 6px 14px;
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease;
    box-shadow: inset 0 -3px 0 rgba(0, 0, 0, 0.3); /* effet "volet narratif" */
  }
  
  .sheet-tab-button:hover {
    background: linear-gradient(to bottom, #f0e4c8, #d4ba8a);
    color: #2b1e12;
    box-shadow: 0 0 6px rgba(125, 90, 60, 0.4);
  }
  
  .sheet-tab-button:focus {
    outline: none;
  }
  
  /* ==== Bandeau / flèche active ==== */
  .sheet-tab-button::after {
    content: "";
    display: block;
    height: 3px;
    background: transparent;
    position: absolute;
    bottom: -5px;
    left: 10%;
    right: 10%;
    border-radius: 2px;
    transition: background 0.3s;
  }
  
  /* ==== ONGLET ACTIF ==== */
  .sheet-tab-content {
    display: none;
  }
  
  input.sheet-tabstoggle[value="profils"] ~ .sheet-profils,
  input.sheet-tabstoggle[value="combat"] ~ .sheet-combat,
  input.sheet-tabstoggle[value="talent"] ~ .sheet-talent,
  input.sheet-tabstoggle[value="sort"] ~ .sheet-sort,
  input.sheet-tabstoggle[value="inventaire"] ~ .sheet-inventaire,
  input.sheet-tabstoggle[value="entrainement"] ~ .sheet-entrainement,
  input.sheet-tabstoggle[value="connaissance"] ~ .sheet-connaissance,
  input.sheet-tabstoggle[value="infos"] ~ .sheet-infos,
  input.sheet-tabstoggle[value="tableau"] ~ .sheet-tableau,
  input.sheet-tabstoggle[value="metier"] ~ .sheet-metier,
  input.sheet-tabstoggle[value="corruption"] ~ .sheet-corruption,
  input.sheet-tabstoggle[value="voie_sanguinaire"] ~ .sheet-voie-sanguinaire {  /* ✅ AJOUTÉ */
    display: block;
  }
  
  /* ==== BOUTON ACTIF ==== */
  input.sheet-tabstoggle[value="profils"] ~ .sheet-tab-buttons button[name="act_profils"],
  input.sheet-tabstoggle[value="combat"] ~ .sheet-tab-buttons button[name="act_combat"],
  input.sheet-tabstoggle[value="talent"] ~ .sheet-tab-buttons button[name="act_talent"],
  input.sheet-tabstoggle[value="sort"] ~ .sheet-tab-buttons button[name="act_sort"],
  input.sheet-tabstoggle[value="inventaire"] ~ .sheet-tab-buttons button[name="act_inventaire"],
  input.sheet-tabstoggle[value="entrainement"] ~ .sheet-tab-buttons button[name="act_entrainement"],
  input.sheet-tabstoggle[value="connaissance"] ~ .sheet-tab-buttons button[name="act_connaissance"],
  input.sheet-tabstoggle[value="infos"] ~ .sheet-tab-buttons button[name="act_infos"],
  input.sheet-tabstoggle[value="tableau"] ~ .sheet-tab-buttons button[name="act_tableau"],
  input.sheet-tabstoggle[value="metier"] ~ .sheet-tab-buttons button[name="act_metier"],
  input.sheet-tabstoggle[value="corruption"] ~ .sheet-tab-buttons button[name="act_corruption"],
  input.sheet-tabstoggle[value="voie_sanguinaire"] ~ .sheet-tab-buttons button[name="act_voie_sanguinaire"] {  /* ✅ AJOUTÉ */
    background: linear-gradient(to bottom, #a47149, #7c5e3b);
    color: #fffaf0;
    box-shadow: 0 0 8px rgba(164, 113, 73, 0.6);
  }
  input.sheet-tabstoggle[value="profils"] ~ .sheet-tab-buttons button[name="act_profils"]::after,
  input.sheet-tabstoggle[value="combat"] ~ .sheet-tab-buttons button[name="act_combat"]::after,
  input.sheet-tabstoggle[value="talent"] ~ .sheet-tab-buttons button[name="act_talent"]::after,
  input.sheet-tabstoggle[value="sort"] ~ .sheet-tab-buttons button[name="act_sort"]::after,
  input.sheet-tabstoggle[value="inventaire"] ~ .sheet-tab-buttons button[name="act_inventaire"]::after,
  input.sheet-tabstoggle[value="entrainement"] ~ .sheet-tab-buttons button[name="act_entrainement"]::after,
  input.sheet-tabstoggle[value="connaissance"] ~ .sheet-tab-buttons button[name="act_connaissance"]::after,
  input.sheet-tabstoggle[value="infos"] ~ .sheet-tab-buttons button[name="act_infos"]::after,
  input.sheet-tabstoggle[value="tableau"] ~ .sheet-tab-buttons button[name="act_tableau"]::after,
  input.sheet-tabstoggle[value="metier"] ~ .sheet-tab-buttons button[name="act_metier"]::after,
  input.sheet-tabstoggle[value="corruption"] ~ .sheet-tab-buttons button[name="act_corruption"]::after {
    background: #fffaf0;
  }
  
  /* ==== RESPONSIF ==== */
  @media screen and (max-width: 600px) {
    .sheet-tab-buttons {
      flex-direction: column;
      align-items: stretch;
    }
  
    .sheet-tab-button {
      width: 100%;
      text-align: center;
    }
  }
  
  
  
  /* === TITRES DE SECTION PRINCIPALE === */
  .sheet-section-title {
    font-family: 'Uncial Antiqua', serif;
    font-size: 1.2em;
    padding: 6px 12px;
    background: linear-gradient(to right, #e4d8c4, #c3a97b);
    border: 2px solid #7c5e3b;
    border-radius: 6px;
    color: #3a2a1a;
    margin: 10px 0;
    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.4);
  }
  
  /* === TITRES DE SOUS-SECTIONS === */
  .subsection-title, .sheet-subsection-title, .sheet-summary-inner, .sheet-dnd-header {
    font-family: 'Uncial Antiqua', serif;
    font-size: 1em;
    background: linear-gradient(to right, #f1e8d2, #d9c49a);
    border-left: 5px solid #a47149;
    padding: 4px 10px;
    margin: 8px 0;
    color: #3b2a1d;
    border-radius: 4px;
  }
  
  /* === WRAPPERS / BLOCS === */
  .section-wrapper,
  .sheet-carac-wrapper,
  .sheet-id-wrapper,
  .sheet-competence-wrapper,
  .sheet-traits-wrapper,
  .sheet-dnd-section,
  .sheet-body-stats,
  .sheet-metier-block,
  .sheet-inventory-block,
  .sheet-item-column,
  .sheet-connaissance-block {
    background: #fdf9f2;
    border: 2px solid #c3a97b;
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 16px;
    box-shadow: inset 0 0 6px rgba(195, 169, 123, 0.3);
  }
  
  .sheet-competence-wrapper .repitem,
  .sheet-traits-wrapper .repitem {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    width: 100%;
    gap: 12px;
  }
  
  .sheet-competence-wrapper .repitem input,
  .sheet-traits-wrapper .repitem input {
    flex: 1;
    min-width: 0;
    width: 100%;
    padding: 4px;
    box-sizing: border-box;
    font-size: 0.95em;
  }
  
  /* === Titres centrés spécifiques === */
  .sheet-langues-title,
  .sheet-currency-title,
  .sheet-reputation-title {
    text-align: center;
    font-family: 'Uncial Antiqua', serif;
    font-size: 1.1em;
    background: linear-gradient(to right, #e4d8c4, #c3a97b);
    border: 2px solid #b08d5c;
    border-radius: 6px;
    padding: 6px;
    margin: 8px 0;
    color: #3a2a1a;
  }
  
  /* === Zones encadrées stylisées === */
  .sheet-pv-table-wrapper,
  .sheet-carac-wrapper,
  .sheet-traits-wrapper {
    width: 100%;
    background: #fef9ef;
    border: 2px solid #c3a97b;
    padding: 10px;
    margin: 12px auto;
    border-radius: 6px;
    box-shadow: inset 0 0 6px rgba(195, 169, 123, 0.3);
  }
  
  /* === Tables visuellement harmonisées === */
  .sheet-pv-table,
  .sheet-carac-table,
  .sheet-traits-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 16px;
  }
  .sheet-pv-table th, .sheet-carac-table th, .sheet-traits-table th,
  .sheet-pv-table td, .sheet-carac-table td, .sheet-traits-table td {
    border: 1px solid #c3a97b;
    padding: 6px;
    text-align: center;
    background-color: #fdf7e9;
  }
  
  .sheet-character-image-preview img {
    width: 100%;
    max-width: 100%;
    height: auto;
    resize: both;              /* Active le redimensionnement */
    overflow: auto;            /* Permet d'afficher les scrollbars si besoin */
    display: block;
    min-width: 100px;          /* Largeur minimale */
    min-height: 100px;         /* Hauteur minimale */
    max-height: 500px;         /* Hauteur maximale */
    border-radius: 8px;
  }
  .sheet-character-image-preview {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 8px;
  }
  
  /* === WRAPPER COMMUN POUR TOUS LES ONGLETS === */
  .sheet-profils .section-wrapper,
  .sheet-combat .section-wrapper,
  .sheet-talent .section-wrapper,
  .sheet-sort .section-wrapper,
  .sheet-inventaire .section-wrapper,
  .sheet-entrainement .section-wrapper,
  .sheet-connaissance .section-wrapper,
  .sheet-infos .section-wrapper,
  .sheet-tableau .section-wrapper,
  .sheet-metier .section-wrapper,
  .sheet-corruption .section-wrapper {
    background: #fdf9f2;
    border: 2px solid #c3a97b;
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 16px;
    box-shadow: inset 0 0 6px rgba(195, 169, 123, 0.3);
  }
  
  /* === TABLEAUX UNIFIÉS POUR TOUS LES ONGLETS === */
  .sheet-profils table,
  .sheet-combat table,
  .sheet-talent table,
  .sheet-sort table,
  .sheet-inventaire table,
  .sheet-entrainement table,
  .sheet-connaissance table,
  .sheet-infos table,
  .sheet-tableau table,
  .sheet-metier table,
  .sheet-corruption table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 16px;
  }
  
  .sheet-profils th, .sheet-combat th, .sheet-talent th,
  .sheet-sort th, .sheet-inventaire th, .sheet-entrainement th,
  .sheet-connaissance th, .sheet-infos th, .sheet-tableau th,
  .sheet-metier th, .sheet-corruption th,
  .sheet-profils td, .sheet-combat td, .sheet-talent td,
  .sheet-sort td, .sheet-inventaire td, .sheet-entrainement td,
  .sheet-connaissance td, .sheet-infos td, .sheet-tableau td,
  .sheet-metier td, .sheet-corruption td {
    border: 1px solid #c3a97b;
    padding: 6px;
    text-align: center;
    background-color: #fdf7e9;
  }
  
  /* === TITRES DE SECTION UNIFIÉS === */
  .sheet-profils .sheet-section-title,
  .sheet-combat .sheet-section-title,
  .sheet-talent .sheet-section-title,
  .sheet-sort .sheet-section-title,
  .sheet-inventaire .sheet-section-title,
  .sheet-entrainement .sheet-section-title,
  .sheet-connaissance .sheet-section-title,
  .sheet-infos .sheet-section-title,
  .sheet-tableau .sheet-section-title,
  .sheet-metier .sheet-section-title,
  .sheet-corruption .sheet-section-title {
    font-family: 'Uncial Antiqua', serif;
    font-size: 1.2em;
    padding: 6px 12px;
    background: linear-gradient(to right, #e4d8c4, #c3a97b);
    border: 2px solid #7c5e3b;
    border-radius: 6px;
    color: #3a2a1a;
    margin: 10px 0;
    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.4);
    text-align: center;
  }
  
  
  
  /* === TABLEAU PAR DÉFAUT POUR TOUS LES TABLES NON CIBLÉS === */
  .charsheet table {
    border-collapse: collapse;
    width: 100%;
    background: #fdf7e9;
    border: 1px solid #c3a97b;
    margin-bottom: 1em;
  }
  
  .charsheet th, .charsheet td {
    border: 1px solid #c3a97b;
    padding: 6px;
    text-align: center;
  }
  
  /* === Détails ou blocs imbriqués === */
  .charsheet details table,
  .charsheet .repcontainer table,
  .charsheet .sheet-block table {
    width: 100%;
    border-collapse: collapse;
    margin: 10px 0;
    background: #fdf8ec;
  }
  
  .charsheet details th, .charsheet details td,
  .charsheet .repcontainer th, .charsheet .repcontainer td {
    border: 1px solid #c3a97b;
    padding: 6px;
    text-align: center;
    background-color: #fefaf0;
  }
  
  
  
  /* === HARMONISATION DES TITRES === */
  .sheet-competence-header,
  .sheet-competence-subheader,
  .sheet-traits-header,
  .sheet-langues-title,
  .sheet-currency-title,
  .sheet-reputation-title,
  .sheet-subsection-title,
  .subsection-title,
  .sheet-summary-inner,
  .sheet-dnd-header {
    font-family: 'Uncial Antiqua', serif;
    font-size: 1.2em;
    text-align: center;
    background: linear-gradient(to right, #e4d8c4, #c3a97b);
    border: 2px solid #7c5e3b;
    border-radius: 6px;
    padding: 6px 12px;
    margin: 10px 0;
    color: #3a2a1a;
    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.4);
  }
  
  
  
  /* === FORCER LES TABLEAUX À RESTER DANS LEUR ENCADREMENT === */
  .sheet-pv-table,
  .sheet-carac-table,
  .sheet-traits-table,
  .sheet-id-table,
  .charsheet table,
  .charsheet .sheet-block table {
    max-width: 100%;
    width: 100%;
    table-layout: fixed;
    word-break: break-word;
    overflow-wrap: break-word;
  }
  
  .sheet-pv-table td input,
  .sheet-carac-table td input,
  .sheet-traits-table td input {
    max-width: 100%;
    box-sizing: border-box;
  }
  
  
  
  /* === COMBAT : ZONES ENCADRÉES === */
  .sheet-combat .initiative-wrapper,
  .sheet-combat .bonus-mod-wrapper,
  .sheet-combat .classe-arme-wrapper,
  .sheet-combat .resistances-wrapper {
    background: #fdf9f2;
    border: 2px solid #c3a97b;
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 16px;
    box-shadow: inset 0 0 6px rgba(195, 169, 123, 0.3);
  }
  
  /* === COMBAT : TITRES CENTRÉS UNIFIÉS === */
  .sheet-combat .initiative-wrapper .sheet-section-title,
  .sheet-combat .bonus-mod-wrapper .sheet-section-title,
  .sheet-combat .classe-arme-wrapper .sheet-section-title,
  .sheet-combat .resistances-wrapper .sheet-section-title {
    font-family: 'Uncial Antiqua', serif;
    font-size: 1.2em;
    text-align: center;
    background: linear-gradient(to right, #e4d8c4, #c3a97b);
    border: 2px solid #7c5e3b;
    border-radius: 6px;
    padding: 6px 12px;
    margin: 10px 0;
    color: #3a2a1a;
    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.4);
  }
  
  
  
  /* === TABLEAUX HARMONISÉS COMPLETS === */
  .charsheet table {
    table-layout: fixed;
    width: 100%;
    border-collapse: collapse;
    background: #fdf7e9;
    border: 1px solid #c3a97b;
    margin-bottom: 1em;
    word-break: break-word;
  }
  
  .charsheet th,
  .charsheet td {
    padding: 6px;
    text-align: center;
    border: 1px solid #c3a97b;
  }
  
  .charsheet td input[type="text"],
  .charsheet td input[type="number"],
  .charsheet td select {
    width: 100%;
    box-sizing: border-box;
    max-width: 100%;
    padding: 4px;
    font-size: 0.95em;
  }
  
  /* Tables dans fieldsets / détails / .sheet-blocks */
  .charsheet .repcontainer table,
  .charsheet .sheet-block table,
  .charsheet details table {
    width: 100%;
    table-layout: fixed;
    background: #fdf8ec;
    margin-bottom: 12px;
  }
  
  .charsheet .repcontainer th,
  .charsheet .repcontainer td,
  .charsheet .sheet-block th,
  .charsheet .sheet-block td,
  .charsheet details th,
  .charsheet details td {
    background-color: #fef9f0;
  }
  
  
  
  /* === CORRECTION DÉBORDEMENTS TABLEAUX === */
  *, *::before, *::after {
    box-sizing: border-box;
  }
  
  .charsheet table {
    table-layout: fixed;
    width: 100%;
    max-width: 100%;
    overflow-wrap: break-word;
    word-wrap: break-word;
  }
  
  .sheet-carac-wrapper,
  .sheet-pv-table-wrapper,
  .sheet-body-stats,
  .sheet-id-wrapper,
  .sheet-traits-wrapper,
  .sheet-competence-block {
    overflow-x: auto;
    max-width: 100%;
    box-sizing: border-box;
  }
  
  .sheet-carac-wrapper table,
  .sheet-pv-table-wrapper table {
    max-width: 100%;
    width: 100%;
  }
  
  
  
  /* === INVENTAIRE : COLONNES DE GAUCHE ET DROITE === */
  .sheet-inventory-columns {
    display: flex;
    gap: 2em;
    justify-content: space-between;
    flex-wrap: wrap;
    margin-bottom: 1em;
  }
  
  .sheet-inventory-left-column,
  .sheet-inventory-right-column {
    flex: 1 1 48%;
    display: flex;
    flex-direction: column;
    gap: 1em;
  }
  
  .sheet-inventory-block {
    border: 2px solid #c3a97b;
    background: #fdf9ef;
    padding: 1em;
    border-radius: 8px;
  }
  
  
  
  /* === INVENTAIRE : COLONNES CÔTE À CÔTE === */
  .sheet-inventory-columns {
    display: flex;
    gap: 2em;
    flex-wrap: wrap;
    justify-content: space-between;
    margin-top: 1em;
    margin-bottom: 2em;
  }
  
  .sheet-inventory-left-column,
  .sheet-inventory-right-column {
    flex: 1 1 48%;
    display: flex;
    flex-direction: column;
    gap: 1em;
  }
  
  .sheet-inventory-block {
    border: 2px solid #c3a97b;
    background: #fdf9ef;
    padding: 1em;
    border-radius: 8px;
    box-sizing: border-box;
  }
  
  
  
  /* === TEXTAREA EFFETS NON EXTENSIBLES === */
  .sheet-inventory-row textarea {
    resize: none;
    height: 60px;
    overflow-y: auto;
  }
  
  /* === TITRES MODIFIABLES UNIFORMISÉS === */
  input.sheet-section-title[type="text"] {
    font-family: 'Uncial Antiqua', serif;
    font-size: 1.2em;
    padding: 6px 12px;
    background: linear-gradient(to right, #e4d8c4, #c3a97b);
    border: 2px solid #7c5e3b;
    border-radius: 6px;
    color: #3a2a1a;
    margin: 10px 0;
    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.4);
    text-align: center;
    width: 100%;
    box-sizing: border-box;
  }
  
  
  
  
  
  
  
  
  
  
  
  /* === INVENTAIRE : NOM + QUANTITÉ + EFFET MINIMALISTE === */
  .sheet-inventory-row {
    display: flex;
    gap: 0.4em;
    align-items: center;
    flex-wrap: nowrap;
    margin-bottom: 4px;
  }
  
  .sheet-inventory-row input[type="text"] {
    flex: 2 1 45%;
    height: 24px;
    padding: 2px 4px;
    font-size: 0.85em;
    line-height: 1.1em;
    margin: 0;
    box-sizing: border-box;
  }
  
  .sheet-inventory-row input[type="number"] {
    flex: 0 1 15%;
    height: 24px;
    padding: 2px 4px;
    font-size: 0.85em;
    line-height: 1.1em;
    margin: 0;
    text-align: center;
    box-sizing: border-box;
  }
  
  .sheet-inventory-row textarea {
    flex: 3 1 40%;
    height: 24px;
    padding: 2px 4px;
    font-size: 0.85em;
    line-height: 1.1em;
    margin: 0;
    resize: none;
    overflow-y: auto;
    box-sizing: border-box;
  }
  
  
  /* === INVENTAIRE : NOM + QUANTITÉ + EFFET COMPACT, CENTRÉ ET PROPORTIONS FIXES === */
  .sheet-inventory-row {
    display: flex;
    gap: 0.3em;
    align-items: center;
    flex-wrap: nowrap;
    margin-bottom: 4px;
  }
  
  .sheet-inventory-row input[type="text"] {
    flex: 0 1 45%;
    height: 22px;
    padding: 2px 4px;
    font-size: 0.85em;
    text-align: center;
    margin: 0;
    box-sizing: border-box;
  }
  
  .sheet-inventory-row input[type="number"] {
    flex: 0 1 5%;
    height: 22px;
    padding: 2px 4px;
    font-size: 0.85em;
    text-align: center;
    margin: 0;
    box-sizing: border-box;
  }
  
  .sheet-inventory-row textarea {
    flex: 0 1 50%;
    height: 22px;
    padding: 2px 4px;
    font-size: 0.85em;
    resize: none;
    text-align: center;
    overflow-y: auto;
    margin: 0;
    box-sizing: border-box;
  }
  
  
  /* === CONNAISSANCE : CENTRER TOUTES LES INFOS === */
  .sheet-connaissance-table {
    width: 100%;
    table-layout: fixed;
  }
  
  .sheet-connaissance-table th,
  .sheet-connaissance-table td {
    text-align: center;
    vertical-align: middle;
    padding: 4px;
  }
  
  .sheet-connaissance-table input,
  .sheet-connaissance-table select {
    display: block;
    margin: 0 auto;
    text-align: center;
  }
  
  
  /* === INFOS PERSO : WRAPPERS + TITRES UNIFIÉS === */
  .sheet-tab-content.sheet-infos .section-wrapper {
    border: 2px solid #c3a97b;
    background: #fdf9ef;
    padding: 1em;
    border-radius: 8px;
    margin-bottom: 1.5em;
  }
  
  .sheet-tab-content.sheet-infos .sheet-section-title {
    font-family: 'Uncial Antiqua', serif;
    font-size: 1.2em;
    text-align: center;
    background: linear-gradient(to right, #e4d8c4, #c3a97b);
    border: 2px solid #7c5e3b;
    border-radius: 6px;
    padding: 6px 12px;
    color: #3a2a1a;
    margin-bottom: 0.8em;
    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.4);
  }
  
  /* === TABLES INTERNES INFOS PERSO === */
  .sheet-tab-content.sheet-infos table.sheet-table-supplementaires {
    width: 100%;
    border-collapse: collapse;
    margin-top: 0.5em;
  }
  
  .sheet-tab-content.sheet-infos table.sheet-table-supplementaires th,
  .sheet-tab-content.sheet-infos table.sheet-table-supplementaires td {
    text-align: center;
    padding: 4px 8px;
    border: 1px solid #c3a97b;
    background: #fffaf0;
  }
  
  /* === TEXTAREAS INFOS PERSO === */
  .sheet-tab-content.sheet-infos textarea {
    width: 100%;
    resize: vertical;
    min-height: 60px;
    font-family: 'Uncial Antiqua', serif;
    font-size: 0.9em;
    padding: 6px;
    box-sizing: border-box;
    background: #fdf9ef;
    border: 1px solid #c3a97b;
  }
  
  
  /* === FORCER COULEUR DE POLICE EN NOIR POUR CERTAINES SECTIONS === */
  .sheet-tab-content.sheet-infos,
  .sheet-tab-content.sheet-entrainement,
  .sheet-tab-content.sheet-connaissance,
  .sheet-tab-content.sheet-metier {
    color: #000000;
  }
  
  .sheet-tab-content.sheet-infos input,
  .sheet-tab-content.sheet-infos select,
  .sheet-tab-content.sheet-infos textarea,
  .sheet-tab-content.sheet-entrainement input,
  .sheet-tab-content.sheet-entrainement select,
  .sheet-tab-content.sheet-entrainement textarea,
  .sheet-tab-content.sheet-connaissance input,
  .sheet-tab-content.sheet-connaissance select,
  .sheet-tab-content.sheet-connaissance textarea,
  .sheet-tab-content.sheet-metier input,
  .sheet-tab-content.sheet-metier select,
  .sheet-tab-content.sheet-metier textarea {
    color: #000000;
  }
  
  
  /* === MÉTIER : ENCADRÉ POUR MISSIONS ET TALENT DU MÉTIER === */
  .sheet-metier .missions-wrapper,
  .sheet-metier .talent-wrapper {
    background: #fdf9f2;
    border: 2px solid #c3a97b;
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 16px;
    box-shadow: inset 0 0 6px rgba(195, 169, 123, 0.3);
  }
  
  .sheet-metier .missions-wrapper .sheet-section-title,
  .sheet-metier .talent-wrapper .sheet-section-title {
    font-family: 'Uncial Antiqua', serif;
    font-size: 1.2em;
    text-align: center;
    background: linear-gradient(to right, #e4d8c4, #c3a97b);
    border: 2px solid #7c5e3b;
    border-radius: 6px;
    padding: 6px 12px;
    margin: 10px 0;
    color: #3a2a1a;
    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.4);
  }
  
  .sheet-weapon-columns {
    display: flex;
    gap: 1em;
    justify-content: space-between;
    margin-top: 1em;
  }
  
  .sheet-weapon-card {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #f6e8d2;
    border: 1px solid #7c5e3b;
    padding: 10px;
    border-radius: 5px;
    font-family: 'Uncial Antiqua', serif;
  }
  
  .sheet-weapon-card input,
  .sheet-weapon-card select {
    width: 100%;
    text-align: center;
    margin: 4px 0;
    padding: 4px;
    background: #fffaf0;
    border: 1px solid #bca37f;
    font-size: 0.9em;
  }
  
  input[type="checkbox"].sheet-toggle-checkbox {
    display: none;
  }
  
  .sheet-box-wrapper {
    border: 2px solid #a47149;
    background: #fdf7ef;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 8px;
    box-shadow: 1px 1px 4px #00000022;
  }
  .sheet-competence-group {
    flex: 1 1 50%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #fdf6e3;
    border: 2px solid #d9c9a0;
    border-radius: 10px;
    padding: 6px 10px;
    margin: 5px 0;
    gap: 5px;
    box-shadow: 1px 1px 3px rgba(0,0,0,0.1);
  }
  
  .sheet-competence-group input[type="text"] {
    flex: 2 1 60%;
    padding: 5px;
    font-family: 'Georgia', serif;
    background: #fefaf1;
    border: 1px solid #cdb98b;
    border-radius: 6px;
  }
  
  .sheet-competence-group input[type="number"] {
    flex: 1 1 20%;
    padding: 5px;
    text-align: center;
    background: #fefaf1;
    border: 1px solid #cdb98b;
    border-radius: 6px;
  }
  
  .sheet-competence-group input[type="checkbox"] {
    flex: 0 0 auto;
    width: 20px;
    height: 20px;
    margin-left: 8px;
    accent-color: #a47149; /* plus stylé */
    border-radius: 4px;
  }
  
  .sheet-double-competence {
    display: flex;
    flex-wrap: nowrap; /* important pour forcer la même ligne */
    gap: 10px;
    width: 100%;
  }
  
  .sheet-double-competence .sheet-competence-group {
    flex: 1 1 0;
    max-width: 50%; /* ou calc(50% - 5px) */
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .sheet-triple-column {
    display: flex;
    justify-content: space-between;
    align-items: center; /* centre verticalement */
    gap: 10px;
  }
  
  .sheet-col {
    flex: 1 1 33%;
    display: flex;
    flex-direction: column;
    align-items: center; /* centre horizontalement */
    justify-content: center;
    padding: 10px;
  }
  .sheet-detail-row {
    width: 100%;
  }
  .sheet-summary-inner {
    width: 100%;
    display: flex;
    justify-content: center;
  }
  .sheet-effet-zone {
    width: 100%;
    margin-top: 6px;
    resize: vertical;
  }
  
  
  .sheet-profils input[type="text"],
  .sheet-profils input[type="number"],
  .sheet-profils select,
  .sheet-profils button[type="roll"],
  .sheet-profils button[type="action"] {
    text-align: center;
  }
  
  /* Exception pour textarea : ne surtout pas centrer le texte */
  .sheet-profils textarea {
    text-align: left;
  }
  
  .sheet-combat input[type="text"],
  .sheet-combat input[type="number"],
  .sheet-combat select,
  .sheet-combat button[type="roll"],
  .sheet-combat button[type="action"] {
    text-align: center;
  }
  
  /* Exception pour textarea : ne pas centrer */
  .sheet-combat textarea {
    text-align: left;
  }
  
  .sheet-talent input[type="text"],
  .sheet-talent input[type="number"],
  .sheet-talent select,
  .sheet-talent button[type="roll"],
  .sheet-talent button[type="action"] {
    text-align: center;
  }
  
  /* Exception pour les zones de texte (textarea) : on reste aligné à gauche pour l'effet */
  .sheet-talent textarea {
    text-align: left;
  }
  
  .sheet-sort input[type="text"],
  .sheet-sort input[type="number"],
  .sheet-sort select,
  .sheet-sort button[type="roll"],
  .sheet-sort button[type="action"] {
    text-align: center;
  }
  
  /* Exception pour les zones de texte (textarea) : alignement à gauche pour la lisibilité */
  .sheet-sort textarea {
    text-align: left;
  }
  
  .sheet-infos input[type="text"],
  .sheet-infos input[type="number"],
  .sheet-infos select,
  .sheet-infos button[type="roll"],
  .sheet-infos button[type="action"] {
    text-align: center;
  }
  
  /* Exception pour les zones de texte longues */
  .sheet-infos textarea {
    text-align: left;
  }
  
  .sheet-entrainement input[type="text"],
  .sheet-entrainement input[type="number"],
  .sheet-entrainement select,
  .sheet-entrainement button[type="roll"],
  .sheet-entrainement button[type="action"] {
    text-align: center;
  }
  
  /* Exception pour les zones de texte longues */
  .sheet-entrainement textarea {
    text-align: left;
  }
  
  .sheet-metier input[type="text"],
  .sheet-metier input[type="number"],
  .sheet-metier select,
  .sheet-metier button[type="roll"],
  .sheet-metier button[type="action"] {
    text-align: center;
  }
  
  /* Exception pour les longues zones de texte */
  .sheet-metier textarea {
    text-align: left;
  }
  
  .sheet-corruption input[type="text"],
  .sheet-corruption input[type="number"],
  .sheet-corruption select,
  .sheet-corruption button[type="roll"],
  .sheet-corruption button[type="action"] {
    text-align: center;
  }
  
  /* Exceptions pour les textes longs */
  .sheet-corruption textarea {
    text-align: left;
  }
  
  .sheet-tab-content.sheet-infos label {
    color: #000000;
    font-weight: bold; /* Optionnel mais recommandé pour plus de lisibilité */
  }
  
  .sheet-tab-content.sheet-metier label {
    color: #000000;
    font-weight: bold; /* pour que ce soit plus lisible */
  }
  
  /* Applique un texte noir partout sur la feuille */
  .sheet-tab-content,
  .sheet-tab-content * {
    color: #000000;
  }
  
  /* Exceptions éventuelles : empêcher de recolorer les inputs écrits par les utilisateurs */
  input[type="text"],
  input[type="number"],
  textarea,
  select {
    color: #000000; /* Texte intérieur noir aussi */
  }
  
  /* ==== ONGLET PROFILS : VERSION SOBRE FANTASY ==== */
  
  /* Cadre général */
  .sheet-tab-content.sheet-profils .sheet-box-wrapper {
    background: #fbf7f2;
    border: 2px solid #aa8654;
    border-radius: 10px;
    padding: 15px;
    box-shadow: inset 0 0 6px rgba(100, 70, 40, 0.15);
  }
  
  /* TITRES des sections */
  .sheet-tab-content.sheet-profils .sheet-section-title {
    font-family: 'Georgia', serif;
    font-size: 1.3em;
    background: #a47149; /* brun foncé */
    color: #fff8f0;
    text-align: center;
    border: 2px solid #7c5636;
    border-radius: 8px;
    padding: 8px 12px;
    margin-bottom: 15px;
    text-shadow: 1px 1px 2px #00000088;
  }
  
  /* Tables générales */
  .sheet-tab-content.sheet-profils table {
    width: 100%;
    background: #fbf7f2;
    border-collapse: collapse;
    margin-bottom: 1.5em;
    border: 1px solid #b9986b;
  }
  
  /* ENTÊTE des tables */
  .sheet-tab-content.sheet-profils th {
    background: #8b5c2c; /* brun un peu plus foncé */
    color: #fff;
    font-weight: bold;
    padding: 6px 10px;
    border: 1px solid #7a4b22;
  }
  
  /* Cellules normales */
  .sheet-tab-content.sheet-profils td {
    background: #fefaf1;
    padding: 5px;
    border: 1px solid #cdb98b;
  }
  
  /* Inputs et selects */
  .sheet-tab-content.sheet-profils input[type="text"],
  .sheet-tab-content.sheet-profils input[type="number"],
  .sheet-tab-content.sheet-profils select {
    background: #ffffff;
    border: 1px solid #bca37f;
    padding: 6px;
    font-family: 'Georgia', serif;
    font-size: 0.95em;
    width: 100%;
    text-align: center;
    border-radius: 5px;
  }
  
  /* Boutons de jet */
  .sheet-tab-content.sheet-profils button[type="roll"] {
    background: #8b5c2c;
    color: #ffffff;
    font-weight: bold;
    border: none;
    border-radius: 6px;
    padding: 5px 10px;
    cursor: pointer;
    box-shadow: 1px 1px 3px rgba(0,0,0,0.3);
  }
  
  .sheet-tab-content.sheet-profils button[type="roll"]:hover {
    background: #a47149;
  }
  
  /* Textareas */
  .sheet-tab-content.sheet-profils textarea {
    width: 100%;
    background: #ffffff;
    border: 1px solid #bca37f;
    padding: 8px;
    font-family: 'Georgia', serif;
    font-size: 0.95em;
    resize: vertical;
    border-radius: 6px;
  }
  
  /* Partie Compétences */
  .sheet-profils .sheet-competence-wrapper {
    background: #fbf7f2;
    border: 2px solid #d2b48c;
    border-radius: 10px;
    padding: 12px;
  }
  
  /* Titres compétences */
  .sheet-profils .sheet-competence-header,
  .sheet-profils .sheet-competence-subheader {
    font-family: 'Georgia', serif;
    font-size: 1.2em;
    background: #8b5c2c;
    color: #ffffff;
    text-align: center;
    padding: 8px;
    border-radius: 6px;
    margin-bottom: 10px;
  }
  
  /* Compétence - petit encadré */
  .sheet-profils .sheet-competence-group {
    background: #fefaf1;
    border: 1px solid #cdb98b;
    border-radius: 6px;
    padding: 6px;
    margin-bottom: 8px;
  }
  
  /* Inputs dans compétences */
  .sheet-profils .sheet-competence-group input[type="text"],
  .sheet-profils .sheet-competence-group input[type="number"] {
    background: #ffffff;
    border: 1px solid #bca37f;
    padding: 5px;
  }
  
  /* Checkboxes */
  .sheet-profils .sheet-competence-group input[type="checkbox"] {
    width: 20px;
    height: 20px;
    margin-left: 10px;
    accent-color: #a47149;
  }
  
  
  /* STYLE GLOBAL des RollTemplates */
  .sheet-rolltemplate-default,
  .sheet-rolltemplate-capacite,
  .sheet-rolltemplate-sort,
  .sheet-rolltemplate-skill,
  .sheet-rolltemplate-skillspecial {
    background: #3a2415; /* Brun foncé pour un style médiéval */
    border: 2px solid #c19a6b; /* Bordure bronze clair */
    border-radius: 10px;
    padding: 12px;
    font-family: 'Georgia', serif;
    color: #f5f5f5; /* Texte clair */
    text-align: center;
    box-shadow: 0 0 10px #00000066;
  }
  
  /* TITRES des jets */
  .sheet-rolltemplate-default .sheet-roll-title,
  .sheet-rolltemplate-capacite .sheet-roll-title,
  .sheet-rolltemplate-sort .sheet-roll-title,
  .sheet-rolltemplate-skill .sheet-roll-title,
  .sheet-rolltemplate-skillspecial .sheet-roll-title {
    font-size: 1.6em;
    font-weight: bold;
    margin-bottom: 10px;
    color: #ffffff;
  }
  
  /* Valeurs du jet */
  .sheet-rolltemplate-default .sheet-roll-jet,
  .sheet-rolltemplate-capacite .sheet-roll-jet,
  .sheet-rolltemplate-sort .sheet-roll-jet,
  .sheet-rolltemplate-sort .sheet-roll-nature,
  .sheet-rolltemplate-sort .sheet-roll-effet-actif {
    display: block;
    font-size: 1em;
    margin: 4px 0;
    color: #ffffff;
  }
  
  
  /* Infos secondaires (seuil, nature...) */
  .sheet-rolltemplate-default .sheet-roll-seuil,
  .sheet-rolltemplate-macro .sheet-roll-seuil,
  .sheet-rolltemplate-capacite .sheet-roll-seuil,
  .sheet-rolltemplate-sort .sheet-roll-seuil,
  .sheet-rolltemplate-skill .sheet-roll-seuil,
  .sheet-rolltemplate-skillspecial .sheet-roll-seuil,
  .sheet-rolltemplate-sort .sheet-roll-nature,
  .sheet-rolltemplate-skill .sheet-roll-nature,
  .sheet-rolltemplate-skillspecial .sheet-roll-nature {
    font-size: 1.1em;
    font-style: italic;
    margin-top: 6px;
    color: #d2b48c;
  }
  
  /* Résultats spéciaux (Effet Actif) */
  .sheet-rolltemplate-capacite .sheet-roll-effet-actif,
  .sheet-rolltemplate-sort .sheet-roll-effet-actif,
  .sheet-rolltemplate-skill .sheet-roll-effet-actif,
  .sheet-rolltemplate-skillspecial .sheet-roll-effet-actif {
    background: #5c3b24;
    color: #f9e4cc;
    padding: 8px;
    margin-top: 8px;
    border-radius: 8px;
    font-size: 1em;
  }
  
  
  
  
  /* INFOS Type et Nature */
  .sheet-rolltemplate-capacite .sheet-roll-info,
  .sheet-rolltemplate-sort .sheet-roll-info,
  .sheet-rolltemplate-skill .sheet-roll-info,
  .sheet-rolltemplate-skillspecial .sheet-roll-info {
    font-size: 1em;
    margin-bottom: 10px;
    color: #d2b48c;
  }
  
  /* Résultat principal du JET */
  .sheet-rolltemplate-capacite .sheet-roll-mainjet,
  .sheet-rolltemplate-sort .sheet-roll-mainjet,
  .sheet-rolltemplate-skill .sheet-roll-mainjet,
  .sheet-rolltemplate-skillspecial .sheet-roll-mainjet {
    background: #752a8a; /* Violet fantasy */
    color: white;
    font-size: 2.2em;
    font-weight: bold;
    padding: 8px 16px;
    margin: 8px 0;
    border-radius: 8px;
    display: inline-block;
  }
  
  /* Effet Actif */
  .sheet-rolltemplate-capacite .sheet-roll-effet-actif,
  .sheet-rolltemplate-sort .sheet-roll-effet-actif,
  .sheet-rolltemplate-skill .sheet-roll-effet-actif,
  .sheet-rolltemplate-skillspecial .sheet-roll-effet-actif {
    background: #5c3b24;
    color: #f9e4cc;
    padding: 8px;
    margin-top: 10px;
    border-radius: 6px;
    font-size: 1em;
  }
  
  .sheet-rolltemplate-entrainement {
    background: #2e1d12;
    border: 2px solid #d2a679;
    border-radius: 10px;
    padding: 10px;
    font-family: 'Georgia', serif;
    text-align: center;
    color: #f0e0d6;
    box-shadow: 0 0 8px #00000066;
  }
  .sheet-rolltemplate-entrainement .sheet-roll-title {
    font-size: 1.4em;
    margin-bottom: 8px;
    color: #ffd7a0;
  }
  .sheet-rolltemplate-entrainement .sheet-roll-jet {
    font-size: 1.6em;
    font-weight: bold;
    margin-top: 5px;
  }
  
  
  
  .sheet-training-inline {
    display: flex;
    flex-direction: row; /* très important : horizontal */
    align-items: center;
    justify-content: center;
    gap: 5px;
  }
  
  .sheet-training-inline input,
  .sheet-training-inline select {
    width: 40px;
    min-width: 40px;
    max-width: 40px;
    text-align: center;
    padding: 3px 5px;
    font-size: 0.9em;
  }
  
  .sheet-training-inline button[type="roll"] {
    padding: 4px 6px;
    font-size: 1em;
    border-radius: 6px;
    background: #8b5c2c;
    color: white;
    border: none;
    cursor: pointer;
  }
  
  .sheet-training-inline button[type="roll"]:hover {
    background: #a47149;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* Bloc visuel propre pour chaque ligne du tableau de bord */
  .sheet-dashboard-block {
    border: 2px solid #bbb;
    border-radius: 8px;
    background: #f7f4ed;
    margin-bottom: 10px;
    padding: 8px;
    box-shadow: 0 2px 5px #00000022;
  }
  
  /* Titre input + flèche dépliable */
  .sheet-dashboard-subtitle {
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    font-weight: bold;
    font-size: 1.1em;
    color: #3a2415;
    padding: 5px 8px;
  }
  
  /* La flèche ▶ */
  .sheet-dashboard-subtitle .chevron {
    font-size: 1.2em;
    margin-right: 8px;
  }
  
  /* Champ du titre de section */
  .sheet-subtitle-wrapper input[type="text"] {
    width: 100%;
    border: 1px solid #aaa;
    border-radius: 4px;
    padding: 4px 6px;
    background: #fffaf2;
    font-size: 1em;
    color: #333;
  }
  
  /* Zone de texte de description */
  .sheet-dashboard-text {
    width: 100%;
    margin-top: 8px;
    padding: 6px;
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 6px;
    min-height: 80px;
    font-size: 0.95em;
    color: #333;
    resize: vertical;
  }
  
  .sheet-effetactif-block {
    margin-top: 5px;
    background: #f2f2f2;
    border: 1px solid #bbb;
    border-radius: 6px;
    padding: 5px;
  }
  
  .sheet-effetactif-block summary {
    font-weight: bold;
    text-align: center;
    font-size: 1em;
    cursor: pointer;
    padding: 4px;
    color: #333;
  }
  
  .sheet-effetactif-block textarea {
    width: 100%;
    margin-top: 5px;
    border: 1px solid #aaa;
    border-radius: 4px;
    padding: 6px;
    resize: vertical;
    font-size: 0.9em;
    background: #fff;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  .sheet-effetactif-block {
    margin-top: 5px;
    background: #f2f2f2;
    border: 1px solid #bbb;
    border-radius: 6px;
    padding: 5px;
  }
  
  .sheet-effetactif-block summary {
    font-weight: bold;
    text-align: center;
    font-size: 1em;
    cursor: pointer;
    padding: 4px;
    color: #333;
  }
  
  .sheet-effetactif-block textarea {
    width: 100%;
    margin-top: 5px;
    border: 1px solid #aaa;
    border-radius: 4px;
    padding: 6px;
    resize: vertical;
    font-size: 0.9em;
    background: #fff;
  }
  
  
  
  .sheet-inventory-block {
    border: 1px solid #bbb;
    border-radius: 6px;
    background: #fcfcfa;
    margin-bottom: 10px;
  }
  
  .sheet-inventory-summary {
    font-weight: bold;
    background: #eee8dc;
    padding: 6px;
    cursor: pointer;
    border-bottom: 1px solid #ccc;
    border-radius: 6px 6px 0 0;
  }
  
  .sheet-inventory-summary input {
    border: none;
    background: transparent;
    font-size: 1em;
    width: 100%;
  }
  
  .sheet-inventory-content {
    padding: 8px;
  }
  
  
  
  
  
  
  
  
  
  
  /* Style général du tableau */
  .sheet-blessures-grid {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
  }
  
  .sheet-blessures-grid th {
    background-color: #642e2e;
    color: white;
    padding: 6px;
    text-align: center;
  }
  
  .sheet-blessures-grid td {
    padding: 8px;
    text-align: center;
    background-color: #f9f4ef;
    border: 1px solid #ccc;
  }
  
  /* ✅ Style de chaque label (groupe case + couleur) */
  .color-toggle {
    display: inline-block;
    width: 22px;
    height: 22px;
    margin: 2px;
    border-radius: 4px;
    border: 1px solid #888;
    background-color: transparent;
    cursor: pointer;
    position: relative;
  }
  
  /* Cache la vraie case à cocher */
  .color-toggle input[type="checkbox"] {
    opacity: 0;
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    margin: 0;
    cursor: pointer;
  }
  
  /* ✅ Quand coché, applique la couleur selon la classe */
  .color-toggle.jaune input[type="checkbox"]:checked + span,
  .color-toggle.jaune:has(input:checked) {
    background-color: #fff38a;
    border-color: #c2a400;
  }
  
  .color-toggle.orange input[type="checkbox"]:checked + span,
  .color-toggle.orange:has(input:checked) {
    background-color: #ffc266;
    border-color: #d98c00;
  }
  
  .color-toggle.rouge input[type="checkbox"]:checked + span,
  .color-toggle.rouge:has(input:checked) {
    background-color: #ff9999;
    border-color: #b30000;
  }
  
  
  
  
  
  
  
  
  
  /* === Encadrement général des blocs === */
  .sheet-box-wrapper {
    border: 1px solid #bbb;
    padding: 10px;
    margin-bottom: 12px;
    border-radius: 6px;
    background-color: #f9f9f9;
  }
  
  /* === Titre de section dépliable === */
  .sheet-section-title {
    font-size: 16px;
    font-weight: bold;
    color: black;
    padding: 4px 8px;
    background-color: #eaeaea;
    border-radius: 4px;
    cursor: pointer;
    margin-bottom: 8px;
  }
  
  /* === Tableaux généraux (missions & métier) === */
  .sheet-metier-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 5px;
  }
  
  .sheet-metier-table td {
    padding: 5px;
    border: 1px solid #ccc;
    vertical-align: top;
  }
  
  /* === Inputs et textareas === */
  .sheet-metier-table input[type="text"],
  .sheet-metier-table textarea {
    width: 100%;
    box-sizing: border-box;
    padding: 4px;
    font-size: 13px;
    border: 1px solid #aaa;
    border-radius: 3px;
    resize: vertical;
  }
  
  
  
  /* Style fantasy doux pour chaque bloc */
  .sheet-inventory-block {
    background: linear-gradient(135deg, #fdf8ef, #f0e5c3);
    border: 2px solid #a07d52;
    border-radius: 10px;
    box-shadow: inset 0 0 0.5em #d8c08f, 0 0 8px rgba(160, 125, 82, 0.4);
    padding: 0.8em;
    margin-bottom: 1em;
    transition: all 0.4s ease-in-out;
    position: relative;
    z-index: 0;
  }
  
  /* Animation d’ouverture douce */
  .sheet-inventory-block[open] {
    background: linear-gradient(135deg, #fef9e6, #f3dfb5);
    box-shadow: inset 0 0 1em #e2cfa1, 0 0 10px rgba(160, 125, 82, 0.6);
    border-color: #c59b66;
  }
  
  /* Input & textarea stylisés à l’intérieur */
  .sheet-inventory-block input[type="text"],
  .sheet-inventory-block textarea {
    width: 100%;
    font-size: 0.95em;
    padding: 6px 8px;
    border: 1px solid #c4b49b;
    border-radius: 6px;
    background-color: #fefbf4;
    box-shadow: inset 0 1px 3px rgba(160, 125, 82, 0.1);
    margin-top: 6px;
    margin-bottom: 6px;
    box-sizing: border-box;
    transition: border 0.3s, box-shadow 0.3s;
  }
  
  /* Focus doux et lumineux */
  .sheet-inventory-block input[type="text"]:focus,
  .sheet-inventory-block textarea:focus {
    border-color: #a07d52;
    box-shadow: 0 0 6px #a07d52;
    outline: none;
  }
  
  
  /* Brillance subtile au survol */
  .sheet-inventory-block:hover {
    box-shadow: 0 0 10px rgba(255, 223, 173, 0.6),
                inset 0 0 5px rgba(255, 255, 200, 0.4);
    transform: scale(1.01);
    transition: box-shadow 0.4s ease, transform 0.3s ease;
  }
  
  /* Bloc talent hors combat avec effet de givre */
  .sheet-talent-block.talent-givre {
    border: 2px solid #a2e0ff;
    border-radius: 8px;
    padding: 0.6em;
    background: rgba(240, 248, 255, 0.1);
    box-shadow: 0 0 8px rgba(173, 216, 230, 0.6), 0 0 16px rgba(173, 216, 230, 0.3);
    animation: auraGivre 4s ease-in-out infinite;
    transition: all 0.3s ease;
  }
  
  @keyframes auraGivre {
    0% {
      box-shadow: 0 0 6px rgba(173, 216, 230, 0.4), 0 0 12px rgba(173, 216, 230, 0.2);
    }
    50% {
      box-shadow: 0 0 12px rgba(173, 216, 230, 0.7), 0 0 24px rgba(173, 216, 230, 0.4);
    }
    100% {
      box-shadow: 0 0 6px rgba(173, 216, 230, 0.4), 0 0 12px rgba(173, 216, 230, 0.2);
    }
  }
  
  
  .sheet-rest-init-table td {
    text-align: center;
    vertical-align: middle;
  }
  .sheet-langues-wrapper {
    border: 2px solid #c0a672;
    background: linear-gradient(145deg, #faf7ef, #f3ece0);
    border-radius: 8px;
    padding: 0.7em;
    margin-bottom: 1em;
    box-shadow: 0 0 6px rgba(192, 166, 114, 0.3);
  }
  
  .sheet-langue-table {
    width: 100%;
    table-layout: fixed;
    border-collapse: separate;
    border-spacing: 0.5em;
  }
  
  .sheet-langue-table td {
    padding: 0.2em;
  }
  
  .sheet-langue-table input[type="text"] {
    width: 100%;
    padding: 4px 6px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 0.9em;
    box-sizing: border-box;
  }
  .sheet-capacite-summary {
    position: relative;
    padding-left: 1.5em;
    display: flex;
    align-items: center;
    gap: 0.5em;
    cursor: pointer;
  }
  
  .sheet-capacite-summary::before {
    content: "▶";
    font-size: 1em;
    position: absolute;
    left: 0;
    transition: transform 0.3s ease;
    color: #7a5e3a;
  }
  
  /* Quand le bloc est déplié (details ouvert) → flèche tournée */
  .sheet-capacite-block[open] > .sheet-capacite-summary::before {
    transform: rotate(90deg);
  }
  
  /* Uniformise tous les champs nom */
  .sheet-capacite-summary input[type="text"] {
    background: transparent;
    border: none;
    font-weight: bold;
    font-size: 1em;
    color: #3a2415;
    width: 100%;
  }
  
  .sheet-effetactif-title {
    position: relative;
    padding-left: 1.5em;
    font-weight: bold;
    font-size: 1em;
    cursor: pointer;
    color: #3a2415;
  }
  
  /* La flèche animée */
  .sheet-effetactif-title::before {
    content: "▶";
    font-size: 1em;
    position: absolute;
    left: 0;
    transition: transform 0.3s ease;
    color: #5c3b24;
  }
  
  /* Quand ouvert, on fait pivoter la flèche */
  .sheet-effetactif-block[open] > .sheet-effetactif-title::before {
    transform: rotate(90deg);
  }
  /*  Mise en valeur des champs “Mod” de Résistance Mentale et Réactivité */
  input[name="attr_rm_final"],
  input[name="attr_rea_final"] {
    background: linear-gradient(to right, #f3e8ff, #e3d4f0);
    border: 2px solid #a07cd1;
    color: #3a245e;
    font-weight: bold;
    box-shadow: inset 0 0 6px rgba(160, 124, 209, 0.4);
  }
  textarea {
    resize: vertical;     /* uniquement vertical */
    overflow-x: hidden;   /* ne pas scroller horizontalement */
    max-width: 100%;      /* jamais plus large que le conteneur */
  }
  
  .sheet-sort-table textarea,
  .sheet-capacite-block textarea,
  .sheet-effetactif-block textarea,
  .sheet-inventory-row textarea {
    resize: vertical;
    overflow-x: hidden;
    max-width: 100%;
    box-sizing: border-box;
  }
  .sheet-pv-table button[type="action"] {
    background-color: #3b2e19; /* fond brun magique */
    color: #fdd835; /* jaune doré */
    border: 2px solid #fdd835;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 0 6px rgba(253, 216, 53, 0.6);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    text-align: center;
    padding: 0;
  }
  
  .sheet-pv-table button[type="action"]:hover {
    transform: scale(1.15);
    box-shadow: 0 0 10px rgba(253, 216, 53, 0.9);
    background-color: #5b4428;
  }
  
  
  
  .sheet-rolltemplate-gain .template-wrapper {
    border: 2px solid #d2a862;
    background-color: #1a1a1a;
    font-family: 'Georgia', serif;
    color: white;
    padding: 4px;
    border-radius: 8px;
    box-shadow: 0 0 6px rgba(210, 168, 98, 0.5);
  }
  
  .sheet-rolltemplate-gain .template-header {
    background-color: #6a1b9a; /* Violet intense */
    color: white;
    font-weight: bold;
    text-align: left;
    padding: 5px 10px;
    font-size: 16px;
    border-radius: 4px 4px 0 0;
  }
  
  .sheet-rolltemplate-gain .template-body {
    padding: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .sheet-rolltemplate-gain .template-label {
    font-weight: bold;
    font-size: 14px;
    margin-right: 10px;
    text-align: left;
  }
  
  .sheet-rolltemplate-gain .template-result {
    background-color: #6a1b9a;
    padding: 4px 12px;
    border-radius: 4px;
    font-size: 18px;
    font-weight: bold;
    color: white;
    text-align: center;
  }
  
  .sheet-rolltemplate-gain {
    border: 2px solid #d2a862; /* Doré */
    background-color: #2c1b11; /* Brun profond */
    border-radius: 10px;
    font-family: 'Georgia', serif;
    padding: 10px;
    color: #fff;
    box-shadow: 0 0 8px rgba(210, 168, 98, 0.4);
  }
  
  .sheet-rolltemplate-gain .title {
    font-size: 1.4em;
    text-align: center;
    font-weight: bold;
    margin-bottom: 5px;
    color: #f4f4f4;
    padding-bottom: 4px;
    border-bottom: 1px solid #a67c52;
  }
  
  .sheet-rolltemplate-gain .row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 8px 0;
    font-size: 1em;
  }
  
  .sheet-rolltemplate-gain .label {
    font-weight: bold;
  }
  
  .sheet-rolltemplate-gain .value {
    background-color: #6a1b9a; /* Violet foncé */
    color: #fff;
    padding: 4px 10px;
    border-radius: 5px;
    font-weight: bold;
    font-size: 1.1em;
  }
  
  .sheet-rolltemplate-gain .result {
    text-align: center;
    margin-top: 10px;
    background-color: #6a1b9a;
    color: #fff;
    font-size: 1.6em;
    font-weight: bold;
    padding: 10px;
    border-radius: 6px;
    box-shadow: 0 0 6px rgba(138, 43, 226, 0.5);
  }
  
  
  
  
  
  
  
  
  
  
  .sheet-mission-block {
    background-color: #fdf9f1;
    border: 2px solid #e0cfa2;
    border-radius: 12px;
    padding: 12px;
    margin-bottom: 12px;
    color: #4a3f35;
    box-shadow: 2px 2px 6px rgba(180, 150, 100, 0.2);
    font-family: 'Georgia', serif;
  }
  
  .sheet-mission-block label {
    display: block;
    font-weight: bold;
    font-size: 0.95em;
    color: #7b653e;
    margin-bottom: 2px;
    margin-top: 8px;
  }
  
  .sheet-mission-block input[type="text"],
  .sheet-mission-block textarea {
    width: 100%;
    padding: 6px;
    margin-top: 2px;
    border-radius: 8px;
    border: 1px solid #d8c7a1;
    background-color: #fffdf8;
    color: #3d2f20;
    font-family: 'Georgia', serif;
    box-shadow: inset 0 0 4px rgba(200, 180, 140, 0.2);
  }
  
  .sheet-mission-block textarea {
    resize: vertical;
    height: 60px;
  }
  
  .sheet-mission-info {
    display: flex;
    gap: 12px;
    justify-content: space-between;
    margin-top: 10px;
  }
  
  .sheet-mission-info div {
    flex: 1;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* Enveloppe des sections infos */
  .sheet-subdetails {
    background-color: #fdf9f1;
    border: 2px solid #d2a862;
    border-radius: 10px;
    margin-bottom: 14px;
    padding: 10px 12px;
    box-shadow: 0 0 6px rgba(100, 80, 50, 0.15);
  }
  
  /* Titre de chaque bloc */
  .sheet-subdetails summary.sheet-section-title {
    font-family: Georgia, serif;
    font-size: 1.1em;
    color: #5c3f26;
    padding: 4px 0;
    cursor: pointer;
  }
  
  /* Table d'informations */
  .sheet-table-supplementaires {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
  }
  
  .sheet-table-supplementaires td {
    padding: 6px;
    vertical-align: top;
  }
  
  /* Labels */
  .sheet-table-supplementaires label {
    font-weight: bold;
    color: #7a5b35;
    font-size: 0.95em;
    font-family: Georgia, serif;
  }
  
  /* Inputs */
  .sheet-table-supplementaires input[type="text"] {
    width: 95%;
    padding: 4px;
    background-color: #fffdf8;
    color: #3e3123;
    border: 1px solid #d2a862;
    border-radius: 5px;
    font-family: Georgia, serif;
  }
  
  /* Textarea générale */
  textarea.expandable,
  .sheet-zone-histoire textarea,
  .sheet-zone-notes textarea {
    width: 100%;
    height: 70px;
    resize: vertical;
    padding: 6px;
    border: 1px solid #d2a862;
    background-color: #fffdf9;
    color: #3f3222;
    font-family: Georgia, serif;
    border-radius: 6px;
    box-shadow: inset 0 0 3px rgba(200, 180, 120, 0.2);
    margin-top: 6px;
  }
  .sheet-subdetails[open] {
    animation: fadeInScale 0.3s ease-out;
  }
  
  @keyframes fadeInScale {
    from { opacity: 0; transform: scale(0.97); }
    to   { opacity: 1; transform: scale(1); }
  }
  
  .sheet-connaissances-group {
    display: flex;
    gap: 12px;
    justify-content: space-between;
    margin-top: 12px;
    flex-wrap: wrap;
  }
  
  .sheet-connaissance-item {
    flex: 1;
    min-width: 250px;
    background-color: #fdf9f1;
    border: 2px solid #d2a862;
    border-radius: 10px;
    padding: 10px;
    box-shadow: 1px 1px 4px rgba(120, 100, 60, 0.2);
  }
  
  .sheet-connaissance-item label {
    font-weight: bold;
    font-size: 0.95em;
    color: #5c3f26;
    margin-bottom: 4px;
    display: block;
    font-family: Georgia, serif;
  }
  
  .sheet-connaissance-item input[type="text"],
  .sheet-connaissance-item select {
    width: 100%;
    padding: 5px;
    margin-top: 4px;
    border-radius: 6px;
    border: 1px solid #d2a862;
    background-color: #fffdf8;
    color: #3f3222;
    font-family: Georgia, serif;
  }
  .sheet-connaissance-item input[type="text"],
  .sheet-connaissance-item select {
    width: 100%;
    padding: 5px;
    margin-top: 4px;
    border-radius: 6px;
    border: 1px solid #d2a862;
    background-color: #fffdf8;
    color: #3f3222;
    font-family: Georgia, serif;
  
    /* CENTRAGE DU TEXTE */
    text-align: center;
  }
  /*  Fond général d'encadrement */
  .training-table-wrapper {
    background-color: #fdf9f1;
    border: 2px solid #d2a862;
    border-radius: 10px;
    padding: 10px;
    box-shadow: 0 0 5px rgba(90, 70, 40, 0.1);
    margin-bottom: 14px;
  }
  
  /*  Titre principal */
  .training-table thead th:first-child .sheet-section-title {
    font-family: Georgia, serif;
    font-size: 1.1em;
    color: #5c3f26;
    padding: 4px 0;
  }
  
  /* 燐 Table stylée */
  .training-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 6px;
    font-family: Georgia, serif;
  }
  
  .training-table th,
  .training-table td {
    border: 1px solid #e3d1a2;
    padding: 6px;
    text-align: center;
    background-color: #fffef9;
    color: #3d2f20;
  }
  
  .training-table th {
    background-color: #faedd5;
    color: #5a4029;
    font-weight: bold;
    font-size: 0.9em;
  }
  
  /* ✏️ Champs d'entrée */
  .training-table input[type="text"],
  .training-table input[type="number"],
  .training-table select {
    width: 95%;
    padding: 4px;
    border: 1px solid #d2a862;
    border-radius: 6px;
    background-color: #fffdf8;
    color: #3f3222;
    font-family: Georgia, serif;
    text-align: center;
  }
  
  /*  Section gain de PA et d100 */
  .sheet-training-inline {
    display: flex;
    align-items: center;
    gap: 4px;
    justify-content: center;
  }
  
  /*  Boutons de dés */
  .sheet-training-inline button[type="roll"] {
    background-color: #3b2e19;
    color: #fdd835;
    border: 1px solid #d2a862;
    border-radius: 5px;
    padding: 3px 8px;
    font-size: 1em;
    cursor: pointer;
    font-family: Georgia, serif;
    box-shadow: 0 0 3px rgba(150, 120, 60, 0.3);
  }
  
  /* 茶 Bloc effet voulu */
  .effet-td {
    background-color: #fefaf2;
    border-top: 2px solid #e3d1a2;
    padding: 6px;
  }
  
  .effet-td textarea {
    width: 100%;
    border: 1px solid #d2a862;
    border-radius: 6px;
    padding: 6px;
    background-color: #fffdf9;
    color: #3f3222;
    font-family: Georgia, serif;
    resize: vertical;
    margin-top: 4px;
  }
  
  /*  Petite animation au dépliage (si utilisé plus tard) */
  .sheet-subdetails[open] {
    animation: fadeInScale 0.3s ease-out;
  }
  
  @keyframes fadeInScale {
    from { opacity: 0; transform: scale(0.98); }
    to   { opacity: 1; transform: scale(1); }
  }
  
  
  
  
  
  
  
  
  .sheet-subdetails {
    background-color: #fdf9f1;
    border: 2px solid #d2a862;
    border-radius: 10px;
    padding: 10px;
    box-shadow: 0 0 4px rgba(90, 70, 40, 0.1);
    margin-bottom: 14px;
  }
  
  .sheet-dashboard-row {
    margin: 6px 0;
    font-family: Georgia, serif;
    font-size: 0.95em;
    color: #3e2c1a;
  }
  
  .sheet-dashboard-row label {
    font-weight: bold;
    display: inline-block;
    min-width: 150px;
  }
  
  .etat-mission,
  .priority-selector,
  .sheet-dashboard-row input[type="text"] {
    padding: 4px;
    border-radius: 6px;
    border: 1px solid #d2a862;
    background-color: #fffdf5;
    font-family: Georgia, serif;
    color: #3b2d20;
    width: 60%;
    margin-top: 4px;
  }
  
  .sheet-dashboard-text {
    width: 100%;
    height: 80px;
    padding: 6px;
    border: 1px solid #d2a862;
    border-radius: 6px;
    background-color: #fffdf9;
    color: #3f3222;
    font-family: Georgia, serif;
    resize: vertical;
    margin-top: 6px;
  }
  
  .checklist input[type="checkbox"] {
    margin-right: 6px;
  }
  /* ========= ENCADREMENT DES BLOCS ========= */
  .sheet-subdetails {
    background-color: #fdf9f1;
    border: 2px solid #d2a862;
    border-radius: 10px;
    padding: 12px;
    box-shadow: 0 0 6px rgba(90, 70, 40, 0.15);
    margin-bottom: 16px;
  }
  
  /* ========= TITRES PRINCIPAUX ========= */
  .sheet-section-title {
    font-family: Georgia, serif;
    font-size: 1.2em;
    color: #5c3f26;
    font-weight: bold;
    padding: 4px 0;
    margin-bottom: 4px;
  }
  
  /* ========= BLOCS DÉPLIABLES DE NOTES / MISSIONS ========= */
  .sheet-dashboard-block {
    background-color: #fffef9;
    border: 1px solid #d2a862;
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 10px;
    box-shadow: 1px 1px 4px rgba(150, 120, 70, 0.15);
    transition: all 0.3s ease-in-out;
  }
  
  /* Animation à l'ouverture */
  .sheet-dashboard-block[open] {
    animation: fadeInScale 0.3s ease-out;
  }
  
  @keyframes fadeInScale {
    from { opacity: 0; transform: scale(0.98); }
    to   { opacity: 1; transform: scale(1); }
  }
  
  /* ========= SOUS-TITRES INPUT (Résumé plié) ========= */
  .sheet-dashboard-subtitle {
    cursor: pointer;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
  }
  
  .sheet-subtitle-wrapper {
    display: flex;
    align-items: center;
    width: 100%;
    gap: 8px;
  }
  
  .sheet-subtitle-wrapper input[type="text"] {
    width: 100%;
    font-family: Georgia, serif;
    font-size: 1em;
    padding: 4px 8px;
    background-color: #fffdf6;
    border: 1px solid #d2a862;
    border-radius: 6px;
    color: #3f3222;
  }
  
  /* ========= LIGNES INTERNES ========= */
  .sheet-dashboard-row {
    margin: 8px 0;
    font-family: Georgia, serif;
    font-size: 0.95em;
    color: #3e2c1a;
  }
  
  .sheet-dashboard-row label {
    font-weight: bold;
    display: inline-block;
    min-width: 180px;
    margin-bottom: 4px;
  }
  
  .sheet-dashboard-row input[type="text"],
  .sheet-dashboard-row select {
    padding: 5px;
    border-radius: 6px;
    border: 1px solid #d2a862;
    background-color: #fffdf8;
    color: #3b2f20;
    width: 60%;
    font-family: Georgia, serif;
  }
  
  /* ========= ZONES DE TEXTE ========= */
  .sheet-dashboard-text {
    width: 100%;
    height: 80px;
    padding: 6px;
    border: 1px solid #d2a862;
    border-radius: 6px;
    background-color: #fffdf8;
    color: #3f3222;
    font-family: Georgia, serif;
    resize: vertical;
    box-shadow: inset 0 0 3px rgba(200, 180, 120, 0.2);
  }
  
  /* ========= CHECKLIST ========= */
  .checklist {
    font-family: Georgia, serif;
    font-size: 0.95em;
    color: #3c2e1c;
    margin-top: 6px;
  }
  
  .checklist input[type="checkbox"] {
    margin-right: 6px;
  }
  
  /* ========= SELECTS SPÉCIFIQUES ========= */
  .etat-mission,
  .priority-selector {
    padding: 4px;
    border-radius: 6px;
    border: 1px solid #d2a862;
    background-color: #fffdf5;
    font-family: Georgia, serif;
    color: #3b2d20;
  }
  /* ✅ Grille en deux colonnes */
  .sheet-passif-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 12px;
    margin-top: 8px;
  }
  
  /* ✅ Bloc passif style fiche */
  .sheet-talent-block {
    background-color: #fffdf9;
    border: 1px solid #d2a862;
    border-radius: 8px;
    padding: 8px;
    box-shadow: 0 0 4px rgba(90, 70, 40, 0.1);
    transition: all 0.3s ease-in-out;
  }
  
  .sheet-talent-summary input[type="text"] {
    width: 100%;
    font-family: Georgia, serif;
    font-size: 1em;
    background-color: #fefaf3;
    border: 1px solid #d2a862;
    border-radius: 6px;
    padding: 4px;
    color: #3e2d1c;
  }
  
  .sheet-talent-content textarea,
  .sheet-talent-content input[type="text"] {
    width: 100%;
    margin-top: 6px;
    font-family: Georgia, serif;
    background-color: #fffdf8;
    border: 1px solid #d2a862;
    border-radius: 6px;
    padding: 6px;
    resize: vertical;
    color: #3c2d20;
  }
  
  /* ✅ Bloc exploits stylé */
  .sheet-dashboard-block {
    margin-top: 10px;
    background-color: #fffdf5;
    border: 1px solid #d2a862;
    border-radius: 8px;
    padding: 10px;
    transition: all 0.3s ease;
  }
  
  .sheet-dashboard-subtitle input {
    width: 100%;
    font-family: Georgia, serif;
    background-color: #fffdf8;
    padding: 5px;
    border: 1px solid #d2a862;
    border-radius: 6px;
    font-weight: bold;
    color: #3c2d1c;
  }
  /* Style harmonisé avec les champs texte */
  .sheet-competence-group input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;
    width: 32px;
    height: 32px;
    border: 2px solid #c6a862;
    border-radius: 8px;
    background-color: #fef9ec;
    position: relative;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    box-shadow: inset 0 0 2px #00000011;
    margin: 0 4px;
    vertical-align: middle;
  }
  
  /* Style visuel activé */
  .sheet-competence-group input[type="checkbox"]:checked {
    background-color: #c6a862;
    box-shadow: inset 0 0 4px #d8b56e;
  }
  .corp-physique-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 5px;
    font-size: 13px;
  }
  
  .corp-physique-table th {
    background: #f4ecd2;
    padding: 6px;
    border: 1px solid #d2b47d;
    text-align: center;
    color: #3c2f1c;
  }
  
  .corp-physique-table td {
    border: 1px solid #e2d2a2;
    padding: 4px;
    background: #fffdf6;
    text-align: center;
  }
  
  .corp-physique-table input,
  .corp-physique-table select,
  .corp-physique-table textarea {
    width: 100%;
    padding: 3px;
    border-radius: 5px;
    border: 1px solid #c9b17b;
    background-color: #fffcf2;
    box-shadow: inset 0 1px 2px #00000010;
    font-family: inherit;
    font-size: 12px;
  }
  
  .short-input {
    width: 60px;
    margin: 0 auto;
  }
  
  button[type="roll"] {
    padding: 2px 6px;
    font-size: 16px;
    background-color: #e6d6a9;
    border: 1px solid #bfa76f;
    border-radius: 6px;
    transition: 0.2s ease;
  }
  
  button[type="roll"]:hover {
    background-color: #d2c38b;
    transform: scale(1.05);
  }
  
  .corp-effet-texte {
    margin-top: 5px;
    min-height: 50px;
    width: 100%;
    resize: vertical;
  }
  .sheet-double-contact {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: space-between;
  }
  
  .sheet-contact-card {
    background-color: #fdfaf5;
    border: 2px solid #e0cfa7;
    border-radius: 12px;
    padding: 0.5rem;
    width: 49%;
    transition: all 0.3s ease;
  }
  
  .sheet-contact-card:hover {
    box-shadow: 0 0 5px rgba(120, 90, 40, 0.2);
  }
  
  .sheet-contact-header input {
    font-size: 1rem;
    font-weight: bold;
    border: none;
    background-color: transparent;
    width: 100%;
    padding: 0.3rem;
    text-align: center;
    color: #4c3f2f;
  }
  
  .sheet-contact-body {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .sheet-contact-image {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  
  .sheet-contact-image input {
    width: 100%;
    font-size: 0.75rem;
    margin-bottom: 0.2rem;
  }
  
  .sheet-contact-image img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 8px;
    border: 1px solid #d4b98a;
  }
  
  .sheet-contact-infos label,
  .sheet-contact-notes label {
    font-size: 0.75rem;
    font-weight: bold;
    color: #6b533d;
    margin-top: 0.3rem;
  }
  
  .sheet-contact-infos input {
    width: 100%;
    font-size: 0.8rem;
    margin-bottom: 0.2rem;
  }
  
  .sheet-contact-notes textarea {
    width: 100%;
    min-height: 4rem;
    resize: vertical;
    font-size: 0.8rem;
    border-radius: 6px;
  }
  .sheet-contact-header {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.2rem 0.5rem;
    background-color: #f8f4ec;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  
  .sheet-contact-header:hover {
    background-color: #f1e9db;
  }
  
  .contact-chevron {
    font-size: 0.9rem;
    color: #6a5640;
    transition: transform 0.3s ease;
  }
  
  /* Quand le details est ouvert, fais tourner la flèche */
  .sheet-contact-card[open] .contact-chevron {
    transform: rotate(90deg);
  }
  
  
  .sheet-contact-img {
    width: 80px;
    height: 80px;
    background-size: cover;
    background-position: center;
    border-radius: 8px;
    border: 1px solid #ccc;
    box-shadow: 0 0 4px rgba(0,0,0,0.2);
    margin-top: 0.5rem;
  }
  
  
  div[name^="attr_contact_image"] {
    width: 100%;
    height: 200px;
    background-size: contain; /* ✅ Affiche toute l'image */
    background-repeat: no-repeat; /* ✅ Évite les répétitions */
    background-position: center;
    background-color: #fff; /* Optionnel : arrière-plan neutre */
    border-radius: 12px;
    border: 2px solid #d4c09b;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    margin-top: 0.5rem;
  }
  
  
  /* Option : effet au survol */
  div[name^="attr_contact_image"]:hover {
    transform: scale(1.02);
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  }
  
  /* Adaptation du conteneur image pour prendre tout l’espace */
  .sheet-contact-image {
    width: 100%;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === BONUS DES MODS - SECTION DÉPLIABLE === */
  .sheet-table-bonusmods {
      background: #fdf9f2;
      border: 2px solid #c3a97b;
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 16px;
      box-shadow: inset 0 0 6px rgba(195, 169, 123, 0.3);
  }
  
  /* === TABLE BONUS MODS === */
  .bonus-mods-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
  }
  
  .bonus-mods-table th,
  .bonus-mods-table td {
      border: 1px solid #c3a97b;
      padding: 8px;
      text-align: center;
      background-color: #fdf7e9;
      vertical-align: middle;
  }
  
  .bonus-mods-table th {
      background: linear-gradient(to right, #e4d8c4, #c3a97b);
      color: #3a2a1a;
      font-weight: bold;
      font-family: 'Uncial Antiqua', serif;
  }
  
  /* === LABELS ET INPUTS === */
  .bonus-label {
      font-family: 'Uncial Antiqua', serif;
      font-weight: bold;
      color: #3a2a1a;
      font-size: 0.95em;
  }
  
  .bonus-input {
      width: 80px;
      padding: 6px;
      border: 1px solid #c3a97b;
      border-radius: 4px;
      background: #fefbf4;
      text-align: center;
      font-size: 0.95em;
      color: #3a2a1a;
  }
  
  .bonus-input:focus {
      outline: none;
      border-color: #a47149;
      box-shadow: 0 0 4px rgba(164, 113, 73, 0.4);
  }
  
  /* === NOTES DÉPLIABLES === */
  .sheet-note-details {
      background: #fef9ef;
      border: 1px solid #d4c194;
      border-radius: 6px;
      padding: 8px;
      margin: 4px 0;
  }
  
  .sheet-note-details summary {
      font-family: 'Uncial Antiqua', serif;
      font-size: 0.9em;
      color: #5c3f26;
      cursor: pointer;
      padding: 4px;
      background: linear-gradient(to right, #f1e8d2, #e6d3a3);
      border-radius: 4px;
      margin-bottom: 6px;
      text-align: center;
  }
  
  .note-textarea {
      width: 100%;
      min-height: 60px;
      padding: 6px;
      border: 1px solid #d4c194;
      border-radius: 4px;
      background: #fffdf8;
      font-family: 'Georgia', serif;
      font-size: 0.9em;
      color: #3a2a1a;
      resize: vertical;
      margin-top: 6px;
  }
  
  .note-textarea::placeholder {
      color: #8b7355;
      font-style: italic;
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
      .bonus-mods-table th,
      .bonus-mods-table td {
          padding: 6px 4px;
          font-size: 0.9em;
      }
      
      .bonus-input {
          width: 60px;
      }
  }
  
  /* === ANIMATION D'OUVERTURE === */
  .sheet-note-details[open] {
      animation: fadeInScale 0.3s ease-out;
  }
  
  @keyframes fadeInScale {
      from { 
          opacity: 0; 
          transform: scale(0.98); 
      }
      to { 
          opacity: 1; 
          transform: scale(1); 
      }
  }
  /* === POINTS DE RÉACTION - CSS FINAL === */
  
  /* Container général */
  .sheet-pr-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      width: 100%;
      height: 100%;
      padding: 2px;
  }
  
  /* Container pour boutons (centrage parfait) */
  .sheet-pr-btn-container {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      padding: 3px;
  }
  
  /* Label Max */
  .sheet-pr-label {
      font-size: 11px;
      color: #666;
      font-weight: bold;
      margin-right: 4px;
  }
  
  /* Input PR Max (Y du X/Y) */
  .sheet-pr-max-input {
      width: 50px !important;
      padding: 5px;
      border: 2px solid #4CAF50;
      border-radius: 6px;
      background: #f8fff8;
      color: #2e7d32;
      font-weight: bold;
      text-align: center;
      font-size: 13px;
      transition: all 0.3s ease;
  }
  
  
  
  /* === CASE JAUNE PR MAX (CENTRÉE) === */
  .sheet-tab-content.sheet-profils input[name="attr_pr_max"],
  .sheet-pr-max-input {
    text-align: center !important;
    font-weight: bold;
    font-size: 16px;
  }
  
  
  
  
  .sheet-pr-max-input:focus {
      border-color: #66bb6a;
      outline: none;
      box-shadow: 0 0 6px rgba(76, 175, 80, 0.6);
      transform: scale(1.05);
  }
  
  /* Affichage X/Y (lecture seule) */
  .sheet-pr-display-input {
      width: 70px !important;
      padding: 6px;
      border: 2px solid #2196F3;
      border-radius: 8px;
      background: linear-gradient(145deg, #e3f2fd, #bbdefb);
      color: #0d47a1;
      font-weight: bold;
      text-align: center;
      font-size: 14px;
      cursor: default;
      box-shadow: 0 2px 5px rgba(33, 150, 243, 0.3);
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === CENTRAGE DU CONTENEUR PR MAX === */
  .sheet-tab-content.sheet-profils .sheet-pr-container {
      display: flex;
      align-items: center;
      justify-content: center; /* ✅ CENTRAGE HORIZONTAL */
      width: 100%;
      height: 100%;
  }
  
  /* Supprimer le margin du label si présent */
  .sheet-tab-content.sheet-profils .sheet-pr-container .sheet-pr-label {
      margin-right: 0 !important;
      display: none; /* ✅ Cache le label "Max" s'il existe */
  }
  
  /* Input PR Max centré dans son conteneur */
  .sheet-tab-content.sheet-profils .sheet-pr-container .sheet-pr-max-input {
      margin: 0 auto; /* ✅ Centrage automatique */
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === BOUTONS PR === */
  
  /* Base commune */
  .sheet-pr-btn {
      width: 50px;
      height: 36px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
      margin: 0 auto;
  }
  
  /* Bouton +1 (Vert) */
  .sheet-pr-btn-plus {
      background: linear-gradient(145deg, #4CAF50, #388e3c);
      color: white;
      box-shadow: 0 4px 8px rgba(76, 175, 80, 0.4);
      border: 2px solid #2e7d32;
  }
  
  .sheet-pr-btn-plus:hover {
      background: linear-gradient(145deg, #66bb6a, #4CAF50);
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 6px 12px rgba(76, 175, 80, 0.6);
  }
  
  .sheet-pr-btn-plus:active {
      transform: translateY(0) scale(1.02);
      box-shadow: 0 3px 6px rgba(76, 175, 80, 0.4);
  }
  
  /* Bouton -1 (Rouge) */
  .sheet-pr-btn-minus {
      background: linear-gradient(145deg, #f44336, #d32f2f);
      color: white;
      box-shadow: 0 4px 8px rgba(244, 67, 54, 0.4);
      border: 2px solid #c62828;
  }
  
  .sheet-pr-btn-minus:hover {
      background: linear-gradient(145deg, #ef5350, #f44336);
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 6px 12px rgba(244, 67, 54, 0.6);
  }
  
  .sheet-pr-btn-minus:active {
      transform: translateY(0) scale(1.02);
      box-shadow: 0 3px 6px rgba(244, 67, 54, 0.4);
  }
  
  /* Bouton Reset (Orange) */
  .sheet-pr-btn-reset {
      background: linear-gradient(145deg, #FF9800, #f57c00);
      color: white;
      box-shadow: 0 4px 8px rgba(255, 152, 0, 0.4);
      border: 2px solid #ef6c00;
      font-size: 16px;
  }
  
  .sheet-pr-btn-reset:hover {
      background: linear-gradient(145deg, #ffb74d, #FF9800);
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 6px 12px rgba(255, 152, 0, 0.6);
  }
  
  .sheet-pr-btn-reset:active {
      transform: translateY(0) scale(1.02);
      box-shadow: 0 3px 6px rgba(255, 152, 0, 0.4);
  }
  
  /* Animation subtile */
  .sheet-pr-btn {
      animation: subtle-pulse 3s ease-in-out infinite;
  }
  
  @keyframes subtle-pulse {
      0%, 100% { 
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }
      50% { 
          box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
      }
  }
  
  /* Centrage forcé dans les cellules de tableau */
  .sheet-carac-table td .sheet-pr-container,
  .sheet-carac-table td .sheet-pr-btn-container {
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: center;
  }
  
  /* Responsive */
  @media (max-width: 768px) {
      .sheet-pr-btn {
          width: 45px;
          height: 34px;
          font-size: 14px;
      }
      
      .sheet-pr-display-input {
          width: 65px !important;
          font-size: 13px;
      }
      
      .sheet-pr-max-input {
          width: 45px !important;
      }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === ROLL TEMPLATE CENTRAGE UNIVERSEL CORRIGÉ === */
  
  /* SUPPRESSION TOTALE DES STYLES VIOLETS PAR DÉFAUT */
  .sheet-rolltemplate-default *,
  .sheet-rolltemplate-dicegain * {
    background: none !important;
    border: none !important;
    color: inherit !important;
  }
  
  /* CONTAINER PRINCIPAL DU TEMPLATE */
  .sheet-rolltemplate-default,
  .sheet-rolltemplate-dicegain {
    background: linear-gradient(145deg, #3d2914, #2c1e0f, #3d2914) !important;
    border: 3px solid #d4af37 !important;
    border-radius: 12px !important;
    box-shadow: 
      0 0 0 2px #8b4513,
      0 6px 16px rgba(0,0,0,0.7),
      inset 0 1px 0 rgba(212, 175, 55, 0.4) !important;
    color: #f5deb3 !important;
    font-family: 'Georgia', serif !important;
    max-width: 280px !important;
    min-width: 260px !important;
    margin: 12px auto !important;
    overflow: hidden !important;
    position: relative !important;
    padding: 0 !important;
    animation: templateSlideIn 0.5s ease-out !important;
  }
  
  /* Bordure décorative pointillée */
  .sheet-rolltemplate-default::before,
  .sheet-rolltemplate-dicegain::before {
    content: "" !important;
    position: absolute !important;
    top: 6px !important;
    left: 6px !important;
    right: 6px !important;
    bottom: 6px !important;
    border: 1px dashed #d4af37 !important;
    border-radius: 8px !important;
    opacity: 0.6 !important;
    pointer-events: none !important;
  }
  
  /* HEADER - Titre centré */
  .sheet-rolltemplate-default > div:first-child,
  .sheet-rolltemplate-dicegain > div:first-child,
  .sheet-rolltemplate-default .sheet-template-header,
  .sheet-rolltemplate-dicegain .sheet-template-header {
    background: linear-gradient(90deg, #d4af37, #b8860b, #d4af37) !important;
    color: #1a1a1a !important;
    padding: 10px 16px !important;
    text-align: center !important;
    font-weight: bold !important;
    font-size: 15px !important;
    text-shadow: 1px 1px 2px rgba(255,255,255,0.5) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    border-bottom: 2px solid #8b4513 !important;
    position: relative !important;
    margin: 0 !important;
  }
  
  /* FORCER le texte du header */
  .sheet-rolltemplate-default > div:first-child *,
  .sheet-rolltemplate-dicegain > div:first-child *,
  .sheet-rolltemplate-default .sheet-template-header *,
  .sheet-rolltemplate-dicegain .sheet-template-header * {
    color: #1a1a1a !important;
    background: none !important;
    border: none !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  
  /* CONTENT - Corps du template */
  .sheet-rolltemplate-default > div:not(:first-child),
  .sheet-rolltemplate-dicegain > div:not(:first-child),
  .sheet-rolltemplate-default .sheet-template-content,
  .sheet-rolltemplate-dicegain .sheet-template-content {
    padding: 14px !important;
    background: rgba(245, 222, 179, 0.1) !important;
    position: relative !important;
  }
  
  /* TOUS LES DIVS - Centrage universel */
  .sheet-rolltemplate-default div,
  .sheet-rolltemplate-dicegain div {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    gap: 12px !important;
    text-align: center !important;
  }
  
  /* SECTIONS SPÉCIFIQUES - Tous les conteneurs de jet */
  .sheet-rolltemplate-default .sheet-roll-result,
  .sheet-rolltemplate-dicegain .sheet-roll-result,
  .sheet-rolltemplate-default .sheet-roll-section,
  .sheet-rolltemplate-dicegain .sheet-roll-section,
  .sheet-rolltemplate-default > div:not(:first-child) > div,
  .sheet-rolltemplate-dicegain > div:not(:first-child) > div {
    background: linear-gradient(135deg, #8b4513, #654321) !important;
    border: 2px solid #d4af37 !important;
    border-radius: 8px !important;
    padding: 10px 14px !important;
    margin: 8px 0 !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    gap: 12px !important;
    text-align: center !important;
    box-shadow: 
      0 2px 4px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(212, 175, 55, 0.2) !important;
  }
  
  /* OVERRIDE spécifique pour le header */
  .sheet-rolltemplate-default > div:first-child,
  .sheet-rolltemplate-dicegain > div:first-child {
    display: block !important;
  }
  
  /* LABELS - Tous les textes de labels */
  .sheet-rolltemplate-default .sheet-roll-label,
  .sheet-rolltemplate-dicegain .sheet-roll-label,
  .sheet-rolltemplate-default .sheet-type-label,
  .sheet-rolltemplate-dicegain .sheet-type-label,
  .sheet-rolltemplate-default span:not(.inlinerollresult):not(.rolled),
  .sheet-rolltemplate-dicegain span:not(.inlinerollresult):not(.rolled) {
    color: #d4af37 !important;
    font-weight: bold !important;
    font-size: 14px !important;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.7) !important;
    text-align: center !important;
    margin: 0 !important;
    flex-shrink: 0 !important;
    background: none !important;
    border: none !important;
  }
  
  /* VALEURS - Toutes les boîtes de résultats */
  .sheet-rolltemplate-default .sheet-roll-value,
  .sheet-rolltemplate-dicegain .sheet-roll-value,
  .sheet-rolltemplate-default .sheet-jet-value,
  .sheet-rolltemplate-dicegain .sheet-jet-value,
  .sheet-rolltemplate-default .inlinerollresult,
  .sheet-rolltemplate-dicegain .inlinerollresult,
  .sheet-rolltemplate-default .rolled,
  .sheet-rolltemplate-dicegain .rolled,
  .sheet-rolltemplate-default span.inlinerollresult,
  .sheet-rolltemplate-dicegain span.inlinerollresult {
    background: linear-gradient(135deg, #d4af37, #b8860b) !important;
    color: #1a1a1a !important;
    border: 2px solid #8b4513 !important;
    border-radius: 6px !important;
    padding: 4px 10px !important;
    font-weight: bold !important;
    font-size: 16px !important;
    text-shadow: 1px 1px 2px rgba(255,255,255,0.4) !important;
    box-shadow: 
      inset 0 1px 0 rgba(255,255,255,0.3),
      0 1px 3px rgba(0,0,0,0.3) !important;
    min-width: 35px !important;
    max-width: 60px !important;
    text-align: center !important;
    display: inline-flex !important;
    justify-content: center !important;
    align-items: center !important;
    margin: 0 !important;
    flex-shrink: 0 !important;
  }
  
  /* ÉLIMINATION COMPLÈTE DU VIOLET ROLL20 */
  .sheet-rolltemplate-default .inlinerollresult.fullcrit,
  .sheet-rolltemplate-default .inlinerollresult.fullfail,
  .sheet-rolltemplate-default .inlinerollresult.importantroll,
  .sheet-rolltemplate-dicegain .inlinerollresult.fullcrit,
  .sheet-rolltemplate-dicegain .inlinerollresult.fullfail,
  .sheet-rolltemplate-dicegain .inlinerollresult.importantroll,
  .sheet-rolltemplate-default .inlinerollresult.critsuccess,
  .sheet-rolltemplate-default .inlinerollresult.critfail,
  .sheet-rolltemplate-dicegain .inlinerollresult.critsuccess,
  .sheet-rolltemplate-dicegain .inlinerollresult.critfail {
    background: linear-gradient(135deg, #d4af37, #b8860b) !important;
    color: #1a1a1a !important;
    border: 2px solid #8b4513 !important;
  }
  
  /* NEUTRALISATION UNIVERSELLE DES STYLES ROLL20 */
  .sheet-rolltemplate-default .formula,
  .sheet-rolltemplate-default .computed,
  .sheet-rolltemplate-dicegain .formula,
  .sheet-rolltemplate-dicegain .computed,
  .sheet-rolltemplate-default .didroll,
  .sheet-rolltemplate-dicegain .didroll {
    background: none !important;
    color: #f5deb3 !important;
    border: none !important;
  }
  
  /* FORCER TOUS LES TEXTES - Sauf les valeurs de dés */
  .sheet-rolltemplate-default *:not(.inlinerollresult):not(.rolled):not(.sheet-template-header):not(.sheet-template-header *),
  .sheet-rolltemplate-dicegain *:not(.inlinerollresult):not(.rolled):not(.sheet-template-header):not(.sheet-template-header *) {
    color: #f5deb3 !important;
  }
  
  /* SECTIONS ADDITIONNELLES - Changement et Gain */
  .sheet-rolltemplate-default .sheet-stat-change,
  .sheet-rolltemplate-dicegain .sheet-stat-change,
  .sheet-rolltemplate-default .sheet-change-section,
  .sheet-rolltemplate-dicegain .sheet-change-section {
    background: linear-gradient(135deg, #654321, #4a2c17) !important;
    border: 2px solid #8b4513 !important;
    border-radius: 8px !important;
    padding: 8px 12px !important;
    margin: 6px 0 !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    gap: 8px !important;
    text-align: center !important;
    color: #d2b48c !important;
  }
  
  .sheet-rolltemplate-default .sheet-gain-display,
  .sheet-rolltemplate-dicegain .sheet-gain-display,
  .sheet-rolltemplate-default .sheet-gain-section,
  .sheet-rolltemplate-dicegain .sheet-gain-section {
    background: linear-gradient(135deg, #b8860b, #9a7209) !important;
    border: 2px solid #d4af37 !important;
    border-radius: 8px !important;
    padding: 8px 12px !important;
    margin: 6px 0 !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    gap: 6px !important;
    text-align: center !important;
    color: #1a1a1a !important;
  }
  
  /* ANIMATIONS */
  .sheet-rolltemplate-default,
  .sheet-rolltemplate-dicegain {
    animation: templateSlideIn 0.4s ease-out !important;
  }
  
  @keyframes templateSlideIn {
    from {
      opacity: 0;
      transform: translateY(-10px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  
  /* HOVER EFFECTS */
  .sheet-rolltemplate-default:hover,
  .sheet-rolltemplate-dicegain:hover {
    transform: translateY(-1px) !important;
    box-shadow: 
      0 0 0 2px #8b4513,
      0 8px 20px rgba(0,0,0,0.8),
      inset 0 1px 0 rgba(212, 175, 55, 0.5) !important;
    transition: all 0.3s ease !important;
  }
  
  /* RESPONSIVE */
  @media (max-width: 400px) {
    .sheet-rolltemplate-default,
    .sheet-rolltemplate-dicegain {
      max-width: 95% !important;
      min-width: 240px !important;
      margin: 8px auto !important;
    }
    
    .sheet-rolltemplate-default div,
    .sheet-rolltemplate-dicegain div {
      flex-direction: column !important;
      gap: 6px !important;
    }
    
    .sheet-rolltemplate-default .inlinerollresult,
    .sheet-rolltemplate-dicegain .inlinerollresult {
      font-size: 15px !important;
      padding: 3px 8px !important;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* =================== CSS ROLL TEMPLATE FINAL OPTIMISÉ ======================= */
  /* ========================================================================== */
  
  /* === CSS ROLL TEMPLATE AVEC TOUTES LES COULEURS VÉRIFIÉES === */
  
  .sheet-rolltemplate-jets {
    background: linear-gradient(145deg, #3d2914, #2c1e0f, #3d2914);
    border: 3px solid #8b6914;
    border-radius: 12px;
    box-shadow: 
      0 0 0 2px #654321,
      0 6px 16px rgba(0,0,0,0.8),
      inset 0 1px 0 rgba(139,105,20,0.4);
    margin: 8px 0;
    overflow: hidden;
    font-family: 'Georgia', serif;
    max-width: 400px;
  }
  
  .sheet-rolltemplate-jets .sheet-template-container {
    background: linear-gradient(135deg, rgba(244,230,183,0.15), rgba(230,214,144,0.1));
  }
  
  .sheet-rolltemplate-jets .sheet-template-header {
    background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
    color: #f4e6b7;
    padding: 12px 16px;
    text-align: center;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .sheet-rolltemplate-jets .sheet-template-title {
    font-size: 16px;
    margin: 0;
  }
  
  .sheet-rolltemplate-jets .sheet-template-content {
    padding: 16px;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-result {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 12px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }
  
  .sheet-rolltemplate-jets .sheet-jet-result:last-child {
    margin-bottom: 0;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-result:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
    border-color: #a0522d;
    transform: translateY(-1px);
    box-shadow: 0 4px 10px rgba(160,82,45,0.4);
  }
  
  /* === NOM DE L'EFFET AMÉLIORÉ === */
  .sheet-rolltemplate-jets .sheet-jet-name {
    color: #f5e6c8 !important;
    font-weight: bold;
    font-size: 14px;
    text-align: center;
    margin-bottom: 8px;
    text-shadow: 2px 2px 3px rgba(0,0,0,0.9) !important;
    background: rgba(139,69,19,0.2);
    padding: 4px 8px;
    border-radius: 4px;
    border: 1px solid rgba(245,230,200,0.3);
  }
  
  .sheet-rolltemplate-jets .sheet-jet-details {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
    flex-wrap: wrap;
  }
  
  /* === COULEURS PAR DÉFAUT === */
  .sheet-rolltemplate-jets .sheet-jet-type {
    background: linear-gradient(135deg, #f8f8ff, #e6e6fa);
    border: 1px solid #d3d3d3;
    border-radius: 4px;
    padding: 4px 8px;
    font-size: 12px;
    font-weight: bold;
    color: #2f2f2f;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3);
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature {
    background: linear-gradient(135deg, #dc143c, #b22222);
    border: 1px solid #8b0000;
    border-radius: 4px;
    padding: 4px 8px;
    font-size: 12px;
    font-weight: bold;
    color: white;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8);
  }
  
  /* === COULEURS DYNAMIQUES POUR TYPE === */
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-blanc_argente {
    background: linear-gradient(135deg, #f8f8ff, #e6e6fa) !important;
    border-color: #d3d3d3 !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-rouge_ecarlate {
    background: linear-gradient(135deg, #dc143c, #b22222) !important;
    border-color: #8b0000 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-orange_incandescent {
    background: linear-gradient(135deg, #ff4500, #ff6347) !important;
    border-color: #dc2626 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-bleu_azur_profond {
    background: linear-gradient(135deg, #0047ab, #003d82) !important;
    border-color: #1e3a8a !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-turquoise_clair {
    background: linear-gradient(135deg, #40e0d0, #20b2aa) !important;
    border-color: #0d9488 !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-bleu_ciel_mouvant {
    background: linear-gradient(135deg, #87ceeb, #4682b4) !important;
    border-color: #2563eb !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-brun_pierre {
    background: linear-gradient(135deg, #8b4513, #654321) !important;
    border-color: #451a03 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-ocre_dore {
    background: linear-gradient(135deg, #cc7722, #b8860b) !important;
    border-color: #92400e !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-jaune_electrique {
    background: linear-gradient(135deg, #ffff00, #ffd700) !important;
    border-color: #ca8a04 !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-violet_orage {
    background: linear-gradient(135deg, #663399, #4b0082) !important;
    border-color: #581c87 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-vert_tendre_lumineux {
    background: linear-gradient(135deg, #90ee90, #32cd32) !important;
    border-color: #16a34a !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-bleu_glace {
    background: linear-gradient(135deg, #b0e0e6, #87ceeb) !important;
    border-color: #0284c7 !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-blanc_cristallin {
    background: linear-gradient(135deg, #ffffff, #f0f8ff) !important;
    border-color: #e5e7eb !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-rouge_sombre_carmin {
    background: linear-gradient(135deg, #8b0000, #660000) !important;
    border-color: #450a0a !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-vert_acide {
    background: linear-gradient(135deg, #adff2f, #7fff00) !important;
    border-color: #65a30d !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-verdatre_maladif {
    background: linear-gradient(135deg, #556b2f, #6b8e23) !important;
    border-color: #365314 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-gris_anthracite {
    background: linear-gradient(135deg, #2f4f4f, #1c1c1c) !important;
    border-color: #111827 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-violet_tenebreux {
    background: linear-gradient(135deg, #301934, #1a0d1a) !important;
    border-color: #1f2937 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-noir_absolu_pourpre {
    background: linear-gradient(135deg, #0d0d0d, #2d0a2d) !important;
    border-color: #000000 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(255,255,255,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-blanc_pur {
    background: linear-gradient(135deg, #ffffff, #fffafa) !important;
    border-color: #f3f4f6 !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-dore_rayonnant {
    background: linear-gradient(135deg, #ffd700, #ffb347) !important;
    border-color: #d97706 !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-vert_emeraude_profond {
    background: linear-gradient(135deg, #50c878, #228b22) !important;
    border-color: #15803d !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-type.sheet-jet-type-vert_feuillu {
    background: linear-gradient(135deg, #228b22, #006400) !important;
    border-color: #14532d !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  /* === COULEURS DYNAMIQUES POUR NATURE === */
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-blanc_argente {
    background: linear-gradient(135deg, #f8f8ff, #e6e6fa) !important;
    border-color: #d3d3d3 !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-rouge_ecarlate {
    background: linear-gradient(135deg, #dc143c, #b22222) !important;
    border-color: #8b0000 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-orange_incandescent {
    background: linear-gradient(135deg, #ff4500, #ff6347) !important;
    border-color: #dc2626 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-bleu_azur_profond {
    background: linear-gradient(135deg, #0047ab, #003d82) !important;
    border-color: #1e3a8a !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-turquoise_clair {
    background: linear-gradient(135deg, #40e0d0, #20b2aa) !important;
    border-color: #0d9488 !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-bleu_ciel_mouvant {
    background: linear-gradient(135deg, #87ceeb, #4682b4) !important;
    border-color: #2563eb !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-brun_pierre {
    background: linear-gradient(135deg, #8b4513, #654321) !important;
    border-color: #451a03 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-ocre_dore {
    background: linear-gradient(135deg, #cc7722, #b8860b) !important;
    border-color: #92400e !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-jaune_electrique {
    background: linear-gradient(135deg, #ffff00, #ffd700) !important;
    border-color: #ca8a04 !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-violet_orage {
    background: linear-gradient(135deg, #663399, #4b0082) !important;
    border-color: #581c87 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-vert_tendre_lumineux {
    background: linear-gradient(135deg, #90ee90, #32cd32) !important;
    border-color: #16a34a !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-bleu_glace {
    background: linear-gradient(135deg, #b0e0e6, #87ceeb) !important;
    border-color: #0284c7 !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-blanc_cristallin {
    background: linear-gradient(135deg, #ffffff, #f0f8ff) !important;
    border-color: #e5e7eb !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-rouge_sombre_carmin {
    background: linear-gradient(135deg, #8b0000, #660000) !important;
    border-color: #450a0a !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-vert_acide {
    background: linear-gradient(135deg, #adff2f, #7fff00) !important;
    border-color: #65a30d !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-verdatre_maladif {
    background: linear-gradient(135deg, #556b2f, #6b8e23) !important;
    border-color: #365314 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-gris_anthracite {
    background: linear-gradient(135deg, #2f4f4f, #1c1c1c) !important;
    border-color: #111827 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-violet_tenebreux {
    background: linear-gradient(135deg, #301934, #1a0d1a) !important;
    border-color: #1f2937 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-noir_absolu_pourpre {
    background: linear-gradient(135deg, #0d0d0d, #2d0a2d) !important;
    border-color: #000000 !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(255,255,255,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-blanc_pur {
    background: linear-gradient(135deg, #ffffff, #fffafa) !important;
    border-color: #f3f4f6 !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-dore_rayonnant {
    background: linear-gradient(135deg, #ffd700, #ffb347) !important;
    border-color: #d97706 !important;
    color: #2f2f2f !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-vert_emeraude_profond {
    background: linear-gradient(135deg, #50c878, #228b22) !important;
    border-color: #15803d !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-nature.sheet-jet-nature-vert_feuillu {
    background: linear-gradient(135deg, #228b22, #006400) !important;
    border-color: #14532d !important;
    color: white !important;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.8) !important;
  }
  
  /* === RÉSULTATS DE DÉS === */
  .sheet-rolltemplate-jets .sheet-jet-roll {
    background: linear-gradient(145deg, #b8860b, #8b6914, #6b4f10);
    border: 2px solid #654321;
    border-radius: 6px;
    padding: 6px 12px;
    text-align: center;
    font-size: 16px;
    font-weight: bold;
    color: #f4e6b7;
    text-shadow: 
      1px 1px 2px rgba(0,0,0,0.8),
      0 0 8px rgba(184,134,11,0.4);
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.3),
      0 2px 6px rgba(0,0,0,0.5),
      0 0 8px rgba(139,105,20,0.5);
    min-height: 28px;
    max-width: 120px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-roll:hover {
    background: linear-gradient(145deg, #cd853f, #b8860b, #8b6914);
    transform: scale(1.02);
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.3),
      0 3px 8px rgba(0,0,0,0.6),
      0 0 12px rgba(205,133,63,0.6);
  }
  
  .sheet-rolltemplate-jets .sheet-jet-roll::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent, 
      rgba(244,230,183,0.5), 
      transparent);
    transition: left 0.6s ease;
  }
  
  .sheet-rolltemplate-jets .sheet-jet-roll:hover::before {
    left: 100%;
  }
  
  /* === OVERRIDE DES STYLES ROLL20 === */
  .sheet-rolltemplate-jets .sheet-jet-roll span.inlinerollresult,
  .sheet-rolltemplate-jets .sheet-jet-roll .inlinerollresult,
  .sheet-rolltemplate-jets .sheet-jet-roll .a,
  .sheet-rolltemplate-jets .sheet-jet-roll .fa,
  .sheet-rolltemplate-jets .sheet-jet-roll .fc,
  .sheet-rolltemplate-jets .sheet-jet-roll .fb,
  .sheet-rolltemplate-jets .sheet-jet-roll .fd,
  .sheet-rolltemplate-jets .sheet-jet-roll .didroll,
  .sheet-rolltemplate-jets .sheet-jet-roll .computedarr,
  .sheet-rolltemplate-jets .sheet-jet-roll .computed,
  .sheet-rolltemplate-jets .sheet-jet-roll * {
    background: transparent !important;
    border: none !important;
    color: #f4e6b7 !important;
    font-weight: bold !important;
    font-size: 16px !important;
    text-shadow: 
      1px 1px 2px rgba(0,0,0,0.8),
      0 0 8px rgba(184,134,11,0.4) !important;
    padding: 0 !important;
    margin: 0 !important;
    border-radius: 0 !important;
    box-shadow: none !important;
  }
  
  /* === SECTION ALTÉRATIONS === */
  .sheet-rolltemplate-jets .sheet-alterations-section {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.15));
    border: 2px solid #8b4513;
    border-radius: 8px;
    padding: 12px;
    margin-top: 16px;
    box-shadow: inset 0 1px 0 rgba(139,69,19,0.4);
  }
  
  .sheet-rolltemplate-jets .sheet-alterations-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-bottom: 12px;
    color: #f5e6c8 !important;
    font-weight: bold;
    font-size: 14px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .sheet-rolltemplate-jets .sheet-alterations-icon {
    font-size: 16px;
  }
  
  .sheet-rolltemplate-jets .sheet-alterations-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
  }
  
  .sheet-rolltemplate-jets .sheet-alteration-effect {
    background: linear-gradient(135deg, rgba(184,134,11,0.4), rgba(139,105,20,0.3));
    border: 1px solid #b8860b;
    border-radius: 6px;
    padding: 6px 10px;
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    font-weight: bold;
    color: #3d2914;
    text-shadow: 1px 1px 1px rgba(244,230,183,0.7);
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
  }
  
  .sheet-rolltemplate-jets .sheet-alteration-effect:hover {
    background: linear-gradient(135deg, rgba(184,134,11,0.6), rgba(139,105,20,0.4));
    transform: translateY(-1px);
    box-shadow: 0 3px 6px rgba(184,134,11,0.5);
  }
  
  .sheet-rolltemplate-jets .sheet-alteration-icon {
    font-size: 14px;
    color: #654321;
  }
  
  .sheet-rolltemplate-jets .sheet-alteration-name {
    color: #f5e6c8 !important;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-alteration-value {
    background: rgba(139,69,19,0.3);
    border-radius: 3px;
    padding: 2px 6px;
    font-size: 11px;
    font-weight: bold;
    color: #f4e6b7;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.6);
  }
  
  .sheet-rolltemplate-jets .sheet-alteration-dice {
    background: rgba(184,134,11,0.4);
    border-radius: 3px;
    padding: 2px 4px;
    font-size: 10px;
    font-weight: bold;
    color: #3d2914;
    text-shadow: 1px 1px 1px rgba(244,230,183,0.5);
  }
  
  /* === SECTION EFFET ACTIF CORRIGÉE === */
  .sheet-rolltemplate-jets .sheet-effet-actif-section {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.15));
    border: 2px solid #8b4513;
    border-radius: 8px;
    padding: 6px 10px;
    margin-top: 10px;
    box-shadow: inset 0 1px 0 rgba(139,69,19,0.4);
  }
  
  .sheet-rolltemplate-jets .sheet-effet-actif-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    margin-bottom: 4px;
    color: #f5e6c8 !important;
    font-weight: bold;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.2px;
    line-height: 1 !important;
  }
  
  .sheet-rolltemplate-jets .sheet-effet-actif-icon {
    font-size: 14px;
    line-height: 1 !important;
    color: #f5e6c8 !important;
  }
  
  .sheet-rolltemplate-jets .sheet-effet-actif-content {
    background: transparent !important;
    border: 1px solid #8b4513;
    border-radius: 4px;
    padding: 4px 6px;
    color: #f5e6c8 !important;
    font-family: 'Georgia', serif;
    font-size: 11px;
    line-height: 0.95 !important;
    text-shadow: 2px 2px 3px rgba(0,0,0,0.9) !important;
    white-space: pre-wrap;
    word-wrap: break-word;
    max-height: 50px;
    overflow-y: auto;
    text-align: left;
    margin: 0 !important;
    letter-spacing: -0.1px !important;
    word-spacing: -0.5px !important;
  }
  
  .sheet-rolltemplate-jets .sheet-effet-actif-content *,
  .sheet-rolltemplate-jets .sheet-effet-actif-content p,
  .sheet-rolltemplate-jets .sheet-effet-actif-content div,
  .sheet-rolltemplate-jets .sheet-effet-actif-content span {
    line-height: 0.95 !important;
    margin: 0 !important;
    padding: 0 !important;
    display: inline !important;
    color: #f5e6c8 !important;
    text-shadow: 2px 2px 3px rgba(0,0,0,0.9) !important;
  }
  
  .sheet-rolltemplate-jets .sheet-effet-actif-content::-webkit-scrollbar {
    width: 3px;
  }
  
  .sheet-rolltemplate-jets .sheet-effet-actif-content::-webkit-scrollbar-track {
    background: rgba(139,69,19,0.3);
    border-radius: 2px;
  }
  
  .sheet-rolltemplate-jets .sheet-effet-actif-content::-webkit-scrollbar-thumb {
    background: rgba(245,230,200,0.6);
    border-radius: 2px;
  }
  
  .sheet-rolltemplate-jets .sheet-effet-actif-content::-webkit-scrollbar-thumb:hover {
    background: rgba(245,230,200,0.8);
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .sheet-rolltemplate-jets {
      max-width: 100%;
      margin: 4px 0;
    }
    
    .sheet-rolltemplate-jets .sheet-template-content {
      padding: 12px;
    }
    
    .sheet-rolltemplate-jets .sheet-jet-roll {
      font-size: 14px;
      padding: 5px 10px;
      min-height: 24px;
      max-width: 100px;
    }
    
    .sheet-rolltemplate-jets .sheet-alterations-list {
      flex-direction: column;
      align-items: center;
    }
    
    .sheet-rolltemplate-jets .sheet-alteration-effect {
      width: 100%;
      justify-content: center;
    }
  }
  
  @media (max-width: 480px) {
    .sheet-rolltemplate-jets .sheet-jet-roll {
      font-size: 12px;
      padding: 4px 8px;
      min-height: 20px;
      max-width: 80px;
    }
    
    .sheet-rolltemplate-jets .sheet-template-header {
      padding: 8px 12px;
    }
    
    .sheet-rolltemplate-jets .sheet-template-title {
      font-size: 14px;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ===============================================
     CSS MISSIONS - VERSION AMÉLIORÉE
     =============================================== */
  
  /* === BASE MISSIONS === */
  .sheet-subdetails {
    margin: 8px 0;
    border: 1px solid #d4af37;
    border-radius: 6px;
    background: linear-gradient(135deg, #fefdf8, #f9f7ef);
    box-shadow: 0 1px 4px rgba(212, 175, 55, 0.1);
    overflow: hidden;
  }
  
  .sheet-section-title {
    background: linear-gradient(135deg, #d4af37, #b8941f);
    color: white;
    padding: 8px 15px;
    font-size: 14px;
    font-weight: bold;
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    cursor: pointer;
    user-select: none;
    transition: all 0.3s ease;
    margin: 0;
  }
  
  .sheet-section-title:hover {
    background: linear-gradient(135deg, #b8941f, #a0801b);
  }
  
  /* === TABLEAU BOARD === */
  .sheet-tableau-board {
    padding: 12px;
    background: #fefdf8;
  }
  
  .sheet-dashboard-block {
    border: 1px solid #e6d8b5;
    border-radius: 6px;
    background: white;
    margin-bottom: 8px;
    box-shadow: 0 2px 6px rgba(212, 175, 55, 0.1);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
  }
  
  .sheet-dashboard-block:hover {
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.2);
    transform: translateY(-1px);
  }
  
  /* === SUBTITLE ET CHEVRON === */
  .sheet-dashboard-subtitle {
    background: linear-gradient(135deg, #f5f1e8, #ebe4d1);
    border-bottom: 1px solid #d4af37;
    padding: 10px 15px;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .sheet-dashboard-subtitle:hover {
    background: linear-gradient(135deg, #ebe4d1, #dfd2b8);
  }
  
  .sheet-subtitle-wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .chevron {
    font-size: 12px;
    color: #d4af37;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: bold;
  }
  
  .sheet-dashboard-block[open] .chevron {
    transform: rotate(90deg);
    color: #b8941f;
  }
  
  .sheet-mission-title {
    flex: 1;
    border: none;
    background: transparent;
    font-size: 14px;
    font-weight: bold;
    color: #5a4a2a;
    padding: 6px 10px;
    border-radius: 4px;
    transition: all 0.3s ease;
  }
  
  .sheet-mission-title:focus {
    background: rgba(212, 175, 55, 0.1);
    outline: 1px solid #d4af37;
  }
  
  /* === CONTENU MISSION === */
  .sheet-mission-content {
    padding: 15px;
    background: white;
    animation: slideDown 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  @keyframes slideDown {
    0% {
      opacity: 0;
      transform: translateY(-10px);
      max-height: 0;
    }
    100% {
      opacity: 1;
      transform: translateY(0);
      max-height: 2000px;
    }
  }
  
  /* === SECTIONS === */
  .sheet-mission-section {
    margin-bottom: 18px;
    opacity: 0;
    transform: translateY(5px);
    animation: fadeInUp 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }
  
  .sheet-mission-section:last-child {
    margin-bottom: 0;
  }
  
  .sheet-mission-section:nth-child(1) { animation-delay: 0.05s; }
  .sheet-mission-section:nth-child(2) { animation-delay: 0.1s; }
  .sheet-mission-section:nth-child(3) { animation-delay: 0.15s; }
  
  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* === TITRES DE SECTION PERSONNALISÉS === */
  .sheet-mission-section-title {
    font-size: 16px;
    color: #5a4a2a;
    margin-bottom: 12px;
    padding: 8px 12px;
    background: linear-gradient(135deg, #f8f6f0, #ede8d6);
    border: 1px solid #d4af37;
    border-left: 4px solid #d4af37;
    border-radius: 6px;
    position: relative;
    font-weight: 700;
    text-transform: uppercase;
    font-size: 13px;
    letter-spacing: 0.5px;
    box-shadow: 0 1px 3px rgba(212, 175, 55, 0.1);
    transition: all 0.3s ease;
  }
  
  .sheet-mission-section-title::before {
    content: "●";
    color: #d4af37;
    margin-right: 8px;
    font-size: 14px;
  }
  
  .sheet-mission-section:hover .sheet-mission-section-title {
    background: linear-gradient(135deg, #ede8d6, #e2d6b8);
    transform: translateX(3px);
  }
  
  /* === INFORMATIONS GÉNÉRALES === */
  .sheet-mission-row-group {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  
  .sheet-mission-double-row {
    display: flex;
    gap: 15px;
    align-items: flex-end;
  }
  
  .sheet-mission-field {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
    position: relative;
  }
  
  .sheet-mission-field label {
    font-weight: 600;
    color: #5a4a2a;
    font-size: 12px;
    margin-bottom: 5px;
    padding: 4px 8px;
    background: linear-gradient(135deg, #f8f6f0, #ede8d6);
    border: 1px solid #e6d8b5;
    border-left: 3px solid #d4af37;
    border-radius: 4px;
    display: inline-block;
    min-width: 100px;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    box-shadow: 0 1px 2px rgba(212, 175, 55, 0.1);
    position: relative;
    transition: all 0.3s ease;
  }
  
  .sheet-mission-field label::before {
    content: "▪";
    color: #d4af37;
    margin-right: 4px;
    font-size: 10px;
  }
  
  .sheet-mission-field:hover label {
    background: linear-gradient(135deg, #ede8d6, #e2d6b8);
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(212, 175, 55, 0.15);
  }
  
  .sheet-mission-field input,
  .sheet-mission-field select {
    padding: 10px 12px;
    border: 1px solid #e6d8b5;
    border-radius: 4px;
    font-size: 14px;
    background: white;
    transition: all 0.3s ease;
    height: 42px; /* Hauteur fixe pour éviter la coupure */
    line-height: 1.4;
  }
  
  .sheet-mission-field input:focus,
  .sheet-mission-field select:focus {
    border-color: #d4af37;
    box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.1);
    outline: none;
  }
  
  /* === SÉLECTIONS AVEC TOKENS PERSONNALISÉS === */
  
  /* Base commune pour les selects */
  .etat-mission,
  .priority-selector {
    position: relative;
    padding-left: 40px !important;
    background: linear-gradient(135deg, #ffffff, #fefdf8);
    border: 2px solid #e6d8b5;
    border-radius: 8px;
    font-weight: 500;
    color: #5a4a2a;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 4px rgba(212, 175, 55, 0.1);
  }
  
  .etat-mission:hover,
  .priority-selector:hover {
    background: linear-gradient(135deg, #fefdf8, #f9f7ef);
    border-color: #d4af37;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(212, 175, 55, 0.15);
  }
  
  .etat-mission:focus,
  .priority-selector:focus {
    border-color: #d4af37;
    box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
    outline: none;
  }
  
  /* ÉTATS AVEC TOKENS */
  .etat-mission::before {
    content: "";
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #e6d8b5;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1;
  }
  
  .etat-mission::after {
    content: "";
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: white;
    transition: all 0.3s ease;
    z-index: 2;
  }
  
  /* Tokens spécifiques selon l'état */
  .etat-mission[value="en-cours"]::before {
    background: linear-gradient(135deg, #ffc107, #e0a800);
    box-shadow: 0 0 0 3px rgba(255, 193, 7, 0.2), 0 2px 6px rgba(255, 193, 7, 0.3);
    animation: statusPulse 2s ease-in-out infinite;
  }
  
  .etat-mission[value="en-cours"]::after {
    background: radial-gradient(circle, #fff3cd, #ffeaa7);
  }
  
  .etat-mission[value="reussie"]::before {
    background: linear-gradient(135deg, #28a745, #1e7e34);
    box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.2), 0 2px 6px rgba(40, 167, 69, 0.3);
  }
  
  .etat-mission[value="reussie"]::after {
    background: radial-gradient(circle, #d4edda, #c3e6cb);
  }
  
  .etat-mission[value="echec"]::before {
    background: linear-gradient(135deg, #dc3545, #bd2130);
    box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2), 0 2px 6px rgba(220, 53, 69, 0.3);
  }
  
  .etat-mission[value="echec"]::after {
    background: radial-gradient(circle, #f8d7da, #f1b0b7);
  }
  
  .etat-mission[value="abandonnee"]::before {
    background: linear-gradient(135deg, #6c757d, #545b62);
    box-shadow: 0 0 0 3px rgba(108, 117, 125, 0.2), 0 2px 6px rgba(108, 117, 125, 0.3);
  }
  
  .etat-mission[value="abandonnee"]::after {
    background: radial-gradient(circle, #f8f9fa, #e9ecef);
  }
  
  @keyframes statusPulse {
    0%, 100% { transform: translateY(-50%) scale(1); }
    50% { transform: translateY(-50%) scale(1.05); }
  }
  
  /* PRIORITÉS AVEC TOKENS */
  .priority-selector::before {
    content: "";
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    width: 18px;
    height: 18px;
    border-radius: 3px;
    background: #e6d8b5;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .priority-selector::after {
    content: "";
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 0;
    transition: all 0.3s ease;
    z-index: 2;
  }
  
  /* Tokens géométriques selon la priorité */
  .priority-selector[value="basse"]::before {
    background: linear-gradient(135deg, #28a745, #1e7e34);
    box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.2), 0 2px 6px rgba(40, 167, 69, 0.3);
  }
  
  .priority-selector[value="basse"]::after {
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 8px solid #d4edda;
    transform: translateY(-30%);
  }
  
  .priority-selector[value="normale"]::before {
    background: linear-gradient(135deg, #ffc107, #e0a800);
    box-shadow: 0 0 0 3px rgba(255, 193, 7, 0.2), 0 2px 6px rgba(255, 193, 7, 0.3);
  }
  
  .priority-selector[value="normale"]::after {
    width: 8px;
    height: 8px;
    background: #fff3cd;
    border-radius: 1px;
    border: none;
    transform: translateY(-50%);
  }
  
  .priority-selector[value="urgente"]::before {
    background: linear-gradient(135deg, #fd7e14, #dc6502);
    box-shadow: 0 0 0 3px rgba(253, 126, 20, 0.2), 0 2px 6px rgba(253, 126, 20, 0.3);
  }
  
  .priority-selector[value="urgente"]::after {
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 8px solid #ffeaa7;
    transform: translateY(-70%);
  }
  
  .priority-selector[value="critique"]::before {
    background: linear-gradient(135deg, #dc3545, #bd2130);
    box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.3), 0 2px 6px rgba(220, 53, 69, 0.4);
    animation: criticalFlash 1.2s ease-in-out infinite;
  }
  
  .priority-selector[value="critique"]::after {
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 8px solid #f8d7da;
    transform: translateY(-70%);
    animation: criticalArrow 1.2s ease-in-out infinite;
  }
  
  @keyframes criticalFlash {
    0%, 100% { 
      transform: translateY(-50%) scale(1);
      filter: brightness(1);
    }
    50% { 
      transform: translateY(-50%) scale(1.1);
      filter: brightness(1.2);
    }
  }
  
  @keyframes criticalArrow {
    0%, 100% { 
      transform: translateY(-70%) scale(1);
    }
    50% { 
      transform: translateY(-70%) scale(1.15);
    }
  }
  
  /* Effet spécial pour les bordures selon la valeur */
  .etat-mission[value="en-cours"] {
    border-color: #ffc107;
  }
  
  .etat-mission[value="reussie"] {
    border-color: #28a745;
  }
  
  .etat-mission[value="echec"] {
    border-color: #dc3545;
  }
  
  .etat-mission[value="abandonnee"] {
    border-color: #6c757d;
  }
  
  .priority-selector[value="basse"] {
    border-color: #28a745;
  }
  
  .priority-selector[value="normale"] {
    border-color: #ffc107;
  }
  
  .priority-selector[value="urgente"] {
    border-color: #fd7e14;
  }
  
  .priority-selector[value="critique"] {
    border-color: #dc3545;
    animation: criticalBorder 1.5s ease-in-out infinite;
  }
  
  @keyframes criticalBorder {
    0%, 100% { border-color: #dc3545; }
    50% { border-color: #bd2130; }
  }
  
  /* === OBJECTIFS EN GRILLE === */
  .sheet-mission-objectives {
    background: linear-gradient(135deg, #fefdf8, #f9f7ef);
    border: 1px solid #e6d8b5;
    border-radius: 8px;
    padding: 12px;
    position: relative;
    overflow: hidden;
  }
  
  .sheet-mission-objectives::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, #d4af37, #b8941f, #d4af37);
  }
  
  .sheet-objectives-row {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
    opacity: 0;
    transform: translateX(-15px);
    animation: slideInRight 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }
  
  .sheet-objectives-row:nth-child(1) { animation-delay: 0.05s; }
  .sheet-objectives-row:nth-child(2) { animation-delay: 0.1s; }
  .sheet-objectives-row:nth-child(3) { animation-delay: 0.15s; }
  .sheet-objectives-row:last-child { margin-bottom: 0; }
  
  @keyframes slideInRight {
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  /* === ITEMS OBJECTIFS === */
  .sheet-objective-item {
    flex: 1;
    display: flex;
    align-items: center;
    padding: 10px 12px;
    background: white;
    border: 1px solid #e6d8b5;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    min-height: 44px;
    box-shadow: 0 1px 3px rgba(212, 175, 55, 0.08);
  }
  
  .sheet-objective-item::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.08), transparent);
    transition: left 0.5s ease;
  }
  
  .sheet-objective-item:hover::before {
    left: 100%;
  }
  
  .sheet-objective-item:hover {
    background: linear-gradient(135deg, #fff9e6, #fef5d3);
    border-color: #d4af37;
    transform: translateY(-1px);
    box-shadow: 0 3px 8px rgba(212, 175, 55, 0.15);
  }
  
  .sheet-objective-item:has(input:checked) {
    background: linear-gradient(135deg, #e8f5e8, #d1f2d1);
    border-color: #28a745;
    color: #155724;
  }
  
  .sheet-objective-item:has(input:checked):hover {
    background: linear-gradient(135deg, #d1f2d1, #c3e6cb);
  }
  
  /* === CHECKBOX PERSONNALISÉE === */
  .sheet-objective-item input[type="checkbox"] {
    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
  }
  
  .checkmark {
    width: 20px;
    height: 20px;
    border: 2px solid #d4af37;
    border-radius: 4px;
    margin-right: 10px;
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    flex-shrink: 0;
    background: white;
  }
  
  .sheet-objective-item input[type="checkbox"]:checked + .checkmark {
    background: linear-gradient(135deg, #28a745, #20c997);
    border-color: #28a745;
    transform: scale(1.05);
    box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.2);
  }
  
  .checkmark::after {
    content: "";
    position: absolute;
    left: 6px;
    top: 3px;
    width: 5px;
    height: 10px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg) scale(0);
    transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }
  
  .sheet-objective-item input[type="checkbox"]:checked + .checkmark::after {
    transform: rotate(45deg) scale(1);
  }
  
  .objective-text {
    font-weight: 500;
    font-size: 13px;
    line-height: 1.3;
  }
  
  /* === SPACER === */
  .sheet-objective-spacer {
    flex: 1;
    height: 44px;
    border: 1px dashed #e6d8b5;
    border-radius: 6px;
    background: repeating-linear-gradient(
      45deg,
      transparent,
      transparent 4px,
      rgba(212, 175, 55, 0.04) 4px,
      rgba(212, 175, 55, 0.04) 8px
    );
    display: flex;
    align-items: center;
    justify-content: center;
    color: #999;
    font-style: italic;
    transition: all 0.3s ease;
  }
  
  .sheet-objective-spacer::before {
    content: "Libre";
    font-size: 11px;
    opacity: 0.5;
  }
  
  /* === NOTES DE MISSION === */
  .sheet-mission-notes-wrapper {
    position: relative;
  }
  
  .sheet-mission-notes {
    width: 100%;
    min-height: 80px;
    padding: 12px;
    border: 1px solid #e6d8b5;
    border-radius: 6px;
    font-size: 13px;
    line-height: 1.4;
    background: white;
    resize: vertical;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    font-family: inherit;
  }
  
  .sheet-mission-notes:focus {
    min-height: 120px;
    border-color: #d4af37;
    box-shadow: 0 2px 8px rgba(212, 175, 55, 0.1);
    outline: none;
  }
  
  .sheet-mission-notes::placeholder {
    color: #999;
    font-style: italic;
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .sheet-mission-double-row {
      flex-direction: column;
      gap: 8px;
    }
    
    .sheet-objectives-row {
      flex-direction: column;
      gap: 8px;
    }
    
    .sheet-objective-spacer {
      display: none;
    }
    
    .sheet-mission-content {
      padding: 12px;
    }
    
    .sheet-tableau-board {
      padding: 8px;
    }
    
    .sheet-mission-section {
      margin-bottom: 15px;
    }
  }
  
  @media (max-width: 480px) {
    .sheet-mission-objectives {
      padding: 10px;
    }
    
    .sheet-objective-item {
      padding: 8px 10px;
      min-height: 40px;
    }
    
    .checkmark {
      width: 18px;
      height: 18px;
      margin-right: 8px;
    }
    
    .objective-text {
      font-size: 12px;
    }
    
    .sheet-mission-notes {
      min-height: 70px;
      padding: 10px;
    }
    
    .sheet-section-title {
      padding: 6px 12px;
      font-size: 13px;
    }
    
    .sheet-dashboard-subtitle {
      padding: 8px 12px;
    }
    
    .etat-mission,
    .priority-selector {
      padding-left: 30px !important;
    }
    
    .etat-mission::before {
      width: 14px;
      height: 14px;
    }
  }
  
  /* === PERFORMANCE === */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ===== CSS BARRE DE PROGRESSION COMPATIBLE ROLL20 ===== */
  
  /* Ligne de progression dans le tableau */
  .progress-row {
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      border: none !important;
  }
  
  .progress-td {
      padding: 20px !important;
      border: none !important;
      background: transparent;
  }
  
  /* Conteneur principal de la barre */
  .training-progress-container {
      width: 100%;
      padding: 20px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      border: 1px solid rgba(203, 213, 225, 0.5);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
  }
  
  .training-progress-container:hover {
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
  }
  
  /* En-tête avec label et statistiques */
  .progress-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      padding: 0;
  }
  
  .progress-label {
      font-weight: 600;
      color: #334155;
      font-size: 16px;
      letter-spacing: -0.025em;
  }
  
  .progress-stats {
      font-size: 14px;
      color: #64748b;
      font-weight: 500;
      background: rgba(148, 163, 184, 0.15);
      padding: 6px 12px;
      border-radius: 20px;
      border: 1px solid rgba(203, 213, 225, 0.3);
  }
  
  /* Conteneur de la barre de progression */
  .progress-bar-container {
      position: relative;
      width: 100%;
      height: 12px;
      margin: 4px 0;
  }
  
  /* Arrière-plan de la barre */
  .progress-bar-background {
      width: 100%;
      height: 100%;
      background: #e2e8f0;
      border-radius: 6px;
      position: relative;
      overflow: hidden;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  /* Barre de progression active - Style par défaut */
  .progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%);
      border-radius: 6px;
      position: relative;
      min-width: 0;
      max-width: 100%;
      transition: all 1.2s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 0 12px rgba(59, 130, 246, 0.4);
      
      /* Animation de brillance simple */
      background-size: 200% 100%;
      animation: simpleShine 3s ease-in-out infinite;
  }
  
  /* Animation de brillance simple qui fonctionne sur Roll20 */
  @keyframes simpleShine {
      0%, 100% { 
          background-position: 0% 50%;
      }
      50% { 
          background-position: 100% 50%;
      }
  }
  
  /* Texte de pourcentage */
  .progress-bar-text {
      position: absolute;
      top: -32px;
      right: 0;
      font-size: 12px;
      font-weight: 600;
      color: #475569;
      background: rgba(255, 255, 255, 0.95);
      padding: 4px 8px;
      border-radius: 8px;
      border: 1px solid rgba(203, 213, 225, 0.3);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  }
  
  /* ===== MÉTHODE ALTERNATIVE AVEC ATTRIBUTS CACHÉS ===== */
  
  /* On utilise l'attribut caché progress_bar_width pour déterminer le style */
  
  /* 0% - Gris */
  input[name*="progress_bar_width"][value="0"] ~ .progress-bar-container .progress-bar-fill {
      background: #cbd5e1;
      width: 0%;
      box-shadow: none;
      animation: none;
  }
  
  /* 1-20% - Rouge */
  input[name*="progress_bar_width"][value="1"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="2"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="3"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="4"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="5"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="6"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="7"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="8"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="9"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="10"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="11"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="12"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="13"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="14"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="15"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="16"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="17"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="18"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="19"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="20"] ~ .progress-bar-container .progress-bar-fill {
      background: linear-gradient(90deg, #ef4444 0%, #dc2626 100%);
      box-shadow: 0 0 12px rgba(239, 68, 68, 0.4);
  }
  
  /* 21-50% - Orange */
  input[name*="progress_bar_width"][value="21"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="22"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="23"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="24"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="25"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="26"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="27"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="28"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="29"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="30"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="31"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="32"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="33"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="34"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="35"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="36"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="37"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="38"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="39"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="40"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="41"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="42"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="43"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="44"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="45"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="46"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="47"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="48"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="49"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="50"] ~ .progress-bar-container .progress-bar-fill {
      background: linear-gradient(90deg, #f59e0b 0%, #d97706 100%);
      box-shadow: 0 0 12px rgba(245, 158, 11, 0.4);
  }
  
  /* 81-99% - Vert avec pulsation */
  input[name*="progress_bar_width"][value="81"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="82"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="83"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="84"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="85"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="86"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="87"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="88"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="89"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="90"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="91"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="92"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="93"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="94"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="95"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="96"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="97"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="98"] ~ .progress-bar-container .progress-bar-fill,
  input[name*="progress_bar_width"][value="99"] ~ .progress-bar-container .progress-bar-fill {
      background: linear-gradient(90deg, #10b981 0%, #059669 100%);
      box-shadow: 0 0 15px rgba(16, 185, 129, 0.5);
      animation: simpleShine 3s ease-in-out infinite, almostComplete 2s ease-in-out infinite;
  }
  
  @keyframes almostComplete {
      0%, 100% { 
          box-shadow: 0 0 15px rgba(16, 185, 129, 0.5);
      }
      50% { 
          box-shadow: 0 0 20px rgba(16, 185, 129, 0.7);
      }
  }
  
  /* 100% - Doré avec animation spéciale */
  input[name*="progress_bar_width"][value="100"] ~ .progress-bar-container .progress-bar-fill {
      background: linear-gradient(90deg, #f59e0b 0%, #d97706 50%, #f59e0b 100%);
      background-size: 200% 100%;
      box-shadow: 0 0 20px rgba(245, 158, 11, 0.6);
      animation: completeGlow 2s ease-in-out infinite;
  }
  
  @keyframes completeGlow {
      0%, 100% { 
          background-position: 0% 50%;
          box-shadow: 0 0 20px rgba(245, 158, 11, 0.6);
      }
      50% { 
          background-position: 100% 50%;
          box-shadow: 0 0 25px rgba(245, 158, 11, 0.8);
      }
  }
  
  /* Responsive */
  @media (max-width: 768px) {
      .training-progress-container {
          padding: 16px;
      }
      
      .progress-header {
          flex-direction: column;
          gap: 8px;
          text-align: center;
      }
      
      .progress-label {
          font-size: 14px;
      }
      
      .progress-stats {
          font-size: 12px;
      }
      
      .progress-bar-container {
          height: 10px;
      }
      
      .progress-bar-text {
          font-size: 11px;
          top: -30px;
      }
  }
  
  /* Animation d'entrée */
  .training-progress-container {
      animation: fadeInUp 0.6s ease-out;
  }
  
  @keyframes fadeInUp {
      from {
          opacity: 0;
          transform: translateY(20px);
      }
      to {
          opacity: 1;
          transform: translateY(0);
      }
  }
  /* Refonte complète - Style Fantasy Moderne */
  * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
  }
  
  .sheet-id-wrapper {
      background: 
          radial-gradient(ellipse at top, rgba(218, 165, 32, 0.1), transparent),
          linear-gradient(135deg, #faf7f0 0%, #f0e6d2 50%, #e8dcc0 100%);
      border: none;
      border-radius: 20px;
      padding: 25px;
      margin: 0;
      position: relative;
      font-family: 'Cinzel', 'Palatino', 'Georgia', serif;
      width: fit-content;
      max-width: 100%;
      overflow: hidden;
      box-shadow: 
          0 8px 32px rgba(139, 69, 19, 0.15),
          0 2px 8px rgba(139, 69, 19, 0.1),
          inset 0 1px 0 rgba(255, 255, 255, 0.8);
  }
  
  .sheet-id-wrapper::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
          repeating-linear-gradient(
              90deg,
              transparent,
              transparent 2px,
              rgba(139, 69, 19, 0.03) 2px,
              rgba(139, 69, 19, 0.03) 3px
          ),
          repeating-linear-gradient(
              0deg,
              transparent,
              transparent 2px,
              rgba(139, 69, 19, 0.03) 2px,
              rgba(139, 69, 19, 0.03) 3px
          );
      pointer-events: none;
      border-radius: 20px;
  }
  
  .section-wrapper {
      background: rgba(255, 255, 255, 0.6);
      border-radius: 15px;
      padding: 0;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(139, 69, 19, 0.2);
      box-shadow: 
          0 4px 20px rgba(139, 69, 19, 0.08),
          inset 0 1px 0 rgba(255, 255, 255, 0.9);
  }
  
  .sheet-id-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      color: #2c1810;
      font-size: 14px;
      border-radius: 15px;
      overflow: hidden;
  }
  
  .sheet-id-table thead tr {
      background: linear-gradient(135deg, #8b4513 0%, #a0522d 50%, #cd853f 100%);
  }
  
  .sheet-id-table th {
      color: #fff8dc;
      padding: 16px 12px;
      text-align: center;
      font-weight: 600;
      font-size: 13px;
      position: relative;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
      border-right: 1px solid rgba(255, 248, 220, 0.2);
      transition: all 0.3s ease;
  }
  
  .sheet-id-table th:last-child {
      border-right: none;
  }
  
  .neant-header {
      background: linear-gradient(135deg, #4a0e0e 0%, #2c1810 50%, #1a0a0a 100%) !important;
      color: #ffcccb !important;
  }
  
  .sheet-id-table tbody tr {
      background: rgba(255, 255, 255, 0.8);
      transition: all 0.3s ease;
  }
  
  .sheet-id-table tbody tr:hover {
      background: rgba(255, 255, 255, 0.95);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(139, 69, 19, 0.1);
  }
  
  .sheet-id-table td {
      padding: 14px 12px;
      vertical-align: middle;
      border-right: 1px solid rgba(139, 69, 19, 0.1);
      position: relative;
  }
  
  .sheet-id-table td:last-child {
      border-right: none;
  }
  
  .class-row td {
      border-bottom: 2px solid rgba(139, 69, 19, 0.1);
  }
  
  .info-row td {
      padding: 16px 12px;
      background: rgba(248, 244, 235, 0.9);
  }
  
  .class-primary {
      border-left: 4px solid #d4af37;
      background: linear-gradient(90deg, rgba(212, 175, 55, 0.1), transparent);
  }
  
  .class-secondary {
      border-left: 4px solid #cd7f32;
      background: linear-gradient(90deg, rgba(205, 127, 50, 0.1), transparent);
  }
  
  .neant-cell {
      background: linear-gradient(90deg, rgba(74, 14, 14, 0.1), transparent) !important;
      border-left: 4px solid #8b0000 !important;
  }
  
  .sheet-id-table input[type="text"],
  .sheet-id-table input[type="number"] {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid transparent;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.9);
      color: #2c1810;
      font-family: 'Georgia', serif;
      font-size: 13px;
      font-weight: 500;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 
          0 2px 4px rgba(139, 69, 19, 0.1),
          inset 0 1px 2px rgba(0, 0, 0, 0.05);
  }
  
  .sheet-id-table input[type="text"]:focus,
  .sheet-id-table input[type="number"]:focus {
      outline: none;
      border-color: #d4af37;
      background: #ffffff;
      box-shadow: 
          0 4px 12px rgba(212, 175, 55, 0.2),
          inset 0 1px 2px rgba(0, 0, 0, 0.05);
      transform: translateY(-1px);
  }
  
  .neant-cell input {
      background: rgba(26, 10, 10, 0.9) !important;
      color: #ff9999 !important;
      border-color: transparent !important;
  }
  
  .neant-cell input:focus {
      border-color: #ff4444 !important;
      background: rgba(26, 10, 10, 1) !important;
      box-shadow: 
          0 4px 12px rgba(255, 68, 68, 0.3),
          inset 0 1px 2px rgba(0, 0, 0, 0.3) !important;
  }
  
  .info-row label {
      font-weight: 700;
      color: #8b4513;
      margin-right: 10px;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 0 1px 2px rgba(255, 255, 255, 0.7);
  }
  
  /* Effets et animations */
  .sheet-id-table th:hover {
      background: linear-gradient(135deg, #a0522d 0%, #cd853f 50%, #daa520 100%);
      transform: translateY(-1px);
  }
  
  .sheet-id-table input::placeholder {
      color: #a0886d;
      font-style: italic;
      opacity: 0.8;
  }
  
  /* Style responsive */
  @media (max-width: 768px) {
      .sheet-id-wrapper {
          padding: 15px;
          border-radius: 15px;
      }
      
      .sheet-id-table th,
      .sheet-id-table td {
          padding: 10px 8px;
          font-size: 12px;
      }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === ROLL TEMPLATE TEST DE CARACTÉRISTIQUE === */
  
  .sheet-rolltemplate-carac-test {
    background: linear-gradient(145deg, #4a3728 0%, #3d2914 25%, #2c1e0f 50%, #3d2914 75%, #4a3728 100%);
    border: 4px solid #8b6914;
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.8);
    margin: 12px auto;
    overflow: hidden;
    font-family: 'Cinzel', 'Times New Roman', serif;
    max-width: 420px;
    color: #f4e6b7;
    text-align: center;
    position: relative;
  }
  
  .sheet-rolltemplate-carac-test .sheet-carac-template {
    padding: 0;
    text-align: center;
  }
  
  /* === TITRE PRINCIPAL === */
  .sheet-rolltemplate-carac-test h3 {
    background: linear-gradient(145deg, #8b6914 0%, #b8860b 25%, #daa520 50%, #b8860b 75%, #8b6914 100%);
    color: #2c1e0f;
    padding: 15px 20px;
    margin: 0;
    text-align: center;
    font-weight: bold;
    font-size: 18px;
    text-transform: uppercase;
    letter-spacing: 2px;
    text-shadow: 1px 1px 0 rgba(244,230,183,0.8), 2px 2px 4px rgba(0,0,0,0.6);
    border-bottom: 3px solid #654321;
    border-radius: 16px 16px 0 0;
    font-family: 'Cinzel', 'Times New Roman', serif;
  }
  
  /* === SÉPARATEUR === */
  .sheet-rolltemplate-carac-test hr {
    display: none;
  }
  
  /* === CONTENU === */
  .sheet-rolltemplate-carac-test .sheet-carac-template {
    padding: 20px;
  }
  
  /* === PARAGRAPHES DE BASE === */
  .sheet-rolltemplate-carac-test p {
    background: linear-gradient(145deg, rgba(139,69,19,0.3), rgba(101,67,33,0.2), rgba(74,55,40,0.3));
    border: 2px solid #8b4513;
    border-radius: 12px;
    padding: 12px 15px;
    margin: 12px 0;
    color: #f4e6b7;
    font-weight: bold;
    font-size: 14px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    box-shadow: 0 3px 6px rgba(0,0,0,0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }
  
  .sheet-rolltemplate-carac-test p strong {
    color: #daa520;
    text-shadow: 1px 1px 0 rgba(244,230,183,0.8), 2px 2px 4px rgba(0,0,0,0.6);
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-family: 'Georgia', serif; /* POLICE DIFFÉRENTE POUR LES LABELS */
  }
  
  /* === RÉSULTATS DES DÉS === */
  .sheet-rolltemplate-carac-test .inlinerollresult {
    background: linear-gradient(145deg, #daa520 0%, #b8860b 25%, #8b6914 50%, #6b4f10 75%, #8b6914 100%) !important;
    border: 3px solid #654321 !important;
    border-radius: 8px !important;
    padding: 4px 10px !important; /* PADDING LÉGÈREMENT ÉLARGI */
    color: #f5f5dc !important;
    font-weight: 900 !important;
    font-size: 16px !important;
    text-shadow: 2px 2px 0 rgba(44,30,15,0.9), -1px -1px 0 rgba(44,30,15,0.7), 0 0 8px rgba(245,245,220,0.8) !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.3) !important;
    font-family: 'Courier New', monospace !important;
    margin: 0 3px !important; /* MARGE LÉGÈREMENT AUGMENTÉE */
    display: inline-block !important;
    min-width: 50px !important; /* LARGEUR MINIMALE AUGMENTÉE */
    text-align: center !important;
  }
  
  /* === RÉUSSITE DE LA DESTINÉE (100) === */
  .sheet-rolltemplate-carac-test .sheet-crit-success {
    background: linear-gradient(145deg, #ffd700 0%, #ffed4e 30%, #fff700 50%, #ffed4e 70%, #ffd700 100%) !important;
    border: 4px solid #ff6347 !important;
    color: #8b0000 !important;
    font-size: 18px !important;
    font-weight: 900 !important;
    text-shadow: 2px 2px 0 rgba(255,255,255,0.9), -1px -1px 0 rgba(0,0,0,0.8), 0 0 20px rgba(255,215,0,1) !important;
    box-shadow: 0 6px 20px rgba(255,215,0,0.8), inset 0 2px 0 rgba(255,255,255,0.6), 0 0 30px rgba(255,215,0,0.6) !important;
    animation: destiny-glow 2s ease-in-out infinite alternate !important;
    transform: scale(1.05) !important;
    border-style: double !important;
  }
  
  @keyframes destiny-glow {
    0% {
      box-shadow: 0 6px 20px rgba(255,215,0,0.8), inset 0 2px 0 rgba(255,255,255,0.6), 0 0 30px rgba(255,215,0,0.6);
      text-shadow: 2px 2px 0 rgba(255,255,255,0.9), -1px -1px 0 rgba(0,0,0,0.8), 0 0 20px rgba(255,215,0,1);
    }
    50% {
      box-shadow: 0 8px 30px rgba(255,215,0,1), inset 0 3px 0 rgba(255,255,255,0.8), 0 0 40px rgba(255,215,0,0.9);
      text-shadow: 2px 2px 0 rgba(255,255,255,1), -1px -1px 0 rgba(0,0,0,0.8), 0 0 30px rgba(255,215,0,1), 0 0 10px rgba(255,255,255,0.8);
    }
    100% {
      box-shadow: 0 10px 40px rgba(255,215,0,1.2), inset 0 4px 0 rgba(255,255,255,1), 0 0 50px rgba(255,215,0,1.2);
      text-shadow: 3px 3px 0 rgba(255,255,255,1), -2px -2px 0 rgba(0,0,0,0.8), 0 0 40px rgba(255,215,0,1.2), 0 0 15px rgba(255,255,255,1);
    }
  }
  
  /* === RÉUSSITE CRITIQUE (95-99) === */
  .sheet-rolltemplate-carac-test .sheet-crit-success:not(:first-of-type) {
    background: linear-gradient(145deg, #00ff00 0%, #32cd32 30%, #00ff7f 50%, #32cd32 70%, #00ff00 100%) !important;
    border: 4px solid #228b22 !important;
    color: #000000 !important;
    font-size: 17px !important;
    font-weight: 800 !important;
    text-shadow: 2px 2px 0 rgba(255,255,255,0.9), -1px -1px 0 rgba(0,0,0,0.8), 0 0 15px rgba(0,255,0,0.8) !important;
    box-shadow: 0 5px 15px rgba(0,255,0,0.7), inset 0 2px 0 rgba(255,255,255,0.5), 0 0 25px rgba(0,255,0,0.5) !important;
    animation: critical-success-pulse 1.8s ease-in-out infinite alternate !important;
    transform: scale(1.03) !important;
  }
  
  @keyframes critical-success-pulse {
    from {
      box-shadow: 0 5px 15px rgba(0,255,0,0.7), inset 0 2px 0 rgba(255,255,255,0.5), 0 0 25px rgba(0,255,0,0.5);
    }
    to {
      box-shadow: 0 7px 25px rgba(0,255,0,1), inset 0 3px 0 rgba(255,255,255,0.7), 0 0 35px rgba(0,255,0,0.8);
    }
  }
  
  /* === RÉUSSITE NORMALE === */
  .sheet-rolltemplate-carac-test .sheet-success {
    background: linear-gradient(145deg, #228b22 0%, #32cd32 50%, #00c851 100%) !important;
    border: 3px solid #1e8449 !important;
    color: #ffffff !important;
    font-size: 16px !important;
    font-weight: bold !important;
    text-shadow: 1px 1px 0 rgba(0,0,0,0.8), 2px 2px 4px rgba(0,0,0,0.9), 0 0 8px rgba(255,255,255,0.6) !important;
    box-shadow: 0 4px 12px rgba(34,139,34,0.7), inset 0 1px 0 rgba(255,255,255,0.3) !important;
  }
  
  /* === ÉCHEC DE LA FATALITÉ (1) === */
  .sheet-rolltemplate-carac-test .sheet-crit-fail {
    background: linear-gradient(145deg, #000000 0%, #1a0000 30%, #000000 50%, #1a0000 70%, #000000 100%) !important;
    border: 4px solid #8b008b !important;
    color: #dc143c !important;
    font-size: 18px !important;
    font-weight: 900 !important;
    text-shadow: 2px 2px 0 rgba(139,0,139,0.8), -1px -1px 0 rgba(0,0,0,1), 0 0 20px rgba(220,20,60,1) !important;
    box-shadow: 0 6px 20px rgba(139,0,139,0.8), inset 0 2px 0 rgba(139,0,139,0.3), 0 0 30px rgba(220,20,60,0.6) !important;
    animation: fatality-pulse 2.5s ease-in-out infinite alternate !important;
    transform: scale(1.05) !important;
    border-style: double !important;
  }
  
  @keyframes fatality-pulse {
    0% {
      box-shadow: 0 6px 20px rgba(139,0,139,0.8), inset 0 2px 0 rgba(139,0,139,0.3), 0 0 30px rgba(220,20,60,0.6);
      text-shadow: 2px 2px 0 rgba(139,0,139,0.8), -1px -1px 0 rgba(0,0,0,1), 0 0 20px rgba(220,20,60,1);
    }
    50% {
      box-shadow: 0 8px 30px rgba(139,0,139,1), inset 0 3px 0 rgba(139,0,139,0.5), 0 0 40px rgba(220,20,60,0.9);
      text-shadow: 2px 2px 0 rgba(139,0,139,1), -1px -1px 0 rgba(0,0,0,1), 0 0 30px rgba(220,20,60,1), 0 0 10px rgba(139,0,139,0.8);
    }
    100% {
      box-shadow: 0 10px 40px rgba(139,0,139,1.2), inset 0 4px 0 rgba(139,0,139,0.7), 0 0 50px rgba(220,20,60,1.2);
      text-shadow: 3px 3px 0 rgba(139,0,139,1), -2px -2px 0 rgba(0,0,0,1), 0 0 40px rgba(220,20,60,1.2), 0 0 15px rgba(139,0,139,1);
    }
  }
  
  /* === ÉCHEC CRITIQUE (2-5) === */
  .sheet-rolltemplate-carac-test .sheet-crit-fail:not(:first-of-type) {
    background: linear-gradient(145deg, #8b0000 0%, #a52a2a 30%, #dc143c 50%, #a52a2a 70%, #8b0000 100%) !important;
    border: 4px solid #660000 !important;
    color: #ffffff !important;
    font-size: 17px !important;
    font-weight: 800 !important;
    text-shadow: 2px 2px 0 rgba(0,0,0,0.9), -1px -1px 0 rgba(139,0,0,0.8), 0 0 15px rgba(255,255,255,0.8) !important;
    box-shadow: 0 5px 15px rgba(139,0,0,0.8), inset 0 2px 0 rgba(255,107,107,0.3), 0 0 25px rgba(139,0,0,0.6) !important;
    animation: critical-fail-pulse 2s ease-in-out infinite alternate !important;
    transform: scale(1.03) !important;
  }
  
  @keyframes critical-fail-pulse {
    from {
      box-shadow: 0 5px 15px rgba(139,0,0,0.8), inset 0 2px 0 rgba(255,107,107,0.3), 0 0 25px rgba(139,0,0,0.6);
    }
    to {
      box-shadow: 0 7px 25px rgba(139,0,0,1), inset 0 3px 0 rgba(255,107,107,0.5), 0 0 35px rgba(139,0,0,0.9);
    }
  }
  
  /* === ÉCHEC NORMAL === */
  .sheet-rolltemplate-carac-test .sheet-fail {
    background: linear-gradient(145deg, #c0392b 0%, #e74c3c 50%, #ec7063 100%) !important;
    border: 3px solid #a93226 !important;
    color: #ffffff !important;
    font-size: 16px !important;
    font-weight: bold !important;
    text-shadow: 1px 1px 0 rgba(0,0,0,0.8), 2px 2px 4px rgba(0,0,0,0.9), 0 0 8px rgba(255,255,255,0.6) !important;
    box-shadow: 0 4px 12px rgba(192,57,43,0.7), inset 0 1px 0 rgba(255,107,107,0.2) !important;
  }
  
  /* === CENTRAGE ET ALIGNEMENT === */
  .sheet-rolltemplate-carac-test,
  .sheet-rolltemplate-carac-test * {
    text-align: center !important;
  }
  
  .sheet-rolltemplate-carac-test {
    margin-left: auto !important;
    margin-right: auto !important;
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .sheet-rolltemplate-carac-test {
      max-width: 95%;
      margin: 8px auto;
    }
    
    .sheet-rolltemplate-carac-test h3 {
      font-size: 16px;
      padding: 12px 16px;
      letter-spacing: 1px;
    }
    
    .sheet-rolltemplate-carac-test p {
      padding: 10px 12px;
      font-size: 13px;
    }
    
    .sheet-rolltemplate-carac-test .inlinerollresult {
      font-size: 14px !important;
      padding: 4px 8px !important;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === ROLL TEMPLATE TEST DE TRAIT === */
  
  .sheet-rolltemplate-trait-test {
    background: linear-gradient(145deg, #4a3728 0%, #3d2914 25%, #2c1e0f 50%, #3d2914 75%, #4a3728 100%);
    border: 4px solid #8b6914;
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.8);
    margin: 12px auto;
    overflow: hidden;
    font-family: 'Cinzel', 'Times New Roman', serif;
    max-width: 420px;
    color: #f4e6b7;
    text-align: center;
    position: relative;
  }
  
  .sheet-rolltemplate-trait-test .sheet-trait-template {
    padding: 0;
    text-align: center;
  }
  
  /* === TITRE PRINCIPAL === */
  .sheet-rolltemplate-trait-test h3 {
    background: linear-gradient(145deg, #8b6914 0%, #b8860b 25%, #daa520 50%, #b8860b 75%, #8b6914 100%);
    color: #2c1e0f;
    padding: 15px 20px;
    margin: 0;
    text-align: center;
    font-weight: bold;
    font-size: 18px;
    text-transform: uppercase;
    letter-spacing: 2px;
    text-shadow: 1px 1px 0 rgba(244,230,183,0.8), 2px 2px 4px rgba(0,0,0,0.6);
    border-bottom: 3px solid #654321;
    border-radius: 16px 16px 0 0;
    font-family: 'Cinzel', 'Times New Roman', serif;
  }
  
  /* === SÉPARATEUR === */
  .sheet-rolltemplate-trait-test hr {
    display: none;
  }
  
  /* === CONTENU === */
  .sheet-rolltemplate-trait-test .sheet-trait-template {
    padding: 20px;
  }
  
  /* === PARAGRAPHES DE BASE === */
  .sheet-rolltemplate-trait-test p {
    background: linear-gradient(145deg, rgba(139,69,19,0.3), rgba(101,67,33,0.2), rgba(74,55,40,0.3));
    border: 2px solid #8b4513;
    border-radius: 12px;
    padding: 12px 15px;
    margin: 12px 0;
    color: #f4e6b7;
    font-weight: bold;
    font-size: 14px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    box-shadow: 0 3px 6px rgba(0,0,0,0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }
  
  .sheet-rolltemplate-trait-test p strong {
    color: #daa520;
    text-shadow: 1px 1px 0 rgba(244,230,183,0.8), 2px 2px 4px rgba(0,0,0,0.6);
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-family: 'Georgia', serif; /* POLICE DIFFÉRENTE POUR LES LABELS */
  }
  
  /* === RÉSULTATS DES DÉS === */
  .sheet-rolltemplate-trait-test .inlinerollresult {
    background: linear-gradient(145deg, #daa520 0%, #b8860b 25%, #8b6914 50%, #6b4f10 75%, #8b6914 100%) !important;
    border: 3px solid #654321 !important;
    border-radius: 8px !important;
    padding: 4px 10px !important;
    color: #f5f5dc !important;
    font-weight: 900 !important;
    font-size: 16px !important;
    text-shadow: 2px 2px 0 rgba(44,30,15,0.9), -1px -1px 0 rgba(44,30,15,0.7), 0 0 8px rgba(245,245,220,0.8) !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.3) !important;
    font-family: 'Courier New', monospace !important;
    margin: 0 3px !important;
    display: inline-block !important;
    min-width: 50px !important;
    text-align: center !important;
  }
  
  /* === RÉUSSITE CRITIQUE (JET = 1) === */
  .sheet-rolltemplate-trait-test .sheet-crit-success {
    background: linear-gradient(145deg, #ffd700 0%, #ffed4e 30%, #fff700 50%, #ffed4e 70%, #ffd700 100%) !important;
    border: 4px solid #ff6347 !important;
    color: #2c1e0f !important; /* TEXTE BRUN FONCÉ POUR CONTRASTE */
    font-size: 18px !important;
    font-weight: 900 !important;
    text-shadow: 1px 1px 0 rgba(244,230,183,0.8), 2px 2px 4px rgba(0,0,0,0.6) !important; /* OMBRE CLASSIQUE */
    box-shadow: 0 6px 20px rgba(255,215,0,0.8), inset 0 2px 0 rgba(255,255,255,0.6), 0 0 30px rgba(255,215,0,0.6) !important;
    animation: trait-crit-success-glow 2s ease-in-out infinite alternate !important;
    transform: scale(1.05) !important;
    border-style: double !important;
  }
  
  @keyframes trait-crit-success-glow {
    0% {
      box-shadow: 0 6px 20px rgba(255,215,0,0.8), inset 0 2px 0 rgba(255,255,255,0.6), 0 0 30px rgba(255,215,0,0.6);
    }
    50% {
      box-shadow: 0 8px 30px rgba(255,215,0,1), inset 0 3px 0 rgba(255,255,255,0.8), 0 0 40px rgba(255,215,0,0.9);
    }
    100% {
      box-shadow: 0 10px 40px rgba(255,215,0,1.2), inset 0 4px 0 rgba(255,255,255,1), 0 0 50px rgba(255,215,0,1.2);
    }
  }
  
  /* === RÉUSSITE NORMALE === */
  .sheet-rolltemplate-trait-test .sheet-success {
    background: linear-gradient(145deg, #228b22 0%, #32cd32 50%, #00c851 100%) !important;
    border: 3px solid #1e8449 !important;
    color: #ffffff !important;
    font-size: 16px !important;
    font-weight: bold !important;
    text-shadow: 1px 1px 0 rgba(0,0,0,0.8), 2px 2px 4px rgba(0,0,0,0.9), 0 0 8px rgba(255,255,255,0.6) !important;
    box-shadow: 0 4px 12px rgba(34,139,34,0.7), inset 0 1px 0 rgba(255,255,255,0.3) !important;
  }
  
  /* === ÉCHEC CRITIQUE (JET = MAX DU DÉ) === */
  .sheet-rolltemplate-trait-test .sheet-crit-fail {
    background: linear-gradient(145deg, #000000 0%, #1a0000 30%, #000000 50%, #1a0000 70%, #000000 100%) !important;
    border: 4px solid #8b008b !important;
    color: #dc143c !important;
    font-size: 18px !important;
    font-weight: 900 !important;
    text-shadow: 2px 2px 0 rgba(139,0,139,0.8), -1px -1px 0 rgba(0,0,0,1), 0 0 20px rgba(220,20,60,1) !important;
    box-shadow: 0 6px 20px rgba(139,0,139,0.8), inset 0 2px 0 rgba(139,0,139,0.3), 0 0 30px rgba(220,20,60,0.6) !important;
    animation: trait-crit-fail-pulse 2.5s ease-in-out infinite alternate !important;
    transform: scale(1.05) !important;
    border-style: double !important;
  }
  
  @keyframes trait-crit-fail-pulse {
    0% {
      box-shadow: 0 6px 20px rgba(139,0,139,0.8), inset 0 2px 0 rgba(139,0,139,0.3), 0 0 30px rgba(220,20,60,0.6);
      text-shadow: 2px 2px 0 rgba(139,0,139,0.8), -1px -1px 0 rgba(0,0,0,1), 0 0 20px rgba(220,20,60,1);
    }
    50% {
      box-shadow: 0 8px 30px rgba(139,0,139,1), inset 0 3px 0 rgba(139,0,139,0.5), 0 0 40px rgba(220,20,60,0.9);
      text-shadow: 2px 2px 0 rgba(139,0,139,1), -1px -1px 0 rgba(0,0,0,1), 0 0 30px rgba(220,20,60,1), 0 0 10px rgba(139,0,139,0.8);
    }
    100% {
      box-shadow: 0 10px 40px rgba(139,0,139,1.2), inset 0 4px 0 rgba(139,0,139,0.7), 0 0 50px rgba(220,20,60,1.2);
      text-shadow: 3px 3px 0 rgba(139,0,139,1), -2px -2px 0 rgba(0,0,0,1), 0 0 40px rgba(220,20,60,1.2), 0 0 15px rgba(139,0,139,1);
    }
  }
  
  /* === ÉCHEC NORMAL === */
  .sheet-rolltemplate-trait-test .sheet-fail {
    background: linear-gradient(145deg, #c0392b 0%, #e74c3c 50%, #ec7063 100%) !important;
    border: 3px solid #a93226 !important;
    color: #ffffff !important;
    font-size: 16px !important;
    font-weight: bold !important;
    text-shadow: 1px 1px 0 rgba(0,0,0,0.8), 2px 2px 4px rgba(0,0,0,0.9), 0 0 8px rgba(255,255,255,0.6) !important;
    box-shadow: 0 4px 12px rgba(192,57,43,0.7), inset 0 1px 0 rgba(255,107,107,0.2) !important;
  }
  
  /* === CENTRAGE ET ALIGNEMENT === */
  .sheet-rolltemplate-trait-test,
  .sheet-rolltemplate-trait-test * {
    text-align: center !important;
  }
  
  .sheet-rolltemplate-trait-test {
    margin-left: auto !important;
    margin-right: auto !important;
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .sheet-rolltemplate-trait-test {
      max-width: 95%;
      margin: 8px auto;
    }
    
    .sheet-rolltemplate-trait-test h3 {
      font-size: 16px;
      padding: 12px 16px;
      letter-spacing: 1px;
    }
    
    .sheet-rolltemplate-trait-test p {
      padding: 10px 12px;
      font-size: 13px;
    }
    
    .sheet-rolltemplate-trait-test .inlinerollresult {
      font-size: 14px !important;
      padding: 4px 8px !important;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === ROLL TEMPLATE INITIATIVE AVEC ANIMATIONS === */
  
  .sheet-rolltemplate-macro-initiative {
    background: linear-gradient(145deg, #4a3728 0%, #3d2914 25%, #2c1e0f 50%, #3d2914 75%, #4a3728 100%);
    border: 4px solid #8b6914;
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.8), inset 0 1px 0 rgba(244,230,183,0.2);
    margin: 12px auto;
    overflow: hidden;
    font-family: 'Cinzel', 'Times New Roman', serif;
    max-width: 380px;
    color: #f4e6b7;
    text-align: center;
    position: relative;
    /* ANIMATIONS PRINCIPALES */
    animation: initiative-template-appear 0.6s ease-out, initiative-template-pulse 3s ease-in-out infinite;
    transition: transform 0.2s ease;
  }
  
  /* EFFET HOVER */
  .sheet-rolltemplate-macro-initiative:hover {
    transform: scale(1.02);
    box-shadow: 0 12px 30px rgba(0,0,0,0.9), inset 0 1px 0 rgba(244,230,183,0.4), 0 0 20px rgba(139,105,20,0.4);
  }
  
  /* === HEADER INITIATIVE === */
  .sheet-rolltemplate-macro-initiative .sheet-initiative-header {
    padding: 0;
    margin: 0;
  }
  
  .sheet-rolltemplate-macro-initiative .sheet-initiative-header h3 {
    background: linear-gradient(145deg, #8b6914 0%, #b8860b 25%, #daa520 50%, #b8860b 75%, #8b6914 100%);
    color: #2c1e0f;
    padding: 15px 20px;
    margin: 0;
    text-align: center;
    font-weight: bold;
    font-size: 18px;
    text-transform: uppercase;
    letter-spacing: 2px;
    text-shadow: 1px 1px 0 rgba(244,230,183,0.8), 2px 2px 4px rgba(0,0,0,0.6);
    border-bottom: 3px solid #654321;
    border-radius: 16px 16px 0 0;
    font-family: 'Cinzel', 'Times New Roman', serif;
    position: relative;
  }
  
  /* === ICONE INITIATIVE ANIMÉE === */
  .sheet-rolltemplate-macro-initiative .sheet-initiative-header h3::before {
    content: "⚡";
    font-size: 20px;
    margin-right: 8px;
    text-shadow: 0 0 10px rgba(255,215,0,0.8);
    display: inline-block;
    animation: lightning-bounce 2s ease-in-out infinite;
  }
  
  /* === CONTENU PRINCIPAL === */
  .sheet-rolltemplate-macro-initiative .sheet-initiative-content {
    padding: 20px;
    background: linear-gradient(145deg, rgba(139,69,19,0.2), rgba(101,67,33,0.1), rgba(74,55,40,0.2));
  }
  
  /* === RÉSULTAT ANIMÉ === */
  .sheet-rolltemplate-macro-initiative .sheet-jet-result {
    background: linear-gradient(145deg, rgba(139,69,19,0.4), rgba(101,67,33,0.3), rgba(74,55,40,0.4));
    border: 2px solid #8b4513;
    border-radius: 12px;
    padding: 15px 20px;
    margin: 0;
    color: #f4e6b7;
    font-weight: bold;
    font-size: 16px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    box-shadow: 0 3px 6px rgba(0,0,0,0.4), inset 0 1px 0 rgba(244,230,183,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    /* ANIMATION DU RÉSULTAT */
    animation: result-slide-up 0.5s ease-out 0.3s both;
  }
  
  .sheet-rolltemplate-macro-initiative .sheet-jet-result strong {
    color: #daa520;
    text-shadow: 1px 1px 0 rgba(244,230,183,0.8), 2px 2px 4px rgba(0,0,0,0.6);
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-family: 'Georgia', serif;
    margin-right: 5px;
  }
  
  /* === RÉSULTATS DES DÉS AVEC ANIMATION POP === */
  .sheet-rolltemplate-macro-initiative .inlinerollresult {
    background: linear-gradient(145deg, #daa520 0%, #b8860b 25%, #8b6914 50%, #6b4f10 75%, #8b6914 100%) !important;
    border: 3px solid #654321 !important;
    border-radius: 10px !important;
    padding: 6px 12px !important;
    color: #f5f5dc !important;
    font-weight: 900 !important;
    font-size: 18px !important;
    text-shadow: 2px 2px 0 rgba(44,30,15,0.9), -1px -1px 0 rgba(44,30,15,0.7), 0 0 8px rgba(245,245,220,0.8) !important;
    box-shadow: 0 3px 6px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.3) !important;
    font-family: 'Courier New', monospace !important;
    margin: 0 5px !important;
    display: inline-block !important;
    min-width: 60px !important;
    text-align: center !important;
    position: relative !important;
    /* ANIMATION DES DÉS */
    animation: dice-pop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.4s both !important;
  }
  
  /* === INITIATIVE TRÈS ÉLEVÉE (90+) === */
  .sheet-rolltemplate-macro-initiative .sheet-initiative-high {
    background: linear-gradient(145deg, #ffd700 0%, #ffed4e 30%, #fff700 50%, #ffed4e 70%, #ffd700 100%) !important;
    border: 4px solid #ff6347 !important;
    color: #2c1e0f !important;
    font-size: 20px !important;
    font-weight: 900 !important;
    text-shadow: 1px 1px 0 rgba(244,230,183,0.8), 2px 2px 4px rgba(0,0,0,0.6) !important;
    box-shadow: 0 6px 20px rgba(255,215,0,0.8), inset 0 2px 0 rgba(255,255,255,0.6), 0 0 30px rgba(255,215,0,0.6) !important;
    animation: initiative-high-glow 2s ease-in-out infinite alternate, dice-pop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.4s both !important;
    transform: scale(1.05) !important;
    border-style: double !important;
  }
  
  @keyframes initiative-high-glow {
    0% {
      box-shadow: 0 6px 20px rgba(255,215,0,0.8), inset 0 2px 0 rgba(255,255,255,0.6), 0 0 30px rgba(255,215,0,0.6);
    }
    50% {
      box-shadow: 0 8px 30px rgba(255,215,0,1), inset 0 3px 0 rgba(255,255,255,0.8), 0 0 40px rgba(255,215,0,0.9);
    }
    100% {
      box-shadow: 0 10px 40px rgba(255,215,0,1.2), inset 0 4px 0 rgba(255,255,255,1), 0 0 50px rgba(255,215,0,1.2);
    }
  }
  
  /* === INITIATIVE ÉLEVÉE (70-89) === */
  .sheet-rolltemplate-macro-initiative .sheet-initiative-good {
    background: linear-gradient(145deg, #228b22 0%, #32cd32 50%, #00c851 100%) !important;
    border: 3px solid #1e8449 !important;
    color: #ffffff !important;
    font-size: 18px !important;
    font-weight: bold !important;
    text-shadow: 1px 1px 0 rgba(0,0,0,0.8), 2px 2px 4px rgba(0,0,0,0.9), 0 0 8px rgba(255,255,255,0.6) !important;
    box-shadow: 0 4px 12px rgba(34,139,34,0.7), inset 0 1px 0 rgba(255,255,255,0.3) !important;
    animation: dice-pop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.4s both !important;
  }
  
  /* === INITIATIVE FAIBLE (1-30) === */
  .sheet-rolltemplate-macro-initiative .sheet-initiative-low {
    background: linear-gradient(145deg, #c0392b 0%, #e74c3c 50%, #ec7063 100%) !important;
    border: 3px solid #a93226 !important;
    color: #ffffff !important;
    font-size: 18px !important;
    font-weight: bold !important;
    text-shadow: 1px 1px 0 rgba(0,0,0,0.8), 2px 2px 4px rgba(0,0,0,0.9), 0 0 8px rgba(255,255,255,0.6) !important;
    box-shadow: 0 4px 12px rgba(192,57,43,0.7), inset 0 1px 0 rgba(255,107,107,0.2) !important;
    animation: dice-pop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.4s both !important;
  }
  
  /* === INITIATIVE TRÈS FAIBLE (1-10) === */
  .sheet-rolltemplate-macro-initiative .sheet-initiative-critical-low {
    background: linear-gradient(145deg, #000000 0%, #1a0000 30%, #000000 50%, #1a0000 70%, #000000 100%) !important;
    border: 4px solid #8b008b !important;
    color: #dc143c !important;
    font-size: 20px !important;
    font-weight: 900 !important;
    text-shadow: 2px 2px 0 rgba(139,0,139,0.8), -1px -1px 0 rgba(0,0,0,1), 0 0 20px rgba(220,20,60,1) !important;
    box-shadow: 0 6px 20px rgba(139,0,139,0.8), inset 0 2px 0 rgba(139,0,139,0.3), 0 0 30px rgba(220,20,60,0.6) !important;
    animation: initiative-critical-low-pulse 2.5s ease-in-out infinite alternate, dice-pop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.4s both !important;
    transform: scale(1.05) !important;
    border-style: double !important;
  }
  
  @keyframes initiative-critical-low-pulse {
    0% {
      box-shadow: 0 6px 20px rgba(139,0,139,0.8), inset 0 2px 0 rgba(139,0,139,0.3), 0 0 30px rgba(220,20,60,0.6);
      text-shadow: 2px 2px 0 rgba(139,0,139,0.8), -1px -1px 0 rgba(0,0,0,1), 0 0 20px rgba(220,20,60,1);
    }
    50% {
      box-shadow: 0 8px 30px rgba(139,0,139,1), inset 0 3px 0 rgba(139,0,139,0.5), 0 0 40px rgba(220,20,60,0.9);
      text-shadow: 2px 2px 0 rgba(139,0,139,1), -1px -1px 0 rgba(0,0,0,1), 0 0 30px rgba(220,20,60,1), 0 0 10px rgba(139,0,139,0.8);
    }
    100% {
      box-shadow: 0 10px 40px rgba(139,0,139,1.2), inset 0 4px 0 rgba(139,0,139,0.7), 0 0 50px rgba(220,20,60,1.2);
      text-shadow: 3px 3px 0 rgba(139,0,139,1), -2px -2px 0 rgba(0,0,0,1), 0 0 40px rgba(220,20,60,1.2), 0 0 15px rgba(139,0,139,1);
    }
  }
  
  /* === CENTRAGE ET ALIGNEMENT === */
  .sheet-rolltemplate-macro-initiative,
  .sheet-rolltemplate-macro-initiative * {
    text-align: center !important;
  }
  
  .sheet-rolltemplate-macro-initiative {
    margin-left: auto !important;
    margin-right: auto !important;
  }
  
  /* === ANIMATIONS PERSONNALISÉES === */
  
  /* Animation d'apparition du template */
  @keyframes initiative-template-appear {
    0% {
      opacity: 0;
      transform: translateY(-20px) scale(0.9);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  
  /* Pulsation subtile du template */
  @keyframes initiative-template-pulse {
    0%, 100% {
      box-shadow: 0 8px 20px rgba(0,0,0,0.8), inset 0 1px 0 rgba(244,230,183,0.2);
    }
    50% {
      box-shadow: 0 10px 25px rgba(0,0,0,0.9), inset 0 1px 0 rgba(244,230,183,0.3), 0 0 15px rgba(139,105,20,0.3);
    }
  }
  
  /* Animation de l'éclair */
  @keyframes lightning-bounce {
    0%, 20%, 50%, 80%, 100% {
      transform: translateY(0) rotate(0deg);
      text-shadow: 0 0 10px rgba(255,215,0,0.8);
    }
    10% {
      transform: translateY(-3px) rotate(-5deg);
      text-shadow: 0 0 15px rgba(255,215,0,1), 0 0 25px rgba(255,255,0,0.5);
    }
    30% {
      transform: translateY(-2px) rotate(3deg);
      text-shadow: 0 0 12px rgba(255,215,0,0.9), 0 0 20px rgba(255,255,0,0.4);
    }
    60% {
      transform: translateY(-1px) rotate(-2deg);
      text-shadow: 0 0 13px rgba(255,215,0,0.95);
    }
  }
  
  /* Animation du résultat qui glisse */
  @keyframes resu
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === EFFETS DES OBJETS - STRUCTURE EN DEUX COLONNES UNIQUEMENT === */
  
  .sheet-item-effects-grid {
    display: flex;
    gap: 20px;
    width: 100%;
  }
  
  /* COLONNE GAUCHE */
  .sheet-item-column-left {
    flex: 1;
    min-width: 0;
  }
  
  /* COLONNE DROITE */
  .sheet-item-column-right {
    flex: 1;
    min-width: 0;
  }
  
  /* RESPONSIVE POUR PETITS ÉCRANS */
  @media (max-width: 768px) {
    .sheet-item-effects-grid {
      flex-direction: column;
      gap: 15px;
    }
    
    .sheet-item-column-left,
    .sheet-item-column-right {
      width: 100%;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ROLLTEMPLATE - COURSE ACTION */
  .sheet-rolltemplate-course-action {
      background: linear-gradient(145deg, #4a3728 0%, #3d2914 25%, #2c1e0f 50%, #3d2914 75%, #4a3728 100%);
      border: 4px solid #8b6914;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.8);
      margin: 12px auto;
      overflow: hidden;
      font-family: 'Cinzel', 'Times New Roman', serif;
      max-width: 420px;
      color: #f4e6b7;
      text-align: center;
      position: relative;
  }
  
  /* HEADER COURSE */
  .sheet-rolltemplate-course-action .sheet-course-header {
      background: linear-gradient(145deg, #8b6914 0%, #b8860b 25%, #daa520 50%, #b8860b 75%, #8b6914 100%);
      color: #2c1e0f;
      padding: 15px 20px;
      border-bottom: 3px solid #654321;
      border-radius: 16px 16px 0 0;
      position: relative;
      text-align: center;
  }
  
  .sheet-rolltemplate-course-action .sheet-course-header h3 {
      margin: 0;
      font-size: 18px;
      font-weight: bold;
      text-shadow: 1px 1px 0 rgba(244,230,183,0.8), 2px 2px 4px rgba(0,0,0,0.6);
      letter-spacing: 2px;
      text-transform: uppercase;
      font-family: 'Cinzel', 'Times New Roman', serif;
  }
  
  /* CONTENU COURSE */
  .sheet-rolltemplate-course-action .sheet-course-content {
      padding: 20px;
      background: transparent;
  }
  
  /* RÉSULTAT MOUVEMENT */
  .sheet-rolltemplate-course-action .sheet-course-result {
      background: linear-gradient(145deg, rgba(139,69,19,0.3), rgba(101,67,33,0.2), rgba(74,55,40,0.3));
      border: 2px solid #8b4513;
      border-radius: 12px;
      padding: 12px 15px;
      margin: 12px 0;
      text-align: center;
      font-weight: bold;
      color: #f4e6b7;
      box-shadow: 0 3px 6px rgba(0,0,0,0.4);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .sheet-rolltemplate-course-action .sheet-course-result strong {
      color: #daa520;
      text-shadow: 1px 1px 0 rgba(244,230,183,0.8), 2px 2px 4px rgba(0,0,0,0.6);
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-family: 'Georgia', serif;
      margin-right: 8px;
  }
  
  /* PR RESTANTS */
  .sheet-rolltemplate-course-action .sheet-course-pr {
      background: linear-gradient(145deg, rgba(139,69,19,0.3), rgba(101,67,33,0.2), rgba(74,55,40,0.3));
      border: 2px solid #8b4513;
      border-radius: 12px;
      padding: 10px 15px;
      margin: 12px 0;
      text-align: center;
      font-weight: bold;
      color: #f4e6b7;
      box-shadow: 0 3px 6px rgba(0,0,0,0.4);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      font-size: 13px;
  }
  
  .sheet-rolltemplate-course-action .sheet-course-pr strong {
      color: #daa520;
      text-shadow: 1px 1px 0 rgba(244,230,183,0.8), 2px 2px 4px rgba(0,0,0,0.6);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-right: 8px;
  }
  
  /* RESPONSIVE */
  @media (max-width: 768px) {
      .sheet-rolltemplate-course-action {
          max-width: 95%;
          margin: 8px auto;
      }
      
      .sheet-rolltemplate-course-action .sheet-course-header {
          padding: 12px 16px;
      }
      
      .sheet-rolltemplate-course-action .sheet-course-header h3 {
          font-size: 16px;
          letter-spacing: 1px;
      }
      
      .sheet-rolltemplate-course-action .sheet-course-content {
          padding: 15px;
      }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* =================== FICHE MÉTIER - CSS ISOLÉ SANS CONFLITS =================== */
  
  /* === VARIABLES CSS PRÉFIXÉES POUR ÉVITER LES CONFLITS === */
  .sheet-tab-content.sheet-metier {
      --metier-base-size: clamp(10px, 1vw, 16px);
      --metier-spacing-xs: clamp(2px, 0.3vw, 6px);
      --metier-spacing-sm: clamp(4px, 0.6vw, 10px);
      --metier-spacing-md: clamp(6px, 0.8vw, 14px);
      --metier-spacing-lg: clamp(8px, 1vw, 18px);
      --metier-spacing-xl: clamp(12px, 1.5vw, 24px);
      --metier-border-radius: clamp(4px, 0.5vw, 10px);
      --metier-border-width: clamp(1px, 0.15vw, 2px);
      --metier-section-title-size: clamp(12px, 1.2vw, 18px);
      --metier-grade-number-size: clamp(30px, 3vw, 60px);
      --metier-grade-label-size: clamp(9px, 1vw, 14px);
      --metier-content-padding: clamp(0.5rem, 1vw, 1.5rem);
      --metier-section-spacing: clamp(0.5rem, 1vh, 1rem);
      --metier-grid-min-column: clamp(150px, 20vw, 250px);
  }
  
  /* === STYLES GÉNÉRAUX STRICTEMENT ISOLÉS === */
  .sheet-tab-content.sheet-metier {
      font-family: 'Georgia', serif !important;
      padding: var(--metier-content-padding) !important;
      background: linear-gradient(145deg, #2c1e0f 0%, #3d2914 50%, #2c1e0f 100%) !important;
      min-height: 100vh !important;
      color: #f4e6b7 !important;
      font-size: var(--metier-base-size) !important;
      line-height: 1.4 !important;
      width: 100% !important;
      box-sizing: border-box !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-metier-block {
      max-width: 100% !important;
      width: 100% !important;
      margin: 0 auto !important;
      padding: 0 !important;
      box-sizing: border-box !important;
  }
  
  /* === INPUTS RADIO MASQUÉS - ISOLÉS === */
  .sheet-tab-content.sheet-metier .sheet-grade-radio {
      display: none !important;
  }
  
  /* === SECTIONS DÉPLIABLES ISOLÉES === */
  .sheet-tab-content.sheet-metier .sheet-box-wrapper {
      background: linear-gradient(145deg, #3d2914, #2c1e0f, #3d2914) !important;
      border: var(--metier-border-width) solid #8b6914 !important;
      border-radius: var(--metier-border-radius) !important;
      margin-bottom: var(--metier-section-spacing) !important;
      padding: 0 !important;
      box-shadow: 
          0 0 0 calc(var(--metier-border-width) * 0.7) #654321,
          0 calc(var(--metier-spacing-sm) * 0.5) var(--metier-spacing-lg) rgba(0,0,0,0.8),
          inset 0 calc(var(--metier-border-width) * 0.3) 0 rgba(139,105,20,0.4) !important;
      transition: border-color 0.3s ease, box-shadow 0.3s ease !important;
      position: relative !important;
      overflow: hidden !important;
      width: 100% !important;
      box-sizing: border-box !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-box-wrapper[open] {
      padding: 0 var(--metier-spacing-lg) var(--metier-spacing-lg) var(--metier-spacing-lg) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-box-wrapper:not([open]) {
      padding: 0 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-box-wrapper::before {
      content: '' !important;
      position: absolute !important;
      top: 0 !important;
      left: -100% !important;
      width: 100% !important;
      height: calc(var(--metier-spacing-xs) * 0.8) !important;
      background: linear-gradient(90deg, transparent, rgba(244,230,183,0.6), transparent) !important;
      animation: metier-borderShimmer 3s linear infinite !important;
      z-index: 1 !important;
  }
  
  @keyframes metier-borderShimmer {
      0% { left: -100%; }
      100% { left: 100%; }
  }
  
  
  .sheet-tab-content.sheet-metier .sheet-section-title {
      background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914) !important;
      background-size: 200% 200% !important;
      animation: metier-gradientShift 6s ease infinite !important;
      color: #f4e6b7 !important;
      padding: var(--metier-spacing-md) var(--metier-spacing-lg) !important;
      margin: 0 calc(-1 * var(--metier-spacing-lg)) var(--metier-spacing-lg) calc(-1 * var(--metier-spacing-lg)) !important;
      border-radius: var(--metier-border-radius) var(--metier-border-radius) 0 0 !important;
      font-weight: bold !important;
      font-size: var(--metier-section-title-size) !important;
      text-transform: uppercase !important;
      letter-spacing: clamp(0.5px, 0.1vw, 3px) !important;
      position: relative !important;
      box-shadow: 0 var(--metier-spacing-xs) var(--metier-spacing-md) rgba(0,0,0,0.4) !important;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8) !important;
      text-align: center !important;
      width: calc(100% + calc(2 * var(--metier-spacing-lg))) !important;
      box-sizing: border-box !important;
      cursor: pointer !important;
      list-style: none !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      transition: all 0.3s ease !important;
      z-index: 2 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-box-wrapper:not([open]) .sheet-section-title {
      margin: 0 !important;
      width: 100% !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-section-title::-webkit-details-marker {
      display: none !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-section-title::before {
      content: '▼' !important;
      font-size: calc(var(--metier-section-title-size) * 0.8) !important;
      margin-right: var(--metier-spacing-md) !important;
      transition: transform 0.3s ease !important;
      color: #f4e6b7 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-box-wrapper:not([open]) .sheet-section-title::before {
      transform: rotate(-90deg) !important;
      content: '▶' !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-section-title:hover {
      background: linear-gradient(135deg, #a68b2f, #8b6914, #a68b2f) !important;
  }
  
  @keyframes metier-gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
  }
  
  /* === CONTENUS DES SECTIONS DÉPLIABLES === */
  .sheet-tab-content.sheet-metier .sheet-box-wrapper > *:not(.sheet-section-title) {
      margin-top: var(--metier-spacing-lg) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-box-wrapper > *:first-of-type:not(.sheet-section-title) {
      margin-top: var(--metier-spacing-lg) !important;
  }
  
  /* === ZONE MÉTIER ADAPTATIVE === */
  .sheet-tab-content.sheet-metier .sheet-metier-info-grid {
      display: grid !important;
      grid-template-columns: repeat(auto-fit, minmax(var(--metier-grid-min-column), 1fr)) !important;
      gap: var(--metier-spacing-lg) !important;
      margin-bottom: var(--metier-spacing-xl) !important;
      width: 100% !important;
  }
  
  /* === GRADES AVEC ADAPTATION COMPLÈTE === */
  .sheet-tab-content.sheet-metier .sheet-metier-grades {
      display: grid !important;
      grid-template-columns: repeat(5, 1fr) !important;
      gap: clamp(12px, 2vw, 24px) !important;
      margin: var(--metier-spacing-md) 0 !important;
      padding: var(--metier-spacing-lg) !important;
      background: linear-gradient(135deg, rgba(139,105,20,0.2), rgba(107,79,16,0.15)) !important;
      border: var(--metier-border-width) solid #8b6914 !important;
      border-radius: var(--metier-border-radius) !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-sm) rgba(0,0,0,0.3),
          0 var(--metier-spacing-xs) var(--metier-spacing-md) rgba(139,105,20,0.3) !important;
      width: 100% !important;
      box-sizing: border-box !important;
      justify-items: center !important;
      align-items: start !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-grade-step {
      display: flex !important;
      flex-direction: column !important;
      align-items: center !important;
      position: relative !important;
      min-width: 0 !important;
      width: 100% !important;
      max-width: clamp(80px, 15vw, 140px) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-grade-checkbox {
      display: flex !important;
      flex-direction: column !important;
      align-items: center !important;
      cursor: pointer !important;
      transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
      padding: var(--metier-spacing-sm) !important;
      border-radius: var(--metier-border-radius) !important;
      position: relative !important;
      width: 100% !important;
      box-sizing: border-box !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-grade-checkbox:hover {
      transform: translateY(-0.3vw) scale(1.05) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-grade-number {
      width: var(--metier-grade-number-size) !important;
      height: var(--metier-grade-number-size) !important;
      border: var(--metier-border-width) solid #8b6914 !important;
      border-radius: 50% !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      font-weight: bold !important;
      font-size: clamp(12px, 2.5vw, 36px) !important;
      background: linear-gradient(135deg, #f4e6b7, #e6d690) !important;
      color: #3d2914 !important;
      transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
      position: relative !important;
      margin-bottom: var(--metier-spacing-sm) !important;
      box-shadow: 
          0 var(--metier-spacing-xs) var(--metier-spacing-sm) rgba(0,0,0,0.3),
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(244,230,183,0.8) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-grade-label {
      font-size: var(--metier-grade-label-size) !important;
      font-weight: bold !important;
      color: #e6d690 !important;
      text-align: center !important;
      transition: all 0.4s ease !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.6) !important;
      letter-spacing: 0.5px !important;
      word-break: break-word !important;
      hyphens: auto !important;
      line-height: 1.2 !important;
  }
  
  /* === ANIMATIONS D'ILLUMINATION STRICTEMENT ISOLÉES === */
  
  /* Grade 1 - Apprenti */
  .sheet-tab-content.sheet-metier #grade1:checked ~ .sheet-metier-block .sheet-grade-checkbox[for="grade1"] .sheet-grade-number {
      background: linear-gradient(135deg, #c0c0c0 0%, #a8a8a8 100%) !important;
      border-color: #8b8680 !important;
      color: #2c2c2c !important;
      animation: metier-apprenti-glow 2.5s ease-in-out infinite alternate !important;
      box-shadow: 
          0 0 clamp(20px, 2.5vw, 50px) rgba(192, 192, 192, 0.8),
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(255,255,255,0.6) !important;
  }
  
  @keyframes metier-apprenti-glow {
      0% { 
          box-shadow: 0 0 clamp(16px, 2vw, 40px) rgba(192, 192, 192, 0.6), inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(255,255,255,0.6);
          transform: scale(1);
      }
      100% { 
          box-shadow: 0 0 clamp(28px, 3.5vw, 70px) rgba(192, 192, 192, 1), inset 0 var(--metier-spacing-xs) calc(var(--metier-spacing-xs) * 1.5) rgba(255,255,255,0.8);
          transform: scale(1.15);
      }
  }
  
  /* Grade 2 - Confirmé */
  .sheet-tab-content.sheet-metier #grade2:checked ~ .sheet-metier-block .sheet-grade-checkbox[for="grade2"] .sheet-grade-number {
      background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%) !important;
      border-color: #2c5f8a !important;
      color: white !important;
      animation: metier-confirme-pulse 1.8s ease-in-out infinite !important;
      box-shadow: 
          0 0 clamp(24px, 3vw, 60px) rgba(74, 144, 226, 0.9),
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(255,255,255,0.3) !important;
  }
  
  @keyframes metier-confirme-pulse {
      0%, 100% { 
          box-shadow: 0 0 clamp(20px, 2.5vw, 50px) rgba(74, 144, 226, 0.7), inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(255,255,255,0.3);
          transform: scale(1);
      }
      50% { 
          box-shadow: 0 0 clamp(32px, 4vw, 80px) rgba(74, 144, 226, 1.2), inset 0 var(--metier-spacing-xs) calc(var(--metier-spacing-xs) * 1.5) rgba(255,255,255,0.5);
          transform: scale(1.2);
      }
  }
  
  /* Grade 3 - Compagnon */
  .sheet-tab-content.sheet-metier #grade3:checked ~ .sheet-metier-block .sheet-grade-checkbox[for="grade3"] .sheet-grade-number {
      background: linear-gradient(135deg, #27ae60 0%, #1e8449 100%) !important;
      border-color: #186a3b !important;
      color: white !important;
      animation: metier-compagnon-shine 2.2s ease-in-out infinite !important;
      box-shadow: 
          0 0 clamp(28px, 3.5vw, 70px) rgba(39, 174, 96, 1),
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(255,255,255,0.3) !important;
  }
  
  @keyframes metier-compagnon-shine {
      0%, 100% { 
          box-shadow: 0 0 clamp(24px, 3vw, 60px) rgba(39, 174, 96, 0.8), inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(255,255,255,0.3);
          transform: scale(1) rotate(0deg);
      }
      25% { 
          box-shadow: 0 0 clamp(40px, 5vw, 100px) rgba(39, 174, 96, 1.2), inset 0 var(--metier-spacing-xs) calc(var(--metier-spacing-xs) * 1.5) rgba(255,255,255,0.5);
          transform: scale(1.25) rotate(8deg);
      }
      50% { 
          box-shadow: 0 0 clamp(36px, 4.5vw, 90px) rgba(46, 204, 113, 1.2), inset 0 var(--metier-spacing-xs) calc(var(--metier-spacing-xs) * 2) rgba(255,255,255,0.6);
          transform: scale(1.2) rotate(0deg);
      }
      75% { 
          box-shadow: 0 0 clamp(40px, 5vw, 100px) rgba(39, 174, 96, 1.2), inset 0 var(--metier-spacing-xs) calc(var(--metier-spacing-xs) * 1.5) rgba(255,255,255,0.5);
          transform: scale(1.25) rotate(-8deg);
      }
  }
  
  /* Grade 4 - Expert */
  .sheet-tab-content.sheet-metier #grade4:checked ~ .sheet-metier-block .sheet-grade-checkbox[for="grade4"] .sheet-grade-number {
      background: linear-gradient(135deg, #f39c12 0%, #d68910 100%) !important;
      border-color: #b7700d !important;
      color: white !important;
      animation: metier-expert-blaze 2s ease-in-out infinite !important;
      box-shadow: 
          0 0 clamp(32px, 4vw, 80px) rgba(243, 156, 18, 1.1),
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(255,255,255,0.4) !important;
  }
  
  @keyframes metier-expert-blaze {
      0%, 100% { 
          box-shadow: 0 0 clamp(28px, 3.5vw, 70px) rgba(243, 156, 18, 0.9), inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(255,255,255,0.4);
          transform: scale(1);
          background: linear-gradient(135deg, #f39c12 0%, #d68910 100%);
      }
      33% { 
          box-shadow: 0 0 clamp(48px, 6vw, 120px) rgba(255, 165, 0, 1.5), inset 0 var(--metier-spacing-xs) calc(var(--metier-spacing-xs) * 2) rgba(255,255,255,0.6);
          transform: scale(1.3);
          background: linear-gradient(135deg, #ff9500 0%, #ff6b00 100%);
      }
      66% { 
          box-shadow: 0 0 clamp(44px, 5.5vw, 110px) rgba(243, 156, 18, 1.3), inset 0 var(--metier-spacing-xs) calc(var(--metier-spacing-xs) * 1.5) rgba(255,255,255,0.5);
          transform: scale(1.25);
          background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
      }
  }
  
  /* Grade 5 - Maître */
  .sheet-tab-content.sheet-metier #grade5:checked ~ .sheet-metier-block .sheet-grade-checkbox[for="grade5"] .sheet-grade-number {
      background: linear-gradient(135deg, #8e44ad 0%, #7d3c98 100%) !important;
      border-color: #6c3483 !important;
      color: white !important;
      animation: metier-maitre-royal 3s ease-in-out infinite !important;
      box-shadow: 
          0 0 clamp(40px, 5vw, 100px) rgba(142, 68, 173, 1.2),
          inset 0 var(--metier-spacing-xs) calc(var(--metier-spacing-xs) * 1.5) rgba(255,215,0,0.6) !important;
      position: relative !important;
  }
  
  @keyframes metier-maitre-royal {
      0%, 100% { 
          box-shadow: 
              0 0 clamp(32px, 4vw, 80px) rgba(142, 68, 173, 1),
              0 0 clamp(64px, 8vw, 160px) rgba(255, 215, 0, 0.6),
              inset 0 var(--metier-spacing-xs) calc(var(--metier-spacing-xs) * 1.5) rgba(255,215,0,0.6);
          transform: scale(1) rotateY(0deg);
          background: linear-gradient(135deg, #8e44ad 0%, #7d3c98 100%);
      }
      25% { 
          box-shadow: 
              0 0 clamp(48px, 6vw, 120px) rgba(255, 215, 0, 1.5),
              0 0 clamp(80px, 10vw, 200px) rgba(142, 68, 173, 1.2),
              inset 0 var(--metier-spacing-xs) calc(var(--metier-spacing-xs) * 2) rgba(255,215,0,0.8);
          transform: scale(1.4) rotateY(15deg);
          background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 50%, #ffd700 100%);
      }
      50% { 
          box-shadow: 
              0 0 clamp(64px, 8vw, 160px) rgba(255, 215, 0, 1.8),
              0 0 clamp(96px, 12vw, 240px) rgba(142, 68, 173, 1.5),
              inset 0 var(--metier-spacing-xs) calc(var(--metier-spacing-xs) * 2.5) rgba(255,215,0,1);
          transform: scale(1.5) rotateY(0deg);
          background: linear-gradient(135deg, #ffd700 0%, #9b59b6 50%, #8e44ad 100%);
      }
      75% { 
          box-shadow: 
              0 0 clamp(48px, 6vw, 120px) rgba(255, 215, 0, 1.5),
              0 0 clamp(80px, 10vw, 200px) rgba(142, 68, 173, 1.2),
              inset 0 var(--metier-spacing-xs) calc(var(--metier-spacing-xs) * 2) rgba(255,215,0,0.8);
          transform: scale(1.4) rotateY(-15deg);
          background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 50%, #ffd700 100%);
      }
  }
  
  /* Labels illuminés */
  .sheet-tab-content.sheet-metier #grade1:checked ~ .sheet-metier-block .sheet-grade-checkbox[for="grade1"] .sheet-grade-label,
  .sheet-tab-content.sheet-metier #grade2:checked ~ .sheet-metier-block .sheet-grade-checkbox[for="grade2"] .sheet-grade-label,
  .sheet-tab-content.sheet-metier #grade3:checked ~ .sheet-metier-block .sheet-grade-checkbox[for="grade3"] .sheet-grade-label,
  .sheet-tab-content.sheet-metier #grade4:checked ~ .sheet-metier-block .sheet-grade-checkbox[for="grade4"] .sheet-grade-label,
  .sheet-tab-content.sheet-metier #grade5:checked ~ .sheet-metier-block .sheet-grade-checkbox[for="grade5"] .sheet-grade-label {
      color: #f4e6b7 !important;
      font-size: calc(var(--metier-grade-label-size) * 1.15) !important;
      text-shadow: 0 0 clamp(12px, 1.5vw, 30px) rgba(244,230,183,0.8) !important;
      font-weight: 800 !important;
      letter-spacing: clamp(0.5px, 0.1vw, 3px) !important;
      animation: metier-labelGlow 2s ease-in-out infinite alternate !important;
  }
  
  @keyframes metier-labelGlow {
      0% { text-shadow: 0 0 clamp(12px, 1.5vw, 30px) rgba(244,230,183,0.8); }
      100% { text-shadow: 0 0 clamp(20px, 2.5vw, 50px) rgba(244,230,183,1); }
  }
  
  /* === AFFICHAGE CONDITIONNEL DES EXPLOITS ISOLÉ === */
  .sheet-tab-content.sheet-metier .sheet-exploit-section {
      opacity: 0 !important;
      visibility: hidden !important;
      transform: translateY(-2vw) scale(0.95) !important;
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1) !important;
      pointer-events: none !important;
      display: none !important;
      max-height: 0 !important;
      overflow: hidden !important;
  }
  
  .sheet-tab-content.sheet-metier #grade3:checked ~ .sheet-metier-block .sheet-exploit-section,
  .sheet-tab-content.sheet-metier #grade4:checked ~ .sheet-metier-block .sheet-exploit-section,
  .sheet-tab-content.sheet-metier #grade5:checked ~ .sheet-metier-block .sheet-exploit-section {
      opacity: 1 !important;
      visibility: visible !important;
      transform: translateY(0) scale(1) !important;
      pointer-events: auto !important;
      display: block !important;
      max-height: none !important;
      overflow: visible !important;
      animation: metier-exploit-grand-reveal 1.2s ease-out !important;
  }
  
  .sheet-tab-content.sheet-metier #grade1:checked ~ .sheet-metier-block .sheet-exploit-section,
  .sheet-tab-content.sheet-metier #grade2:checked ~ .sheet-metier-block .sheet-exploit-section {
      opacity: 0 !important;
      visibility: hidden !important;
      transform: translateY(-2vw) scale(0.95) !important;
      pointer-events: none !important;
      display: none !important;
      max-height: 0 !important;
      overflow: hidden !important;
      animation: none !important;
  }
  
  @keyframes metier-exploit-grand-reveal {
      0% {
          opacity: 0;
          visibility: hidden;
          transform: translateY(-3vw) scale(0.8) rotateX(-15deg);
          max-height: 0;
      }
      1% {
          visibility: visible;
          max-height: none;
      }
      30% {
          opacity: 0.3;
          transform: translateY(-1vw) scale(0.95) rotateX(-8deg);
      }
      60% {
          opacity: 0.8;
          transform: translateY(0.3vw) scale(1.05) rotateX(3deg);
      }
      100% {
          opacity: 1;
          transform: translateY(0) scale(1) rotateX(0deg);
      }
  }
  
  /* === CHANGEMENT DE COULEURS SELON GRADE === */
  .sheet-tab-content.sheet-metier #grade1:checked ~ .sheet-metier-block .sheet-animated-section {
      border-color: #c0c0c0 !important;
  }
  
  .sheet-tab-content.sheet-metier #grade2:checked ~ .sheet-metier-block .sheet-animated-section {
      border-color: #4a90e2 !important;
  }
  
  .sheet-tab-content.sheet-metier #grade3:checked ~ .sheet-metier-block .sheet-animated-section {
      border-color: #27ae60 !important;
  }
  
  .sheet-tab-content.sheet-metier #grade4:checked ~ .sheet-metier-block .sheet-animated-section {
      border-color: #f39c12 !important;
  }
  
  .sheet-tab-content.sheet-metier #grade5:checked ~ .sheet-metier-block .sheet-animated-section {
      border-color: #8e44ad !important;
      position: relative !important;
  }
  
  .sheet-tab-content.sheet-metier #grade5:checked ~ .sheet-metier-block .sheet-animated-section::before {
      content: '' !important;
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      height: clamp(4px, 0.6vw, 15px) !important;
      background: linear-gradient(90deg, 
          #ffd700, #ffed4e, #ffd700, #b8860b, #ffd700, #ffed4e, #ffd700) !important;
      background-size: 200% 100% !important;
      animation: metier-maitre-crown-flow 4s linear infinite !important;
      border-radius: var(--metier-border-radius) var(--metier-border-radius) 0 0 !important;
      z-index: 1 !important;
  }
  
  @keyframes metier-maitre-crown-flow {
      0% { background-position: 0% 0%; }
      100% { background-position: 200% 0%; }
  }
  
  /* === EXPÉRIENCE AVEC BARRE DE PROGRESSION ISOLÉE === */
  .sheet-tab-content.sheet-metier .sheet-experience-bar {
      display: grid !important;
      grid-template-columns: auto 1fr !important;
      grid-template-rows: auto auto auto !important;
      gap: var(--metier-spacing-sm) !important;
      align-items: center !important;
      margin: var(--metier-spacing-md) 0 !important;
      padding: var(--metier-spacing-lg) !important;
      background: linear-gradient(145deg, 
          rgba(139,105,20,0.25) 0%, 
          rgba(107,79,16,0.2) 50%, 
          rgba(139,105,20,0.25) 100%) !important;
      border: var(--metier-border-width) solid #8b6914 !important;
      border-radius: var(--metier-border-radius) !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(0,0,0,0.3),
          0 var(--metier-spacing-sm) var(--metier-spacing-lg) rgba(139,105,20,0.4) !important;
      width: 100% !important;
      box-sizing: border-box !important;
      position: relative !important;
      overflow: hidden !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-experience-bar::before {
      content: '' !important;
      position: absolute !important;
      top: 0 !important;
      left: -100% !important;
      width: 100% !important;
      height: 100% !important;
      background: linear-gradient(90deg, 
          transparent, 
          rgba(244,230,183,0.15), 
          transparent) !important;
      animation: metier-expShimmer 4s ease infinite !important;
      z-index: 1 !important;
  }
  
  @keyframes metier-expShimmer {
      0% { left: -100%; }
      100% { left: 100%; }
  }
  
  .sheet-tab-content.sheet-metier .sheet-inline-label {
      grid-column: 1 !important;
      grid-row: 1 !important;
      font-size: calc(var(--metier-base-size) * 1.3) !important;
      font-weight: bold !important;
      color: #f4e6b7 !important;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8) !important;
      white-space: nowrap !important;
      z-index: 2 !important;
      position: relative !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-inputs-container {
      grid-column: 2 !important;
      grid-row: 1 !important;
      display: flex !important;
      align-items: center !important;
      gap: var(--metier-spacing-md) !important;
      z-index: 2 !important;
      position: relative !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-input-group {
      display: flex !important;
      align-items: center !important;
      gap: var(--metier-spacing-sm) !important;
      background: linear-gradient(135deg, rgba(244,230,183,0.2), rgba(230,214,144,0.15)) !important;
      border: var(--metier-border-width) solid rgba(139,105,20,0.5) !important;
      border-radius: calc(var(--metier-border-radius) * 0.8) !important;
      padding: var(--metier-spacing-sm) !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(0,0,0,0.2),
          0 var(--metier-spacing-xs) var(--metier-spacing-md) rgba(139,105,20,0.3) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-experience-input {
      min-width: clamp(80px, 12vw, 120px) !important;
      max-width: clamp(200px, 30vw, 300px) !important;
      width: auto !important;
      text-align: center !important;
      font-weight: bold !important;
      background: linear-gradient(135deg, #f4e6b7, #e6d690) !important;
      border: calc(var(--metier-border-width) * 0.8) solid #8b6914 !important;
      border-radius: calc(var(--metier-border-radius) * 0.6) !important;
      color: #3d2914 !important;
      padding: var(--metier-spacing-sm) var(--metier-spacing-md) !important;
      font-family: 'Georgia', serif !important;
      font-size: calc(var(--metier-base-size) * 1.1) !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(0,0,0,0.2),
          0 calc(var(--metier-spacing-xs) * 0.5) var(--metier-spacing-xs) rgba(244,230,183,0.4) !important;
      box-sizing: border-box !important;
      transition: all 0.3s ease !important;
      resize: horizontal !important;
      overflow: visible !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-experience-input:placeholder-shown {
      width: clamp(80px, 12vw, 120px) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-experience-input:not(:placeholder-shown) {
      width: auto !important;
      min-width: clamp(100px, 15vw, 140px) !important;
      max-width: clamp(250px, 35vw, 350px) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-experience-input:focus {
      outline: none !important;
      border-color: #b8860b !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(0,0,0,0.2),
          0 0 var(--metier-spacing-md) rgba(184,134,11,0.6),
          0 calc(var(--metier-spacing-xs) * 0.5) var(--metier-spacing-xs) rgba(244,230,183,0.4) !important;
      background: linear-gradient(135deg, #f5e8c1, #e8d09a) !important;
      transform: scale(1.02) !important;
      min-width: clamp(120px, 18vw, 160px) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-separator {
      font-size: calc(var(--metier-base-size) * 1.5) !important;
      font-weight: bold !important;
      color: #f4e6b7 !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.6) !important;
      margin: 0 var(--metier-spacing-sm) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-unit {
      font-size: calc(var(--metier-base-size) * 0.9) !important;
      font-weight: bold !important;
      color: #8b6914 !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3) !important;
  }
  
  /* === BARRE DE PROGRESSION ISOLÉE === */
  .sheet-tab-content.sheet-metier .sheet-exp-progress-container {
      grid-column: 1 / -1 !important;
      grid-row: 2 !important;
      width: 100% !important;
      margin-top: var(--metier-spacing-sm) !important;
      z-index: 2 !important;
      position: relative !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar {
      position: relative !important;
      width: 100% !important;
      height: clamp(20px, 2.5vw, 32px) !important;
      border: calc(var(--metier-border-width) * 1.5) solid #8b6914 !important;
      border-radius: calc(var(--metier-border-radius) * 0.8) !important;
      overflow: hidden !important;
      background: linear-gradient(135deg, #2c1e0f, #3d2914) !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-md) rgba(0,0,0,0.5),
          0 var(--metier-spacing-xs) var(--metier-spacing-lg) rgba(139,105,20,0.3) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-progress-background {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      height: 100% !important;
      background: linear-gradient(90deg, 
          #8B0000 0%, 
          #8B0000 25%, 
          #DAA520 25%, 
          #DAA520 50%, 
          #228B22 50%, 
          #228B22 75%, 
          #4169E1 75%, 
          #4169E1 100%) !important;
      opacity: 0.2 !important;
      z-index: 1 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-graduation {
      position: absolute !important;
      top: 50% !important;
      transform: translateY(-50%) !important;
      font-size: calc(var(--metier-base-size) * 0.7) !important;
      font-weight: bold !important;
      color: rgba(244,230,183,0.6) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
      z-index: 2 !important;
      pointer-events: none !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-graduation.exp-25 { left: 25% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-graduation.exp-50 { left: 50% !important; transform: translate(-50%, -50%) !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-graduation.exp-75 { left: 75% !important; transform: translate(-100%, -50%) !important; }
  
  .sheet-tab-content.sheet-metier .sheet-exp-progress-fill {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      height: 100% !important;
      background: linear-gradient(90deg, #27ae60, #2ecc71, #58d68d) !important;
      border-radius: calc(var(--metier-border-radius) * 0.6) !important;
      width: 0% !important;
      transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1) !important;
      z-index: 3 !important;
      box-shadow: 
          0 0 var(--metier-spacing-md) rgba(46,204,113,0.6),
          inset 0 var(--metier-spacing-xs) 0 rgba(255,255,255,0.3) !important;
      position: relative !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-progress-fill::after {
      content: '' !important;
      position: absolute !important;
      top: 0 !important;
      left: -100% !important;
      width: 30% !important;
      height: 100% !important;
      background: linear-gradient(90deg, 
          transparent, 
          rgba(255,255,255,0.6), 
          transparent) !important;
      animation: metier-fillShine 2s ease-in-out infinite !important;
  }
  
  @keyframes metier-fillShine {
      0% { left: -30%; }
      100% { left: 100%; }
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-progress-text {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      height: 100% !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      color: #f4e6b7 !important;
      font-weight: bold !important;
      font-size: calc(var(--metier-base-size) * 1.1) !important;
      text-shadow: 
          2px 2px 4px rgba(0,0,0,0.9),
          0 0 var(--metier-spacing-sm) rgba(0,0,0,0.8) !important;
      z-index: 10 !important;
      pointer-events: none !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-level-indicator {
      grid-column: 1 / -1 !important;
      grid-row: 3 !important;
      text-align: center !important;
      margin-top: var(--metier-spacing-sm) !important;
      z-index: 2 !important;
      position: relative !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-level-text {
      font-size: calc(var(--metier-base-size) * 0.9) !important;
      font-style: italic !important;
      color: #e6d690 !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.6) !important;
      background: linear-gradient(135deg, rgba(139,105,20,0.2), rgba(107,79,16,0.1)) !important;
      padding: var(--metier-spacing-sm) var(--metier-spacing-md) !important;
      border-radius: calc(var(--metier-border-radius) * 0.6) !important;
      border: calc(var(--metier-border-width) * 0.5) solid rgba(139,105,20,0.4) !important;
      box-shadow: inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(0,0,0,0.2) !important;
  }
  
  /* === COULEURS SELON LES ZONES DE PROGRESSION === */
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_color_zone"][value="critical"] ~ .sheet-exp-progress-fill {
      background: linear-gradient(90deg, #8B0000, #DC143C, #FF6347) !important;
      box-shadow: 
          0 0 var(--metier-spacing-md) rgba(220,20,60,0.8),
          inset 0 var(--metier-spacing-xs) 0 rgba(255,255,255,0.3) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_color_zone"][value="low"] ~ .sheet-exp-progress-fill {
      background: linear-gradient(90deg, #FF8C00, #DAA520, #FFD700) !important;
      box-shadow: 
          0 0 var(--metier-spacing-md) rgba(218,165,32,0.6),
          inset 0 var(--metier-spacing-xs) 0 rgba(255,255,255,0.3) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_color_zone"][value="medium"] ~ .sheet-exp-progress-fill {
      background: linear-gradient(90deg, #228B22, #32CD32, #90EE90) !important;
      box-shadow: 
          0 0 var(--metier-spacing-md) rgba(50,205,50,0.6),
          inset 0 var(--metier-spacing-xs) 0 rgba(255,255,255,0.3) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_color_zone"][value="high"] ~ .sheet-exp-progress-fill {
      background: linear-gradient(90deg, #4169E1, #6495ED, #87CEEB) !important;
      box-shadow: 
          0 0 var(--metier-spacing-md) rgba(65,105,225,0.6),
          inset 0 var(--metier-spacing-xs) 0 rgba(255,255,255,0.3) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_color_zone"][value="optimal"] ~ .sheet-exp-progress-fill {
      background: linear-gradient(90deg, #8A2BE2, #9370DB, #DDA0DD) !important;
      box-shadow: 
          0 0 var(--metier-spacing-lg) rgba(138,43,226,0.8),
          inset 0 var(--metier-spacing-xs) 0 rgba(255,255,255,0.4) !important;
      animation: metier-optimalPulse 2s ease-in-out infinite alternate !important;
  }
  
  @keyframes metier-optimalPulse {
      0% { 
          box-shadow: 
              0 0 var(--metier-spacing-lg) rgba(138,43,226,0.6),
              inset 0 var(--metier-spacing-xs) 0 rgba(255,255,255,0.3);
      }
      100% { 
          box-shadow: 
              0 0 calc(var(--metier-spacing-lg) * 1.5) rgba(138,43,226,1),
              inset 0 var(--metier-spacing-xs) 0 rgba(255,255,255,0.5);
      }
  }
  
  /* === LARGEURS DYNAMIQUES (par paliers de 5%) === */
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="0"] ~ .sheet-exp-progress-fill { width: 0% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="5"] ~ .sheet-exp-progress-fill { width: 5% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="10"] ~ .sheet-exp-progress-fill { width: 10% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="15"] ~ .sheet-exp-progress-fill { width: 15% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="20"] ~ .sheet-exp-progress-fill { width: 20% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="25"] ~ .sheet-exp-progress-fill { width: 25% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="30"] ~ .sheet-exp-progress-fill { width: 30% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="35"] ~ .sheet-exp-progress-fill { width: 35% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="40"] ~ .sheet-exp-progress-fill { width: 40% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="45"] ~ .sheet-exp-progress-fill { width: 45% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="50"] ~ .sheet-exp-progress-fill { width: 50% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="55"] ~ .sheet-exp-progress-fill { width: 55% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="60"] ~ .sheet-exp-progress-fill { width: 60% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="65"] ~ .sheet-exp-progress-fill { width: 65% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="70"] ~ .sheet-exp-progress-fill { width: 70% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="75"] ~ .sheet-exp-progress-fill { width: 75% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="80"] ~ .sheet-exp-progress-fill { width: 80% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="85"] ~ .sheet-exp-progress-fill { width: 85% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="90"] ~ .sheet-exp-progress-fill { width: 90% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="95"] ~ .sheet-exp-progress-fill { width: 95% !important; }
  .sheet-tab-content.sheet-metier .sheet-exp-progress-bar input[name="attr_exp_percentage"][value="100"] ~ .sheet-exp-progress-fill { width: 100% !important; }
  
  /* === MISSIONS ISOLÉES === */
  .sheet-tab-content.sheet-metier .sheet-mission-hebdo {
      background: linear-gradient(135deg, rgba(74,144,226,0.2), rgba(53,122,189,0.15)) !important;
      border: var(--metier-border-width) solid #4a90e2 !important;
      border-radius: var(--metier-border-radius) !important;
      padding: var(--metier-spacing-md) !important;
      margin-bottom: var(--metier-spacing-md) !important;
      position: relative !important;
      overflow: hidden !important;
      box-shadow: 0 var(--metier-spacing-xs) var(--metier-spacing-md) rgba(74,144,226,0.3) !important;
      width: 100% !important;
      box-sizing: border-box !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-hebdo-grid {
      display: grid !important;
      grid-template-columns: 1fr auto !important;
      gap: var(--metier-spacing-sm) !important;
      margin-top: var(--metier-spacing-sm) !important;
      width: 100% !important;
  }
  
  /* === DÉTAILS MISSION HEBDOMADAIRE === */
  .sheet-tab-content.sheet-metier .sheet-mission-hebdo-details {
      margin-top: var(--metier-spacing-md) !important;
      padding: var(--metier-spacing-md) !important;
      background: linear-gradient(135deg, rgba(74,144,226,0.15), rgba(53,122,189,0.1)) !important;
      border: calc(var(--metier-border-width) * 0.8) solid rgba(74,144,226,0.5) !important;
      border-radius: calc(var(--metier-border-radius) * 0.8) !important;
      box-shadow: inset 0 calc(var(--metier-spacing-xs) * 0.5) calc(var(--metier-spacing-xs) * 0.5) rgba(0,0,0,0.2) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-hebdo-details label {
      font-size: calc(var(--metier-base-size) * 1.05) !important;
      font-weight: bold !important;
      color: #4a90e2 !important;
      margin-bottom: var(--metier-spacing-sm) !important;
      display: block !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-hebdo-details textarea {
      min-height: clamp(80px, 8vw, 120px) !important;
      background: linear-gradient(135deg, #f4e6b7, #e6d690) !important;
      border: var(--metier-border-width) solid #4a90e2 !important;
      border-radius: calc(var(--metier-border-radius) * 0.7) !important;
      padding: var(--metier-spacing-sm) !important;
      font-size: var(--metier-base-size) !important;
      font-family: 'Georgia', serif !important;
      color: #3d2914 !important;
      resize: vertical !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(0,0,0,0.15),
          0 calc(var(--metier-spacing-xs) * 0.5) var(--metier-spacing-xs) rgba(74,144,226,0.3) !important;
      transition: all 0.3s ease !important;
      line-height: 1.5 !important;
      width: 100% !important;
      box-sizing: border-box !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-hebdo-details textarea:focus {
      border-color: #357abd !important;
      outline: none !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(0,0,0,0.15),
          0 0 var(--metier-spacing-md) rgba(74,144,226,0.6) !important;
      background: linear-gradient(135deg, #f5e8c1, #e8d09a) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-hebdo-details textarea::placeholder {
      color: rgba(61,41,20,0.5) !important;
      font-style: italic !important;
  }
  
  /* === MISSIONS SPÉCIALES === */
  .sheet-tab-content.sheet-metier .sheet-mission-special {
      border: var(--metier-border-width) solid #f39c12 !important;
      border-radius: var(--metier-border-radius) !important;
      margin: var(--metier-spacing-lg) 0 !important;
      background: linear-gradient(135deg, rgba(243,156,18,0.2), rgba(214,137,16,0.15)) !important;
      transition: all 0.3s ease !important;
      box-shadow: 0 var(--metier-spacing-xs) var(--metier-spacing-md) rgba(243,156,18,0.3) !important;
      width: 100% !important;
      box-sizing: border-box !important;
      overflow: hidden !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-special:hover {
      border-color: #e67e22 !important;
      box-shadow: 0 calc(var(--metier-spacing-xs) * 1.5) calc(var(--metier-spacing-md) * 1.3) rgba(243,156,18,0.4) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-summary {
      background: linear-gradient(135deg, rgba(243,156,18,0.3), rgba(214,137,16,0.2)) !important;
      padding: var(--metier-spacing-md) !important;
      cursor: pointer !important;
      list-style: none !important;
      transition: all 0.3s ease !important;
      display: flex !important;
      align-items: center !important;
      gap: var(--metier-spacing-sm) !important;
      width: 100% !important;
      box-sizing: border-box !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-summary::-webkit-details-marker {
      display: none !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-arrow {
      font-size: var(--metier-base-size) !important;
      color: #f4e6b7 !important;
      transition: transform 0.3s ease !important;
      flex-shrink: 0 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-special[open] .sheet-mission-arrow {
      transform: rotate(90deg) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-summary:hover {
      background: linear-gradient(135deg, rgba(243,156,18,0.4), rgba(214,137,16,0.3)) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-summary input[type="text"] {
      flex: 1 !important;
      margin: 0 !important;
  }
  
  /* ⭐ NOUVEAU - MISSIONS SPÉCIALES RÉORGANISÉES === */
  .sheet-tab-content.sheet-metier .sheet-mission-content {
      padding: var(--metier-spacing-md) !important;
      background: rgba(243,156,18,0.1) !important;
      display: flex !important;
      flex-direction: column !important;
      gap: var(--metier-spacing-lg) !important;
  }
  
  /* === SECTION ACTION (PLEINE LARGEUR) === */
  .sheet-tab-content.sheet-metier .sheet-mission-action-section {
      width: 100% !important;
      display: flex !important;
      flex-direction: column !important;
      gap: var(--metier-spacing-sm) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-action-section label {
      font-size: calc(var(--metier-base-size) * 1.1) !important;
      font-weight: bold !important;
      color: #f4e6b7 !important;
      margin-bottom: var(--metier-spacing-xs) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-action-section textarea {
      min-height: clamp(80px, 8vw, 120px) !important;
      width: 100% !important;
  }
  
  /* === GRILLE STATISTIQUES - 4 COLONNES === */
  .sheet-tab-content.sheet-metier .sheet-mission-stats-grid {
      display: grid !important;
      grid-template-columns: repeat(4, 1fr) !important;
      gap: var(--metier-spacing-md) !important;
      width: 100% !important;
      box-sizing: border-box !important;
      padding: var(--metier-spacing-sm) !important;
      background: linear-gradient(135deg, rgba(243,156,18,0.15), rgba(214,137,16,0.1)) !important;
      border-radius: calc(var(--metier-border-radius) * 0.8) !important;
      border: calc(var(--metier-border-width) * 0.5) solid rgba(243,156,18,0.4) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-stat-item {
      display: flex !important;
      flex-direction: column !important;
      gap: var(--metier-spacing-xs) !important;
      min-width: 0 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-stat-item label {
      font-size: calc(var(--metier-base-size) * 0.95) !important;
      font-weight: bold !important;
      color: #f39c12 !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5) !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      text-overflow: ellipsis !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-stat-item input[type="text"] {
      width: 100% !important;
      min-width: 0 !important;
      text-align: center !important;
      font-weight: bold !important;
      background: linear-gradient(135deg, #f4e6b7, #e6d690) !important;
      border: calc(var(--metier-border-width) * 0.8) solid #f39c12 !important;
      padding: var(--metier-spacing-xs) var(--metier-spacing-sm) !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(0,0,0,0.15),
          0 calc(var(--metier-spacing-xs) * 0.5) var(--metier-spacing-xs) rgba(243,156,18,0.3) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-stat-item input[type="text"]:focus {
      border-color: #e67e22 !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(0,0,0,0.15),
          0 0 var(--metier-spacing-md) rgba(243,156,18,0.6) !important;
  }
  
  /* === TALENTS ISOLÉS === */
  .sheet-tab-content.sheet-metier .sheet-talent-section {
      border: var(--metier-border-width) solid #27ae60 !important;
      border-radius: var(--metier-border-radius) !important;
      padding: var(--metier-spacing-lg) !important;
      margin: var(--metier-spacing-lg) 0 !important;
      background: linear-gradient(135deg, rgba(39,174,96,0.2), rgba(30,132,73,0.15)) !important;
      box-shadow: 0 var(--metier-spacing-xs) var(--metier-spacing-md) rgba(39,174,96,0.3) !important;
      width: 100% !important;
      box-sizing: border-box !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-talent-grid {
      display: grid !important;
      grid-template-columns: repeat(auto-fit, minmax(min(var(--metier-grid-min-column), 100%), 1fr)) !important;
      gap: var(--metier-spacing-md) !important;
      margin-top: var(--metier-spacing-md) !important;
      width: 100% !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-talent-detail {
      background: linear-gradient(135deg, rgba(244,230,183,0.1), rgba(230,214,144,0.05)) !important;
      border: var(--metier-border-width) solid #27ae60 !important;
      border-radius: var(--metier-border-radius) !important;
      overflow: hidden !important;
      transition: all 0.3s ease !important;
      width: 100% !important;
      box-sizing: border-box !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-talent-grade-detail {
      border-color: #f39c12 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-talent-summary {
      background: linear-gradient(135deg, rgba(39,174,96,0.3), rgba(30,132,73,0.2)) !important;
      padding: var(--metier-spacing-md) !important;
      cursor: pointer !important;
      list-style: none !important;
      transition: all 0.3s ease !important;
      display: flex !important;
      flex-direction: row !important;
      align-items: center !important;
      gap: var(--metier-spacing-sm) !important;
      word-break: break-word !important;
      width: 100% !important;
      box-sizing: border-box !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-talent-summary::-webkit-details-marker {
      display: none !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-talent-arrow {
      font-size: var(--metier-base-size) !important;
      color: #f4e6b7 !important;
      transition: transform 0.3s ease !important;
      flex-shrink: 0 !important;
      margin-right: var(--metier-spacing-sm) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-talent-detail[open] .sheet-talent-arrow {
      transform: rotate(90deg) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-talent-summary input[type="text"] {
      flex: 1 !important;
      margin: 0 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-talent-summary:hover {
      background: linear-gradient(135deg, rgba(39,174,96,0.4), rgba(30,132,73,0.3)) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-talent-grade-detail .sheet-talent-summary {
      background: linear-gradient(135deg, rgba(243,156,18,0.3), rgba(214,137,16,0.2)) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-talent-grade-detail .sheet-talent-summary:hover {
      background: linear-gradient(135deg, rgba(243,156,18,0.4), rgba(214,137,16,0.3)) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-talent-content {
      padding: var(--metier-spacing-md) !important;
      background: rgba(244,230,183,0.05) !important;
      width: 100% !important;
      box-sizing: border-box !important;
  }
  
  /* === TITRES DE MÉTIER ISOLÉS === */
  .sheet-tab-content.sheet-metier .sheet-exploit-container {
      padding: 0 !important;
      width: 100% !important;
      box-sizing: border-box !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-exploit-desc {
      font-style: italic !important;
      color: #e6d690 !important;
      margin-bottom: var(--metier-spacing-lg) !important;
      text-align: center !important;
      font-size: calc(var(--metier-base-size) * 1.2) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.6) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-section {
      background: linear-gradient(135deg, rgba(244,230,183,0.15), rgba(230,214,144,0.1)) !important;
      border: var(--metier-border-width) solid #8b6914 !important;
      border-radius: var(--metier-border-radius) !important;
      padding: var(--metier-spacing-lg) !important;
      margin: var(--metier-spacing-lg) 0 !important;
      width: 100% !important;
      box-sizing: border-box !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(0,0,0,0.2),
          0 var(--metier-spacing-xs) var(--metier-spacing-md) rgba(139,105,20,0.3) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-section-header {
      background: linear-gradient(135deg, #8b6914, #6b4f10) !important;
      color: #f4e6b7 !important;
      padding: var(--metier-spacing-md) !important;
      margin: calc(-1 * var(--metier-spacing-lg)) calc(-1 * var(--metier-spacing-lg)) var(--metier-spacing-lg) calc(-1 * var(--metier-spacing-lg)) !important;
      border-radius: var(--metier-border-radius) var(--metier-border-radius) 0 0 !important;
      font-weight: bold !important;
      font-size: calc(var(--metier-base-size) * 1.3) !important;
      text-align: center !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.6) !important;
      box-shadow: 0 var(--metier-spacing-xs) var(--metier-spacing-md) rgba(0,0,0,0.3) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-section-header-collapsible {
      background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914) !important;
      background-size: 200% 200% !important;
      animation: metier-gradientShift 6s ease infinite !important;
      color: #f4e6b7 !important;
      padding: var(--metier-spacing-md) var(--metier-spacing-lg) !important;
      margin: calc(-1 * var(--metier-spacing-lg)) calc(-1 * var(--metier-spacing-lg)) var(--metier-spacing-lg) calc(-1 * var(--metier-spacing-lg)) !important;
      border-radius: var(--metier-border-radius) var(--metier-border-radius) 0 0 !important;
      font-weight: bold !important;
      font-size: calc(var(--metier-base-size) * 1.3) !important;
      text-transform: uppercase !important;
      letter-spacing: clamp(0.5px, 0.1vw, 2px) !important;
      position: relative !important;
      box-shadow: 0 var(--metier-spacing-xs) var(--metier-spacing-md) rgba(0,0,0,0.4) !important;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8) !important;
      text-align: center !important;
      width: calc(100% + calc(2 * var(--metier-spacing-lg))) !important;
      box-sizing: border-box !important;
      cursor: pointer !important;
      list-style: none !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      transition: all 0.3s ease !important;
      z-index: 2 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-section-header-collapsible::-webkit-details-marker {
      display: none !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-section-header-collapsible::before {
      content: '▼' !important;
      font-size: calc(var(--metier-base-size) * 1.1) !important;
      margin-right: var(--metier-spacing-md) !important;
      transition: transform 0.3s ease !important;
      color: #f4e6b7 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-aventure-section:not([open]) .sheet-titre-section-header-collapsible::before,
  .sheet-tab-content.sheet-metier .sheet-obtention-section:not([open]) .sheet-titre-section-header-collapsible::before {
      transform: rotate(-90deg) !important;
      content: '▶' !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-section-header-collapsible:hover {
      background: linear-gradient(135deg, #a68b2f, #8b6914, #a68b2f) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-aventure-section:not([open]),
  .sheet-tab-content.sheet-metier .sheet-obtention-section:not([open]) {
      padding: 0 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-aventure-section:not([open]) .sheet-titre-section-header-collapsible,
  .sheet-tab-content.sheet-metier .sheet-obtention-section:not([open]) .sheet-titre-section-header-collapsible {
      margin: 0 !important;
      width: 100% !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-actuel {
      width: 100% !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-header {
      margin-bottom: var(--metier-spacing-md) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-header input[type="text"] {
      font-size: calc(var(--metier-base-size) * 1.2) !important;
      font-weight: bold !important;
      text-align: center !important;
      background: linear-gradient(135deg, #f4e6b7, #e6d690) !important;
      border: calc(var(--metier-border-width) * 1.2) solid #8b6914 !important;
  }
  
  /* === STYLES POUR LES CHAMPS READONLY ISOLÉS === */
  .sheet-tab-content.sheet-metier input[readonly], 
  .sheet-tab-content.sheet-metier textarea[readonly] {
      background: linear-gradient(135deg, #e8e8e8, #d8d8d8) !important;
      color: #444 !important;
      cursor: not-allowed !important;
      font-style: italic !important;
      border-color: #aaa !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(0,0,0,0.15),
          0 calc(var(--metier-spacing-xs) * 0.5) var(--metier-spacing-xs) rgba(170,170,170,0.3) !important;
      transition: none !important;
  }
  
  .sheet-tab-content.sheet-metier input[readonly]:focus, 
  .sheet-tab-content.sheet-metier textarea[readonly]:focus {
      outline: none !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(0,0,0,0.15),
          0 calc(var(--metier-spacing-xs) * 0.5) var(--metier-spacing-xs) rgba(170,170,170,0.3) !important;
      transform: none !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-actuel input[name="attr_titre_actuel_nom"]:not([value=""]):not([value=" "]) {
      background: linear-gradient(135deg, #e8f5e8, #d4edd4) !important;
      color: #2d5a2d !important;
      font-weight: bold !important;
      border-color: #4a9d4a !important;
      text-align: center !important;
      font-size: calc(var(--metier-base-size) * 1.2) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-actuel textarea[name="attr_titre_actuel_effet"]:not([value=""]):not([value=" "]) {
      background: linear-gradient(135deg, #fff8e1, #f5e6a3) !important;
      color: #5d4e37 !important;
      border-color: #8b6914 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-content {
      width: 100% !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-content label {
      font-size: calc(var(--metier-base-size) * 1.1) !important;
      color: #f4e6b7 !important;
      margin-bottom: var(--metier-spacing-sm) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-aventure-info {
      background: linear-gradient(135deg, rgba(74,144,226,0.15), rgba(53,122,189,0.1)) !important;
      border: calc(var(--metier-border-width) * 0.8) solid rgba(74,144,226,0.6) !important;
      border-radius: calc(var(--metier-border-radius) * 0.8) !important;
      padding: var(--metier-spacing-md) !important;
      margin: var(--metier-spacing-md) 0 var(--metier-spacing-lg) 0 !important;
      color: #f4e6b7 !important;
      font-style: italic !important;
      text-align: center !important;
      box-shadow: 
          inset 0 calc(var(--metier-spacing-xs) * 0.5) calc(var(--metier-spacing-xs) * 0.5) rgba(0,0,0,0.2),
          0 calc(var(--metier-spacing-xs) * 0.5) var(--metier-spacing-md) rgba(74,144,226,0.3) !important;
      animation: metier-info-pulse 3s ease-in-out infinite !important;
  }
  
  @keyframes metier-info-pulse {
      0%, 100% { 
          border-color: rgba(74,144,226,0.6);
          background: linear-gradient(135deg, rgba(74,144,226,0.15), rgba(53,122,189,0.1));
      }
      50% { 
          border-color: rgba(74,144,226,0.8);
          background: linear-gradient(135deg, rgba(74,144,226,0.2), rgba(53,122,189,0.15));
      }
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-aventure-info p {
      margin: 0 !important;
      font-size: calc(var(--metier-base-size) * 1.1) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.6) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-aventure {
      background: linear-gradient(135deg, rgba(74,144,226,0.2), rgba(53,122,189,0.15)) !important;
      border: var(--metier-border-width) solid #4a90e2 !important;
      border-radius: var(--metier-border-radius) !important;
      padding: var(--metier-spacing-md) !important;
      margin: var(--metier-spacing-md) 0 !important;
      box-shadow: 0 var(--metier-spacing-xs) var(--metier-spacing-md) rgba(74,144,226,0.3) !important;
      transition: all 0.3s ease !important;
      animation: metier-titre-fade-in 0.5s ease-out !important;
  }
  
  @keyframes metier-titre-fade-in {
      0% {
          opacity: 0;
          transform: translateY(-1vh) scale(0.95);
      }
      100% {
          opacity: 1;
          transform: translateY(0) scale(1);
      }
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-aventure:hover {
      border-color: #357abd !important;
      box-shadow: 0 calc(var(--metier-spacing-xs) * 1.5) calc(var(--metier-spacing-md) * 1.3) rgba(74,144,226,0.4) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-aventure:has(input[name="attr_titre_actuel_selected"]:checked) {
      border-color: #27ae60 !important;
      background: linear-gradient(135deg, rgba(39,174,96,0.25), rgba(30,132,73,0.2)) !important;
      box-shadow: 
          0 0 var(--metier-spacing-md) rgba(39,174,96,0.6),
          0 calc(var(--metier-spacing-xs) * 1.5) calc(var(--metier-spacing-md) * 1.3) rgba(39,174,96,0.4) !important;
      position: relative !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-aventure:has(input[name="attr_titre_actuel_selected"]:checked)::before {
      content: "ACTIF" !important;
      position: absolute !important;
      top: calc(-1 * var(--metier-spacing-sm)) !important;
      right: var(--metier-spacing-md) !important;
      background: linear-gradient(135deg, #27ae60, #1e8449) !important;
      color: #ffffff !important;
      padding: calc(var(--metier-spacing-xs) * 0.7) var(--metier-spacing-sm) !important;
      border-radius: calc(var(--metier-border-radius) * 0.6) !important;
      font-size: calc(var(--metier-base-size) * 0.8) !important;
      font-weight: bold !important;
      text-transform: uppercase !important;
      letter-spacing: 0.5px !important;
      box-shadow: 
          0 calc(var(--metier-spacing-xs) * 0.5) var(--metier-spacing-sm) rgba(39,174,96,0.6),
          inset 0 calc(var(--metier-spacing-xs) * 0.3) 0 rgba(255,255,255,0.3) !important;
      z-index: 10 !important;
      animation: metier-badge-glow 2s ease-in-out infinite alternate !important;
  }
  
  @keyframes metier-badge-glow {
      0% { 
          box-shadow: 
              0 calc(var(--metier-spacing-xs) * 0.5) var(--metier-spacing-sm) rgba(39,174,96,0.6),
              inset 0 calc(var(--metier-spacing-xs) * 0.3) 0 rgba(255,255,255,0.3);
      }
      100% { 
          box-shadow: 
              0 calc(var(--metier-spacing-xs) * 0.8) var(--metier-spacing-md) rgba(39,174,96,0.9),
              inset 0 calc(var(--metier-spacing-xs) * 0.3) 0 rgba(255,255,255,0.5);
      }
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-select-header {
      display: flex !important;
      align-items: center !important;
      gap: var(--metier-spacing-md) !important;
      margin-bottom: var(--metier-spacing-md) !important;
      padding: var(--metier-spacing-sm) !important;
      background: linear-gradient(135deg, rgba(74,144,226,0.3), rgba(53,122,189,0.2)) !important;
      border-radius: calc(var(--metier-border-radius) * 0.8) !important;
      border: calc(var(--metier-border-width) * 0.5) solid rgba(74,144,226,0.5) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-radio {
      appearance: none !important;
      -webkit-appearance: none !important;
      -moz-appearance: none !important;
      width: clamp(24px, 3vw, 32px) !important;
      height: clamp(24px, 3vw, 32px) !important;
      border: calc(var(--metier-border-width) * 1.2) solid #4a90e2 !important;
      border-radius: 50% !important;
      background: linear-gradient(135deg, #f4e6b7, #e6d690) !important;
      cursor: pointer !important;
      position: relative !important;
      flex-shrink: 0 !important;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
      box-shadow: 
          inset 0 calc(var(--metier-spacing-xs) * 0.5) calc(var(--metier-spacing-xs) * 0.5) rgba(0,0,0,0.2),
          0 calc(var(--metier-spacing-xs) * 0.3) calc(var(--metier-spacing-xs) * 0.8) rgba(74,144,226,0.3) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-radio:hover {
      border-color: #357abd !important;
      background: linear-gradient(135deg, #f5e8c1, #e8d09a) !important;
      transform: scale(1.15) !important;
      box-shadow: 
          inset 0 calc(var(--metier-spacing-xs) * 0.5) calc(var(--metier-spacing-xs) * 0.5) rgba(0,0,0,0.2),
          0 calc(var(--metier-spacing-xs) * 0.5) var(--metier-spacing-md) rgba(74,144,226,0.5) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-radio:checked {
      background: linear-gradient(135deg, #4a90e2, #357abd) !important;
      border-color: #2c5f8a !important;
      box-shadow: 
          inset 0 calc(var(--metier-spacing-xs) * 0.5) calc(var(--metier-spacing-xs) * 0.5) rgba(255,255,255,0.3),
          0 0 var(--metier-spacing-md) rgba(74,144,226,0.8),
          0 calc(var(--metier-spacing-xs) * 0.5) var(--metier-spacing-md) rgba(74,144,226,0.6) !important;
      animation: metier-titleRadioGlow 2s ease-in-out infinite alternate !important;
      transform: scale(1.1) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-radio:checked::after {
      content: '' !important;
      position: absolute !important;
      top: 50% !important;
      left: 50% !important;
      transform: translate(-50%, -50%) !important;
      width: 60% !important;
      height: 60% !important;
      background: linear-gradient(135deg, #ffd700, #ffed4e) !important;
      border-radius: 50% !important;
      border: calc(var(--metier-border-width) * 0.5) solid #b8860b !important;
      box-shadow: 
          0 0 calc(var(--metier-spacing-xs) * 0.8) rgba(255,215,0,0.8),
          inset 0 calc(var(--metier-spacing-xs) * 0.3) calc(var(--metier-spacing-xs) * 0.3) rgba(255,255,255,0.6) !important;
      animation: metier-titleRadioInner 2s ease-in-out infinite alternate !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-radio:checked::before {
      content: '' !important;
      position: absolute !important;
      top: 50% !important;
      left: 50% !important;
      transform: translate(-50%, -50%) !important;
      width: 25% !important;
      height: 25% !important;
      background: #ffffff !important;
      border-radius: 50% !important;
      z-index: 1 !important;
      box-shadow: 0 0 calc(var(--metier-spacing-xs) * 0.5) rgba(255,255,255,1) !important;
      animation: metier-titleRadioDot 1.5s ease-in-out infinite alternate !important;
  }
  
  @keyframes metier-titleRadioGlow {
      0% { 
          box-shadow: 
              inset 0 calc(var(--metier-spacing-xs) * 0.5) calc(var(--metier-spacing-xs) * 0.5) rgba(255,255,255,0.3),
              0 0 var(--metier-spacing-sm) rgba(74,144,226,0.6),
              0 calc(var(--metier-spacing-xs) * 0.5) var(--metier-spacing-md) rgba(74,144,226,0.4);
      }
      100% { 
          box-shadow: 
              inset 0 calc(var(--metier-spacing-xs) * 0.5) calc(var(--metier-spacing-xs) * 0.5) rgba(255,255,255,0.3),
              0 0 var(--metier-spacing-lg) rgba(74,144,226,1),
              0 calc(var(--metier-spacing-xs) * 0.5) var(--metier-spacing-lg) rgba(74,144,226,0.8);
      }
  }
  
  @keyframes metier-titleRadioInner {
      0% { 
          background: linear-gradient(135deg, #ffd700, #ffed4e);
          box-shadow: 
              0 0 calc(var(--metier-spacing-xs) * 0.5) rgba(255,215,0,0.6),
              inset 0 calc(var(--metier-spacing-xs) * 0.3) calc(var(--metier-spacing-xs) * 0.3) rgba(255,255,255,0.6);
      }
      100% { 
          background: linear-gradient(135deg, #ffed4e, #ffd700);
          box-shadow: 
              0 0 calc(var(--metier-spacing-sm) * 1.2) rgba(255,215,0,1),
              inset 0 calc(var(--metier-spacing-xs) * 0.3) calc(var(--metier-spacing-xs) * 0.3) rgba(255,255,255,0.8);
      }
  }
  
  @keyframes metier-titleRadioDot {
      0% { 
          background: #ffffff;
          box-shadow: 0 0 calc(var(--metier-spacing-xs) * 0.3) rgba(255,255,255,0.8);
          transform: translate(-50%, -50%) scale(1);
      }
      100% { 
          background: #f4e6b7;
          box-shadow: 0 0 calc(var(--metier-spacing-xs) * 0.8) rgba(244,230,183,1);
          transform: translate(-50%, -50%) scale(1.2);
      }
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-checkbox-label {
      font-weight: bold !important;
      color: #4a90e2 !important;
      font-size: calc(var(--metier-base-size) * 1.1) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3) !important;
      white-space: nowrap !important;
      margin-right: var(--metier-spacing-sm) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-select-header input[type="text"] {
      flex: 1 !important;
      font-weight: bold !important;
      background: linear-gradient(135deg, #f4e6b7, #e6d690) !important;
      border: calc(var(--metier-border-width) * 0.8) solid #4a90e2 !important;
  }
  
  /* === OBTENTION DE TITRE ISOLÉE === */
  .sheet-tab-content.sheet-metier .sheet-obtention-titre {
      background: linear-gradient(135deg, rgba(255,215,0,0.15), rgba(255,193,7,0.1)) !important;
      border: var(--metier-border-width) solid #ffd700 !important;
      border-radius: var(--metier-border-radius) !important;
      padding: var(--metier-spacing-lg) !important;
      margin: var(--metier-spacing-md) 0 !important;
      box-shadow: 0 var(--metier-spacing-xs) var(--metier-spacing-md) rgba(255,215,0,0.3) !important;
      position: relative !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-obtention-header {
      display: grid !important;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)) !important;
      gap: var(--metier-spacing-md) !important;
      margin-bottom: var(--metier-spacing-lg) !important;
      padding: var(--metier-spacing-md) !important;
      background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,193,7,0.15)) !important;
      border-radius: var(--metier-border-radius) !important;
      border: calc(var(--metier-border-width) * 0.5) solid #ffd700 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-voie-info,
  .sheet-tab-content.sheet-metier .sheet-titre-obtenable,
  .sheet-tab-content.sheet-metier .sheet-cout-achat {
      display: flex !important;
      flex-direction: column !important;
      gap: var(--metier-spacing-xs) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-voie-info label,
  .sheet-tab-content.sheet-metier .sheet-titre-obtenable label,
  .sheet-tab-content.sheet-metier .sheet-cout-achat label {
      font-weight: bold !important;
      color: #8b6914 !important;
      font-size: calc(var(--metier-base-size) * 1.1) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-conditions {
      margin: var(--metier-spacing-lg) 0 !important;
      padding: var(--metier-spacing-md) !important;
      background: linear-gradient(135deg, rgba(139,105,20,0.2), rgba(107,79,16,0.15)) !important;
      border-radius: var(--metier-border-radius) !important;
      border: calc(var(--metier-border-width) * 0.8) solid #8b6914 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-conditions label {
      font-weight: bold !important;
      color: #f4e6b7 !important;
      font-size: calc(var(--metier-base-size) * 1.2) !important;
      margin-bottom: var(--metier-spacing-sm) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-conditions textarea {
      min-height: clamp(60px, 6vw, 100px) !important;
      font-style: italic !important;
      background: linear-gradient(135deg, #f4e6b7, #e6d690) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-missions-titre {
      margin: var(--metier-spacing-lg) 0 !important;
      display: flex !important;
      flex-direction: column !important;
      gap: var(--metier-spacing-md) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-titre {
      background: linear-gradient(135deg, rgba(39,174,96,0.2), rgba(30,132,73,0.15)) !important;
      border: var(--metier-border-width) solid #27ae60 !important;
      border-radius: var(--metier-border-radius) !important;
      padding: var(--metier-spacing-md) !important;
      transition: all 0.3s ease !important;
      box-shadow: 0 var(--metier-spacing-xs) var(--metier-spacing-sm) rgba(39,174,96,0.3) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-titre:hover {
      border-color: #2ecc71 !important;
      box-shadow: 0 calc(var(--metier-spacing-xs) * 1.5) var(--metier-spacing-md) rgba(39,174,96,0.4) !important;
      transform: translateY(-1px) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-numero {
      font-weight: bold !important;
      color: #f4e6b7 !important;
      font-size: calc(var(--metier-base-size) * 1.2) !important;
      margin-bottom: var(--metier-spacing-sm) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.6) !important;
      padding: var(--metier-spacing-xs) var(--metier-spacing-sm) !important;
      background: linear-gradient(135deg, #27ae60, #1e8449) !important;
      border-radius: calc(var(--metier-border-radius) * 0.6) !important;
      display: inline-block !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-titre textarea {
      margin: var(--metier-spacing-sm) 0 !important;
      min-height: clamp(60px, 6vw, 100px) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-recompense {
      display: grid !important;
      grid-template-columns: auto 1fr !important;
      gap: var(--metier-spacing-sm) !important;
      align-items: center !important;
      margin-top: var(--metier-spacing-sm) !important;
      padding: var(--metier-spacing-sm) !important;
      background: linear-gradient(135deg, rgba(244,230,183,0.2), rgba(230,214,144,0.15)) !important;
      border-radius: calc(var(--metier-border-radius) * 0.6) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-recompense label {
      font-weight: bold !important;
      color: #27ae60 !important;
      white-space: nowrap !important;
      font-size: calc(var(--metier-base-size) * 1.1) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-mission-recompense input {
      font-weight: bold !important;
      background: linear-gradient(135deg, #e8f5e8, #d4edd4) !important;
      border-color: #27ae60 !important;
      color: #1e8449 !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-effet-titre-final {
      margin-top: var(--metier-spacing-xl) !important;
      padding: var(--metier-spacing-lg) !important;
      background: linear-gradient(135deg, rgba(142,68,173,0.2), rgba(125,60,152,0.15)) !important;
      border: calc(var(--metier-border-width) * 1.2) solid #8e44ad !important;
      border-radius: var(--metier-border-radius) !important;
      box-shadow: 
          0 var(--metier-spacing-sm) var(--metier-spacing-lg) rgba(142,68,173,0.4),
          inset 0 var(--metier-spacing-xs) 0 rgba(244,230,183,0.3) !important;
      position: relative !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-effet-titre-final > label {
      font-size: calc(var(--metier-base-size) * 1.4) !important;
      font-weight: bold !important;
      color: #f4e6b7 !important;
      text-align: center !important;
      display: block !important;
      margin-bottom: var(--metier-spacing-md) !important;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-final-content {
      display: flex !important;
      flex-direction: column !important;
      gap: var(--metier-spacing-md) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-final-content input[type="text"] {
      font-size: calc(var(--metier-base-size) * 1.3) !important;
      font-weight: bold !important;
      text-align: center !important;
      background: linear-gradient(135deg, #ffd700, #ffed4e) !important;
      border: calc(var(--metier-border-width) * 1.2) solid #8e44ad !important;
      color: #3d2914 !important;
      box-shadow: 
          0 var(--metier-spacing-xs) var(--metier-spacing-md) rgba(142,68,173,0.5),
          inset 0 var(--metier-spacing-xs) 0 rgba(255,255,255,0.4) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-titre-final-content textarea {
      min-height: clamp(80px, 8vw, 120px) !important;
      font-size: calc(var(--metier-base-size) * 1.1) !important;
      font-weight: 600 !important;
      background: linear-gradient(135deg, #f4e6b7, #e6d690) !important;
      border: calc(var(--metier-border-width) * 1.2) solid #8e44ad !important;
  }
  
  /* === PASSIFS ISOLÉS === */
  .sheet-tab-content.sheet-metier .sheet-passif-item {
      background: linear-gradient(135deg, rgba(102,16,242,0.2), rgba(86,13,204,0.15)) !important;
      border: var(--metier-border-width) solid #6610f2 !important;
      border-radius: var(--metier-border-radius) !important;
      padding: var(--metier-spacing-lg) !important;
      margin: var(--metier-spacing-lg) 0 !important;
      transition: all 0.3s ease !important;
      box-shadow: 0 var(--metier-spacing-xs) var(--metier-spacing-md) rgba(102,16,242,0.3) !important;
      width: 100% !important;
      box-sizing: border-box !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-passif-item:hover {
      border-color: #5a0dc9 !important;
      box-shadow: 0 calc(var(--metier-spacing-xs) * 1.5) calc(var(--metier-spacing-md) * 1.3) rgba(102,16,242,0.4) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-passif-header {
      display: grid !important;
      grid-template-columns: 1fr auto !important;
      gap: var(--metier-spacing-md) !important;
      margin-bottom: var(--metier-spacing-md) !important;
      width: 100% !important;
  }
  
  /* === PROTECTION ROLL TEMPLATES - EXCLUSIONS EXPLICITES === */
  
  /* Réinitialiser tous les styles pour les roll templates dans la section métier */
  .sheet-tab-content.sheet-metier .sheet-rolltemplate,
  .sheet-tab-content.sheet-metier [class*="sheet-rolltemplate"],
  .sheet-tab-content.sheet-metier .rolltemplate,
  .sheet-tab-content.sheet-metier [class*="rolltemplate"],
  .sheet-tab-content.sheet-metier .inlinerollresult,
  .sheet-tab-content.sheet-metier [class*="inlineroll"] {
      all: revert !important;
      font-family: inherit !important;
      font-size: inherit !important;
      color: inherit !important;
      background: inherit !important;
      border: inherit !important;
      padding: inherit !important;
      margin: inherit !important;
      box-shadow: inherit !important;
      border-radius: inherit !important;
  }
  
  /* Réinitialiser tous les inputs/textarea dans les roll templates */
  .sheet-tab-content.sheet-metier .sheet-rolltemplate input,
  .sheet-tab-content.sheet-metier [class*="sheet-rolltemplate"] input,
  .sheet-tab-content.sheet-metier .rolltemplate input,
  .sheet-tab-content.sheet-metier [class*="rolltemplate"] input,
  .sheet-tab-content.sheet-metier .inlinerollresult input,
  .sheet-tab-content.sheet-metier [class*="inlineroll"] input,
  .sheet-tab-content.sheet-metier .sheet-rolltemplate textarea,
  .sheet-tab-content.sheet-metier [class*="sheet-rolltemplate"] textarea,
  .sheet-tab-content.sheet-metier .rolltemplate textarea,
  .sheet-tab-content.sheet-metier [class*="rolltemplate"] textarea,
  .sheet-tab-content.sheet-metier .inlinerollresult textarea,
  .sheet-tab-content.sheet-metier [class*="inlineroll"] textarea,
  .sheet-tab-content.sheet-metier .sheet-rolltemplate select,
  .sheet-tab-content.sheet-metier [class*="sheet-rolltemplate"] select,
  .sheet-tab-content.sheet-metier .rolltemplate select,
  .sheet-tab-content.sheet-metier [class*="rolltemplate"] select,
  .sheet-tab-content.sheet-metier .inlinerollresult select,
  .sheet-tab-content.sheet-metier [class*="inlineroll"] select {
      all: revert !important;
  }
  
  /* Réinitialiser tous les labels dans les roll templates */
  .sheet-tab-content.sheet-metier .sheet-rolltemplate label,
  .sheet-tab-content.sheet-metier [class*="sheet-rolltemplate"] label,
  .sheet-tab-content.sheet-metier .rolltemplate label,
  .sheet-tab-content.sheet-metier [class*="rolltemplate"] label,
  .sheet-tab-content.sheet-metier .inlinerollresult label,
  .sheet-tab-content.sheet-metier [class*="inlineroll"] label {
      all: revert !important;
  }
  
  /* === INPUTS GÉNÉRAUX ISOLÉS AVEC EXCLUSION ROLL TEMPLATES === */
  .sheet-tab-content.sheet-metier input[type="text"]:not(.sheet-rolltemplate input):not([class*="sheet-rolltemplate"] input):not(.rolltemplate input):not([class*="rolltemplate"] input):not(.inlinerollresult input):not([class*="inlineroll"] input), 
  .sheet-tab-content.sheet-metier input[type="number"]:not(.sheet-rolltemplate input):not([class*="sheet-rolltemplate"] input):not(.rolltemplate input):not([class*="rolltemplate"] input):not(.inlinerollresult input):not([class*="inlineroll"] input), 
  .sheet-tab-content.sheet-metier textarea:not(.sheet-rolltemplate textarea):not([class*="sheet-rolltemplate"] textarea):not(.rolltemplate textarea):not([class*="rolltemplate"] textarea):not(.inlinerollresult textarea):not([class*="inlineroll"] textarea), 
  .sheet-tab-content.sheet-metier select:not(.sheet-rolltemplate select):not([class*="sheet-rolltemplate"] select):not(.rolltemplate select):not([class*="rolltemplate"] select):not(.inlinerollresult select):not([class*="inlineroll"] select) {
      width: 100% !important;
      padding: var(--metier-spacing-sm) !important;
      border: var(--metier-border-width) solid #8b6914 !important;
      border-radius: calc(var(--metier-border-radius) * 0.7) !important;
      font-size: var(--metier-base-size) !important;
      transition: all 0.3s ease !important;
      font-family: 'Georgia', serif !important;
      font-weight: 600 !important;
      background: linear-gradient(135deg, #f4e6b7, #e6d690) !important;
      color: #3d2914 !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(0,0,0,0.15),
          0 calc(var(--metier-spacing-xs) * 0.5) var(--metier-spacing-xs) rgba(139,105,20,0.3) !important;
      box-sizing: border-box !important;
      min-height: 44px !important;
  }
  
  .sheet-tab-content.sheet-metier input[type="text"]:focus:not(.sheet-rolltemplate input):not([class*="sheet-rolltemplate"] input):not(.rolltemplate input):not([class*="rolltemplate"] input):not(.inlinerollresult input):not([class*="inlineroll"] input), 
  .sheet-tab-content.sheet-metier input[type="number"]:focus:not(.sheet-rolltemplate input):not([class*="sheet-rolltemplate"] input):not(.rolltemplate input):not([class*="rolltemplate"] input):not(.inlinerollresult input):not([class*="inlineroll"] input), 
  .sheet-tab-content.sheet-metier textarea:focus:not(.sheet-rolltemplate textarea):not([class*="sheet-rolltemplate"] textarea):not(.rolltemplate textarea):not([class*="rolltemplate"] textarea):not(.inlinerollresult textarea):not([class*="inlineroll"] textarea), 
  .sheet-tab-content.sheet-metier select:focus:not(.sheet-rolltemplate select):not([class*="sheet-rolltemplate"] select):not(.rolltemplate select):not([class*="rolltemplate"] select):not(.inlinerollresult select):not([class*="inlineroll"] select) {
      border-color: #b8860b !important;
      outline: none !important;
      box-shadow: 
          inset 0 var(--metier-spacing-xs) var(--metier-spacing-xs) rgba(0,0,0,0.15),
          0 0 var(--metier-spacing-md) rgba(184,134,11,0.5) !important;
      background: linear-gradient(135deg, #f5e8c1, #e8d09a) !important;
  }
  
  .sheet-tab-content.sheet-metier textarea:not(.sheet-rolltemplate textarea):not([class*="sheet-rolltemplate"] textarea):not(.rolltemplate textarea):not([class*="rolltemplate"] textarea):not(.inlinerollresult textarea):not([class*="inlineroll"] textarea) {
      min-height: clamp(80px, 8vw, 150px) !important;
      resize: vertical !important;
      line-height: 1.4 !important;
  }
  
  .sheet-tab-content.sheet-metier label:not(.sheet-rolltemplate label):not([class*="sheet-rolltemplate"] label):not(.rolltemplate label):not([class*="rolltemplate"] label):not(.inlinerollresult label):not([class*="inlineroll"] label) {
      font-weight: 700 !important;
      color: #f4e6b7 !important;
      margin-bottom: var(--metier-spacing-sm) !important;
      display: block !important;
      font-size: var(--metier-base-size) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.6) !important;
  }
  
  .sheet-tab-content.sheet-metier .sheet-inline-label {
      display: inline !important;
      margin-right: var(--metier-spacing-md) !important;
      font-size: calc(var(--metier-base-size) * 1.1) !important;
      white-space: nowrap !important;
  }
  
  /* === BOUTONS FIELDSET ISOLÉS === */
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol {
      display: flex !important;
      flex-wrap: wrap !important;
      gap: var(--metier-spacing-sm) !important;
      margin: var(--metier-spacing-md) 0 !important;
      justify-content: center !important;
      align-items: center !important;
  }
  
  .sheet-tab-content.sheet-metier .repcontainer .repitem {
      margin-bottom: var(--metier-spacing-md) !important;
      width: 100% !important;
      box-sizing: border-box !important;
  }
  
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol .btn,
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol button,
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol input[type="button"] {
      background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914) !important;
      border: var(--metier-border-width) solid #654321 !important;
      border-radius: calc(var(--metier-border-radius) * 0.8) !important;
      color: #f4e6b7 !important;
      font-family: 'Georgia', serif !important;
      font-size: clamp(12px, 1.1vw, 16px) !important;
      font-weight: bold !important;
      padding: var(--metier-spacing-sm) var(--metier-spacing-md) !important;
      min-height: 44px !important;
      min-width: clamp(80px, 15vw, 120px) !important;
      cursor: pointer !important;
      transition: all 0.3s ease !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.6) !important;
      box-shadow: 
          0 var(--metier-spacing-xs) var(--metier-spacing-sm) rgba(0,0,0,0.3),
          inset 0 calc(var(--metier-spacing-xs) * 0.5) 0 rgba(244,230,183,0.2) !important;
      text-transform: uppercase !important;
      letter-spacing: 0.5px !important;
      margin: var(--metier-spacing-xs) !important;
      box-sizing: border-box !important;
  }
  
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol .btn:hover,
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol button:hover,
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol input[type="button"]:hover {
      background: linear-gradient(135deg, #a68b2f, #8b6914, #a68b2f) !important;
      border-color: #8b6914 !important;
      box-shadow: 
          0 calc(var(--metier-spacing-xs) * 1.5) var(--metier-spacing-md) rgba(139,105,20,0.5),
          inset 0 calc(var(--metier-spacing-xs) * 0.5) 0 rgba(244,230,183,0.3) !important;
      transform: translateY(-1px) !important;
  }
  
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol .btn:active,
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol button:active,
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol input[type="button"]:active {
      transform: translateY(0px) !important;
      box-shadow: 
          0 var(--metier-spacing-xs) var(--metier-spacing-sm) rgba(0,0,0,0.3),
          inset 0 calc(var(--metier-spacing-xs) * 0.5) 0 rgba(0,0,0,0.1) !important;
  }
  
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol .btn.btn-danger,
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol button[class*="delete"],
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol input[value*="Delete"],
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol input[value*="Remove"] {
      background: linear-gradient(135deg, #d32f2f, #b71c1c, #d32f2f) !important;
      border-color: #b71c1c !important;
  }
  
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol .btn.btn-danger:hover,
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol button[class*="delete"]:hover,
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol input[value*="Delete"]:hover,
  .sheet-tab-content.sheet-metier .repcontainer .repcontrol input[value*="Remove"]:hover {
      background: linear-gradient(135deg, #f44336, #d32f2f, #f44336) !important;
      border-color: #d32f2f !important;
  }
  
  /* === MEDIA QUERIES ISOLÉES === */
  
  /* Très grands écrans */
  @media (min-width: 1920px) {
      .sheet-tab-content.sheet-metier {
          --metier-content-padding: clamp(2rem, 3vw, 4rem);
          --metier-grid-min-column: clamp(300px, 20vw, 400px);
      }
      
      .sheet-tab-content.sheet-metier .sheet-metier-grades {
          grid-template-columns: repeat(5, 1fr) !important;
          gap: var(--metier-spacing-lg) !important;
      }
  }
  
  /* Grands écrans */
  @media (min-width: 1200px) and (max-width: 1919px) {
      .sheet-tab-content.sheet-metier .sheet-metier-grades {
          grid-template-columns: repeat(5, 1fr) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-talent-grid {
          grid-template-columns: repeat(3, 1fr) !important;
      }
  }
  
  /* Tablettes en mode portrait */
  @media (max-width: 768px) {
      .sheet-tab-content.sheet-metier {
          --metier-base-size: clamp(11px, 2vw, 16px);
          --metier-content-padding: clamp(0.5rem, 2vw, 1rem);
          --metier-grid-min-column: clamp(120px, 35vw, 200px);
      }
      
      .sheet-tab-content.sheet-metier .sheet-metier-grades {
          grid-template-columns: repeat(3, 1fr) !important;
          gap: var(--metier-spacing-md) !important;
          padding: var(--metier-spacing-md) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-experience-bar {
          grid-template-columns: 1fr !important;
          gap: var(--metier-spacing-xs) !important;
          text-align: center !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-experience-bar .sheet-inline-label {
          grid-column: 1 / -1 !important;
          display: block !important;
          margin-bottom: var(--metier-spacing-xs) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-mission-hebdo-grid {
          grid-template-columns: 1fr !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-mission-hebdo-details {
          padding: var(--metier-spacing-sm) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-mission-hebdo-details textarea {
          min-height: clamp(60px, 8vw, 100px) !important;
          font-size: calc(var(--metier-base-size) * 0.95) !important;
      }
      
      /* ⭐ MISSIONS SPÉCIALES - RESPONSIVE */
      .sheet-tab-content.sheet-metier .sheet-mission-stats-grid {
          grid-template-columns: repeat(2, 1fr) !important;
          gap: var(--metier-spacing-sm) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-mission-stat-item label {
          font-size: calc(var(--metier-base-size) * 0.9) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-talent-grid {
          grid-template-columns: 1fr !important;
      }
      
      .sheet-tab-content.sheet-metier .repcontainer .repcontrol {
          flex-direction: column !important;
          gap: var(--metier-spacing-xs) !important;
      }
      
      .sheet-tab-content.sheet-metier .repcontainer .repcontrol .btn,
      .sheet-tab-content.sheet-metier .repcontainer .repcontrol button,
      .sheet-tab-content.sheet-metier .repcontainer .repcontrol input[type="button"] {
          width: 100% !important;
          min-width: unset !important;
          font-size: clamp(11px, 2.5vw, 14px) !important;
          padding: var(--metier-spacing-sm) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-obtention-header {
          grid-template-columns: 1fr !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-mission-recompense {
          grid-template-columns: 1fr !important;
          text-align: center !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-mission-recompense label {
          white-space: normal !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-titre-select-header {
          flex-direction: column !important;
          gap: var(--metier-spacing-xs) !important;
          text-align: center !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-titre-radio {
          align-self: center !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-exp-inputs-container {
          flex-direction: column !important;
          gap: var(--metier-spacing-xs) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-exp-input-group {
          width: 100% !important;
          max-width: 250px !important;
          justify-content: center !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-titre-aventure-info {
          font-size: calc(var(--metier-base-size) * 1) !important;
          padding: var(--metier-spacing-xs) !important;
          margin: var(--metier-spacing-xs) 0 !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-titre-aventure::before {
          font-size: calc(var(--metier-base-size) * 0.7) !important;
          padding: calc(var(--metier-spacing-xs) * 0.3) calc(var(--metier-spacing-xs) * 0.6) !important;
          top: calc(-1 * calc(var(--metier-spacing-xs) * 0.6)) !important;
          right: var(--metier-spacing-xs) !important;
      }
  }
  
  /* Très petits écrans */
  @media (max-width: 320px) {
      .sheet-tab-content.sheet-metier .sheet-metier-grades {
          grid-template-columns: 1fr !important;
          gap: var(--metier-spacing-sm) !important;
      }
  }
  
  @media (max-width: 480px) {
      .sheet-tab-content.sheet-metier {
          --metier-base-size: clamp(12px, 3vw, 16px);
          --metier-content-padding: clamp(0.4rem, 3vw, 1rem);
          --metier-grid-min-column: 100%;
      }
      
      .sheet-tab-content.sheet-metier .sheet-metier-grades {
          grid-template-columns: repeat(2, 1fr) !important;
          gap: var(--metier-spacing-sm) !important;
      }
      
      /* ⭐ MISSIONS SPÉCIALES - PETITS ÉCRANS */
      .sheet-tab-content.sheet-metier .sheet-mission-stats-grid {
          grid-template-columns: 1fr !important;
          gap: var(--metier-spacing-xs) !important;
          padding: var(--metier-spacing-xs) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-mission-stat-item {
          text-align: center !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-mission-action-section textarea {
          min-height: clamp(60px, 8vw, 100px) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-mission-hebdo-details label {
          font-size: var(--metier-base-size) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-titre-section-header,
      .sheet-tab-content.sheet-metier .sheet-titre-section-header-collapsible {
          font-size: calc(var(--metier-base-size) * 1.1) !important;
          padding: var(--metier-spacing-xs) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-missions-titre {
          gap: var(--metier-spacing-xs) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-mission-numero {
          font-size: var(--metier-base-size) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-titre-radio {
          width: clamp(18px, 3vw, 24px) !important;
          height: clamp(18px, 3vw, 24px) !important;
          align-self: center !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-titre-checkbox-label {
          font-size: calc(var(--metier-base-size) * 0.9) !important;
          padding: calc(var(--metier-spacing-xs) * 0.4) calc(var(--metier-spacing-sm) * 0.6) !important;
      }
      
      .sheet-tab-content.sheet-metier .sheet-titre-aventure-info p {
          font-size: var(--metier-base-size) !important;
      }
  }
  
  /* === OPTIMISATION DES ANIMATIONS POUR PERFORMANCE === */
  @media (prefers-reduced-motion: reduce) {
      .sheet-tab-content.sheet-metier *,
      .sheet-tab-content.sheet-metier *::before,
      .sheet-tab-content.sheet-metier *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
      }
  }
  
  /* =================== FIN DU CSS ISOLÉ =================== */
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === CSS FANTASY COMPLET POUR SECTION CONNAISSANCES AVEC GUIDE === */
  /* ISOLATION COMPLÈTE - N'AFFECTE PAS LES ROLL TEMPLATES */
  /* VERSION AGRANDIE VISUELLEMENT */
  
  /* === PROTECTION CONTRE LES ROLL TEMPLATES === */
  /* Empêche ce CSS d'affecter les roll templates */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-box-wrapper {
    font-family: 'Georgia', serif;
    background: linear-gradient(145deg, #2c1e0f, #3d2914, #2c1e0f);
    border: 2px solid #8b6914;
    border-radius: 14px;
    padding: 20px;
    margin: 10px 0;
    box-shadow: 
      0 0 0 1px #654321,
      0 4px 12px rgba(0,0,0,0.6),
      inset 0 1px 0 rgba(139,105,20,0.3);
  }
  
  /* === SECTION DETAILS PRINCIPALE === */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-subdetails {
    background: transparent;
    border: none;
    margin: 0;
    padding: 0;
  }
  
  /* === TITRE "CONNAISSANCES DU PERSONNAGE" === */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-section-title {
    background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
    color: #f4e6b7;
    padding: 16px 20px;
    border-radius: 10px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center !important;
    gap: 12px;
    font-weight: bold;
    font-size: 22px;
    text-transform: uppercase;
    letter-spacing: 1px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    border: 2px solid #654321;
    box-shadow: 
      0 2px 6px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(139,105,20,0.4);
    transition: all 0.3s ease;
    text-align: center !important;
    list-style: none;
    margin-bottom: 20px;
  }
  
  /* SUPPRIME LE MARQUEUR DE DETAILS/SUMMARY */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-section-title::-webkit-details-marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-section-title::marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-section-title:hover {
    background: linear-gradient(90deg, #cd853f, #8b6914, #cd853f);
    transform: translateY(-1px);
    box-shadow: 
      0 4px 10px rgba(0,0,0,0.5),
      inset 0 1px 0 rgba(139,105,20,0.4);
  }
  
  /* Ajouter une icône avant le titre */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-section-title::before {
    content: "※";
    font-size: 26px;
    text-shadow: 0 0 8px rgba(255,215,0,0.6);
    margin-right: 10px;
  }
  
  /* === CONTENU DE LA SECTION === */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-subdetails[open] {
    animation: fadeInSlide 0.4s ease-out;
  }
  
  @keyframes fadeInSlide {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* === FIELDSET REPEATING - CORRECTION IMPORTANTE === */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) fieldset.repeating_connaissances {
    border: none;
    padding: 0;
    margin: 0;
    background: transparent;
  }
  
  /* === GROUPE DE CONNAISSANCES - LAYOUT 3 COLONNES === */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissances-group {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    padding: 20px 12px;
    background: rgba(244,230,183,0.05);
    border-radius: 0 0 8px 8px;
  }
  
  /* === ITEMS DE CONNAISSANCE INDIVIDUELS - AGRANDIS === */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    transition: all 0.4s ease;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    gap: 12px;
    width: 100%;
    max-width: none;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
    transform: translateY(-2px);
    box-shadow: 
      0 6px 16px rgba(0,0,0,0.4),
      0 0 12px rgba(139,105,20,0.3);
    border-color: #cd853f;
  }
  
  /* === INPUTS TEXTE - AGRANDIS === */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item input[type="text"] {
    width: 100%;
    background: linear-gradient(135deg, rgba(244,230,183,0.3), rgba(230,214,144,0.2));
    border: 2px solid #8b6914;
    border-radius: 8px;
    padding: 16px 20px;
    color: #2c1e0f !important;
    font-size: 17px;
    font-weight: 600;
    font-family: 'Georgia', serif;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 1px 3px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    margin: 0;
    box-sizing: border-box;
    min-height: 52px;
    line-height: 1.3;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item input[type="text"]:focus {
    background: linear-gradient(135deg, rgba(244,230,183,0.5), rgba(230,214,144,0.4));
    border-color: #cd853f;
    outline: none;
    box-shadow: 
      0 0 8px rgba(205,133,63,0.5),
      inset 0 1px 3px rgba(0,0,0,0.2);
    color: #1a1a1a !important;
    transform: translateY(-1px);
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item input[type="text"]::placeholder {
    color: rgba(44, 30, 15, 0.7) !important;
    font-style: italic;
    font-weight: 400;
  }
  
  /* === SELECTS NIVEAU - AGRANDIS === */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item select {
    width: 100%;
    background: linear-gradient(135deg, #8b6914, #b8860b);
    border: 2px solid #654321;
    border-radius: 8px;
    padding: 16px 20px;
    color: #f4e6b7 !important;
    font-size: 17px;
    font-weight: bold;
    font-family: 'Georgia', serif;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    cursor: pointer;
    box-shadow: 
      0 2px 6px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(244,230,183,0.2);
    transition: all 0.3s ease;
    margin: 0;
    box-sizing: border-box;
    min-height: 52px;
    line-height: 1.3;
    vertical-align: middle;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item select:hover {
    background: linear-gradient(135deg, #cd853f, #daa520);
    border-color: #8b6914;
    transform: translateY(-1px);
    box-shadow: 
      0 4px 10px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(244,230,183,0.2);
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item select:focus {
    outline: none;
    box-shadow: 
      0 0 10px rgba(205,133,63,0.6),
      0 4px 10px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(244,230,183,0.2);
  }
  
  /* === OPTIONS DU SELECT === */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item select option {
    background: #3d2914 !important;
    color: #f4e6b7 !important;
    padding: 10px 14px;
    font-weight: bold;
    border: none;
  }
  
  /* === NUMÉROTATION AGRANDIE === */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item:nth-child(1)::after {
    content: "①";
    position: absolute;
    top: 16px;
    right: 20px;
    font-size: 26px;
    color: rgba(139,105,20,0.6);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item:nth-child(2)::after {
    content: "②";
    position: absolute;
    top: 16px;
    right: 20px;
    font-size: 26px;
    color: rgba(139,105,20,0.6);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item:nth-child(3)::after {
    content: "③";
    position: absolute;
    top: 16px;
    right: 20px;
    font-size: 26px;
    color: rgba(139,105,20,0.6);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
  }
  
  /* =================== GUIDE DES NIVEAUX DE CONNAISSANCE - AGRANDI =================== */
  
  /* Container principal du guide */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-knowledge-guide {
    padding: 20px;
    background: linear-gradient(135deg, rgba(244,230,183,0.03), rgba(230,214,144,0.02));
    font-family: 'Georgia', serif;
    display: block;
  }
  
  /* Introduction du guide */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-knowledge-intro {
    background: linear-gradient(135deg, rgba(139,105,20,0.1), rgba(107,79,16,0.08));
    border: 2px solid rgba(139,105,20,0.3);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 24px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-knowledge-description {
    color: #f4e6b7;
    font-size: clamp(14px, 1.3vw, 18px);
    line-height: 1.7;
    text-align: center;
    margin: 0;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    font-weight: 500;
  }
  
  /* Niveaux de connaissance */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-knowledge-level {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 10px;
    margin-bottom: 16px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    overflow: visible;
    display: block;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-knowledge-level:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0,0,0,0.4);
    border-color: #cd853f;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-knowledge-level[open] {
    background: linear-gradient(135deg, rgba(139,69,19,0.2), rgba(101,67,33,0.15));
  }
  
  /* Summary des niveaux */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-knowledge-summary {
    background: linear-gradient(90deg, rgba(139,105,20,0.3), rgba(107,79,16,0.25));
    padding: 16px 20px;
    cursor: pointer;
    list-style: none;
    border-bottom: 1px solid rgba(139,69,19,0.4);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 16px;
    font-family: 'Georgia', serif;
    position: relative;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-knowledge-summary::-webkit-details-marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-knowledge-summary::marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-knowledge-summary:hover {
    background: linear-gradient(90deg, rgba(139,105,20,0.4), rgba(107,79,16,0.3));
  }
  
  /* Badges de niveau - AGRANDIS */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-level-badge {
    min-width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 18px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    box-shadow: 
      0 2px 4px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(255,255,255,0.2);
    flex-shrink: 0;
  }
  
  /* Couleurs des badges par niveau */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-badge-none {
    background: linear-gradient(135deg, #6b6b6b, #505050);
    color: #e0e0e0;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-badge-minor {
    background: linear-gradient(135deg, #8b4513, #654321);
    color: #f4e6b7;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-badge-moderate {
    background: linear-gradient(135deg, #b8860b, #8b6914);
    color: #f4e6b7;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-badge-average {
    background: linear-gradient(135deg, #cd853f, #a0522d);
    color: #f4e6b7;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-badge-intermediate {
    background: linear-gradient(135deg, #daa520, #b8860b);
    color: #2c1e0f;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-badge-major {
    background: linear-gradient(135deg, #ffd700, #daa520);
    color: #2c1e0f;
    box-shadow: 
      0 2px 4px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(255,255,255,0.4),
      0 0 8px rgba(255,215,0,0.3);
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-badge-perfect {
    background: linear-gradient(135deg, #fff700, #ffd700);
    color: #2c1e0f;
    box-shadow: 
      0 2px 4px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(255,255,255,0.5),
      0 0 12px rgba(255,255,0,0.4);
    animation: sheetKnowledgePerfectGlow 2s ease-in-out infinite;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-badge-summary {
    background: linear-gradient(135deg, #8a2be2, #9370db);
    color: #f4e6b7;
    font-size: 20px;
  }
  
  @keyframes sheetKnowledgePerfectGlow {
    0%, 100% {
      box-shadow: 
        0 2px 4px rgba(0,0,0,0.3),
        inset 0 1px 0 rgba(255,255,255,0.5),
        0 0 12px rgba(255,255,0,0.4);
    }
    50% {
      box-shadow: 
        0 2px 4px rgba(0,0,0,0.3),
        inset 0 1px 0 rgba(255,255,255,0.6),
        0 0 20px rgba(255,255,0,0.6);
    }
  }
  
  /* Nom du niveau - AGRANDI */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-level-name {
    flex: 1;
    color: #f4e6b7;
    font-weight: bold;
    font-size: clamp(16px, 1.4vw, 20px);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    text-transform: uppercase;
    letter-spacing: 0.8px;
  }
  
  /* Bonus du niveau - AGRANDI */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-level-bonus {
    color: #daa520;
    font-weight: bold;
    font-size: clamp(14px, 1.2vw, 17px);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    background: linear-gradient(135deg, rgba(218,165,32,0.2), rgba(139,105,20,0.15));
    padding: 6px 12px;
    border-radius: 14px;
    border: 1px solid rgba(218,165,32,0.3);
    flex-shrink: 0;
  }
  
  /* Contenu des niveaux - AGRANDI */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-knowledge-content {
    padding: 20px;
    background: linear-gradient(135deg, rgba(244,230,183,0.05), rgba(230,214,144,0.03));
    border-top: 1px solid rgba(139,69,19,0.3);
    color: #f4e6b7;
    line-height: 1.7;
    font-size: clamp(14px, 1.2vw, 17px);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-knowledge-content p {
    margin: 0 0 16px 0;
  }
  
  /* Informations de progression - AGRANDIES */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-progression-info {
    background: linear-gradient(135deg, rgba(139,105,20,0.15), rgba(107,79,16,0.1));
    border: 1px solid rgba(139,105,20,0.3);
    border-radius: 8px;
    padding: 14px;
    margin-top: 16px;
    font-size: clamp(13px, 1.1vw, 16px);
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-cost-badge {
    background: linear-gradient(135deg, #8b6914, #6b4f10);
    color: #f4e6b7;
    padding: 4px 12px;
    border-radius: 12px;
    font-weight: bold;
    font-size: clamp(12px, 1vw, 15px);
    text-transform: uppercase;
    letter-spacing: 0.4px;
    box-shadow: 
      0 1px 3px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(244,230,183,0.2);
  }
  
  /* Tableau récapitulatif - AGRANDI */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-progression-table {
    background: linear-gradient(135deg, rgba(139,69,19,0.1), rgba(101,67,33,0.08));
    border: 2px solid rgba(139,105,20,0.3);
    border-radius: 10px;
    overflow: hidden;
    margin-top: 16px;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-table-header,
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-table-row {
    display: grid;
    grid-template-columns: 70px 1fr 90px 90px;
    gap: 1px;
    background: rgba(139,69,19,0.2);
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-table-header {
    background: linear-gradient(90deg, #8b6914, #6b4f10);
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.6px;
    font-size: clamp(13px, 1.1vw, 16px);
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-table-header > div,
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-table-row > div {
    padding: 10px 8px;
    background: linear-gradient(135deg, rgba(244,230,183,0.05), rgba(230,214,144,0.03));
    color: #f4e6b7;
    text-align: center;
    font-size: clamp(12px, 1vw, 15px);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-table-header > div {
    background: rgba(139,105,20,0.3);
    color: #f4e6b7;
    font-weight: bold;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-table-row:nth-child(even) > div {
    background: linear-gradient(135deg, rgba(244,230,183,0.08), rgba(230,214,144,0.06));
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-table-row:hover > div {
    background: linear-gradient(135deg, rgba(139,105,20,0.15), rgba(107,79,16,0.1));
  }
  
  /* Styles spéciaux pour les niveaux */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-level-none {
    border-color: #6b6b6b;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-level-minor {
    border-color: #8b4513;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-level-moderate {
    border-color: #b8860b;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-level-average {
    border-color: #cd853f;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-level-intermediate {
    border-color: #daa520;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-level-major {
    border-color: #ffd700;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3), 0 0 8px rgba(255,215,0,0.2);
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-level-perfect {
    border-color: #fff700;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3), 0 0 12px rgba(255,255,0,0.3);
    animation: sheetKnowledgePerfectBorder 3s ease-in-out infinite;
  }
  
  @keyframes sheetKnowledgePerfectBorder {
    0%, 100% {
      box-shadow: 0 2px 6px rgba(0,0,0,0.3), 0 0 12px rgba(255,255,0,0.3);
    }
    50% {
      box-shadow: 0 2px 6px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,0,0.5);
    }
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-level-summary {
    border-color: #8a2be2;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3), 0 0 8px rgba(138,43,226,0.2);
  }
  
  /* === PROTECTION ROLL TEMPLATES === */
  /* S'assurer qu'aucun style n'affecte les roll templates */
  [class*="rolltemplate"] * {
    /* Reset pour éviter toute interférence */
  }
  
  /* Empêche spécifiquement l'héritage sur les roll templates */
  .sheet-rolltemplate-simple,
  .sheet-rolltemplate-resistance,
  .sheet-rolltemplate-damage,
  .sheet-rolltemplate-combo,
  .sheet-rolltemplate-advanced, {
    font-family: inherit !important;
    background: inherit !important;
    border: inherit !important;
    padding: inherit !important;
    margin: inherit !important;
    box-shadow: inherit !important;
  }
  
  /* === RESPONSIVE - 3 COLONNES DESKTOP, 1 COLONNE MOBILE === */
  @media (max-width: 1024px) {
    .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissances-group {
      grid-template-columns: repeat(2, 1fr);
      gap: 18px;
    }
  }
  
  @media (max-width: 768px) {
    .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissances-group {
      grid-template-columns: 1fr;
      padding: 16px 8px;
      gap: 16px;
    }
    
    .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item {
      padding: 16px;
    }
    
    .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-section-title {
      font-size: 20px;
      padding: 14px 18px;
    }
    
    .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-section-title::before {
      font-size: 24px;
      margin-right: 8px;
    }
    
    .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item input[type="text"],
    .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item select {
      font-size: 15px;
      padding: 14px 18px;
      min-height: 48px;
    }
    
    /* Responsive pour le guide des connaissances */
    .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-knowledge-summary {
      flex-direction: column;
      gap: 10px;
      text-align: center;
    }
    
    .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-level-badge {
      min-width: 36px;
      height: 36px;
      font-size: 16px;
    }
    
    .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-table-header,
    .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-table-row {
      grid-template-columns: 60px 1fr 80px 80px;
    }
    
    .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-table-header > div,
    .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-table-row > div {
      padding: 8px 6px;
      font-size: clamp(11px, 0.9vw, 14px);
    }
    
    .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-knowledge-content {
      padding: 16px;
      font-size: clamp(13px, 1.1vw, 16px);
    }
  }
  
  /* === CORRECTIONS SPÉCIFIQUES LAYOUT 3 COLONNES === */
  /* Force un layout en grid propre */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .repeating_connaissances {
    display: block !important;
  }
  
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .repeating_connaissances .repitem {
    display: contents !important;
  }
  
  /* Force la largeur des items en grid */
  .sheet-tab-content.sheet-connaissance:not([class*="rolltemplate"]) .sheet-connaissance-item {
    min-width: 0;
    max-width: 100%;
    flex: none !important;
    grid-column: span 1;
  }
  
  /* Évite tout conflit avec les autres sections */
  .sheet-tab-content:not(.sheet-connaissance) .sheet-connaissance-item,
  .sheet-tab-content:not(.sheet-connaissance) .sheet-connaissances-group {
    all: unset;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === CSS FANTASY POUR SECTION INFORMATIONS PERSO === */
  /* ISOLATION COMPLÈTE - N'AFFECTE PAS LES ROLL TEMPLATES */
  
  /* === WRAPPER PRINCIPAL === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-box-wrapper {
    font-family: 'Georgia', serif;
    background: linear-gradient(145deg, #2c1e0f, #3d2914, #2c1e0f);
    border: 2px solid #8b6914;
    border-radius: 12px;
    padding: 16px;
    margin: 8px 0;
    box-shadow: 
      0 0 0 1px #654321,
      0 4px 12px rgba(0,0,0,0.6),
      inset 0 1px 0 rgba(139,105,20,0.3);
  }
  
  /* === SECTIONS DETAILS PRINCIPALES === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-subdetails {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 10px;
    padding: 0;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    transition: all 0.4s ease;
    overflow: hidden;
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-subdetails:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
    transform: translateY(-2px);
    box-shadow: 
      0 6px 16px rgba(0,0,0,0.4),
      0 0 12px rgba(139,105,20,0.3);
    border-color: #cd853f;
  }
  
  /* === TITRES DES SECTIONS === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-section-title {
    background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
    color: #f4e6b7;
    padding: 12px 16px;
    border-radius: 8px 8px 0 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    border: none;
    box-shadow: 
      0 2px 6px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(139,105,20,0.4);
    transition: all 0.3s ease;
    text-align: center;
    list-style: none;
    margin: 0;
    position: relative;
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-section-title:hover {
    background: linear-gradient(90deg, #cd853f, #8b6914, #cd853f);
    transform: translateY(-1px);
    box-shadow: 
      0 4px 10px rgba(0,0,0,0.5),
      inset 0 1px 0 rgba(139,105,20,0.4);
  }
  
  /* SUPPRIME LE MARQUEUR DE DETAILS/SUMMARY */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-section-title::-webkit-details-marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-section-title::marker {
    display: none;
  }
  
  /* AJOUTE UN INDICATEUR PERSONNALISÉ */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-section-title::after {
    content: "⟢";
    position: absolute;
    right: 16px;
    font-size: 18px;
    color: #ffd700;
    text-shadow: 0 0 8px rgba(255,215,0,0.6), 1px 1px 2px rgba(0,0,0,0.8);
    transition: transform 0.3s ease;
  }
  
  /* ROTATION DE LA FLÈCHE QUAND OUVERT */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-subdetails[open] .sheet-section-title::after {
    transform: rotate(90deg);
  }
  
  /* === ANIMATION D'OUVERTURE === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-subdetails[open] {
    animation: fadeInSlide 0.4s ease-out;
  }
  
  @keyframes fadeInSlideInfos {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* === TABLEAUX === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-table-supplementaires {
    width: 100%;
    border-collapse: collapse;
    margin: 0;
    background: rgba(244,230,183,0.05);
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-table-supplementaires td {
    padding: 12px 16px;
    border-bottom: 1px solid rgba(139,105,20,0.2);
    vertical-align: top;
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-table-supplementaires tr:last-child td {
    border-bottom: none;
  }
  
  /* === LABELS FANTASY LISIBLES === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) label {
    color: #3d2914 !important; /* BRUN FONCÉ - LISIBLE MAIS FANTASY */
    font-weight: bold !important;
    font-size: 14px !important; /* TAILLE RAISONNABLE */
    text-shadow: 1px 1px 0 rgba(244,230,183,0.8) !important; /* OMBRE DORÉE SUBTILE */
    text-transform: uppercase !important; /* GARDE LE STYLE MÉDIÉVAL */
    letter-spacing: 1px !important; /* ESPACEMENT LÉGER */
    display: block;
    margin-bottom: 6px;
    font-family: 'Georgia', serif !important; /* GARDE LA POLICE FANTASY */
    background: linear-gradient(135deg, rgba(244,230,183,0.2), rgba(230,214,144,0.1)) !important; /* ARRIÈRE-PLAN DORÉ SUBTIL */
    padding: 3px 6px !important; /* PADDING DISCRET */
    border-radius: 3px !important; /* COINS LÉGÈREMENT ARRONDIS */
    border: 1px solid rgba(139,105,20,0.4) !important; /* BORDURE DORÉE DISCRÈTE */
    text-align: center !important; /* CENTRÉ COMME LES TITRES */
  }
  
  /* === LABELS DES CONTACTS PLUS VISIBLES === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-contact-field label,
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-contact-notes label {
    color: #f4e6b7 !important; /* COULEUR CLAIRE POUR CONTRASTE */
    font-weight: bold !important;
    font-size: 15px !important; /* PLUS GRAND */
    text-shadow: 2px 2px 4px rgba(0,0,0,0.9) !important; /* OMBRE NOIRE FORTE */
    text-transform: uppercase !important;
    letter-spacing: 1px !important;
    display: block;
    margin-bottom: 6px;
    font-family: 'Georgia', serif !important;
    background: linear-gradient(135deg, rgba(139,69,19,0.4), rgba(101,67,33,0.3)) !important; /* ARRIÈRE-PLAN BRUN FONCÉ */
    padding: 6px 10px !important; /* PADDING PLUS IMPORTANT */
    border-radius: 6px !important;
    border: 2px solid rgba(139,105,20,0.6) !important; /* BORDURE PLUS VISIBLE */
    text-align: center !important;
    box-shadow: 0 2px 6px rgba(0,0,0,0.4) !important; /* OMBRE PORTÉE */
  }
  
  /* === INPUTS TEXTE === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) input[type="text"] {
    width: 100%;
    background: linear-gradient(135deg, rgba(244,230,183,0.3), rgba(230,214,144,0.2));
    border: 2px solid #8b6914;
    border-radius: 6px;
    padding: 10px 12px;
    color: #2c1e0f !important;
    font-size: 13px;
    font-weight: 600;
    font-family: 'Georgia', serif;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 1px 3px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    margin: 0;
    box-sizing: border-box;
    min-height: 36px;
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) input[type="text"]:focus {
    background: linear-gradient(135deg, rgba(244,230,183,0.5), rgba(230,214,144,0.4));
    border-color: #cd853f;
    outline: none;
    box-shadow: 
      0 0 8px rgba(205,133,63,0.5),
      inset 0 1px 3px rgba(0,0,0,0.2);
    color: #1a1a1a !important;
    transform: translateY(-1px);
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) input[type="text"]::placeholder {
    color: rgba(44, 30, 15, 0.6) !important;
    font-style: italic;
    font-weight: 400;
  }
  
  /* === TEXTAREAS === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) textarea {
    width: 100%;
    min-height: 80px;
    background: linear-gradient(135deg, rgba(244,230,183,0.3), rgba(230,214,144,0.2));
    border: 2px solid #8b6914;
    border-radius: 6px;
    padding: 10px 12px;
    color: #2c1e0f !important;
    font-size: 13px;
    font-weight: 600;
    font-family: 'Georgia', serif;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 1px 3px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    margin: 0;
    box-sizing: border-box;
    resize: vertical;
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) textarea:focus {
    background: linear-gradient(135deg, rgba(244,230,183,0.5), rgba(230,214,144,0.4));
    border-color: #cd853f;
    outline: none;
    box-shadow: 
      0 0 8px rgba(205,133,63,0.5),
      inset 0 1px 3px rgba(0,0,0,0.2);
    color: #1a1a1a !important;
    transform: translateY(-1px);
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) textarea::placeholder {
    color: rgba(44, 30, 15, 0.6) !important;
    font-style: italic;
    font-weight: 400;
  }
  
  /* === ZONE HISTOIRE === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-zone-histoire {
    padding: 16px;
    background: rgba(244,230,183,0.05);
  }
  
  /* === SECTION CONTACTS ADAPTATIVE === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-double-contact {
    display: flex; /* CHANGÉ DE GRID À FLEX */
    flex-wrap: wrap;
    gap: 12px; /* GAP RÉDUIT */
    padding: 16px;
    background: rgba(244,230,183,0.05);
    justify-content: stretch; /* ÉTIRE LES ÉLÉMENTS */
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-contact-card {
    background: linear-gradient(135deg, rgba(139,69,19,0.1), rgba(101,67,33,0.05));
    border: 2px solid rgba(139,69,19,0.3);
    border-radius: 8px;
    margin-bottom: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
    flex: 1; /* PREND L'ESPACE DISPONIBLE */
    min-width: 280px; /* LARGEUR MINIMALE */
    max-width: 100%; /* LARGEUR MAXIMALE */
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-contact-card:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.2), rgba(101,67,33,0.1));
    border-color: rgba(205,133,63,0.5);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }
  
  /* === HEADERS DES CONTACTS === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-contact-header {
    background: linear-gradient(90deg, rgba(139,105,20,0.8), rgba(107,79,16,0.8));
    color: #f4e6b7;
    padding: 10px 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    transition: all 0.3s ease;
    list-style: none;
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-contact-header::-webkit-details-marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-contact-header::marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-contact-header:hover {
    background: linear-gradient(90deg, rgba(205,133,63,0.8), rgba(139,105,20,0.8));
  }
  
  /* === CHEVRON DES CONTACTS === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .contact-chevron {
    color: #ffd700;
    font-size: 14px;
    text-shadow: 0 0 6px rgba(255,215,0,0.6);
    transition: transform 0.3s ease;
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-contact-card[open] .contact-chevron {
    transform: rotate(90deg);
  }
  
  /* === CONTENU DES CONTACTS === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-contact-body {
    padding: 16px;
    background: rgba(244,230,183,0.03);
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-contact-infos {
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
    margin-bottom: 16px;
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-contact-field {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-contact-notes {
    margin-top: 12px;
  }
  
  /* === FIELDSETS === */
  .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) fieldset {
    border: none;
    padding: 0;
    margin: 0;
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-double-contact {
      grid-template-columns: 1fr;
      padding: 12px;
    }
    
    .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-table-supplementaires td {
      padding: 8px 12px;
    }
    
    .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) .sheet-section-title {
      font-size: 14px;
      padding: 10px 14px;
    }
    
    .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) input[type="text"],
    .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) textarea {
      font-size: 12px;
      padding: 8px 10px;
      min-height: 32px;
    }
    
    .sheet-tab-content.sheet-infos:not([class*="rolltemplate"]) textarea {
      min-height: 60px;
    }
  }
  
  /* === PROTECTION ROLL TEMPLATES === */
  [class*="rolltemplate"] * {
    /* Reset pour éviter toute interférence */
  }
  
  /* Évite tout conflit avec les autres sections */
  .sheet-tab-content:not(.sheet-infos) .sheet-subdetails,
  .sheet-tab-content:not(.sheet-infos) .sheet-table-supplementaires {
    /* Neutralise les styles pour les autres onglets */
    all: unset;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === CSS FANTASY POUR SECTION INVENTAIRE AVEC SYSTÈME D'ARMES === */
  /* ISOLATION COMPLÈTE - N'AFFECTE PAS LES ROLL TEMPLATES */
  
  /* === WRAPPER PRINCIPAL === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-box-wrapper {
    font-family: 'Georgia', serif;
    background: linear-gradient(145deg, #2c1e0f, #3d2914, #2c1e0f);
    border: 2px solid #8b6914;
    border-radius: 12px;
    padding: 16px;
    margin: 8px 0;
    box-shadow: 
      0 0 0 1px #654321,
      0 4px 12px rgba(0,0,0,0.6),
      inset 0 1px 0 rgba(139,105,20,0.3);
  }
  
  /* === SECTION INVENTAIRE PRINCIPALE === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-wrapper {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 10px;
    padding: 0;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    transition: all 0.4s ease;
    overflow: hidden;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-wrapper:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
    transform: translateY(-2px);
    box-shadow: 
      0 6px 16px rgba(0,0,0,0.4),
      0 0 12px rgba(139,105,20,0.3);
    border-color: #cd853f;
  }
  
  /* === SECTION EFFETS DES OBJETS === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-item-effects-wrapper {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 10px;
    padding: 0;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    transition: all 0.4s ease;
    overflow: hidden;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-item-effects-wrapper:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
    transform: translateY(-2px);
    box-shadow: 
      0 6px 16px rgba(0,0,0,0.4),
      0 0 12px rgba(139,105,20,0.3);
    border-color: #cd853f;
  }
  
  /* === TITRES PRINCIPAUX === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-section-title {
    background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
    color: #f4e6b7;
    padding: 12px 16px;
    border-radius: 8px 8px 0 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    border: none;
    box-shadow: 
      0 2px 6px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(139,105,20,0.4);
    transition: all 0.3s ease;
    text-align: center;
    list-style: none;
    margin: 0;
    position: relative;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-section-title:hover {
    background: linear-gradient(90deg, #cd853f, #8b6914, #cd853f);
    transform: translateY(-1px);
    box-shadow: 
      0 4px 10px rgba(0,0,0,0.5),
      inset 0 1px 0 rgba(139,105,20,0.4);
  }
  
  /* SUPPRIME LE MARQUEUR DE DETAILS/SUMMARY */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-section-title::-webkit-details-marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-section-title::marker {
    display: none;
  }
  
  /* AJOUTE UN INDICATEUR PERSONNALISÉ */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-section-title::after {
    content: "⟢";
    position: absolute;
    right: 16px;
    font-size: 18px;
    color: #ffd700;
    text-shadow: 0 0 8px rgba(255,215,0,0.6), 1px 1px 2px rgba(0,0,0,0.8);
    transition: transform 0.3s ease;
  }
  
  /* ROTATION DE LA FLÈCHE QUAND OUVERT */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-wrapper[open] .sheet-section-title::after,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-item-effects-wrapper[open] .sheet-section-title::after {
    transform: rotate(90deg);
  }
  
  /* === SOUS-SECTIONS === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-subsection {
    background: linear-gradient(135deg, rgba(139,69,19,0.1), rgba(101,67,33,0.05));
    border: 2px solid rgba(139,69,19,0.3);
    border-radius: 8px;
    margin-bottom: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-subsection:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.2), rgba(101,67,33,0.1));
    border-color: rgba(205,133,63,0.5);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }
  
  /* === TITRES DES SOUS-SECTIONS === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-subsection-title {
    background: linear-gradient(90deg, rgba(139,105,20,0.8), rgba(107,79,16,0.8));
    color: #f4e6b7;
    padding: 10px 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-weight: bold;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    transition: all 0.3s ease;
    list-style: none;
    position: relative;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-subsection-title::-webkit-details-marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-subsection-title::marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-subsection-title:hover {
    background: linear-gradient(90deg, rgba(205,133,63,0.8), rgba(139,105,20,0.8));
  }
  
  /* FLÈCHES DES SOUS-SECTIONS */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-subsection-title::after {
    content: "▸";
    position: absolute;
    right: 12px;
    font-size: 14px;
    color: #ffd700;
    text-shadow: 0 0 6px rgba(255,215,0,0.6);
    transition: transform 0.3s ease;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-subsection[open] .sheet-subsection-title::after {
    transform: rotate(90deg);
  }
  
  /* === BLOCS D'INVENTAIRE === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-block {
    background: linear-gradient(135deg, rgba(244,230,183,0.08), rgba(230,214,144,0.05));
    border: 1px solid rgba(139,105,20,0.3);
    border-radius: 6px;
    margin-bottom: 8px;
    transition: all 0.3s ease;
    overflow: hidden;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-block:hover {
    background: linear-gradient(135deg, rgba(244,230,183,0.15), rgba(230,214,144,0.1));
    border-color: rgba(205,133,63,0.5);
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }
  
  /* === SUMMARY DES OBJETS INDIVIDUELS === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-block > summary {
    background: linear-gradient(90deg, rgba(139,105,20,0.6), rgba(107,79,16,0.6));
    color: #f4e6b7;
    padding: 8px 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    transition: all 0.3s ease;
    list-style: none;
    position: relative;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-block > summary::-webkit-details-marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-block > summary::marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-block > summary:hover {
    background: linear-gradient(90deg, rgba(205,133,63,0.6), rgba(139,105,20,0.6));
  }
  
  /* FLÈCHES DES OBJETS INDIVIDUELS */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-block > summary::after {
    content: "▼";
    position: absolute;
    right: 8px;
    font-size: 14px;
    color: #ffd700;
    text-shadow: 0 0 6px rgba(255,215,0,0.8), 1px 1px 2px rgba(0,0,0,0.9);
    transition: transform 0.4s ease, color 0.3s ease;
    transform: rotate(-90deg);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-block[open] > summary::after {
    transform: rotate(0deg);
    color: #ffed4a;
  }
  
  /* INPUT DANS LE SUMMARY DES OBJETS */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-block > summary input[type="text"] {
    background: rgba(244,230,183,0.2);
    border: 1px solid rgba(139,105,20,0.4);
    border-radius: 4px;
    padding: 6px 8px;
    color: #2c1e0f !important;
    font-size: 13px;
    font-weight: 600;
    font-family: 'Georgia', serif;
    flex: 1;
    margin-right: 24px;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-block > summary input[type="text"]:focus {
    background: rgba(244,230,183,0.4);
    border-color: rgba(205,133,63,0.6);
    outline: none;
    color: #1a1a1a !important;
  }
  
  /* === COLONNES D'INVENTAIRE === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-columns {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    padding: 16px;
    background: rgba(244,230,183,0.05);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-item-effects-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    padding: 16px;
    background: rgba(244,230,183,0.05);
  }
  
  /* === LIGNES D'INVENTAIRE === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-row {
    display: flex;
    gap: 8px;
    align-items: center;
    padding: 8px;
    margin-bottom: 4px;
    background: rgba(244,230,183,0.03);
    border-radius: 4px;
    border: 1px solid rgba(139,105,20,0.2);
  }
  
  /* === INPUTS - UNIFIÉS POUR TOUS LES TYPES === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) input[type="text"],
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) input[type="number"] {
    background: linear-gradient(135deg, rgba(244,230,183,0.3), rgba(230,214,144,0.2));
    border: 2px solid #8b6914;
    border-radius: 6px;
    padding: 8px 10px;
    color: #2c1e0f !important;
    font-size: 13px;
    font-weight: 600;
    font-family: 'Georgia', serif;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 1px 3px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    margin: 0;
    box-sizing: border-box;
    min-height: 32px;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) input[type="text"]:focus,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) input[type="number"]:focus {
    background: linear-gradient(135deg, rgba(244,230,183,0.5), rgba(230,214,144,0.4));
    border-color: #cd853f;
    outline: none;
    box-shadow: 
      0 0 8px rgba(205,133,63,0.5),
      inset 0 1px 3px rgba(0,0,0,0.2);
    color: #1a1a1a !important;
    transform: translateY(-1px);
  }
  
  /* === TEXTAREA POUR SECTION EFFETS DES OBJETS UNIQUEMENT === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-item-effects-wrapper textarea {
    background: linear-gradient(135deg, rgba(244,230,183,0.3), rgba(230,214,144,0.2));
    border: 2px solid #8b6914;
    border-radius: 6px;
    padding: 8px 10px;
    color: #2c1e0f !important;
    font-size: 12px;
    font-weight: 600;
    font-family: 'Georgia', serif;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 1px 3px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    margin: 0;
    box-sizing: border-box;
    min-height: 60px;
    resize: vertical;
    flex: 1;
    width: 100%;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-item-effects-wrapper textarea:focus {
    background: linear-gradient(135deg, rgba(244,230,183,0.5), rgba(230,214,144,0.4));
    border-color: #cd853f;
    outline: none;
    box-shadow: 
      0 0 8px rgba(205,133,63,0.5),
      inset 0 1px 3px rgba(0,0,0,0.2);
    color: #1a1a1a !important;
    transform: translateY(-1px);
  }
  
  /* === PLACEHOLDERS === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) input::placeholder,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) textarea::placeholder {
    color: rgba(44, 30, 15, 0.6) !important;
    font-style: italic;
    font-weight: 400;
  }
  
  /* === FIELDSETS === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) fieldset {
    border: none;
    padding: 8px;
    margin: 0;
    background: transparent;
  }
  
  /* === SIZING DES INPUTS DANS LES LIGNES D'INVENTAIRE === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-row input[type="text"]:first-child {
    flex: 2;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-row input[type="number"] {
    flex: 0 0 60px;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-row input[type="text"]:last-child {
    flex: 3;
  }
  
  /* ===== STYLES SPÉCIFIQUES AU SYSTÈME D'ARMES ===== */
  
  /* Section armes - Couleurs spéciales */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapons-section .sheet-section-title {
    background: linear-gradient(90deg, #8b4513, #a0522d, #8b4513);
    color: #f4e6b7;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapons-section .sheet-section-title:hover {
    background: linear-gradient(90deg, #cd853f, #d2691e, #cd853f);
  }
  
  /* === CONTRÔLE À DEUX MAINS === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-two-hands-control {
    background: linear-gradient(135deg, rgba(139,69,19,0.2), rgba(160,82,45,0.1));
    border: 2px solid #8b4513;
    border-radius: 8px;
    padding: 12px;
    margin: 10px 0;
    text-align: center;
    box-shadow: 
      0 2px 6px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(139,105,20,0.3);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-two-hands-label {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    cursor: pointer;
    font-weight: bold;
    color: #3d2914;
    font-size: 14px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-two-hands-label:hover {
    color: #8b4513;
    transform: scale(1.05);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-two-hands-text {
    font-size: 14px;
    letter-spacing: 0.5px;
  }
  
  /* Checkbox personnalisée pour "à deux mains" */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-custom-checkmark {
    position: relative;
    display: inline-block;
    height: 20px;
    width: 20px;
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    border: 2px solid #8b6914;
    border-radius: 4px;
    transition: all 0.3s ease;
    cursor: pointer;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-two-hands-label input[type="checkbox"] {
    opacity: 0;
    position: absolute;
    width: 0;
    height: 0;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-two-hands-label input[type="checkbox"]:checked + .sheet-custom-checkmark {
    background: linear-gradient(135deg, #b8860b, #8b6914);
    border-color: #6b4f10;
    box-shadow: 0 0 10px rgba(184,134,11,0.6);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-two-hands-label input[type="checkbox"]:checked + .sheet-custom-checkmark::after {
    content: "✓";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #f4e6b7;
    font-weight: bold;
    font-size: 12px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  /* === LIGNES D'ARMES === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-row {
    background: linear-gradient(135deg, rgba(244,230,183,0.1), rgba(230,214,144,0.05));
    border: 2px solid rgba(139,105,20,0.4);
    border-radius: 8px;
    margin: 8px 0;
    padding: 12px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-row:hover {
    background: linear-gradient(135deg, rgba(244,230,183,0.15), rgba(230,214,144,0.1));
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 8px;
    padding-bottom: 6px;
    border-bottom: 1px solid rgba(139,105,20,0.3);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-title {
    margin: 0;
    color: #8b4513;
    font-size: 14px;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-disabled-indicator {
    color: #cc0000;
    font-size: 12px;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    animation: blinkWarning 2s infinite;
  }
  
  @keyframes blinkWarning {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0.5; }
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-fields {
    display: grid;
    grid-template-columns: 2fr 80px 120px;
    gap: 8px;
    align-items: start;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-fields textarea {
    grid-column: 1 / -1;
    min-height: 60px;
    resize: vertical;
  }
  
  /* === ARME PRINCIPALE (toujours active) === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-primary {
    border-color: rgba(139,105,20,0.6);
    background: linear-gradient(135deg, rgba(244,230,183,0.15), rgba(230,214,144,0.1));
    box-shadow: 0 2px 6px rgba(0,0,0,0.3), inset 0 1px 0 rgba(139,105,20,0.2);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-primary .sheet-weapon-title {
    color: #8b6914;
  }
  
  /* === ARME SECONDAIRE (désactivable) === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-secondary {
    transition: all 0.5s ease;
  }
  
  /* État désactivé de l'arme secondaire - Utilise l'attribut caché pour le contrôle */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-secondary[data-disabled="true"],
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-secondary:has(input[name="attr_arme_secondaire_disabled"][value="1"]) {
    opacity: 0.5;
    background: linear-gradient(135deg, rgba(128,128,128,0.2), rgba(96,96,96,0.1));
    border-color: rgba(128,128,128,0.5);
    transform: scale(0.98);
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-secondary[data-disabled="true"] input,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-secondary[data-disabled="true"] textarea,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-secondary:has(input[name="attr_arme_secondaire_disabled"][value="1"]) input:not([name="attr_arme_secondaire_disabled"]),
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-secondary:has(input[name="attr_arme_secondaire_disabled"][value="1"]) textarea {
    background: rgba(200,200,200,0.3) !important;
    color: #999 !important;
    cursor: not-allowed !important;
    pointer-events: none !important;
    border-color: rgba(153,153,153,0.5) !important;
  }
  
  /* Fallback pour Roll20 sans support :has() - utilisation d'une classe JS */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-secondary.sheet-weapon-disabled {
    opacity: 0.5;
    background: linear-gradient(135deg, rgba(128,128,128,0.2), rgba(96,96,96,0.1));
    border-color: rgba(128,128,128,0.5);
    transform: scale(0.98);
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-secondary.sheet-weapon-disabled input,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-secondary.sheet-weapon-disabled textarea {
    background: rgba(200,200,200,0.3) !important;
    color: #999 !important;
    cursor: not-allowed !important;
    pointer-events: none !important;
    border-color: rgba(153,153,153,0.5) !important;
  }
  
  /* Affichage de l'indicateur "Désactivée" quand nécessaire */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-secondary:has(input[name="attr_arme_secondaire_disabled"][value="1"]) .sheet-disabled-indicator {
    display: inline-block !important;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-secondary.sheet-weapon-disabled .sheet-disabled-indicator {
    display: inline-block !important;
  }
  
  /* === CONTENU DES EFFETS === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-effect-content {
    padding: 8px;
    background: rgba(244,230,183,0.05);
    border-radius: 0 0 6px 6px;
  }
  
  /* === ANIMATIONS === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-wrapper[open],
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-item-effects-wrapper[open],
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-block[open],
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-subsection[open] {
    animation: fadeInSlideInventaire 0.4s ease-out;
  }
  
  /* Animation spécifique pour le contenu des sections pliables */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-block[open] > *:not(summary),
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-subsection[open] > *:not(summary) {
    animation: fadeInContent 0.3s ease-out 0.1s both;
  }
  
  @keyframes fadeInSlideInventaire {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes fadeInContent {
    from {
      opacity: 0;
      transform: translateY(-8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-columns,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-item-effects-grid {
      grid-template-columns: 1fr;
      gap: 12px;
      padding: 12px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-row {
      flex-direction: column;
      gap: 6px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-row input {
      flex: none;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-section-title {
      font-size: 14px;
      padding: 10px 14px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-subsection-title {
      font-size: 12px;
      padding: 8px 10px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-fields {
      grid-template-columns: 1fr;
      gap: 6px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-two-hands-label {
      flex-direction: column;
      gap: 4px;
    }
  }
  
  /* === PROTECTION ROLL TEMPLATES === */
  [class*="rolltemplate"] * {
    /* Reset pour éviter toute interférence */
  }
  
  /* Évite tout conflit avec les autres sections */
  .sheet-tab-content:not(.sheet-inventaire) .sheet-inventory-wrapper,
  .sheet-tab-content:not(.sheet-inventaire) .sheet-inventory-block {
    /* Neutralise les styles pour les autres onglets */
    all: unset;
  }
  
  /* ===== MODIFICATIONS POUR ARMES ET ARMURES SANS QUANTITÉ ===== */
  
  /* === LIGNES D'ARMES SANS QUANTITÉ === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-row-no-qty {
    display: flex;
    gap: 10px;
    align-items: center;
    padding: 10px;
    margin-bottom: 8px;
    background: rgba(244,230,183,0.05);
    border-radius: 6px;
    border: 1px solid rgba(139,105,20,0.3);
  }
  
  /* Nom de l'arme plus large */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-name-input {
    flex: 2.5;
    min-width: 180px;
  }
  
  /* Effet de l'arme plus large */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-effect-input {
    flex: 3;
    min-width: 200px;
  }
  
  /* Label "À deux mains" compact */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-twohands-label {
    display: flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
    cursor: pointer;
    padding: 4px 8px;
    background: rgba(139,105,20,0.2);
    border-radius: 4px;
    transition: all 0.3s ease;
    flex-shrink: 0;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-twohands-label:hover {
    background: rgba(139,105,20,0.3);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-twohands-checkbox {
    cursor: pointer;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-twohands-text {
    font-size: 11px;
    color: #f4e6b7;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  
  /* === LIGNES D'ARMURE SANS QUANTITÉ === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-armor-row-no-qty {
    display: flex;
    gap: 10px;
    align-items: center;
    padding: 10px;
    margin-bottom: 8px;
    background: rgba(244,230,183,0.05);
    border-radius: 6px;
    border: 1px solid rgba(139,105,20,0.3);
  }
  
  /* Nom de l'armure/tenue plus large */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-armor-name-input {
    flex: 2;
    min-width: 180px;
  }
  
  /* Effet de l'armure/tenue plus large */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-armor-effect-input {
    flex: 3;
    min-width: 200px;
  }
  
  /* === AGRANDISSEMENT DE LA SECTION ARMES ÉQUIPÉES === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapons-section {
    padding: 4px;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapons-container {
    padding: 14px;
    gap: 16px;
    display: flex;
    flex-direction: column;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-container {
    padding: 14px;
    background: linear-gradient(135deg, rgba(244,230,183,0.12), rgba(230,214,144,0.08));
    border: 2px solid rgba(139,105,20,0.5);
    border-radius: 10px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.25);
    transition: all 0.3s ease;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-container:hover {
    background: linear-gradient(135deg, rgba(244,230,183,0.18), rgba(230,214,144,0.12));
    transform: translateY(-2px);
    box-shadow: 0 5px 14px rgba(0,0,0,0.35);
  }
  
  /* === LIGNES DÉGÂTS ET DÉFENSE === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-damage-row,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-defense-row {
    display: flex;
    gap: 12px;
    align-items: center;
    margin-top: 10px;
    padding: 10px;
    background: rgba(139,105,20,0.15);
    border-radius: 6px;
    border: 1px solid rgba(139,105,20,0.3);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-damage-inputs,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-defense-inputs {
    display: flex;
    gap: 10px;
    flex: 1;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-damage-input,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-defense-input {
    flex: 1;
    min-width: 140px;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-damage-magic-input,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-defense-magic-input {
    flex: 1;
    min-width: 140px;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-magic-damage-label,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-magic-defense-label {
    display: flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
    cursor: pointer;
    padding: 4px 10px;
    background: rgba(142,68,173,0.2);
    border-radius: 4px;
    transition: all 0.3s ease;
    flex-shrink: 0;
    color: #f4e6b7;
    font-weight: bold;
    font-size: 11px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-magic-damage-label:hover,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-magic-defense-label:hover {
    background: rgba(142,68,173,0.3);
  }
  
  /* === BLOC BONUS DE STATS === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-bonus-block {
    margin-top: 12px;
    background: rgba(139,105,20,0.1);
    border: 1px solid rgba(139,105,20,0.3);
    border-radius: 6px;
    overflow: hidden;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-bonus-summary {
    background: linear-gradient(90deg, rgba(139,105,20,0.5), rgba(107,79,16,0.5));
    color: #f4e6b7;
    padding: 8px 12px;
    cursor: pointer;
    font-weight: bold;
    font-size: 12px;
    text-align: center;
    list-style: none;
    transition: all 0.3s ease;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-bonus-summary::-webkit-details-marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-bonus-summary:hover {
    background: linear-gradient(90deg, rgba(205,133,63,0.5), rgba(139,105,20,0.5));
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-bonus-table-container {
    padding: 10px;
    background: rgba(244,230,183,0.05);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-bonus-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 12px;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-bonus-table th {
    background: rgba(139,105,20,0.3);
    color: #f4e6b7;
    padding: 6px;
    text-align: center;
    font-weight: bold;
    border: 1px solid rgba(139,105,20,0.4);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-bonus-table td {
    padding: 6px;
    text-align: center;
    border: 1px solid rgba(139,105,20,0.2);
    background: rgba(244,230,183,0.03);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-bonus-table input[type="number"] {
    width: 60px;
    padding: 4px;
    text-align: center;
    font-size: 12px;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-bonus-check-label {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    position: relative;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-bonus-check-label input[type="checkbox"] {
    opacity: 0;
    position: absolute;
    width: 0;
    height: 0;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-check-icon {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 2px solid #8b6914;
    border-radius: 4px;
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    color: transparent;
    font-weight: bold;
    line-height: 16px;
    text-align: center;
    transition: all 0.3s ease;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-bonus-check-label input[type="checkbox"]:checked + .sheet-check-icon {
    background: linear-gradient(135deg, #27ae60, #1e8449);
    color: #f4e6b7;
    border-color: #186a3b;
    box-shadow: 0 0 8px rgba(39,174,96,0.6);
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-row-no-qty,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-armor-row-no-qty {
      flex-direction: column;
      gap: 8px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-name-input,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-effect-input,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-armor-name-input,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-armor-effect-input {
      min-width: 0;
      width: 100%;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-damage-row,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-defense-row {
      flex-direction: column;
      gap: 8px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-damage-inputs,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-defense-inputs {
      flex-direction: column;
      width: 100%;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-damage-input,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-defense-input,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-damage-magic-input,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-defense-magic-input {
      min-width: 0;
      width: 100%;
    }
  }
  
  /* ===== COMPTEURS AUTOMATIQUES X/Y ===== */
  
  /* Summary avec compteur */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-summary-with-counter {
    background: linear-gradient(90deg, rgba(139,105,20,0.8), rgba(107,79,16,0.8));
    color: #f4e6b7;
    padding: 10px 40px 10px 14px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    transition: all 0.3s ease;
    list-style: none;
    position: relative;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-summary-with-counter::-webkit-details-marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-summary-with-counter:hover {
    background: linear-gradient(90deg, rgba(205,133,63,0.8), rgba(139,105,20,0.8));
  }
  
  /* Input titre dans le summary - AGRANDI */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-title-input {
    flex: 1;
    background: rgba(244,230,183,0.25);
    border: 1px solid rgba(139,105,20,0.5);
    border-radius: 4px;
    padding: 6px 10px;
    color: #f4e6b7 !important;
    font-size: 14px;
    font-weight: bold;
    font-family: 'Georgia', serif;
    text-align: center;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    min-width: 0;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-title-input:focus {
    background: rgba(244,230,183,0.4);
    border-color: rgba(205,133,63,0.7);
    outline: none;
  }
  
  /* Texte de titre fixe - AGRANDI */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-section-title-text {
    flex: 1;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: #f4e6b7;
    text-align: center;
    min-width: 0;
  }
  
  /* Zone d'affichage du compteur - COULEURS CLAIRES ET LISIBLES */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-counter-display {
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, rgba(205,170,125,0.95), rgba(184,151,106,0.95));
    border: 2px solid #b8860b;
    border-radius: 6px;
    padding: 6px 16px;
    box-shadow: 
      inset 0 1px 2px rgba(255,255,255,0.3),
      0 2px 6px rgba(139,105,20,0.6),
      0 0 8px rgba(184,134,11,0.4);
    min-width: 100px;
    max-width: 100px;
    flex-shrink: 0;
    margin-right: 10px;
  }
  
  /* ⭐ MASQUER LE COMPTEUR POUR "PARTIE CAMPEMENT" */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-block:has(input[name="attr_campement_counter"]) .sheet-inventory-counter-display {
    display: none !important;
  }
  
  /* Input readonly du compteur - TEXTE SOMBRE POUR CONTRASTE */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-counter-readonly {
    background: transparent !important;
    border: none !important;
    color: #2c1e0f !important;
    font-size: 12px !important;
    font-weight: bold !important;
    font-family: 'Georgia', serif !important;
    text-align: center !important;
    text-shadow: 
      0 1px 1px rgba(255,255,255,0.5),
      0 0 2px rgba(255,255,255,0.3) !important;
    cursor: default !important;
    pointer-events: none !important;
    width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
    box-shadow: none !important;
    min-height: auto !important;
    white-space: nowrap;
  }
  
  /* Animation de mise à jour */
  @keyframes counterPulse {
    0%, 100% { 
      transform: scale(1);
      text-shadow: 
        0 1px 1px rgba(255,255,255,0.5),
        0 0 2px rgba(255,255,255,0.3);
    }
    50% { 
      transform: scale(1.15);
      text-shadow: 
        0 0 6px rgba(255,215,0,0.8),
        0 1px 2px rgba(255,255,255,0.6);
    }
  }
  
  /* Effet quand le compteur change */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-counter-readonly[value]:not([value="0/0"]) {
    animation: counterPulse 0.5s ease-out;
  }
  
  /* Style spécial quand sac plein (X = Y) - ORANGE/ROUGE CLAIR */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-counter-display:has(.sheet-counter-readonly[data-full="true"]) {
    background: linear-gradient(135deg, rgba(210,105,30,0.95), rgba(184,92,26,0.95));
    border-color: #d2691e;
    box-shadow: 
      inset 0 1px 2px rgba(255,200,150,0.4),
      0 2px 8px rgba(210,105,30,0.7),
      0 0 12px rgba(210,105,30,0.6);
  }
  
  /* Texte du compteur plein - ENCORE PLUS VISIBLE */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-counter-display:has(.sheet-counter-readonly[data-full="true"]) .sheet-counter-readonly {
    color: #1a0f05 !important;
    text-shadow: 
      0 1px 2px rgba(255,255,255,0.6),
      0 0 4px rgba(255,255,255,0.4) !important;
  }
  
  /* Ajustement de la flèche - BIEN ESPACÉE À DROITE */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-summary-with-counter::after {
    content: "⟢";
    position: absolute;
    right: 14px;
    font-size: 18px;
    color: #ffd700;
    text-shadow: 0 0 8px rgba(255,215,0,0.6), 1px 1px 2px rgba(0,0,0,0.8);
    transition: transform 0.3s ease;
  }
  
  /* Rotation de la flèche quand ouvert */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-block[open] .sheet-inventory-summary-with-counter::after {
    transform: rotate(90deg);
  }
  
  /* Responsive */
  @media (max-width: 768px) {
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-summary-with-counter {
      flex-direction: column;
      gap: 8px;
      padding: 10px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-title-input,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-section-title-text {
      width: 100%;
      text-align: center;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-counter-display {
      width: auto;
      justify-content: center;
      margin-right: 0;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-summary-with-counter::after {
      position: relative;
      right: auto;
      margin-top: 4px;
    }
  }
  
  
  
  /* ===== ⭐ SECTION RÉSERVE (COFFRES) - 2 COLONNES PAR LIGNE ===== */
  
  /* Wrapper section réserve */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-reserve-section {
    background: linear-gradient(135deg, rgba(101,67,33,0.2), rgba(139,69,19,0.15));
    border-color: #6b4f10;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-reserve-content {
    padding: 16px;
    background: rgba(244,230,183,0.05);
  }
  
  /* === BLOC COFFRE === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-block {
    background: linear-gradient(135deg, rgba(139,105,20,0.15), rgba(107,79,16,0.1));
    border: 2px solid rgba(139,105,20,0.4);
    border-radius: 8px;
    margin-bottom: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-block:hover {
    background: linear-gradient(135deg, rgba(139,105,20,0.25), rgba(107,79,16,0.15));
    border-color: rgba(205,133,63,0.6);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }
  
  /* Summary du coffre */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-summary {
    background: linear-gradient(90deg, rgba(101,67,33,0.8), rgba(139,105,20,0.7));
    color: #f4e6b7;
    padding: 10px 40px 10px 14px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 14px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    transition: all 0.3s ease;
    list-style: none;
    position: relative;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-summary::-webkit-details-marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-summary::marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-summary:hover {
    background: linear-gradient(90deg, rgba(139,105,20,0.9), rgba(101,67,33,0.8));
  }
  
  /* Input titre du coffre */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-title-input {
    flex: 1;
    background: rgba(244,230,183,0.3);
    border: 1px solid rgba(139,105,20,0.5);
    border-radius: 4px;
    padding: 6px 12px;
    color: #f4e6b7 !important;
    font-size: 14px;
    font-weight: bold;
    font-family: 'Georgia', serif;
    text-align: center;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-title-input:focus {
    background: rgba(244,230,183,0.5);
    border-color: rgba(205,133,63,0.7);
    outline: none;
  }
  
  /* Flèche du coffre */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-summary::after {
    content: "⟢";
    position: absolute;
    right: 14px;
    font-size: 18px;
    color: #ffd700;
    text-shadow: 0 0 8px rgba(255,215,0,0.6), 1px 1px 2px rgba(0,0,0,0.8);
    transition: transform 0.3s ease;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-block[open] .sheet-coffre-summary::after {
    transform: rotate(90deg);
  }
  
  /* === ⭐ DOUBLE ROW - AFFICHAGE 2 COLONNES CÔTE À CÔTE === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-double-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    padding: 16px;
    background: rgba(244,230,183,0.03);
  }
  
  /* === WRAPPER ITEM === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-wrapper {
    background: rgba(244,230,183,0.05);
    border: 1px solid rgba(139,105,20,0.25);
    border-radius: 6px;
    padding: 8px;
    transition: all 0.3s ease;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-wrapper:hover {
    background: rgba(244,230,183,0.1);
    border-color: rgba(139,105,20,0.4);
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  }
  
  /* === ⭐ LIGNE PRINCIPALE - PROPORTIONS 30%-5%-60%-5% === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-row {
    display: flex;
    gap: 6px;
    align-items: center;
    margin-bottom: 6px;
  }
  
  /* NOM - 30% */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-nom {
    flex: 3;
    min-width: 0;
  }
  
  /* NOMBRE - 5% (fixe 35px) */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-nombre {
    flex: 0 0 35px;
    text-align: center;
  }
  
  /* EFFET - 60% */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-effet {
    flex: 6;
    min-width: 0;
  }
  
  /* CHECKBOX - 5% (fixe 30px) */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-detail-toggle {
    flex: 0 0 30px;
    flex-shrink: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    position: relative;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-detail-check {
    opacity: 0;
    position: absolute;
    width: 0;
    height: 0;
  }
  
  /* === CHECKBOX VISUELLE === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-check-box {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    background: linear-gradient(135deg, rgba(139,105,20,0.25), rgba(107,79,16,0.15));
    border: 2px solid rgba(139,105,20,0.5);
    border-radius: 3px;
    font-size: 10px;
    transition: all 0.3s ease;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
    color: transparent;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-detail-toggle:hover .sheet-check-box {
    background: linear-gradient(135deg, rgba(139,105,20,0.4), rgba(107,79,16,0.3));
    border-color: rgba(139,105,20,0.7);
    transform: scale(1.05);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-detail-check:checked + .sheet-check-box {
    background: linear-gradient(135deg, #8b6914, #6b4f10);
    border-color: #6b4f10;
    box-shadow: 0 0 6px rgba(139,105,20,0.5), inset 0 1px 2px rgba(0,0,0,0.2);
    color: #f4e6b7;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-check-box::before {
    content: "✓";
    font-weight: bold;
    font-size: 11px;
  }
  
  /* === ZONE EFFET COMPLET === */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-detail-zone {
    display: none;
    /* Pas d'animation pour éviter le clignotement */
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-wrapper:has(.sheet-coffre-detail-check:checked) .sheet-coffre-detail-zone {
    display: block;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-detail-block {
    background: linear-gradient(135deg, rgba(142,68,173,0.15), rgba(155,89,182,0.1));
    border: 2px solid rgba(142,68,173,0.4);
    border-radius: 6px;
    overflow: hidden;
    margin-top: 8px;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-detail-summary {
    background: linear-gradient(90deg, rgba(142,68,173,0.6), rgba(155,89,182,0.5));
    color: #f4e6b7;
    padding: 6px 10px;
    cursor: pointer;
    font-weight: bold;
    font-size: 11px;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    transition: all 0.3s ease;
    list-style: none;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-detail-summary::-webkit-details-marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-detail-summary::marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-detail-summary:hover {
    background: linear-gradient(90deg, rgba(155,89,182,0.7), rgba(142,68,173,0.6));
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-detail-content {
    padding: 8px;
    background: rgba(244,230,183,0.05);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-detail-textarea {
    width: 100%;
    min-height: 60px;
    max-height: 150px;
    resize: vertical;
    background: linear-gradient(135deg, rgba(244,230,183,0.3), rgba(230,214,144,0.2));
    border: 2px solid #8b6914;
    border-radius: 6px;
    padding: 8px;
    color: #2c1e0f !important;
    font-size: 11px;
    font-weight: 600;
    font-family: 'Georgia', serif;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-detail-textarea:focus {
    background: linear-gradient(135deg, rgba(244,230,183,0.5), rgba(230,214,144,0.4));
    border-color: #cd853f;
    outline: none;
    box-shadow: 0 0 8px rgba(205,133,63,0.5), inset 0 1px 3px rgba(0,0,0,0.2);
  }
  
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-columns,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-item-effects-grid {
      grid-template-columns: 1fr;
      gap: 12px;
      padding: 12px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-row {
      flex-direction: column;
      gap: 6px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-row input {
      flex: none;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-section-title {
      font-size: 14px;
      padding: 10px 14px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-subsection-title {
      font-size: 12px;
      padding: 8px 10px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-fields {
      grid-template-columns: 1fr;
      gap: 6px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-two-hands-label {
      flex-direction: column;
      gap: 4px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-row-no-qty,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-armor-row-no-qty {
      flex-direction: column;
      gap: 8px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-name-input,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-weapon-effect-input,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-armor-name-input,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-armor-effect-input {
      min-width: 0;
      width: 100%;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-damage-row,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-defense-row {
      flex-direction: column;
      gap: 8px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-damage-inputs,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-defense-inputs {
      flex-direction: column;
      width: 100%;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-damage-input,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-defense-input,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-damage-magic-input,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-defense-magic-input {
      min-width: 0;
      width: 100%;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-summary-with-counter {
      flex-direction: column;
      gap: 8px;
      padding: 10px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-title-input,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-section-title-text {
      width: 100%;
      text-align: center;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-counter-display {
      width: auto;
      justify-content: center;
      margin-right: 0;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-inventory-summary-with-counter::after {
      position: relative;
      right: auto;
      margin-top: 4px;
    }
    
    /* ⭐ RESPONSIVE RÉSERVE - 1 COLONNE SUR MOBILE */
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-double-row {
      grid-template-columns: 1fr;
      gap: 12px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-row {
      flex-wrap: wrap;
      gap: 4px;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-nom,
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-effet {
      min-width: 0;
      flex: 1 1 100%;
    }
    
    .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-nombre {
      flex: 0 0 60px;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ===== BOUTONS DE CONTRÔLE REPEATING AU PREMIER PLAN ===== */
  
  /* Boutons de contrôle pour TOUS les repeating de la section inventaire */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .repcontrol {
    position: relative;
    z-index: 100 !important;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .repcontrol_del,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .repcontrol_move,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .repcontrol_add {
    position: relative;
    z-index: 100 !important;
    opacity: 1 !important;
    pointer-events: auto !important;
  }
  
  /* Boutons spécifiques pour la section RÉSERVE (coffres) */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-block .repcontrol,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-wrapper .repcontrol {
    z-index: 150 !important;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-block .repcontrol_del,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-block .repcontrol_move,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-wrapper .repcontrol_del,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-wrapper .repcontrol_move {
    z-index: 150 !important;
    background: rgba(0,0,0,0.3) !important;
    border-radius: 3px !important;
    padding: 2px !important;
  }
  
  /* S'assurer que le wrapper ne cache pas les boutons */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-item-wrapper,
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .sheet-coffre-double-row {
    position: relative;
    z-index: 1;
  }
  
  /* Hover pour rendre les boutons plus visibles */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .repcontrol_del:hover {
    background: rgba(220,53,69,0.8) !important;
    transform: scale(1.1);
    transition: all 0.2s ease;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .repcontrol_move:hover {
    background: rgba(108,117,125,0.8) !important;
    cursor: move !important;
    transform: scale(1.1);
    transition: all 0.2s ease;
  }
  
  /* Icône de poubelle plus visible */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .pictos {
    position: relative;
    z-index: 150 !important;
    pointer-events: auto !important;
  }
  
  /* Container de fieldset ne doit pas cacher les boutons */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) fieldset {
    position: relative;
    overflow: visible !important;
  }
  
  /* Ajustement pour les repeating_coffreitems */
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .repeating_coffreitems {
    position: relative;
    overflow: visible !important;
  }
  
  .sheet-tab-content.sheet-inventaire:not([class*="rolltemplate"]) .repeating_coffreitems .repitem {
    position: relative;
    overflow: visible !important;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === CSS SECTION TABLEAU - STYLE FANTASY COHÉRENT === */
  /* ISOLATION COMPLÈTE - N'AFFECTE PAS LES ROLL TEMPLATES */
  
  /* === WRAPPER PRINCIPAL SECTION TABLEAU === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) {
    font-family: 'Georgia', serif;
  }
  
  /* === BOX WRAPPER GÉNÉRAL === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-box-wrapper {
    background: linear-gradient(145deg, #2c1e0f, #3d2914, #2c1e0f);
    border: 2px solid #8b6914;
    border-radius: 12px;
    padding: 16px;
    margin: 8px 0;
    box-shadow: 
      0 0 0 1px #654321,
      0 4px 12px rgba(0,0,0,0.6),
      inset 0 1px 0 rgba(139,105,20,0.3);
  }
  
  /* === SOUS-DÉTAILS (MISSIONS, NOTES GÉNÉRALES) === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-subdetails {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 10px;
    padding: 0;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    transition: all 0.4s ease;
    overflow: hidden;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-subdetails:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
    transform: translateY(-2px);
    box-shadow: 
      0 6px 16px rgba(0,0,0,0.4),
      0 0 12px rgba(139,105,20,0.3);
    border-color: #cd853f;
  }
  
  /* === TITRES PRINCIPAUX === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-section-title {
    background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
    color: #f4e6b7;
    padding: 12px 16px;
    border-radius: 8px 8px 0 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    border: none;
    box-shadow: 
      0 2px 6px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(139,105,20,0.4);
    transition: all 0.3s ease;
    text-align: center;
    list-style: none;
    margin: 0;
    position: relative;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-section-title:hover {
    background: linear-gradient(90deg, #cd853f, #8b6914, #cd853f);
    transform: translateY(-1px);
    box-shadow: 
      0 4px 10px rgba(0,0,0,0.5),
      inset 0 1px 0 rgba(139,105,20,0.4);
  }
  
  /* SUPPRIME LE MARQUEUR DE DETAILS/SUMMARY */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-section-title::-webkit-details-marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-section-title::marker {
    display: none;
  }
  
  /* AJOUTE UN INDICATEUR PERSONNALISÉ */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-section-title::after {
    content: "⟢";
    position: absolute;
    right: 16px;
    font-size: 18px;
    color: #ffd700;
    text-shadow: 0 0 8px rgba(255,215,0,0.6), 1px 1px 2px rgba(0,0,0,0.8);
    transition: transform 0.3s ease;
  }
  
  /* ROTATION DE LA FLÈCHE QUAND OUVERT */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-subdetails[open] .sheet-section-title::after {
    transform: rotate(90deg);
  }
  
  /* === TABLEAU BOARD === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-tableau-board {
    padding: 16px;
    background: rgba(244,230,183,0.05);
  }
  
  /* === BLOCS DASHBOARD (MISSIONS/NOTES) === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-dashboard-block {
    background: linear-gradient(135deg, rgba(244,230,183,0.08), rgba(230,214,144,0.05));
    border: 1px solid rgba(139,105,20,0.3);
    border-radius: 6px;
    margin-bottom: 8px;
    transition: all 0.3s ease;
    overflow: hidden;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-dashboard-block:hover {
    background: linear-gradient(135deg, rgba(244,230,183,0.15), rgba(230,214,144,0.1));
    border-color: rgba(205,133,63,0.5);
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }
  
  /* === SOUS-TITRES DASHBOARD === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-dashboard-subtitle {
    background: linear-gradient(90deg, rgba(139,105,20,0.6), rgba(107,79,16,0.6));
    color: #f4e6b7;
    padding: 8px 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    transition: all 0.3s ease;
    list-style: none;
    position: relative;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-dashboard-subtitle::-webkit-details-marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-dashboard-subtitle::marker {
    display: none;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-dashboard-subtitle:hover {
    background: linear-gradient(90deg, rgba(205,133,63,0.6), rgba(139,105,20,0.6));
  }
  
  /* === WRAPPER SOUS-TITRE === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-subtitle-wrapper {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1;
  }
  
  /* === CHEVRON === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .chevron {
    color: #ffd700;
    font-size: 14px;
    text-shadow: 0 0 6px rgba(255,215,0,0.8), 1px 1px 2px rgba(0,0,0,0.9);
    transition: transform 0.4s ease;
    transform: rotate(0deg);
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-dashboard-block[open] .chevron {
    transform: rotate(90deg);
  }
  
  /* === TITRE MISSION === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-mission-title {
    background: rgba(244,230,183,0.2);
    border: 1px solid rgba(139,105,20,0.4);
    border-radius: 4px;
    padding: 6px 8px;
    color: #2c1e0f !important;
    font-size: 13px;
    font-weight: 600;
    font-family: 'Georgia', serif;
    flex: 1;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-mission-title:focus {
    background: rgba(244,230,183,0.4);
    border-color: rgba(205,133,63,0.6);
    outline: none;
    color: #1a1a1a !important;
  }
  
  /* === CONTENU MISSION === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-mission-content {
    padding: 16px;
    background: rgba(244,230,183,0.03);
  }
  
  /* === SECTIONS MISSION === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-mission-section {
    margin-bottom: 16px;
    padding: 12px;
    background: linear-gradient(135deg, rgba(139,69,19,0.08), rgba(101,67,33,0.05));
    border: 1px solid rgba(139,105,20,0.2);
    border-radius: 8px;
  }
  
  /* === TITRES SECTION MISSION === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-mission-section-title {
    color: #8b6914;
    font-size: 14px;
    font-weight: bold;
    margin: 0 0 12px 0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
    border-bottom: 2px solid rgba(139,105,20,0.3);
    padding-bottom: 4px;
  }
  
  /* === GROUPE DE LIGNES MISSION === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-mission-row-group {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  
  /* === DOUBLE LIGNE === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-mission-double-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }
  
  /* === CHAMPS MISSION === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-mission-field {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  
  /* === LABELS === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-field-label {
    font-weight: bold;
    color: #8b6914;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  /* === SELECTS ET INPUTS === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .etat-mission,
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .priority-selector,
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-date-input {
    background: linear-gradient(135deg, rgba(244,230,183,0.3), rgba(230,214,144,0.2));
    border: 2px solid #8b6914;
    border-radius: 6px;
    padding: 8px 10px;
    color: #2c1e0f !important;
    font-size: 12px;
    font-weight: 600;
    font-family: 'Georgia', serif;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 1px 3px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .etat-mission:focus,
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .priority-selector:focus,
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-date-input:focus {
    background: linear-gradient(135deg, rgba(244,230,183,0.5), rgba(230,214,144,0.4));
    border-color: #cd853f;
    outline: none;
    box-shadow: 
      0 0 8px rgba(205,133,63,0.5),
      inset 0 1px 3px rgba(0,0,0,0.2);
    color: #1a1a1a !important;
    transform: translateY(-1px);
  }
  
  /* === OBJECTIFS === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-mission-objectives {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-objectives-row {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 12px;
  }
  
  /* === ITEMS OBJECTIFS === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-objective-item {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    padding: 6px 8px;
    border-radius: 4px;
    transition: all 0.3s ease;
    background: rgba(244,230,183,0.1);
    border: 1px solid rgba(139,105,20,0.2);
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-objective-item:hover {
    background: rgba(244,230,183,0.2);
    border-color: rgba(205,133,63,0.4);
  }
  
  /* === CHECKBOXES PERSONNALISÉES === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-objective-item input[type="checkbox"] {
    display: none;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .checkmark {
    width: 16px;
    height: 16px;
    background: linear-gradient(135deg, rgba(244,230,183,0.3), rgba(230,214,144,0.2));
    border: 2px solid #8b6914;
    border-radius: 3px;
    position: relative;
    transition: all 0.3s ease;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-objective-item input[type="checkbox"]:checked + .checkmark {
    background: linear-gradient(135deg, #daa520, #b8860b);
    border-color: #8b6914;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-objective-item input[type="checkbox"]:checked + .checkmark::after {
    content: "✓";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 10px;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  /* === TEXTE OBJECTIF === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .objective-text {
    color: #2c1e0f;
    font-size: 12px;
    font-weight: 600;
    font-family: 'Georgia', serif;
  }
  
  /* === SPACER OBJECTIF === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-objective-spacer {
    /* Espace vide pour équilibrer la grille */
  }
  
  /* === NOTES MISSION === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-mission-notes-wrapper {
    margin-top: 8px;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-mission-notes {
    background: linear-gradient(135deg, rgba(244,230,183,0.3), rgba(230,214,144,0.2));
    border: 2px solid #8b6914;
    border-radius: 6px;
    padding: 8px 10px;
    color: #2c1e0f !important;
    font-size: 12px;
    font-weight: 600;
    font-family: 'Georgia', serif;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 1px 3px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    width: 100%;
    box-sizing: border-box;
    min-height: 80px;
    resize: vertical;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-mission-notes:focus {
    background: linear-gradient(135deg, rgba(244,230,183,0.5), rgba(230,214,144,0.4));
    border-color: #cd853f;
    outline: none;
    box-shadow: 
      0 0 8px rgba(205,133,63,0.5),
      inset 0 1px 3px rgba(0,0,0,0.2);
    color: #1a1a1a !important;
    transform: translateY(-1px);
  }
  
  /* === DASHBOARD ROW (NOTES GÉNÉRALES) === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-dashboard-row {
    padding: 12px;
    background: rgba(244,230,183,0.03);
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-dashboard-text {
    background: linear-gradient(135deg, rgba(244,230,183,0.3), rgba(230,214,144,0.2));
    border: 2px solid #8b6914;
    border-radius: 6px;
    padding: 8px 10px;
    color: #2c1e0f !important;
    font-size: 12px;
    font-weight: 600;
    font-family: 'Georgia', serif;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 1px 3px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    width: 100%;
    box-sizing: border-box;
    min-height: 60px;
    resize: vertical;
  }
  
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-dashboard-text:focus {
    background: linear-gradient(135deg, rgba(244,230,183,0.5), rgba(230,214,144,0.4));
    border-color: #cd853f;
    outline: none;
    box-shadow: 
      0 0 8px rgba(205,133,63,0.5),
      inset 0 1px 3px rgba(0,0,0,0.2);
    color: #1a1a1a !important;
    transform: translateY(-1px);
  }
  
  /* === FIELDSETS === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) fieldset {
    border: none;
    padding: 0;
    margin: 0;
    background: transparent;
  }
  
  /* === PLACEHOLDERS === */
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) input::placeholder,
  .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) textarea::placeholder {
    color: rgba(44, 30, 15, 0.6) !important;
    font-style: italic;
    font-weight: 400;
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-mission-double-row {
      grid-template-columns: 1fr;
      gap: 8px;
    }
    
    .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-objectives-row {
      grid-template-columns: 1fr;
      gap: 8px;
    }
    
    .sheet-tab-content.sheet-tableau:not([class*="rolltemplate"]) .sheet-section-title {
      font-size: 14px;
      padding: 10px 14px;
    }
  }
  
  /* === PROTECTION ROLL TEMPLATES === */
  [class*="rolltemplate"] * {
    /* Reset pour éviter toute interférence */
  }
  
  /* Évite tout conflit avec les autres sections */
  .sheet-tab-content:not(.sheet-tableau) .sheet-dashboard-block,
  .sheet-tab-content:not(.sheet-tableau) .sheet-mission-content {
    /* Neutralise les styles pour les autres onglets */
    all: unset;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* =================== CSS ENTRAINEMENT - STYLE TALENT PREMIUM =================== */
  
  /* === VARIABLES CSS STYLE TALENT === */
  .sheet-entrainement-card,
  .sheet-subdetails,
  .sheet-talent-block {
      --entrainement-base-size: clamp(7px, 0.7vw, 12px);
      --entrainement-spacing-xs: clamp(1px, 0.15vw, 3px);
      --entrainement-spacing-sm: clamp(2px, 0.3vw, 5px);
      --entrainement-spacing-md: clamp(4px, 0.5vw, 8px);
      --entrainement-spacing-lg: clamp(5px, 0.6vw, 10px);
      --entrainement-spacing-xl: clamp(6px, 0.8vw, 14px);
      --entrainement-border-radius: clamp(6px, 0.8vw, 12px);
      --entrainement-border-width: clamp(2px, 0.2vw, 3px);
      --entrainement-grid-min-column: clamp(160px, 20vw, 250px);
      
      /* Couleurs thématiques style Talent */
      --entrainement-primary: #8b6914;
      --entrainement-secondary: #6b4f10;
      --entrainement-accent: #cd853f;
      --entrainement-highlight: #daa520;
      --entrainement-cream: #f4e6b7;
      --entrainement-dark: #2c1e0f;
      --entrainement-darker: #3d2914;
      --entrainement-bronze: #8b4513;
      --entrainement-gold: #d4af37;
      --entrainement-light: #fef9f0;
  }
  
  /* === TITRES STYLE TALENT PREMIUM === */
  .charsheet h1:contains("Entrainement"),
  .charsheet h1[data-section="entrainement"],
  h1:has-text("♆"),
  h1:has-text("⚔") {
      text-align: center !important;
      color: var(--entrainement-cream) !important;
      font-size: clamp(14px, 1.6vw, 22px) !important;
      margin: var(--entrainement-spacing-lg) 0 var(--entrainement-spacing-md) 0 !important;
      padding: var(--entrainement-spacing-md) var(--entrainement-spacing-lg) !important;
      background: linear-gradient(90deg, var(--entrainement-primary), var(--entrainement-secondary), var(--entrainement-primary)) !important;
      background-size: 200% 200% !important;
      animation: entrainementTalentHeaderShift 4s ease infinite !important;
      border: var(--entrainement-border-width) solid #654321 !important;
      border-radius: var(--entrainement-border-radius) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
      letter-spacing: clamp(0.5px, 0.1vw, 1.5px) !important;
      text-transform: uppercase !important;
      font-weight: bold !important;
      box-shadow: 
          0 2px 8px rgba(0,0,0,0.6),
          inset 0 1px 0 rgba(244,230,183,0.2) !important;
      position: relative !important;
      overflow: hidden !important;
      font-family: 'Georgia', serif !important;
  }
  
  .charsheet h2:contains("Entrainements"):contains("Secondaires"),
  .charsheet h2[data-section="entrainements-secondaires"],
  h2:has-text("♆"):has-text("Secondaires") {
      color: var(--entrainement-cream) !important;
      font-size: clamp(12px, 1.4vw, 18px) !important;
      margin: var(--entrainement-spacing-md) 0 var(--entrainement-spacing-sm) 0 !important;
      padding: var(--entrainement-spacing-sm) var(--entrainement-spacing-md) !important;
      background: linear-gradient(90deg, rgba(139,105,20,0.3), rgba(107,79,16,0.25)) !important;
      border: var(--entrainement-border-width) solid var(--entrainement-bronze) !important;
      border-radius: var(--entrainement-border-radius) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
      text-transform: uppercase !important;
      letter-spacing: clamp(0.5px, 0.1vw, 1px) !important;
      font-weight: bold !important;
      box-shadow: 0 2px 6px rgba(0,0,0,0.4) !important;
      font-family: 'Georgia', serif !important;
      text-align: center !important;
  }
  
  .charsheet h1:contains("Talents"):contains("Entrainement"),
  .charsheet h1[data-section="talents-entrainement"],
  h1:has-text("⭐"):has-text("Entrainement") {
      text-align: center !important;
      color: var(--entrainement-cream) !important;
      font-size: clamp(14px, 1.6vw, 22px) !important;
      margin: var(--entrainement-spacing-lg) 0 var(--entrainement-spacing-md) 0 !important;
      padding: var(--entrainement-spacing-md) var(--entrainement-spacing-lg) !important;
      background: linear-gradient(90deg, var(--entrainement-primary), var(--entrainement-secondary), var(--entrainement-primary)) !important;
      background-size: 200% 200% !important;
      animation: entrainementTalentHeaderShift 4s ease infinite !important;
      border: var(--entrainement-border-width) solid #654321 !important;
      border-radius: var(--entrainement-border-radius) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
      letter-spacing: clamp(0.5px, 0.1vw, 1.5px) !important;
      text-transform: uppercase !important;
      font-weight: bold !important;
      box-shadow: 
          0 2px 8px rgba(0,0,0,0.6),
          inset 0 1px 0 rgba(244,230,183,0.2) !important;
      position: relative !important;
      overflow: hidden !important;
      font-family: 'Georgia', serif !important;
  }
  
  @keyframes entrainementTalentHeaderShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
  }
  
  /* === SYSTÈME DETAILS/SUMMARY STYLE TALENT === */
  .sheet-entrainement-card {
      background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1)) !important;
      border: var(--entrainement-border-width) solid var(--entrainement-bronze) !important;
      border-radius: var(--entrainement-border-radius) !important;
      margin-bottom: var(--entrainement-spacing-md) !important;
      box-shadow: 0 2px 8px rgba(0,0,0,0.6) !important;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
      position: relative !important;
      overflow: visible !important;
      font-family: 'Georgia', serif !important;
      color: var(--entrainement-cream) !important;
      display: block !important;
  }
  
  .sheet-entrainement-card:hover {
      transform: translateY(-2px) !important;
      box-shadow: 0 4px 12px rgba(0,0,0,0.8) !important;
      border-color: var(--entrainement-accent) !important;
  }
  
  .sheet-entrainement-card.sheet-repeating {
      background: linear-gradient(135deg, rgba(139,69,19,0.2), rgba(101,67,33,0.15)) !important;
      border-color: var(--entrainement-accent) !important;
  }
  
  /* SUMMARY STYLE TALENT */
  .sheet-entrainement-summary {
      background: linear-gradient(90deg, rgba(139,105,20,0.3), rgba(107,79,16,0.25)) !important;
      background-size: 200% 200% !important;
      animation: entrainementTalentSummaryShift 6s ease infinite !important;
      border: none !important;
      border-radius: var(--entrainement-border-radius) var(--entrainement-border-radius) 0 0 !important;
      padding: var(--entrainement-spacing-sm) var(--entrainement-spacing-md) !important;
      cursor: pointer !important;
      transition: all 0.3s ease !important;
      box-shadow: inset 0 1px 0 rgba(244,230,183,0.2) !important;
      position: relative !important;
      list-style: none !important;
      user-select: none !important;
      font-family: 'Georgia', serif !important;
      display: block !important;
      margin: 0 !important;
      border-bottom: 1px solid rgba(139,69,19,0.4) !important;
  }
  
  @keyframes entrainementTalentSummaryShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
  }
  
  .sheet-entrainement-summary:hover {
      transform: translateY(-1px) !important;
      background: linear-gradient(90deg, rgba(139,105,20,0.4), rgba(107,79,16,0.3)) !important;
  }
  
  .sheet-entrainement-summary::-webkit-details-marker {
      display: none !important;
  }
  
  .sheet-entrainement-summary::marker {
      display: none !important;
  }
  
  details.sheet-entrainement-card > summary {
      list-style: none !important;
  }
  
  details.sheet-entrainement-card > summary::-webkit-details-marker {
      display: none !important;
  }
  
  .sheet-entrainement-summary h3 {
      margin: 0 0 var(--entrainement-spacing-sm) 0 !important;
      color: var(--entrainement-cream) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
      font-size: clamp(10px, 1vw, 15px) !important;
      text-transform: uppercase !important;
      font-weight: bold !important;
      letter-spacing: clamp(0.3px, 0.08vw, 1px) !important;
      font-family: 'Georgia', serif !important;
      text-align: center !important;
  }
  
  .sheet-nom-container {
      display: flex !important;
      align-items: center !important;
      gap: var(--entrainement-spacing-sm) !important;
      width: 100% !important;
      max-width: 100% !important;
      box-sizing: border-box !important;
  }
  
  .sheet-nom-label {
      font-weight: bold !important;
      color: var(--entrainement-cream) !important;
      font-size: clamp(9px, 0.9vw, 13px) !important;
      white-space: nowrap !important;
      margin: 0 !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
      text-transform: uppercase !important;
      letter-spacing: clamp(0.3px, 0.08vw, 1px) !important;
      min-width: fit-content !important;
      flex-shrink: 0 !important;
      align-self: center !important;
      font-family: 'Georgia', serif !important;
  }
  
  .sheet-nom-input {
      flex: 1 !important;
      min-width: 0 !important;
      padding: var(--entrainement-spacing-xs) var(--entrainement-spacing-sm) !important;
      border: 2px solid rgba(139,105,20,0.6) !important;
      border-radius: 6px !important;
      font-size: clamp(8px, 0.8vw, 12px) !important;
      background: linear-gradient(135deg, var(--entrainement-cream), #e6d690) !important;
      color: var(--entrainement-dark) !important;
      transition: all 0.3s ease !important;
      font-weight: 700 !important;
      font-family: 'Georgia', serif !important;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.2) !important;
      box-sizing: border-box !important;
      align-self: center !important;
      outline: none !important;
  }
  
  .sheet-nom-input:focus {
      border-color: var(--entrainement-accent) !important;
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.2),
          0 0 8px rgba(205,133,63,0.5) !important;
      background: linear-gradient(135deg, #f5e8c1, #e8d09a) !important;
      transform: translateY(-1px) !important;
  }
  
  .sheet-nom-input::placeholder {
      color: rgba(44,30,15,0.6) !important;
      font-style: italic !important;
  }
  
  .sheet-toggle-arrow {
      display: inline-block !important;
      font-size: clamp(11px, 1.1vw, 16px) !important;
      color: var(--entrainement-cream) !important;
      font-weight: bold !important;
      transition: all 0.3s ease !important;
      user-select: none !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
      flex-shrink: 0 !important;
      margin-left: var(--entrainement-spacing-sm) !important;
      margin-right: 0 !important;
      align-self: center !important;
      pointer-events: none !important;
  }
  
  details[open] .sheet-toggle-arrow {
      transform: rotate(90deg) !important;
  }
  
  .sheet-entrainement-summary:hover .sheet-toggle-arrow {
      transform: scale(1.2) !important;
      color: var(--entrainement-highlight) !important;
      text-shadow: 0 0 8px var(--entrainement-highlight) !important;
  }
  
  details[open] .sheet-entrainement-summary:hover .sheet-toggle-arrow {
      transform: rotate(90deg) scale(1.2) !important;
  }
  
  /* CONTENU DÉPLIABLE STYLE TALENT */
  .sheet-toggle-content {
      padding: var(--entrainement-spacing-md) !important;
      background: linear-gradient(135deg, rgba(244,230,183,0.05), rgba(230,214,144,0.03)) !important;
      border: var(--entrainement-border-width) solid var(--entrainement-bronze) !important;
      border-top: 1px solid rgba(139,69,19,0.3) !important;
      border-radius: 0 0 var(--entrainement-border-radius) var(--entrainement-border-radius) !important;
      box-shadow: inset 0 1px 0 rgba(244,230,183,0.1) !important;
      animation: entrainementTalentContentExpand 0.4s ease-out !important;
      font-family: 'Georgia', serif !important;
  }
  
  @keyframes entrainementTalentContentExpand {
      from {
          opacity: 0;
          transform: translateY(-5px);
      }
      to {
          opacity: 1;
          transform: translateY(0);
      }
  }
  
  details:not([open]) .sheet-entrainement-summary {
      border-radius: var(--entrainement-border-radius) !important;
      box-shadow: inset 0 1px 0 rgba(244,230,183,0.2) !important;
  }
  
  /* === SECTIONS SUBDETAILS STYLE TALENT === */
  .sheet-subdetails {
      background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1)) !important;
      border: var(--entrainement-border-width) solid var(--entrainement-bronze) !important;
      border-radius: var(--entrainement-border-radius) !important;
      margin: var(--entrainement-spacing-lg) 0 !important;
      padding: 0 !important;
      box-shadow: 0 2px 8px rgba(0,0,0,0.6) !important;
      overflow: visible !important;
      transition: all 0.3s ease !important;
      font-family: 'Georgia', serif !important;
      display: block !important;
  }
  
  .sheet-subdetails:hover {
      transform: translateY(-2px) !important;
      box-shadow: 0 4px 12px rgba(0,0,0,0.8) !important;
      border-color: var(--entrainement-accent) !important;
  }
  
  .sheet-subdetails > summary {
      background: linear-gradient(90deg, var(--entrainement-primary), var(--entrainement-secondary), var(--entrainement-primary)) !important;
      background-size: 200% 200% !important;
      animation: entrainementTalentSummaryShift 6s ease infinite !important;
      color: var(--entrainement-cream) !important;
      padding: var(--entrainement-spacing-sm) var(--entrainement-spacing-lg) !important;
      cursor: pointer !important;
      font-weight: bold !important;
      font-size: clamp(9px, 1vw, 14px) !important;
      text-transform: uppercase !important;
      letter-spacing: clamp(0.5px, 0.1vw, 1px) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
      transition: all 0.3s ease !important;
      list-style: none !important;
      box-shadow: inset 0 1px 0 rgba(244,230,183,0.2) !important;
      font-family: 'Georgia', serif !important;
      text-align: center !important;
      margin: 0 !important;
      display: block !important;
      border-bottom: 2px solid #654321 !important;
  }
  
  .sheet-subdetails > summary::-webkit-details-marker {
      display: none !important;
  }
  
  .sheet-subdetails > summary::marker {
      display: none !important;
  }
  
  .sheet-subdetails > summary:hover {
      background: linear-gradient(90deg, rgba(139,105,20,0.4), rgba(107,79,16,0.3)) !important;
  }
  
  /* === TALENT BLOCKS STYLE TALENT === */
  .sheet-talent-block {
      background: linear-gradient(135deg, rgba(139,69,19,0.2), rgba(101,67,33,0.15)) !important;
      border: var(--entrainement-border-width) solid var(--entrainement-bronze) !important;
      border-radius: var(--entrainement-border-radius) !important;
      margin: var(--entrainement-spacing-md) 0 !important;
      overflow: visible !important;
      transition: all 0.3s ease !important;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3) !important;
      font-family: 'Georgia', serif !important;
      display: block !important;
  }
  
  .sheet-talent-block:hover {
      transform: translateY(-2px) !important;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4) !important;
      border-color: var(--entrainement-accent) !important;
  }
  
  .sheet-talent-block[open] {
      background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2)) !important;
  }
  
  .sheet-talent-summary {
      background: linear-gradient(90deg, rgba(139,105,20,0.3), rgba(107,79,16,0.2)) !important;
      padding: var(--entrainement-spacing-sm) var(--entrainement-spacing-md) !important;
      cursor: pointer !important;
      border-bottom: 1px solid rgba(139,69,19,0.4) !important;
      transition: all 0.3s ease !important;
      list-style: none !important;
      font-family: 'Georgia', serif !important;
      display: block !important;
      margin: 0 !important;
      overflow: visible !important;
      position: relative !important;
  }
  
  .sheet-talent-summary::-webkit-details-marker {
      display: none !important;
  }
  
  .sheet-talent-summary::marker {
      display: none !important;
  }
  
  .sheet-talent-summary:hover {
      background: linear-gradient(90deg, rgba(139,105,20,0.4), rgba(107,79,16,0.3)) !important;
  }
  
  /* === LAYOUT HEADER TALENT CORRIGÉ === */
  .sheet-talent-header {
      display: flex !important;
      align-items: center !important;
      gap: var(--entrainement-spacing-sm) !important;
      width: 100% !important;
      box-sizing: border-box !important;
      flex-wrap: nowrap !important; /* Évite le retour à la ligne */
      position: relative !important;
      overflow: visible !important;
      z-index: 10 !important;
  }
  
  /* === TOUS LES SELECTS STYLE TALENT PREMIUM - LARGEUR RESPONSIVE PLEINE === */
  .sheet-entrainement-card select,
  .sheet-subdetails select,
  .sheet-talent-block select,
  select[name*="categorie"],
  select[name*="rang"],
  select[name*="difficulte"] {
      -webkit-appearance: none !important;
      -moz-appearance: none !important;
      appearance: none !important;
      
      padding: clamp(8px, 1vw, 14px) clamp(25px, 3.5vw, 40px) clamp(8px, 1vw, 14px) clamp(15px, 2vw, 25px) !important;
      min-width: 100% !important;
      width: 100% !important;
      max-width: 100% !important;
      height: auto !important;
      min-height: clamp(32px, 4vh, 45px) !important;
      box-sizing: border-box !important;
      display: block !important;
      
      background: linear-gradient(145deg, var(--entrainement-cream) 0%, #e6d690 50%, var(--entrainement-highlight) 100%) !important;
      background-color: var(--entrainement-cream) !important;
      border: var(--entrainement-border-width) solid var(--entrainement-primary) !important;
      border-radius: var(--entrainement-border-radius) !important;
      
      color: var(--entrainement-dark) !important;
      -webkit-text-fill-color: var(--entrainement-dark) !important;
      font-family: 'Georgia', serif !important;
      font-size: clamp(9px, 1vw, 13px) !important;
      font-weight: 800 !important;
      line-height: 1.2 !important;
      text-align: center !important;
      text-transform: uppercase !important;
      letter-spacing: clamp(0.3px, 0.08vw, 1px) !important;
      
      cursor: pointer !important;
      box-shadow: 
          inset 0 2px 5px rgba(0,0,0,0.25),
          0 3px 8px rgba(139,105,20,0.4),
          0 0 0 2px rgba(139,105,20,0.1) !important;
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
      position: relative !important;
      z-index: 20 !important;
      opacity: 1 !important;
      visibility: visible !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      text-overflow: ellipsis !important;
      vertical-align: middle !important;
  }
  
  /* === CORRECTION SPECIFIQUE SELECTS TYPE TALENT === */
  /* Surcharge spécifique pour les selects dans talent-header */
  .sheet-talent-header .sheet-talent-type,
  .sheet-talent-header select[name*="type"],
  details .sheet-talent-header select,
  .sheet-talent-block .sheet-talent-type {
      min-width: clamp(80px, 12vw, 120px) !important;
      width: auto !important;
      max-width: clamp(120px, 15vw, 160px) !important;
      flex-shrink: 0 !important;
      display: inline-block !important;
      box-sizing: border-box !important;
      background: linear-gradient(145deg, var(--entrainement-gold) 0%, var(--entrainement-highlight) 50%, #b8860b 100%) !important;
      background-color: var(--entrainement-gold) !important;
      border: var(--entrainement-border-width) solid var(--entrainement-primary) !important;
      color: var(--entrainement-dark) !important;
      font-weight: 800 !important;
      text-align: center !important;
      font-size: clamp(7px, 0.7vw, 10px) !important;
      padding: clamp(6px, 0.8vw, 10px) clamp(20px, 2.5vw, 30px) clamp(6px, 0.8vw, 10px) clamp(10px, 1.2vw, 16px) !important;
      border-radius: 6px !important;
      cursor: pointer !important;
      transition: all 0.3s ease !important;
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.2),
          0 2px 6px rgba(139,105,20,0.3) !important;
  }
  
  .sheet-talent-header .sheet-talent-type:hover {
      background: linear-gradient(145deg, #ffd700 0%, var(--entrainement-gold) 50%, var(--entrainement-highlight) 100%) !important;
      border-color: #b8860b !important;
      transform: translateY(-1px) !important;
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.2),
          0 4px 10px rgba(218,165,32,0.4) !important;
  }
  
  .sheet-talent-header .sheet-talent-type:focus {
      outline: none !important;
      border-color: var(--entrainement-accent) !important;
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.2),
          0 0 8px rgba(205,133,63,0.5) !important;
  }
  
  /* Sélecteurs spécifiques pour forcer la largeur pleine SAUF pour les types talent */
  .charsheet select,
  .sheet-entrainement select,
  input[type="hidden"] + select,
  details select {
      min-width: 100% !important;
      width: 100% !important;
      max-width: 100% !important;
      display: block !important;
      box-sizing: border-box !important;
  }
  
  /* === NEUTRALISATION RÈGLES GÉNÉRALES TROP LARGES === */
  /* Annule les règles générales pour les selects spécifiques aux talents */
  .sheet-talent-block select:not(.sheet-talent-type),
  .sheet-entrainement-card select:not([name*="type"]),
  .sheet-subdetails select:not([name*="type"]) {
      /* Les autres selects gardent leur largeur pleine */
      min-width: 100% !important;
      width: 100% !important;
      max-width: 100% !important;
  }
  
  .sheet-entrainement-card select:hover,
  .sheet-subdetails select:hover,
  .sheet-talent-block select:hover {
      background: linear-gradient(145deg, var(--entrainement-gold) 0%, var(--entrainement-highlight) 50%, #b8860b 100%) !important;
      background-color: var(--entrainement-gold) !important;
      border-color: #b8860b !important;
      transform: translateY(-3px) scale(1.03) !important;
      box-shadow: 
          inset 0 2px 5px rgba(0,0,0,0.25),
          0 6px 15px rgba(218,165,32,0.6),
          0 0 20px rgba(255,215,0,0.3) !important;
  }
  
  .sheet-entrainement-card select:focus,
  .sheet-subdetails select:focus,
  .sheet-talent-block select:focus {
      outline: none !important;
      border-color: var(--entrainement-accent) !important;
      background: linear-gradient(145deg, var(--entrainement-light) 0%, var(--entrainement-cream) 50%, #e6d690 100%) !important;
      background-color: var(--entrainement-light) !important;
      color: var(--entrainement-dark) !important;
      -webkit-text-fill-color: var(--entrainement-dark) !important;
      box-shadow: 
          inset 0 2px 5px rgba(0,0,0,0.25),
          0 0 20px rgba(205,133,63,0.7),
          0 8px 20px rgba(139,105,20,0.5) !important;
      transform: translateY(-2px) scale(1.02) !important;
      z-index: 30 !important;
  }
  
  .sheet-entrainement-card select:active,
  .sheet-subdetails select:active,
  .sheet-talent-block select:active {
      transform: translateY(0px) scale(0.98) !important;
      box-shadow: 
          inset 0 3px 8px rgba(0,0,0,0.35),
          0 1px 3px rgba(139,105,20,0.3) !important;
  }
  
  .sheet-entrainement-card select option,
  .sheet-subdetails select option,
  .sheet-talent-block select option {
      background: var(--entrainement-cream) !important;
      background-color: var(--entrainement-cream) !important;
      color: var(--entrainement-dark) !important;
      -webkit-text-fill-color: var(--entrainement-dark) !important;
      opacity: 1 !important;
      visibility: visible !important;
      font-weight: 700 !important;
      font-size: clamp(9px, 1vw, 13px) !important;
      padding: clamp(6px, 0.8vw, 12px) !important;
      line-height: 1.4 !important;
      white-space: normal !important;
      overflow: visible !important;
      min-height: clamp(20px, 2.5vh, 30px) !important;
      text-transform: none !important;
  }
  
  .sheet-entrainement-card select option:checked,
  .sheet-entrainement-card select option:selected,
  .sheet-subdetails select option:checked,
  .sheet-subdetails select option:selected,
  .sheet-talent-block select option:checked,
  .sheet-talent-block select option:selected {
      background: var(--entrainement-accent) !important;
      background-color: var(--entrainement-accent) !important;
      color: var(--entrainement-cream) !important;
      -webkit-text-fill-color: var(--entrainement-cream) !important;
      font-weight: bold !important;
  }
  
  /* Flèche dropdown personnalisée pour tous les selects */
  .sheet-entrainement-card select::after,
  .sheet-subdetails select::after,
  .sheet-talent-block select::after {
      content: "▼" !important;
      position: absolute !important;
      right: clamp(12px, 1.5vw, 20px) !important;
      top: 50% !important;
      transform: translateY(-50%) !important;
      font-size: clamp(10px, 1.1vw, 14px) !important;
      color: #654321 !important;
      text-shadow: 1px 1px 2px rgba(244,230,183,0.8) !important;
      transition: all 0.3s ease !important;
      pointer-events: none !important;
      z-index: 2 !important;
  }
  
  .sheet-entrainement-card select:hover::after,
  .sheet-subdetails select:hover::after,
  .sheet-talent-block select:hover::after {
      color: var(--entrainement-primary) !important;
      transform: translateY(-50%) scale(1.2) !important;
  }
  
  /* Animation d'apparition pour tous les selects */
  .sheet-entrainement-card select,
  .sheet-subdetails select,
  .sheet-talent-block select {
      animation: entrainementSelectAppear 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
  }
  
  @keyframes entrainementSelectAppear {
      0% {
          opacity: 0;
          transform: translateY(15px) scale(0.9);
      }
      100% {
          opacity: 1;
          transform: translateY(0) scale(1);
      }
  }
  
  /* Input nom du talent prend l'espace disponible */
  .sheet-talent-header input[name*="nom"] {
      flex: 1 !important;
      min-width: 0 !important; /* Important pour flexbox */
      background: linear-gradient(135deg, var(--entrainement-cream), #e6d690) !important;
      color: var(--entrainement-dark) !important;
      border: 2px solid rgba(139,105,20,0.6) !important;
      font-weight: 700 !important;
      font-size: clamp(8px, 0.8vw, 12px) !important;
      padding: var(--entrainement-spacing-xs) var(--entrainement-spacing-sm) !important;
      border-radius: 6px !important;
      box-sizing: border-box !important;
      font-family: 'Georgia', serif !important;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.2) !important;
      transition: all 0.3s ease !important;
      outline: none !important;
  }
  
  .sheet-talent-header input[name*="nom"]:focus {
      border-color: var(--entrainement-accent) !important;
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.2),
          0 0 8px rgba(205,133,63,0.4) !important;
      background: linear-gradient(135deg, #f5e8c1, #e8d09a) !important;
      transform: translateY(-1px) !important;
  }
  
  .sheet-talent-header input[name*="nom"]::placeholder {
      color: rgba(44,30,15,0.6) !important;
      font-style: italic !important;
  }
  
  /* Bouton activer si présent */
  .sheet-talent-header button[type="roll"],
  .sheet-talent-header .sheet-talent-activate-btn {
      min-width: clamp(60px, 10vw, 90px) !important;
      width: auto !important;
      max-width: clamp(90px, 12vw, 120px) !important;
      flex-shrink: 0 !important;
      padding: var(--entrainement-spacing-xs) var(--entrainement-spacing-sm) !important;
      font-size: clamp(7px, 0.7vw, 10px) !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      text-overflow: ellipsis !important;
  }
  
  .sheet-talent-content {
      padding: var(--entrainement-spacing-md) !important;
      background: linear-gradient(135deg, rgba(244,230,183,0.05), rgba(230,214,144,0.03)) !important;
      border-top: 1px solid rgba(139,69,19,0.3) !important;
      font-family: 'Georgia', serif !important;
      display: block !important;
  }
  
  .sheet-effet-zone {
      min-height: clamp(60px, 8vh, 90px) !important;
      background: linear-gradient(135deg, var(--entrainement-light), #fdf6e3) !important;
      border: 2px solid rgba(139,105,20,0.5) !important;
      color: var(--entrainement-dark) !important;
      font-weight: 500 !important;
      line-height: 1.4 !important;
      font-family: 'Georgia', serif !important;
      width: 100% !important;
      padding: var(--entrainement-spacing-sm) !important;
      border-radius: 6px !important;
      box-sizing: border-box !important;
      resize: vertical !important;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.15) !important;
      transition: all 0.3s ease !important;
      font-size: clamp(8px, 0.8vw, 12px) !important;
  }
  
  .sheet-effet-zone:focus {
      border-color: var(--entrainement-accent) !important;
      outline: none !important;
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.15),
          0 0 8px rgba(205,133,63,0.4) !important;
      background: linear-gradient(135deg, #fffdf8, #fefaf4) !important;
  }
  
  .sheet-effet-zone::placeholder {
      color: rgba(44,30,15,0.5) !important;
      font-style: italic !important;
  }
  
  /* === RESPONSIVE TALENT HEADER === */
  @media (max-width: 768px) {
      .sheet-talent-header {
          flex-wrap: wrap !important; /* Permet le retour à la ligne sur mobile */
          gap: var(--entrainement-spacing-xs) !important;
      }
      
      .sheet-talent-header input[name*="nom"] {
          order: 1 !important;
          flex: 1 1 100% !important; /* Prend toute la largeur sur mobile */
          margin-bottom: var(--entrainement-spacing-xs) !important;
      }
      
      .sheet-talent-header .sheet-talent-type {
          order: 2 !important;
          flex: 1 !important;
          min-width: clamp(70px, 45%, 100px) !important;
          max-width: none !important;
      }
      
      .sheet-talent-header button[type="roll"] {
          order: 3 !important;
          flex: 1 !important;
          min-width: clamp(70px, 45%, 100px) !important;
          max-width: none !important;
      }
  }
  
  /* === LAYOUT STYLE TALENT === */
  .sheet-entrainement-card .sheet-row,
  .sheet-subdetails .sheet-row,
  .sheet-talent-block .sheet-row {
      display: flex !important;
      gap: var(--entrainement-spacing-sm) !important;
      margin: var(--entrainement-spacing-sm) 0 !important;
      align-items: end !important;
  }
  
  .sheet-entrainement-card .sheet-col,
  .sheet-subdetails .sheet-col,
  .sheet-talent-block .sheet-col {
      flex: 1 !important;
  }
  
  .sheet-entrainement-card label,
  .sheet-subdetails label,
  .sheet-talent-block label {
      display: block !important;
      font-weight: bold !important;
      color: var(--entrainement-cream) !important;
      margin-bottom: var(--entrainement-spacing-xs) !important;
      font-size: clamp(8px, 0.8vw, 11px) !important;
      text-transform: uppercase !important;
      letter-spacing: clamp(0.2px, 0.05vw, 0.8px) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
      font-family: 'Georgia', serif !important;
  }
  
  .sheet-entrainement-card input[type="text"],
  .sheet-entrainement-card input[type="number"],
  .sheet-entrainement-card textarea,
  .sheet-subdetails input[type="text"],
  .sheet-subdetails input[type="number"],
  .sheet-subdetails textarea,
  .sheet-talent-block input[type="text"],
  .sheet-talent-block input[type="number"],
  .sheet-talent-block textarea {
      width: 100% !important;
      padding: var(--entrainement-spacing-xs) var(--entrainement-spacing-sm) !important;
      border: 2px solid rgba(139,105,20,0.6) !important;
      border-radius: 6px !important;
      font-size: clamp(8px, 0.8vw, 11px) !important;
      background: linear-gradient(135deg, var(--entrainement-cream), #e6d690) !important;
      color: var(--entrainement-dark) !important;
      font-weight: 700 !important;
      font-family: 'Georgia', serif !important;
      transition: all 0.3s ease !important;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.2) !important;
      box-sizing: border-box !important;
      outline: none !important;
  }
  
  .sheet-entrainement-card input[type="text"]:focus,
  .sheet-entrainement-card input[type="number"]:focus,
  .sheet-entrainement-card textarea:focus,
  .sheet-subdetails input[type="text"]:focus,
  .sheet-subdetails input[type="number"]:focus,
  .sheet-subdetails textarea:focus,
  .sheet-talent-block input[type="text"]:focus,
  .sheet-talent-block input[type="number"]:focus,
  .sheet-talent-block textarea:focus {
      border-color: var(--entrainement-accent) !important;
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.2),
          0 0 8px rgba(205,133,63,0.4) !important;
      background: linear-gradient(135deg, #f5e8c1, #e8d09a) !important;
      transform: translateY(-1px) !important;
  }
  
  .sheet-entrainement-card input[type="text"]::placeholder,
  .sheet-entrainement-card input[type="number"]::placeholder,
  .sheet-entrainement-card textarea::placeholder,
  .sheet-subdetails input[type="text"]::placeholder,
  .sheet-subdetails input[type="number"]::placeholder,
  .sheet-subdetails textarea::placeholder,
  .sheet-talent-block input[type="text"]::placeholder,
  .sheet-talent-block input[type="number"]::placeholder,
  .sheet-talent-block textarea::placeholder {
      color: rgba(44,30,15,0.6) !important;
      font-style: italic !important;
  }
  
  .sheet-entrainement-card input[type="number"],
  .sheet-subdetails input[type="number"],
  .sheet-talent-block input[type="number"] {
      text-align: center !important;
      font-weight: bold !important;
  }
  
  /* === SECTIONS SPÉCIALES STYLE TALENT === */
  .sheet-pa-section {
      background: linear-gradient(135deg, rgba(222,184,135,0.25), rgba(210,180,140,0.2)) !important;
      border: var(--entrainement-border-width) solid rgba(139,69,19,0.4) !important;
      border-radius: var(--entrainement-border-radius) !important;
      padding: var(--entrainement-spacing-md) !important;
      margin: var(--entrainement-spacing-md) 0 !important;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2) !important;
      position: relative !important;
      overflow: hidden !important;
      font-family: 'Georgia', serif !important;
      transition: all 0.3s ease !important;
  }
  
  .sheet-pa-section:hover {
      background: linear-gradient(135deg, rgba(222,184,135,0.35), rgba(210,180,140,0.3)) !important;
      transform: translateY(-2px) !important;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3) !important;
      border-color: var(--entrainement-accent) !important;
  }
  
  .sheet-pa-section h4 {
      color: var(--entrainement-highlight) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.6) !important;
      text-align: center !important;
      margin-bottom: var(--entrainement-spacing-sm) !important;
      font-size: clamp(8px, 0.8vw, 12px) !important;
      text-transform: uppercase !important;
      letter-spacing: clamp(0.3px, 0.08vw, 1px) !important;
      font-family: 'Georgia', serif !important;
      font-weight: bold !important;
      margin-top: var(--entrainement-spacing-sm) !important;
  }
  
  .sheet-objectif-section {
      background: linear-gradient(135deg, rgba(186,85,211,0.15), rgba(138,43,226,0.1)) !important;
      border: var(--entrainement-border-width) solid #8a2be2 !important;
      border-radius: var(--entrainement-border-radius) !important;
      padding: var(--entrainement-spacing-md) !important;
      margin-top: var(--entrainement-spacing-md) !important;
      margin-bottom: var(--entrainement-spacing-sm) !important;
      box-shadow: 0 2px 6px rgba(138,43,226,0.3) !important;
      position: relative !important;
      overflow: hidden !important;
      font-family: 'Georgia', serif !important;
      transition: all 0.3s ease !important;
  }
  
  .sheet-objectif-section:hover {
      background: linear-gradient(135deg, rgba(186,85,211,0.25), rgba(138,43,226,0.2)) !important;
      transform: translateY(-2px) !important;
      box-shadow: 0 4px 10px rgba(138,43,226,0.4) !important;
  }
  
  .sheet-objectif-section h4 {
      color: #dda0dd !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.6) !important;
      text-align: center !important;
      margin-bottom: var(--entrainement-spacing-sm) !important;
      font-size: clamp(8px, 0.8vw, 12px) !important;
      text-transform: uppercase !important;
      letter-spacing: clamp(0.3px, 0.08vw, 1px) !important;
      font-family: 'Georgia', serif !important;
      font-weight: bold !important;
      margin-top: var(--entrainement-spacing-sm) !important;
  }
  
  .sheet-objectif-section textarea {
      background: linear-gradient(135deg, rgba(221,160,221,0.2), rgba(186,85,211,0.15)) !important;
      border: 2px solid rgba(186,85,211,0.5) !important;
      color: var(--entrainement-dark) !important;
      font-weight: 600 !important;
      resize: vertical !important;
      min-height: clamp(40px, 6vh, 70px) !important;
  }
  
  .sheet-objectif-section textarea:focus {
      border-color: #dda0dd !important;
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.15),
          0 0 8px rgba(221,160,221,0.6) !important;
      background: linear-gradient(135deg, rgba(221,160,221,0.3), rgba(186,85,211,0.25)) !important;
  }
  
  /* === BARRE DE PROGRESSION STYLE TALENT === */
  .sheet-progress-container {
      margin: var(--entrainement-spacing-sm) 0 !important;
      position: relative !important;
      width: 100% !important;
      box-sizing: border-box !important;
  }
  
  .sheet-progress-bar {
      position: relative !important;
      width: 100% !important;
      height: clamp(16px, 3vh, 26px) !important;
      background: linear-gradient(135deg, var(--entrainement-dark), #1a1107) !important;
      border: var(--entrainement-border-width) solid var(--entrainement-bronze) !important;
      border-radius: var(--entrainement-border-radius) !important;
      overflow: hidden !important;
      box-shadow: 
          inset 0 2px 4px rgba(0,0,0,0.6),
          0 2px 6px rgba(0,0,0,0.4) !important;
      box-sizing: border-box !important;
  }
  
  .sheet-progress-bg {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      height: 100% !important;
      background: linear-gradient(135deg, var(--entrainement-darker), var(--entrainement-dark)) !important;
  }
  
  .sheet-progress-fill {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      height: 100% !important;
      background: linear-gradient(135deg, #dc143c, #b22222) !important;
      width: 0% !important;
      transition: width 0.6s ease, background 0.4s ease !important;
      border-radius: calc(var(--entrainement-border-radius) - 2px) !important;
      box-shadow: 
          inset 0 1px 0 rgba(255,255,255,0.3),
          0 0 8px rgba(220,20,60,0.5) !important;
      z-index: 1 !important;
  }
  
  .sheet-progress-label {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      height: 100% !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      font-size: clamp(8px, 0.8vw, 12px) !important;
      font-weight: bold !important;
      color: var(--entrainement-cream) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
      z-index: 2 !important;
      pointer-events: none !important;
      font-family: 'Georgia', serif !important;
  }
  
  /* === SYSTÈME BASÉ SUR LES VALUES DES INPUTS - COMPLET STYLE TALENT === */
  /* 0-25% = Rouge */
  input[name="attr_base_progress"][value="0"] ~ .sheet-progress-bar .sheet-progress-fill { width: 0% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="1"] ~ .sheet-progress-bar .sheet-progress-fill { width: 1% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="2"] ~ .sheet-progress-bar .sheet-progress-fill { width: 2% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="3"] ~ .sheet-progress-bar .sheet-progress-fill { width: 3% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="4"] ~ .sheet-progress-bar .sheet-progress-fill { width: 4% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="5"] ~ .sheet-progress-bar .sheet-progress-fill { width: 5% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="6"] ~ .sheet-progress-bar .sheet-progress-fill { width: 6% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="7"] ~ .sheet-progress-bar .sheet-progress-fill { width: 7% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="8"] ~ .sheet-progress-bar .sheet-progress-fill { width: 8% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="9"] ~ .sheet-progress-bar .sheet-progress-fill { width: 9% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="10"] ~ .sheet-progress-bar .sheet-progress-fill { width: 10% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="11"] ~ .sheet-progress-bar .sheet-progress-fill { width: 11% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="12"] ~ .sheet-progress-bar .sheet-progress-fill { width: 12% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="13"] ~ .sheet-progress-bar .sheet-progress-fill { width: 13% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="14"] ~ .sheet-progress-bar .sheet-progress-fill { width: 14% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="15"] ~ .sheet-progress-bar .sheet-progress-fill { width: 15% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="16"] ~ .sheet-progress-bar .sheet-progress-fill { width: 16% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="17"] ~ .sheet-progress-bar .sheet-progress-fill { width: 17% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="18"] ~ .sheet-progress-bar .sheet-progress-fill { width: 18% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="19"] ~ .sheet-progress-bar .sheet-progress-fill { width: 19% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="20"] ~ .sheet-progress-bar .sheet-progress-fill { width: 20% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="21"] ~ .sheet-progress-bar .sheet-progress-fill { width: 21% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="22"] ~ .sheet-progress-bar .sheet-progress-fill { width: 22% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="23"] ~ .sheet-progress-bar .sheet-progress-fill { width: 23% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="24"] ~ .sheet-progress-bar .sheet-progress-fill { width: 24% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_base_progress"][value="25"] ~ .sheet-progress-bar .sheet-progress-fill { width: 25% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  
  /* 26-50% = Orange */
  input[name="attr_base_progress"][value="26"] ~ .sheet-progress-bar .sheet-progress-fill { width: 26% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="27"] ~ .sheet-progress-bar .sheet-progress-fill { width: 27% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="28"] ~ .sheet-progress-bar .sheet-progress-fill { width: 28% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="29"] ~ .sheet-progress-bar .sheet-progress-fill { width: 29% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="30"] ~ .sheet-progress-bar .sheet-progress-fill { width: 30% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="31"] ~ .sheet-progress-bar .sheet-progress-fill { width: 31% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="32"] ~ .sheet-progress-bar .sheet-progress-fill { width: 32% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="33"] ~ .sheet-progress-bar .sheet-progress-fill { width: 33% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="34"] ~ .sheet-progress-bar .sheet-progress-fill { width: 34% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="35"] ~ .sheet-progress-bar .sheet-progress-fill { width: 35% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="36"] ~ .sheet-progress-bar .sheet-progress-fill { width: 36% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="37"] ~ .sheet-progress-bar .sheet-progress-fill { width: 37% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="38"] ~ .sheet-progress-bar .sheet-progress-fill { width: 38% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="39"] ~ .sheet-progress-bar .sheet-progress-fill { width: 39% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="40"] ~ .sheet-progress-bar .sheet-progress-fill { width: 40% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="41"] ~ .sheet-progress-bar .sheet-progress-fill { width: 41% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="42"] ~ .sheet-progress-bar .sheet-progress-fill { width: 42% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="43"] ~ .sheet-progress-bar .sheet-progress-fill { width: 43% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="44"] ~ .sheet-progress-bar .sheet-progress-fill { width: 44% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="45"] ~ .sheet-progress-bar .sheet-progress-fill { width: 45% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="46"] ~ .sheet-progress-bar .sheet-progress-fill { width: 46% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="47"] ~ .sheet-progress-bar .sheet-progress-fill { width: 47% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="48"] ~ .sheet-progress-bar .sheet-progress-fill { width: 48% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="49"] ~ .sheet-progress-bar .sheet-progress-fill { width: 49% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_base_progress"][value="50"] ~ .sheet-progress-bar .sheet-progress-fill { width: 50% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  
  /* 51-75% = Vert */
  input[name="attr_base_progress"][value="51"] ~ .sheet-progress-bar .sheet-progress-fill { width: 51% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="52"] ~ .sheet-progress-bar .sheet-progress-fill { width: 52% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="53"] ~ .sheet-progress-bar .sheet-progress-fill { width: 53% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="54"] ~ .sheet-progress-bar .sheet-progress-fill { width: 54% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="55"] ~ .sheet-progress-bar .sheet-progress-fill { width: 55% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="56"] ~ .sheet-progress-bar .sheet-progress-fill { width: 56% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="57"] ~ .sheet-progress-bar .sheet-progress-fill { width: 57% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="58"] ~ .sheet-progress-bar .sheet-progress-fill { width: 58% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="59"] ~ .sheet-progress-bar .sheet-progress-fill { width: 59% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="60"] ~ .sheet-progress-bar .sheet-progress-fill { width: 60% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="61"] ~ .sheet-progress-bar .sheet-progress-fill { width: 61% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="62"] ~ .sheet-progress-bar .sheet-progress-fill { width: 62% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="63"] ~ .sheet-progress-bar .sheet-progress-fill { width: 63% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="64"] ~ .sheet-progress-bar .sheet-progress-fill { width: 64% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="65"] ~ .sheet-progress-bar .sheet-progress-fill { width: 65% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="66"] ~ .sheet-progress-bar .sheet-progress-fill { width: 66% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="67"] ~ .sheet-progress-bar .sheet-progress-fill { width: 67% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="68"] ~ .sheet-progress-bar .sheet-progress-fill { width: 68% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="69"] ~ .sheet-progress-bar .sheet-progress-fill { width: 69% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="70"] ~ .sheet-progress-bar .sheet-progress-fill { width: 70% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="71"] ~ .sheet-progress-bar .sheet-progress-fill { width: 71% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="72"] ~ .sheet-progress-bar .sheet-progress-fill { width: 72% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="73"] ~ .sheet-progress-bar .sheet-progress-fill { width: 73% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="74"] ~ .sheet-progress-bar .sheet-progress-fill { width: 74% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_base_progress"][value="75"] ~ .sheet-progress-bar .sheet-progress-fill { width: 75% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  
  /* 76-99% = Bleu */
  input[name="attr_base_progress"][value="76"] ~ .sheet-progress-bar .sheet-progress-fill { width: 76% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="77"] ~ .sheet-progress-bar .sheet-progress-fill { width: 77% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="78"] ~ .sheet-progress-bar .sheet-progress-fill { width: 78% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="79"] ~ .sheet-progress-bar .sheet-progress-fill { width: 79% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="80"] ~ .sheet-progress-bar .sheet-progress-fill { width: 80% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="81"] ~ .sheet-progress-bar .sheet-progress-fill { width: 81% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="82"] ~ .sheet-progress-bar .sheet-progress-fill { width: 82% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="83"] ~ .sheet-progress-bar .sheet-progress-fill { width: 83% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="84"] ~ .sheet-progress-bar .sheet-progress-fill { width: 84% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="85"] ~ .sheet-progress-bar .sheet-progress-fill { width: 85% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="86"] ~ .sheet-progress-bar .sheet-progress-fill { width: 86% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="87"] ~ .sheet-progress-bar .sheet-progress-fill { width: 87% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="88"] ~ .sheet-progress-bar .sheet-progress-fill { width: 88% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="89"] ~ .sheet-progress-bar .sheet-progress-fill { width: 89% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="90"] ~ .sheet-progress-bar .sheet-progress-fill { width: 90% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="91"] ~ .sheet-progress-bar .sheet-progress-fill { width: 91% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="92"] ~ .sheet-progress-bar .sheet-progress-fill { width: 92% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="93"] ~ .sheet-progress-bar .sheet-progress-fill { width: 93% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="94"] ~ .sheet-progress-bar .sheet-progress-fill { width: 94% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="95"] ~ .sheet-progress-bar .sheet-progress-fill { width: 95% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="96"] ~ .sheet-progress-bar .sheet-progress-fill { width: 96% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="97"] ~ .sheet-progress-bar .sheet-progress-fill { width: 97% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="98"] ~ .sheet-progress-bar .sheet-progress-fill { width: 98% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_base_progress"][value="99"] ~ .sheet-progress-bar .sheet-progress-fill { width: 99% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  
  /* 100% = Violet */
  input[name="attr_base_progress"][value="100"] ~ .sheet-progress-bar .sheet-progress-fill { width: 100% !important; background: linear-gradient(135deg, #8a2be2, #9370db) !important; }
  
  /* === MÊME SYSTÈME POUR LES SECTIONS RÉPÉTABLES === */
  input[name="attr_progress"][value="0"] ~ .sheet-progress-bar .sheet-progress-fill { width: 0% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="1"] ~ .sheet-progress-bar .sheet-progress-fill { width: 1% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="2"] ~ .sheet-progress-bar .sheet-progress-fill { width: 2% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="3"] ~ .sheet-progress-bar .sheet-progress-fill { width: 3% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="4"] ~ .sheet-progress-bar .sheet-progress-fill { width: 4% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="5"] ~ .sheet-progress-bar .sheet-progress-fill { width: 5% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="6"] ~ .sheet-progress-bar .sheet-progress-fill { width: 6% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="7"] ~ .sheet-progress-bar .sheet-progress-fill { width: 7% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="8"] ~ .sheet-progress-bar .sheet-progress-fill { width: 8% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="9"] ~ .sheet-progress-bar .sheet-progress-fill { width: 9% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="10"] ~ .sheet-progress-bar .sheet-progress-fill { width: 10% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="11"] ~ .sheet-progress-bar .sheet-progress-fill { width: 11% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="12"] ~ .sheet-progress-bar .sheet-progress-fill { width: 12% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="13"] ~ .sheet-progress-bar .sheet-progress-fill { width: 13% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="14"] ~ .sheet-progress-bar .sheet-progress-fill { width: 14% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="15"] ~ .sheet-progress-bar .sheet-progress-fill { width: 15% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="16"] ~ .sheet-progress-bar .sheet-progress-fill { width: 16% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="17"] ~ .sheet-progress-bar .sheet-progress-fill { width: 17% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="18"] ~ .sheet-progress-bar .sheet-progress-fill { width: 18% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="19"] ~ .sheet-progress-bar .sheet-progress-fill { width: 19% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="20"] ~ .sheet-progress-bar .sheet-progress-fill { width: 20% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="21"] ~ .sheet-progress-bar .sheet-progress-fill { width: 21% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="22"] ~ .sheet-progress-bar .sheet-progress-fill { width: 22% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="23"] ~ .sheet-progress-bar .sheet-progress-fill { width: 23% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="24"] ~ .sheet-progress-bar .sheet-progress-fill { width: 24% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="25"] ~ .sheet-progress-bar .sheet-progress-fill { width: 25% !important; background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  input[name="attr_progress"][value="26"] ~ .sheet-progress-bar .sheet-progress-fill { width: 26% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="27"] ~ .sheet-progress-bar .sheet-progress-fill { width: 27% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="28"] ~ .sheet-progress-bar .sheet-progress-fill { width: 28% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="29"] ~ .sheet-progress-bar .sheet-progress-fill { width: 29% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="30"] ~ .sheet-progress-bar .sheet-progress-fill { width: 30% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="31"] ~ .sheet-progress-bar .sheet-progress-fill { width: 31% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="32"] ~ .sheet-progress-bar .sheet-progress-fill { width: 32% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="33"] ~ .sheet-progress-bar .sheet-progress-fill { width: 33% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="34"] ~ .sheet-progress-bar .sheet-progress-fill { width: 34% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="35"] ~ .sheet-progress-bar .sheet-progress-fill { width: 35% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="36"] ~ .sheet-progress-bar .sheet-progress-fill { width: 36% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="37"] ~ .sheet-progress-bar .sheet-progress-fill { width: 37% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="38"] ~ .sheet-progress-bar .sheet-progress-fill { width: 38% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="39"] ~ .sheet-progress-bar .sheet-progress-fill { width: 39% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="40"] ~ .sheet-progress-bar .sheet-progress-fill { width: 40% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="41"] ~ .sheet-progress-bar .sheet-progress-fill { width: 41% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="42"] ~ .sheet-progress-bar .sheet-progress-fill { width: 42% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="43"] ~ .sheet-progress-bar .sheet-progress-fill { width: 43% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="44"] ~ .sheet-progress-bar .sheet-progress-fill { width: 44% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="45"] ~ .sheet-progress-bar .sheet-progress-fill { width: 45% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="46"] ~ .sheet-progress-bar .sheet-progress-fill { width: 46% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="47"] ~ .sheet-progress-bar .sheet-progress-fill { width: 47% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="48"] ~ .sheet-progress-bar .sheet-progress-fill { width: 48% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="49"] ~ .sheet-progress-bar .sheet-progress-fill { width: 49% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="50"] ~ .sheet-progress-bar .sheet-progress-fill { width: 50% !important; background: linear-gradient(135deg, #ff8c00, #ff7f00) !important; }
  input[name="attr_progress"][value="51"] ~ .sheet-progress-bar .sheet-progress-fill { width: 51% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="52"] ~ .sheet-progress-bar .sheet-progress-fill { width: 52% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="53"] ~ .sheet-progress-bar .sheet-progress-fill { width: 53% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="54"] ~ .sheet-progress-bar .sheet-progress-fill { width: 54% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="55"] ~ .sheet-progress-bar .sheet-progress-fill { width: 55% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="56"] ~ .sheet-progress-bar .sheet-progress-fill { width: 56% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="57"] ~ .sheet-progress-bar .sheet-progress-fill { width: 57% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="58"] ~ .sheet-progress-bar .sheet-progress-fill { width: 58% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="59"] ~ .sheet-progress-bar .sheet-progress-fill { width: 59% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="60"] ~ .sheet-progress-bar .sheet-progress-fill { width: 60% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="61"] ~ .sheet-progress-bar .sheet-progress-fill { width: 61% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="62"] ~ .sheet-progress-bar .sheet-progress-fill { width: 62% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="63"] ~ .sheet-progress-bar .sheet-progress-fill { width: 63% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="64"] ~ .sheet-progress-bar .sheet-progress-fill { width: 64% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="65"] ~ .sheet-progress-bar .sheet-progress-fill { width: 65% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="66"] ~ .sheet-progress-bar .sheet-progress-fill { width: 66% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="67"] ~ .sheet-progress-bar .sheet-progress-fill { width: 67% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="68"] ~ .sheet-progress-bar .sheet-progress-fill { width: 68% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="69"] ~ .sheet-progress-bar .sheet-progress-fill { width: 69% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="70"] ~ .sheet-progress-bar .sheet-progress-fill { width: 70% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="71"] ~ .sheet-progress-bar .sheet-progress-fill { width: 71% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="72"] ~ .sheet-progress-bar .sheet-progress-fill { width: 72% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="73"] ~ .sheet-progress-bar .sheet-progress-fill { width: 73% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="74"] ~ .sheet-progress-bar .sheet-progress-fill { width: 74% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="75"] ~ .sheet-progress-bar .sheet-progress-fill { width: 75% !important; background: linear-gradient(135deg, #32cd32, #228b22) !important; }
  input[name="attr_progress"][value="76"] ~ .sheet-progress-bar .sheet-progress-fill { width: 76% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="77"] ~ .sheet-progress-bar .sheet-progress-fill { width: 77% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="78"] ~ .sheet-progress-bar .sheet-progress-fill { width: 78% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="79"] ~ .sheet-progress-bar .sheet-progress-fill { width: 79% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="80"] ~ .sheet-progress-bar .sheet-progress-fill { width: 80% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="81"] ~ .sheet-progress-bar .sheet-progress-fill { width: 81% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="82"] ~ .sheet-progress-bar .sheet-progress-fill { width: 82% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="83"] ~ .sheet-progress-bar .sheet-progress-fill { width: 83% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="84"] ~ .sheet-progress-bar .sheet-progress-fill { width: 84% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="85"] ~ .sheet-progress-bar .sheet-progress-fill { width: 85% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="86"] ~ .sheet-progress-bar .sheet-progress-fill { width: 86% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="87"] ~ .sheet-progress-bar .sheet-progress-fill { width: 87% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="88"] ~ .sheet-progress-bar .sheet-progress-fill { width: 88% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="89"] ~ .sheet-progress-bar .sheet-progress-fill { width: 89% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="90"] ~ .sheet-progress-bar .sheet-progress-fill { width: 90% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="91"] ~ .sheet-progress-bar .sheet-progress-fill { width: 91% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="92"] ~ .sheet-progress-bar .sheet-progress-fill { width: 92% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="93"] ~ .sheet-progress-bar .sheet-progress-fill { width: 93% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="94"] ~ .sheet-progress-bar .sheet-progress-fill { width: 94% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="95"] ~ .sheet-progress-bar .sheet-progress-fill { width: 95% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="96"] ~ .sheet-progress-bar .sheet-progress-fill { width: 96% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="97"] ~ .sheet-progress-bar .sheet-progress-fill { width: 97% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="98"] ~ .sheet-progress-bar .sheet-progress-fill { width: 98% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="99"] ~ .sheet-progress-bar .sheet-progress-fill { width: 99% !important; background: linear-gradient(135deg, #4169e1, #1e90ff) !important; }
  input[name="attr_progress"][value="100"] ~ .sheet-progress-bar .sheet-progress-fill { width: 100% !important; background: linear-gradient(135deg, #8a2be2, #9370db) !important; }
  
  /* === ACTIONS STYLE TALENT === */
  .sheet-actions {
      display: grid !important;
      grid-template-columns: repeat(auto-fit, minmax(var(--entrainement-grid-min-column), 1fr)) !important;
      gap: var(--entrainement-spacing-md) !important;
      margin-top: var(--entrainement-spacing-md) !important;
      width: 100% !important;
  }
  
  .sheet-action-group {
      background: linear-gradient(135deg, rgba(222,184,135,0.25), rgba(210,180,140,0.2)) !important;
      border: var(--entrainement-border-width) solid rgba(139,69,19,0.4) !important;
      border-radius: var(--entrainement-border-radius) !important;
      padding: var(--entrainement-spacing-md) !important;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2) !important;
      transition: all 0.3s ease !important;
      position: relative !important;
      overflow: hidden !important;
      width: 100% !important;
      box-sizing: border-box !important;
      font-family: 'Georgia', serif !important;
      display: block !important;
  }
  
  .sheet-action-group:hover {
      background: linear-gradient(135deg, rgba(222,184,135,0.35), rgba(210,180,140,0.3)) !important;
      transform: translateY(-2px) !important;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3) !important;
      border-color: var(--entrainement-accent) !important;
  }
  
  .sheet-action-group h4 {
      color: var(--entrainement-primary) !important;
      font-size: clamp(9px, 0.9vw, 13px) !important;
      margin: var(--entrainement-spacing-sm) 0 !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.6) !important;
      font-weight: bold !important;
      text-transform: uppercase !important;
      letter-spacing: clamp(0.3px, 0.08vw, 1px) !important;
      font-family: 'Georgia', serif !important;
      text-align: center !important;
  }
  
  .sheet-malus-info {
      background: linear-gradient(135deg, rgba(220,20,60,0.2), rgba(178,34,34,0.15)) !important;
      border: var(--entrainement-border-width) solid #dc143c !important;
      border-radius: calc(var(--entrainement-border-radius) * 0.7) !important;
      padding: var(--entrainement-spacing-xs) var(--entrainement-spacing-sm) !important;
      margin: var(--entrainement-spacing-xs) 0 !important;
      font-size: clamp(7px, 0.7vw, 10px) !important;
      color: var(--entrainement-cream) !important;
      font-weight: bold !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
      text-align: center !important;
      box-shadow: 
          inset 0 1px 0 rgba(255,255,255,0.1),
          0 2px 4px rgba(0,0,0,0.3) !important;
      font-family: 'Georgia', serif !important;
  }
  
  .sheet-entrainement-card button[type="roll"],
  .sheet-subdetails button[type="roll"],
  .sheet-talent-block button[type="roll"] {
      width: 100% !important;
      max-width: 100% !important;
      background: linear-gradient(135deg, var(--entrainement-primary), var(--entrainement-secondary), var(--entrainement-primary)) !important;
      background-size: 200% 200% !important;
      animation: entrainementTalentButtonShift 4s ease infinite !important;
      color: var(--entrainement-cream) !important;
      border: var(--entrainement-border-width) solid #654321 !important;
      padding: var(--entrainement-spacing-sm) var(--entrainement-spacing-md) !important;
      border-radius: var(--entrainement-border-radius) !important;
      font-weight: bold !important;
      font-size: clamp(8px, 0.8vw, 12px) !important;
      cursor: pointer !important;
      margin-top: var(--entrainement-spacing-sm) !important;
      text-transform: uppercase !important;
      letter-spacing: clamp(0.3px, 0.08vw, 1px) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
      box-shadow: 
          0 2px 6px rgba(0,0,0,0.4),
          inset 0 1px 0 rgba(244,230,183,0.2) !important;
      transition: all 0.3s ease !important;
      font-family: 'Georgia', serif !important;
      box-sizing: border-box !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      text-overflow: ellipsis !important;
  }
  
  @keyframes entrainementTalentButtonShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
  }
  
  .sheet-entrainement-card button[type="roll"]:hover,
  .sheet-subdetails button[type="roll"]:hover,
  .sheet-talent-block button[type="roll"]:hover {
      background: linear-gradient(135deg, #a68b2f, var(--entrainement-primary), #a68b2f) !important;
      border-color: var(--entrainement-primary) !important;
      transform: translateY(-2px) !important;
      box-shadow: 
          0 4px 8px rgba(139,105,20,0.5),
          inset 0 1px 0 rgba(244,230,183,0.3) !important;
      color: var(--entrainement-cream) !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8) !important;
  }
  
  .sheet-entrainement-card button[type="roll"]:active,
  .sheet-subdetails button[type="roll"]:active,
  .sheet-talent-block button[type="roll"]:active {
      transform: translateY(0px) !important;
      box-shadow: 
          0 1px 3px rgba(0,0,0,0.3),
          inset 0 1px 0 rgba(0,0,0,0.1) !important;
  }
  
  /* === RESPONSIVE STYLE TALENT === */
  @media (max-width: 1024px) {
      .sheet-actions {
          grid-template-columns: repeat(2, 1fr) !important;
          gap: var(--entrainement-spacing-sm) !important;
      }
  }
  
  @media (max-width: 768px) {
      .sheet-entrainement-card .sheet-row,
      .sheet-subdetails .sheet-row,
      .sheet-talent-block .sheet-row {
          flex-direction: column !important;
          gap: var(--entrainement-spacing-sm) !important;
      }
      
      .sheet-actions {
          grid-template-columns: 1fr !important;
          gap: var(--entrainement-spacing-sm) !important;
      }
      
      .sheet-nom-container {
          flex-direction: row !important;
          align-items: center !important;
          gap: var(--entrainement-spacing-sm) !important;
      }
      
      .sheet-nom-input {
          max-width: 100% !important;
      }
      
      .sheet-nom-label {
          text-align: left !important;
      }
  }
  
  /* === ANIMATIONS STYLE TALENT === */
  @keyframes entrainementTalentGoldShimmer {
      0% { 
          box-shadow: 0 2px 8px rgba(0,0,0,0.6);
      }
      50% { 
          box-shadow: 0 4px 12px rgba(139,105,20,0.4), 0 2px 8px rgba(0,0,0,0.6);
      }
      100% { 
          box-shadow: 0 2px 8px rgba(0,0,0,0.6);
      }
  }
  
  .sheet-entrainement-card {
      animation: entrainementTalentGoldShimmer 6s ease-in-out infinite !important;
  }
  
  /* Animations spéciales pour différents types d'entrainements */
  .sheet-entrainement-card[data-type="combat"] {
      border-color: #b91c1c !important;
      box-shadow: 0 2px 8px rgba(185,28,28,0.4) !important;
      animation: entrainementTalentCombatPulse 2s ease-in-out infinite !important;
  }
  
  @keyframes entrainementTalentCombatPulse {
      0%, 100% { 
          box-shadow: 0 2px 8px rgba(185,28,28,0.4);
          border-color: #b91c1c;
      }
      50% { 
          box-shadow: 0 4px 12px rgba(239,68,68,0.6);
          border-color: #ef4444;
      }
  }
  
  .sheet-entrainement-card[data-type="magie"] {
      border-color: #7c3aed !important;
      box-shadow: 0 2px 8px rgba(124,58,237,0.4) !important;
      animation: entrainementTalentMagiePulse 3s ease-in-out infinite !important;
  }
  
  @keyframes entrainementTalentMagiePulse {
      0%, 100% { 
          box-shadow: 0 2px 8px rgba(124,58,237,0.4);
          border-color: #7c3aed;
      }
      50% { 
          box-shadow: 0 4px 12px rgba(147,51,234,0.6);
          border-color: #9333ea;
      }
  }
  
  /* === PROTECTION ET ISOLATION === */
  input[type="hidden"] {
      display: none !important;
  }
  
  /* Réinitialisation spécifique aux éléments d'entrainement */
  .sheet-entrainement-card *,
  .sheet-subdetails *,
  .sheet-talent-block * {
      box-sizing: border-box !important;
  }
  
  /* Amélioration de l'accessibilité */
  .sheet-entrainement-card:focus-within,
  .sheet-subdetails:focus-within,
  .sheet-talent-block:focus-within {
      outline: 2px solid var(--entrainement-accent) !important;
      outline-offset: 2px !important;
  }
  
  /* Scrollbar customization pour les zones de texte */
  .sheet-effet-zone::-webkit-scrollbar {
      width: 8px !important;
  }
  
  .sheet-effet-zone::-webkit-scrollbar-track {
      background: rgba(139,105,20,0.1) !important;
      border-radius: 4px !important;
  }
  
  .sheet-effet-zone::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, var(--entrainement-bronze), var(--entrainement-primary)) !important;
      border-radius: 4px !important;
  }
  
  .sheet-effet-zone::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, var(--entrainement-accent), var(--entrainement-highlight)) !important;
  }
  
  
  
  
  
  
  
  
  
  
  
  /* =================== CSS ROLL TEMPLATE ENTRAINEMENT ADAPTÉ ======================= */
  
  /* === TEMPLATE JET D'ENTRAINEMENT ADAPTÉ === */
  .sheet-rolltemplate-jet_entrainement {
      background: linear-gradient(145deg, #3d2914, #2c1e0f, #3d2914);
      border: 3px solid #8b6914;
      border-radius: 12px;
      box-shadow: 
          0 0 0 2px #654321,
          0 6px 16px rgba(0,0,0,0.8),
          inset 0 1px 0 rgba(139,105,20,0.4);
      margin: 8px auto;
      overflow: hidden;
      font-family: 'Georgia', serif;
      max-width: 420px;
      color: #f4e6b7;
      text-align: center;
      position: relative;
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-template-container {
      background: linear-gradient(135deg, rgba(244,230,183,0.15), rgba(230,214,144,0.1));
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-template-header {
      background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
      color: #f4e6b7;
      padding: 12px 16px;
      text-align: center;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-template-title {
      font-size: 16px;
      margin: 0;
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-character {
      background: linear-gradient(135deg, rgba(139,69,19,0.3), rgba(101,67,33,0.2), rgba(74,55,40,0.3));
      border: 2px solid #8b4513;
      border-radius: 12px;
      padding: 4px 10px;
      margin-top: 8px;
      font-size: 11px;
      font-weight: bold;
      display: inline-block;
      color: #daa520;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      box-shadow: 0 3px 6px rgba(0,0,0,0.4);
  }
  
  /* === CONTENU PRINCIPAL === */
  .sheet-rolltemplate-jet_entrainement .sheet-template-content {
      padding: 16px;
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-info-section {
      background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
      border: 2px solid #8b4513;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 12px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-info-section:last-child {
      margin-bottom: 0;
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-info-section:hover {
      background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
      border-color: #a0522d;
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(160,82,45,0.4);
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-info-item {
      margin: 4px 0;
      font-size: 13px;
      color: #f4e6b7;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-info-item strong {
      color: #f5e6c8 !important;
      font-weight: bold;
      font-size: 14px;
      text-shadow: 2px 2px 3px rgba(0,0,0,0.9) !important;
  }
  
  /* === RÉSULTAT DU JET PRINCIPAL ADAPTÉ === */
  .sheet-rolltemplate-jet_entrainement .sheet-jet-result {
      background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
      border: 2px solid #8b4513;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 12px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      text-align: center;
      font-weight: bold;
      color: #f4e6b7;
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-jet-result:hover {
      background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
      border-color: #a0522d;
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(160,82,45,0.4);
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-jet-name {
      color: #f5e6c8 !important;
      font-weight: bold;
      font-size: 14px;
      text-align: center;
      margin-bottom: 8px;
      text-shadow: 2px 2px 3px rgba(0,0,0,0.9) !important;
      background: rgba(139,69,19,0.2);
      padding: 4px 8px;
      border-radius: 4px;
      border: 1px solid rgba(245,230,200,0.3);
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll {
      background: linear-gradient(145deg, #b8860b, #8b6914, #6b4f10);
      border: 2px solid #654321;
      border-radius: 6px;
      padding: 6px 12px;
      text-align: center;
      font-size: 16px;
      font-weight: bold;
      color: #f4e6b7;
      text-shadow: 
          1px 1px 2px rgba(0,0,0,0.8),
          0 0 8px rgba(184,134,11,0.4);
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.3),
          0 2px 6px rgba(0,0,0,0.5),
          0 0 8px rgba(139,105,20,0.5);
      min-height: 28px;
      max-width: 120px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll:hover {
      background: linear-gradient(145deg, #cd853f, #b8860b, #8b6914);
      transform: scale(1.02);
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.3),
          0 3px 8px rgba(0,0,0,0.6),
          0 0 12px rgba(205,133,63,0.6);
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, 
          transparent, 
          rgba(244,230,183,0.5), 
          transparent);
      transition: left 0.6s ease;
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll:hover::before {
      left: 100%;
  }
  
  /* === SECTION DÉS CONSEILLÉS ADAPTÉE === */
  .sheet-rolltemplate-jet_entrainement .sheet-des-conseilles {
      background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
      border: 2px solid #8b4513;
      border-radius: 8px;
      padding: 12px;
      text-align: center;
      transition: all 0.3s ease;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-des-conseilles:hover {
      background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
      border-color: #a0522d;
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(160,82,45,0.4);
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-des-header {
      color: #f5e6c8 !important;
      font-weight: bold;
      font-size: 14px;
      text-align: center;
      margin-bottom: 8px;
      text-shadow: 2px 2px 3px rgba(0,0,0,0.9) !important;
      background: rgba(139,69,19,0.2);
      padding: 4px 8px;
      border-radius: 4px;
      border: 1px solid rgba(245,230,200,0.3);
      text-transform: uppercase;
      letter-spacing: 0.5px;
  }
  
  .sheet-rolltemplate-jet_entrainement .sheet-des-result {
      font-size: 16px;
      font-weight: bold;
      color: #f4e6b7;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  /* === OVERRIDE DES STYLES ROLL20 POUR ENTRAINEMENT === */
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll span.inlinerollresult,
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll .inlinerollresult,
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll .a,
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll .fa,
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll .fc,
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll .fb,
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll .fd,
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll .didroll,
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll .computedarr,
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll .computed,
  .sheet-rolltemplate-jet_entrainement .sheet-jet-roll * {
      background: transparent !important;
      border: none !important;
      color: #f4e6b7 !important;
      font-weight: bold !important;
      font-size: 16px !important;
      text-shadow: 
          1px 1px 2px rgba(0,0,0,0.8),
          0 0 8px rgba(184,134,11,0.4) !important;
      padding: 0 !important;
      margin: 0 !important;
      border-radius: 0 !important;
      box-shadow: none !important;
  }
  
  
  
  
  
  /* === TEMPLATE GAIN PA ADAPTÉ === */
  .sheet-rolltemplate-gain_pa {
      background: linear-gradient(145deg, #3d2914, #2c1e0f, #3d2914);
      border: 3px solid #8b6914;
      border-radius: 12px;
      box-shadow: 
          0 0 0 2px #654321,
          0 6px 16px rgba(0,0,0,0.8),
          inset 0 1px 0 rgba(139,105,20,0.4);
      margin: 8px auto;
      overflow: hidden;
      font-family: 'Georgia', serif;
      max-width: 400px;
      color: #f4e6b7;
      text-align: center;
      position: relative;
  }
  
  .sheet-rolltemplate-gain_pa .sheet-template-container {
      background: linear-gradient(135deg, rgba(244,230,183,0.15), rgba(230,214,144,0.1));
  }
  
  .sheet-rolltemplate-gain_pa .sheet-template-header {
      background: linear-gradient(90deg, #228b22, #1a691a, #228b22);
      color: #f4e6b7;
      padding: 12px 16px;
      text-align: center;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .sheet-rolltemplate-gain_pa .sheet-template-title {
      font-size: 16px;
      margin: 0;
  }
  
  .sheet-rolltemplate-gain_pa .sheet-template-content {
      padding: 16px;
  }
  
  .sheet-rolltemplate-gain_pa .sheet-gain-result {
      background: linear-gradient(145deg, #b8860b, #8b6914, #6b4f10);
      border: 2px solid #654321;
      border-radius: 6px;
      padding: 12px 20px;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      color: #f4e6b7;
      text-shadow: 
          1px 1px 2px rgba(0,0,0,0.8),
          0 0 8px rgba(184,134,11,0.4);
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.3),
          0 2px 6px rgba(0,0,0,0.5),
          0 0 8px rgba(139,105,20,0.5);
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
  }
  
  .sheet-rolltemplate-gain_pa .sheet-gain-result:hover {
      background: linear-gradient(145deg, #cd853f, #b8860b, #8b6914);
      transform: scale(1.02);
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.3),
          0 3px 8px rgba(0,0,0,0.6),
          0 0 12px rgba(205,133,63,0.6);
  }
  
  .sheet-rolltemplate-gain_pa .sheet-gain-result::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, 
          transparent, 
          rgba(244,230,183,0.5), 
          transparent);
      transition: left 0.6s ease;
  }
  
  .sheet-rolltemplate-gain_pa .sheet-gain-result:hover::before {
      left: 100%;
  }
  
  .sheet-rolltemplate-gain_pa .sheet-gain-roll {
      font-size: 24px;
      font-weight: 900;
      color: #f4e6b7;
  }
  
  /* === OVERRIDE DES STYLES ROLL20 POUR GAIN PA === */
  .sheet-rolltemplate-gain_pa .sheet-gain-result span.inlinerollresult,
  .sheet-rolltemplate-gain_pa .sheet-gain-result .inlinerollresult,
  .sheet-rolltemplate-gain_pa .sheet-gain-result .a,
  .sheet-rolltemplate-gain_pa .sheet-gain-result .fa,
  .sheet-rolltemplate-gain_pa .sheet-gain-result .fc,
  .sheet-rolltemplate-gain_pa .sheet-gain-result .fb,
  .sheet-rolltemplate-gain_pa .sheet-gain-result .fd,
  .sheet-rolltemplate-gain_pa .sheet-gain-result .didroll,
  .sheet-rolltemplate-gain_pa .sheet-gain-result .computedarr,
  .sheet-rolltemplate-gain_pa .sheet-gain-result .computed,
  .sheet-rolltemplate-gain_pa .sheet-gain-result * {
      background: transparent !important;
      border: none !important;
      color: #f4e6b7 !important;
      font-weight: bold !important;
      font-size: 20px !important;
      text-shadow: 
          1px 1px 2px rgba(0,0,0,0.8),
          0 0 8px rgba(184,134,11,0.4) !important;
      padding: 0 !important;
      margin: 0 !important;
      border-radius: 0 !important;
      box-shadow: none !important;
  }
  
  /* === RESPONSIVE DESIGN === */
  @media (max-width: 768px) {
      .sheet-rolltemplate-jet_entrainement,
      .sheet-rolltemplate-gain_pa {
          max-width: 100%;
          margin: 4px auto;
      }
      
      .sheet-rolltemplate-jet_entrainement .sheet-template-content,
      .sheet-rolltemplate-gain_pa .sheet-template-content {
          padding: 12px;
      }
      
      .sheet-rolltemplate-jet_entrainement .sheet-jet-roll,
      .sheet-rolltemplate-gain_pa .sheet-gain-result {
          font-size: 14px;
          padding: 5px 10px;
          min-height: 24px;
          max-width: 100px;
      }
      
      .sheet-rolltemplate-gain_pa .sheet-gain-roll {
          font-size: 18px;
      }
  }
  
  @media (max-width: 480px) {
      .sheet-rolltemplate-jet_entrainement .sheet-jet-roll,
      .sheet-rolltemplate-gain_pa .sheet-gain-result {
          font-size: 12px;
          padding: 4px 8px;
          min-height: 20px;
          max-width: 80px;
      }
      
      .sheet-rolltemplate-jet_entrainement .sheet-template-header,
      .sheet-rolltemplate-gain_pa .sheet-template-header {
          padding: 8px 12px;
      }
      
      .sheet-rolltemplate-jet_entrainement .sheet-template-title,
      .sheet-rolltemplate-gain_pa .sheet-template-title {
          font-size: 14px;
      }
      
      .sheet-rolltemplate-gain_pa .sheet-gain-roll {
          font-size: 16px;
      }
  }
  
  /* === ÉTATS HOVER GLOBAL === */
  .sheet-rolltemplate-jet_entrainement:hover,
  .sheet-rolltemplate-gain_pa:hover {
      border-color: #b8860b;
      box-shadow: 
          0 0 0 2px #8b6914,
          0 8px 20px rgba(139,105,20,0.6),
          inset 0 1px 0 rgba(184,134,11,0.5);
      transform: translateY(-2px);
  }
  
  /* === TRANSITIONS GLOBALES === */
  .sheet-rolltemplate-jet_entrainement,
  .sheet-rolltemplate-gain_pa,
  .sheet-rolltemplate-jet_entrainement .sheet-jet-result,
  .sheet-rolltemplate-jet_entrainement .sheet-des-conseilles,
  .sheet-rolltemplate-gain_pa .sheet-gain-result {
      transition: all 0.3s ease;
  }
  
  /* === NETTOYAGE ET FINALISATION === */
  .sheet-rolltemplate-jet_entrainement input[type="hidden"],
  .sheet-rolltemplate-gain_pa input[type="hidden"] {
      display: none !important;
  }
  
  /* =================== FINALISATION ISOLATION PARFAITE =================== */
  
  /* Correction finale pour tous les titres dans la div charsheet - TAILLE RÉDUITE */
  .charsheet h1 {
      text-align: center !important;
      color: #f4e6b7 !important;
      font-size: clamp(14px, 1.4vw, 20px) !important;
      margin: 12px 0 10px 0 !important;
      padding: 10px 14px !important;
      background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914) !important;
      background-size: 200% 200% !important;
      animation: entrainement-headerShift 6s ease infinite !important;
      border: 2px solid #b8860b !important;
      border-radius: 10px !important;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.8) !important;
      letter-spacing: 2px !important;
      text-transform: uppercase !important;
      font-weight: bold !important;
      box-shadow: 
          0 0 0 1px #654321,
          0 6px 12px rgba(0,0,0,0.6),
          inset 0 1px 0 rgba(139,105,20,0.4) !important;
      position: relative !important;
      overflow: hidden !important;
      font-family: 'Georgia', serif !important;
  }
  
  .charsheet h2 {
      color: #cd853f !important;
      font-size: clamp(12px, 1.2vw, 18px) !important;
      margin: 10px 0 8px 0 !important;
      padding: 8px 12px !important;
      background: linear-gradient(135deg, rgba(139,105,20,0.3), rgba(107,79,16,0.2)) !important;
      border: 2px solid #cd853f !important;
      border-radius: 8px !important;
      text-shadow: 1px 1px 2px #2c1e0f !important;
      text-transform: uppercase !important;
      letter-spacing: 1px !important;
      font-weight: bold !important;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3) !important;
      font-family: 'Georgia', serif !important;
      text-align: center !important;
  }
  
  /* =================== FINALISATION CSS COMPLÈTE =================== */
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ========== ANIMATIONS KEYFRAMES ========== */
  @keyframes sheet-pa-glow {
    0%, 100% { 
      box-shadow: 0 0 5px rgba(255, 193, 7, 0.3), 0 0 10px rgba(255, 193, 7, 0.2); 
    }
    50% { 
      box-shadow: 0 0 10px rgba(255, 193, 7, 0.6), 0 0 20px rgba(255, 193, 7, 0.3); 
    }
  }
  
  @keyframes sheet-fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* ========== STYLES TABLEAU IDENTITÉ ========== */
  .sheet-id-table {
    width: 100%;
    border-collapse: collapse;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
    animation: sheet-fadeInUp 0.6s ease-out;
  }
  
  .sheet-id-table th {
    background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
    color: white;
    padding: 12px 8px;
    text-align: center;
    font-weight: bold;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  }
  
  .sheet-id-table td {
    padding: 10px 8px;
    text-align: center;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    background: rgba(248, 249, 250, 0.8);
  }
  
  .sheet-id-table input {
    width: 100%;
    padding: 8px;
    border: 2px solid #ddd;
    border-radius: 4px;
    text-align: center;
    font-size: 14px;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.9);
  }
  
  .sheet-id-table input:hover {
    transform: scale(1.02);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  .sheet-id-table input:focus {
    outline: none;
    transform: scale(1.05);
  }
  
  /* ========== STYLES POINTS D'ACTION ========== */
  .sheet-pa-input {
    background: linear-gradient(135deg, #ffc107 0%, #ffb300 100%) !important;
    border: 2px solid #ff8f00 !important;
    color: #000 !important;
    font-weight: bold !important;
    text-shadow: 0 1px 1px rgba(255, 255, 255, 0.5) !important;
    animation: sheet-pa-glow 3.2s ease-in-out infinite;
  }
  
  .sheet-pa-input:focus {
    box-shadow: 0 0 8px rgba(255, 193, 7, 0.6) !important;
    border-color: #ff6f00 !important;
  }
  
  .sheet-pa-input:hover {
    background: linear-gradient(135deg, #ffca28 0%, #ffc107 100%) !important;
    transform: scale(1.05);
  }
  
  /* ========== STYLES AVANTAGE/DÉSAVANTAGE INPUTS ========== */
  .sheet-avantage-input {
    background: linear-gradient(135deg, rgba(40, 167, 69, 0.1), rgba(255, 255, 255, 0.9)) !important;
    border: 2px solid #28a745 !important;
  }
  
  .sheet-avantage-input:focus {
    box-shadow: 0 0 8px rgba(40, 167, 69, 0.5) !important;
    border-color: #1e7e34 !important;
  }
  
  .sheet-desavantage-input {
    background: linear-gradient(135deg, rgba(220, 53, 69, 0.1), rgba(255, 255, 255, 0.9)) !important;
    border: 2px solid #dc3545 !important;
  }
  
  .sheet-desavantage-input:focus {
    box-shadow: 0 0 8px rgba(220, 53, 69, 0.5) !important;
    border-color: #c82333 !important;
  }
  
  /* ========== SECTION RAPPEL PRINCIPALE (DETAILS/SUMMARY) ========== */
  .sheet-rappel-wrapper {
    margin: 20px 0;
    border: 2px solid #6c757d;
    border-radius: 10px;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    animation: sheet-fadeInUp 0.6s ease-out;
  }
  
  .sheet-rappel-title {
    background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
    color: white;
    padding: 15px 20px;
    font-size: 18px;
    font-weight: bold;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    cursor: pointer;
    user-select: none;
    transition: all 0.3s ease;
    list-style: none;
    outline: none;
  }
  
  .sheet-rappel-title:hover {
    background: linear-gradient(135deg, #5a6268 0%, #343a40 100%);
  }
  
  .sheet-rappel-title::-webkit-details-marker {
    display: none;
  }
  
  .sheet-rappel-title::before {
    content: "▶";
    margin-right: 10px;
    transition: transform 0.3s ease;
    display: inline-block;
  }
  
  .sheet-rappel-wrapper[open] .sheet-rappel-title::before {
    transform: rotate(90deg);
  }
  
  .sheet-rappel-container {
    padding: 20px;
    background: rgba(255, 255, 255, 0.5);
  }
  
  /* ========== SOUS-SECTIONS AVANTAGES/DÉSAVANTAGES ========== */
  .sheet-advantage-wrapper, .sheet-disadvantage-wrapper {
    margin-bottom: 15px;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  }
  
  .sheet-advantage-title {
    background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
    color: white;
    padding: 12px 15px;
    font-size: 16px;
    font-weight: bold;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    cursor: pointer;
    user-select: none;
    transition: all 0.3s ease;
    list-style: none;
    outline: none;
    margin: 0;
  }
  
  .sheet-advantage-title:hover {
    background: linear-gradient(135deg, #1e7e34 0%, #155724 100%);
  }
  
  .sheet-advantage-title::-webkit-details-marker {
    display: none;
  }
  
  .sheet-advantage-title::before {
    content: "▶";
    margin-right: 8px;
    transition: transform 0.3s ease;
    display: inline-block;
    font-size: 12px;
  }
  
  .sheet-advantage-wrapper[open] .sheet-advantage-title::before {
    transform: rotate(90deg);
  }
  
  .sheet-disadvantage-title {
    background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
    color: white;
    padding: 12px 15px;
    font-size: 16px;
    font-weight: bold;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    cursor: pointer;
    user-select: none;
    transition: all 0.3s ease;
    list-style: none;
    outline: none;
    margin: 0;
  }
  
  .sheet-disadvantage-title:hover {
    background: linear-gradient(135deg, #c82333 0%, #a71e2a 100%);
  }
  
  .sheet-disadvantage-title::-webkit-details-marker {
    display: none;
  }
  
  .sheet-disadvantage-title::before {
    content: "▶";
    margin-right: 8px;
    transition: transform 0.3s ease;
    display: inline-block;
    font-size: 12px;
  }
  
  .sheet-disadvantage-wrapper[open] .sheet-disadvantage-title::before {
    transform: rotate(90deg);
  }
  
  .sheet-advantage-content, .sheet-disadvantage-content {
    padding: 15px;
    background: rgba(255, 255, 255, 0.8);
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  /* ========== CONTENU TEXTE ET LISTES ========== */
  .sheet-rule-description {
    font-size: 14px;
    line-height: 1.6;
  }
  
  .sheet-rule-description p {
    margin: 0 0 12px 0;
    color: #495057;
  }
  
  .sheet-effect-list, .sheet-cause-list {
    margin: 10px 0;
    padding-left: 20px;
  }
  
  .sheet-effect-list li, .sheet-cause-list li {
    margin: 8px 0;
    color: #495057;
    line-height: 1.5;
  }
  
  .sheet-effect-highlight {
    background: linear-gradient(120deg, #ffeaa7 0%, #fdcb6e 100%);
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: bold;
    color: #2d3436;
    border: 1px solid #fdcb6e;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }
  
  .sheet-cause-highlight {
    background: linear-gradient(120deg, #fab1a0 0%, #e17055 100%);
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: bold;
    color: white;
    border: 1px solid #e17055;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }
  
  /* ========== BOUTON RESET ========== */
  .sheet-rappel-actions {
    text-align: center;
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid #dee2e6;
  }
  
  .sheet-reset-btn {
    background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    font-weight: bold;
    transition: all 0.3s ease;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  .sheet-reset-btn:hover {
    background: linear-gradient(135deg, #5a6268 0%, #343a40 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }
  
  .sheet-reset-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  /* ========== RESPONSIVE DESIGN ========== */
  @media (max-width: 768px) {
    .sheet-rappel-title {
      padding: 12px 15px;
      font-size: 16px;
    }
    
    .sheet-advantage-title, .sheet-disadvantage-title {
      padding: 10px 12px;
      font-size: 14px;
    }
    
    .sheet-rappel-container, .sheet-advantage-content, .sheet-disadvantage-content {
      padding: 12px;
    }
    
    .sheet-rule-description {
      font-size: 13px;
    }
    
    .sheet-id-table input {
      padding: 6px;
      font-size: 13px;
    }
    
    .sheet-reset-btn {
      padding: 8px 16px;
      font-size: 13px;
    }
  }
  
  /* ========== ACCESSIBILITÉ ========== */
  .sheet-rappel-title:focus,
  .sheet-advantage-title:focus,
  .sheet-disadvantage-title:focus {
    outline: 2px solid #007bff;
    outline-offset: 2px;
  }
  
  /* ========== CORRECTIONS ROLL20 SPÉCIFIQUES ========== */
  .sheet-carac-block {
    width: 100%;
    max-width: none;
  }
  
  .section-wrapper {
    width: 100%;
    margin: 0;
    padding: 0;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ========== STYLES POUR MODIFICATEURS AUTOMATIQUES ========== */
  
  .sheet-mod-readonly {
    background: linear-gradient(135deg, #e9ecef 0%, #f8f9fa 100%) !important;
    border: 2px solid #6c757d !important;
    color: #495057 !important;
    font-weight: bold !important;
    text-align: center !important;
    cursor: not-allowed !important;
    font-size: 14px !important;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.1) !important;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1) !important;
  }
  
  .sheet-mod-readonly:hover {
    background: linear-gradient(135deg, #dee2e6 0%, #e9ecef 100%) !important;
    transform: none !important; /* Pas d'effet hover pour readonly */
  }
  
  .sheet-mod-readonly:focus {
    outline: none !important;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1), 0 0 0 2px rgba(108, 117, 125, 0.25) !important;
  }
  
  /* ========== ANIMATION POUR CHANGEMENT DE VALEUR ========== */
  @keyframes sheet-mod-update {
    0% { 
      background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
      transform: scale(1.05);
    }
    50% { 
      background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);
    }
    100% { 
      background: linear-gradient(135deg, #e9ecef 0%, #f8f9fa 100%);
      transform: scale(1);
    }
  }
  
  /* Classe pour déclencher l'animation (via JavaScript si nécessaire) */
  .sheet-mod-readonly.sheet-updating {
    animation: sheet-mod-update 0.6s ease-out;
  }
  
  /* ========== STYLES POUR MODIFICATEURS POSITIFS/NÉGATIFS ========== */
  
  /* Valeurs positives en vert */
  .sheet-mod-readonly[value*="+"],
  .sheet-mod-readonly[value^="1"],
  .sheet-mod-readonly[value^="2"],
  .sheet-mod-readonly[value^="3"],
  .sheet-mod-readonly[value^="4"],
  .sheet-mod-readonly[value^="5"],
  .sheet-mod-readonly[value^="6"],
  .sheet-mod-readonly[value^="7"],
  .sheet-mod-readonly[value^="8"],
  .sheet-mod-readonly[value^="9"] {
    background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%) !important;
    border-color: #28a745 !important;
    color: #155724 !important;
  }
  
  /* Valeurs négatives en rouge */
  .sheet-mod-readonly[value*="-"] {
    background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%) !important;
    border-color: #dc3545 !important;
    color: #721c24 !important;
  }
  
  /* Valeur zéro en gris neutre */
  .sheet-mod-readonly[value="0"] {
    background: linear-gradient(135deg, #e2e3e5 0%, #d6d8db 100%) !important;
    border-color: #6c757d !important;
    color: #495057 !important;
  }
  
  /* ========== STYLES POINTS DE RÉACTION ========== */
  
  .sheet-pr-container {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .sheet-pr-max-input {
    background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%) !important;
    border: 2px solid #ffc107 !important;
    color: #856404 !important;
    font-weight: bold !important;
    text-align: center !important;
    width: 60px !important;
    padding: 4px !important;
  }
  
  .sheet-pr-display-input {
    background: linear-gradient(135deg, #e9ecef 0%, #f8f9fa 100%) !important;
    border: 2px solid #6c757d !important;
    color: #495057 !important;
    font-weight: bold !important;
    text-align: center !important;
    cursor: not-allowed !important;
    width: 70px !important;
    padding: 4px !important;
  }
  
  .sheet-pr-btn-container {
    display: flex;
    justify-content: center;
  }
  
  .sheet-pr-btn {
    border: none;
    border-radius: 4px;
    padding: 6px 12px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 12px;
    min-width: 40px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  .sheet-pr-btn-plus {
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
    color: white;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  }
  
  .sheet-pr-btn-plus:hover {
    background: linear-gradient(135deg, #218838 0%, #1abc9c 100%);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }
  
  .sheet-pr-btn-minus {
    background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);
    color: white;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  }
  
  .sheet-pr-btn-minus:hover {
    background: linear-gradient(135deg, #c82333 0%, #e55100 100%);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }
  
  .sheet-pr-btn-reset {
    background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
    color: white;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  }
  
  .sheet-pr-btn-reset:hover {
    background: linear-gradient(135deg, #5a6268 0%, #343a40 100%);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }
  
  .sheet-pr-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  /* ========== TOOLTIP POUR DEBUG (OPTIONNEL) ========== */
  
  .sheet-mod-readonly::after {
    content: attr(title);
    position: absolute;
    background: #333;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 1000;
    top: -30px;
    left: 50%;
    transform: translateX(-50%);
  }
  
  .sheet-mod-readonly:hover::after {
    opacity: 1;
    visibility: visible;
  }
  
  /* ========== RESPONSIVE ========== */
  
  @media (max-width: 768px) {
    .sheet-mod-readonly {
      font-size: 12px !important;
      padding: 2px !important;
    }
    
    .sheet-pr-btn {
      padding: 4px 8px;
      font-size: 10px;
      min-width: 30px;
    }
    
    .sheet-pr-max-input, .sheet-pr-display-input {
      width: 50px !important;
      font-size: 12px !important;
    }
  }
  
  /* ========== ANIMATION AU FOCUS (POUR FEEDBACK VISUEL) ========== */
  
  .sheet-carac-table input:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
    transition: box-shadow 0.3s ease;
  }
  
  /* ========== STYLE SPÉCIAL POUR BOUTON TEST (DÉVELOPPEMENT) ========== */
  
  .sheet-test-btn {
    background: linear-gradient(135deg, #17a2b8 0%, #6f42c1 100%);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    font-weight: bold;
    cursor: pointer;
    margin: 10px;
    transition: all 0.3s ease;
  }
  
  .sheet-test-btn:hover {
    background: linear-gradient(135deg, #138496 0%, #563d7c 100%);
    transform: scale(1.05);
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* CSS pour la section traits dépliable (si nécessaire) */
  .sheet-traits-wrapper {
    border: 1px solid #8b4513;
    border-radius: 8px;
    margin: 12px 0;
    background: linear-gradient(135deg, #f9f5f0, #f4e4bc);
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }
  
  .sheet-traits-wrapper[open] {
    border-color: #d4af37;
    background: linear-gradient(135deg, #fffaf2, #f4e4bc);
  }
  
  /* Assure-toi que le tableau reste bien stylé */
  .sheet-traits-wrapper .sheet-traits-table {
    margin: 0;
    border-radius: 0 0 7px 7px;
  }
  
  /* Animation à l'ouverture */
  .sheet-traits-wrapper[open] .sheet-traits-table {
    animation: slideDown 0.3s ease-out;
  }
  
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* =============================================
     CSS SYSTÈME MONÉTAIRE AMÉLIORÉ - STYLE FANTASY
     ============================================= */
  
  /* === ISOLATION COMPLÈTE - N'AFFECTE QUE LE SYSTÈME MONÉTAIRE === */
  
  /* === SECTION TITLE THÈME FANTASY === */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-section-title {
    color: #f4e6b7;
    background: linear-gradient(145deg, rgba(139,69,19,0.3), rgba(101,67,33,0.2));
    border: 2px solid #8b4513;
    border-radius: 10px;
    padding: 12px 20px;
    margin: 8px 0;
    font-size: 1.2em;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
    font-family: 'Georgia', serif;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
    box-shadow: 
      0 2px 8px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(139,105,20,0.2);
    list-style: none;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-section-title:hover {
    background: linear-gradient(145deg, rgba(139,69,19,0.4), rgba(101,67,33,0.3));
    border-color: #cd853f;
    transform: translateY(-2px);
    box-shadow: 
      0 4px 12px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(139,105,20,0.3);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-section-title::-webkit-details-marker {
    display: none;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-section-title::before {
    content: "▶ ";
    transition: transform 0.3s ease;
    display: inline-block;
    margin-right: 10px;
  }
  
  .sheet-currency-section[open]:not([class*="rolltemplate"]) .sheet-section-title::before {
    transform: rotate(90deg);
  }
  
  .sheet-currency-section[open]:not([class*="rolltemplate"]),
  .sheet-transaction-history[open]:not([class*="rolltemplate"]) {
    background: linear-gradient(145deg, #1a0f0a, #2c1810, #1a0f0a);
    border-color: #cd853f;
    box-shadow: 
      0 0 0 1px #8b6914,
      0 6px 20px rgba(205,133,63,0.4),
      inset 0 1px 0 rgba(139,105,20,0.4);
  }
  
  /* === SECTION PRINCIPALE SYSTÈME MONÉTAIRE === */
  .sheet-currency-section:not([class*="rolltemplate"]),
  .sheet-transaction-history:not([class*="rolltemplate"]) {
    font-family: 'Georgia', serif;
    background: linear-gradient(145deg, #2c1e0f, #3d2914, #2c1e0f);
    border: 2px solid #8b6914;
    border-radius: 12px;
    margin: 8px 0;
    box-shadow: 
      0 0 0 1px #654321,
      0 4px 12px rgba(0,0,0,0.6),
      inset 0 1px 0 rgba(139,105,20,0.3);
    overflow: hidden;
    transition: all 0.4s ease;
  }
  
  .sheet-currency-section[open]:not([class*="rolltemplate"]),
  .sheet-transaction-history[open]:not([class*="rolltemplate"]) {
    background: linear-gradient(145deg, #1a0f0a, #2c1810, #1a0f0a);
    border-color: #cd853f;
    box-shadow: 
      0 0 0 1px #8b6914,
      0 6px 20px rgba(205,133,63,0.4),
      inset 0 1px 0 rgba(139,105,20,0.4);
  }
  
  /* === 1) DISPOSITION HORIZONTALE : RICHESSE + NIVEAU + TAUX DE CHANGE === */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-currency-summary {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 10px;
    padding: 20px;
    margin: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    transition: all 0.4s ease;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-currency-summary:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
    transform: translateY(-2px);
    box-shadow: 
      0 6px 16px rgba(0,0,0,0.4),
      0 0 12px rgba(139,105,20,0.3);
    border-color: #cd853f;
  }
  
  /* LIGNE PRINCIPALE UNIFIÉE */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-display {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 30px;
    align-items: center;
    justify-items: center;
    padding: 15px;
    background: linear-gradient(145deg, rgba(44,30,15,0.8), rgba(61,41,20,0.6));
    border: 1px solid #8b4513;
    border-radius: 10px;
    box-shadow: 
      inset 0 1px 0 rgba(139,105,20,0.2),
      0 2px 6px rgba(0,0,0,0.4);
  }
  
  /* RICHESSE TOTALE - GAUCHE */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    min-width: 200px;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-item label {
    color: #f4e6b7;
    font-weight: bold;
    font-size: 1.2em;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    text-align: center;
    font-family: 'Georgia', serif;
    margin-bottom: 8px;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-total-wealth {
    background: linear-gradient(145deg, #cd853f, #8b6914, #b8860b);
    color: #2c1e0f;
    padding: 15px 30px;
    border-radius: 10px;
    font-weight: bold;
    font-size: 1.6em;
    text-shadow: 1px 1px 2px rgba(244,230,183,0.6);
    box-shadow: 
      0 4px 8px rgba(0,0,0,0.5),
      inset 0 1px 0 rgba(255,255,255,0.3),
      0 0 0 1px #654321;
    min-width: 150px;
    text-align: center;
    transition: all 0.3s ease;
    border: 1px solid #ffed4e;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-total-wealth:hover {
    transform: translateY(-2px);
    box-shadow: 
      0 6px 12px rgba(0,0,0,0.6),
      inset 0 1px 0 rgba(255,255,255,0.4),
      0 0 8px rgba(139,105,20,0.5);
  }
  
  /* TAUX DE CHANGE - CENTRE */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-exchange-rates {
    background: linear-gradient(135deg, rgba(44,30,15,0.4), rgba(61,41,20,0.2));
    border-radius: 8px;
    padding: 15px 20px;
    border: 1px solid #8b4513;
    min-width: 300px;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-exchange-rates h4 {
    color: #f4e6b7;
    margin-bottom: 15px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    font-family: 'Georgia', serif;
    text-align: center;
    font-size: 1.1em;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-rates-grid {
    display: flex;
    justify-content: center;
    gap: 15px;
    align-items: center;
    flex-wrap: wrap;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-rate-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 15px;
    background: linear-gradient(145deg, rgba(139,69,19,0.2), rgba(101,67,33,0.1));
    border-radius: 6px;
    border: 1px solid #8b4513;
    box-shadow: inset 0 1px 0 rgba(139,105,20,0.1);
    min-width: 120px;
    justify-content: center;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-rate-item label {
    color: #f4e6b7;
    font-weight: 600;
    font-size: 0.9em;
    font-family: 'Georgia', serif;
    margin: 0;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-rate-item input {
    width: 60px;
    padding: 6px 8px;
    border: 1px solid #8b4513;
    border-radius: 4px;
    background: linear-gradient(145deg, #fffaf2, #f4e6b7);
    text-align: center;
    font-weight: bold;
    font-family: 'Georgia', serif;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
    font-size: 0.9em;
  }
  
  /* 3) ÉLARGIR LA CASE PC POUR LES TAUX DE CHANGE */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-pc-rate-input {
    width: 80px !important; /* PLUS LARGE POUR PC */
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-rate-item span {
    color: #cd853f;
    font-weight: bold;
    font-size: 0.9em;
    font-family: 'Georgia', serif;
  }
  
  /* NIVEAU DE RICHESSE - DROITE */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-level {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    min-width: 200px;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-level label {
    color: #f4e6b7;
    font-weight: bold;
    font-size: 1.2em;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    text-align: center;
    font-family: 'Georgia', serif;
    margin-bottom: 8px;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-status {
    padding: 12px 20px;
    border-radius: 8px;
    font-weight: bold;
    font-size: 1.2em;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
    border: 2px solid;
    min-width: 120px;
    text-align: center;
    transition: all 0.3s ease;
    background: linear-gradient(145deg, rgba(44,30,15,0.6), rgba(61,41,20,0.4));
    box-shadow: inset 0 1px 0 rgba(139,105,20,0.2);
    color: #f4e6b7 !important;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-status:hover {
    transform: translateY(-1px);
    box-shadow: 
      0 4px 8px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(139,105,20,0.3);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-status.poor {
    border-color: #8b6914;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-status.modest {
    border-color: #b8860b;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-status.comfortable {
    border-color: #cd853f;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-status.wealthy {
    border-color: #daa520;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-status.rich {
    border-color: #ffd700;
  }
  
  /* === TABLEAU PRINCIPAL STYLE FANTASY === */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-currency-main {
    margin: 20px 16px;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-currency-table {
    width: 100%;
    border-collapse: collapse;
    background: linear-gradient(145deg, #fffaf2, #f4e6b7);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 
      0 4px 8px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(255,255,255,0.5);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-currency-header {
    background: linear-gradient(145deg, #8b6914, #654321, #8b4513);
    color: #f4e6b7;
    padding: 12px 8px;
    text-align: center;
    font-weight: bold;
    font-size: 0.95em;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    border-bottom: 2px solid #654321;
    font-family: 'Georgia', serif;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-currency-header.pg {
    background: linear-gradient(145deg, #4682b4, #2f5f8f, #5f9ea0);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-currency-header.pgi {
    background: linear-gradient(145deg, #483d8b, #2f2f5f, #6a5acd);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-currency-header.pc {
    background: linear-gradient(145deg, #2e8b57, #1f5f3f, #3cb371);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-currency-table td {
    padding: 12px 8px;
    text-align: center;
    border-bottom: 1px solid rgba(139,69,19,0.2);
    vertical-align: middle;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-currency-table tr:nth-child(even) {
    background: rgba(139,69,19,0.05);
  }
  
  /* === AMÉLIORATION VISUELLE DES VALEURS CALCULÉES === */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-currency-calculated {
    background: rgba(139,69,19,0.1);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-calc-label {
    display: block;
    color: #cd853f;
    font-size: 0.85em;
    font-weight: 600;
    font-family: 'Georgia', serif;
    margin-bottom: 6px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-calc-value {
    background: linear-gradient(145deg, #2c1810, #3d2914);
    color: #f4e6b7 !important;
    border: 2px solid #8b4513;
    border-radius: 8px;
    padding: 10px 15px;
    font-weight: bold;
    font-size: 1.1em;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.3),
      0 2px 6px rgba(139,105,20,0.2);
    transition: all 0.3s ease;
    font-family: 'Georgia', serif;
    min-height: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-calc-value:hover {
    border-color: #cd853f;
    transform: translateY(-1px);
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.4),
      0 4px 10px rgba(139,105,20,0.3);
  }
  
  /* === CONTRÔLES DE TRANSACTION STYLE FANTASY === */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-control {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    padding: 12px;
    background: linear-gradient(145deg, rgba(139,69,19,0.1), rgba(101,67,33,0.05));
    border-radius: 8px;
    border: 1px solid #8b4513;
    box-shadow: inset 0 1px 0 rgba(139,105,20,0.1);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-input {
    width: 100px;
    padding: 8px 12px;
    border: 2px solid #8b4513;
    border-radius: 6px;
    background: linear-gradient(145deg, #fffaf2, #f4e6b7);
    text-align: center;
    font-weight: bold;
    font-size: 0.9em;
    font-family: 'Georgia', serif;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-buttons {
    display: flex;
    gap: 8px;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-btn {
    width: 35px;
    height: 35px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1.1em;
    font-weight: bold;
    transition: all 0.3s ease;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-btn.add {
    background: linear-gradient(145deg, #2e8b57, #1f5f3f, #3cb371);
    color: white;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-btn.subtract {
    background: linear-gradient(145deg, #dc143c, #8b0000, #b91c3c);
    color: white;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.4);
  }
  
  /* === MONNAIES PERSONNALISÉES STYLE FANTASY === */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-custom-currencies {
    margin: 20px 16px;
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 10px;
    padding: 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    transition: all 0.4s ease;
    overflow: hidden;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-custom-currencies[open] {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
    border-color: #cd853f;
    box-shadow: 
      0 6px 16px rgba(0,0,0,0.4),
      0 0 12px rgba(139,105,20,0.3);
  }
  
  /* 1) HARMONISATION DES TAILLES DE TITRES */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-custom-currencies-title {
    color: #f4e6b7;
    margin: 0;
    padding: 15px 20px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    font-size: 1.1em; /* COHÉRENT AVEC TRANSACTION TITLE */
    font-weight: bold;
    cursor: pointer;
    background: linear-gradient(145deg, rgba(139,69,19,0.2), rgba(101,67,33,0.1));
    border-bottom: 1px solid #8b4513;
    transition: all 0.3s ease;
    list-style: none;
    text-align: center;
    font-family: 'Georgia', serif;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-custom-currency-block {
    padding: 16px;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-currency-name-input,
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-currency-input,
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-rate-input {
    width: 100%;
    padding: 8px 12px;
    border: 2px solid #8b4513;
    border-radius: 6px;
    background: linear-gradient(145deg, #fffaf2, #f4e6b7);
    text-align: center;
    font-weight: bold;
    font-family: 'Georgia', serif;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
    font-size: 0.9em;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-custom-rate {
    display: flex;
    align-items: center;
    gap: 8px;
    justify-content: center;
    padding: 12px 15px;
    background: linear-gradient(145deg, rgba(139,69,19,0.3), rgba(101,67,33,0.2));
    border-radius: 8px;
    border: 2px solid #8b4513;
    box-shadow: 
      inset 0 1px 0 rgba(139,105,20,0.2),
      0 2px 6px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-custom-rate:hover {
    background: linear-gradient(145deg, rgba(139,69,19,0.4), rgba(101,67,33,0.3));
    border-color: #cd853f;
    transform: translateY(-1px);
    box-shadow: 
      inset 0 1px 0 rgba(139,105,20,0.3),
      0 4px 8px rgba(0,0,0,0.4);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-custom-rate label {
    color: #f4e6b7;
    font-weight: bold;
    font-size: 0.95em;
    font-family: 'Georgia', serif;
    margin: 0;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    letter-spacing: 0.5px;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-custom-rate input {
    width: 70px;
    padding: 8px 10px;
    border: 2px solid #8b4513;
    border-radius: 6px;
    background: linear-gradient(145deg, #fffaf2, #f4e6b7);
    text-align: center;
    font-weight: bold;
    font-family: 'Georgia', serif;
    font-size: 0.95em;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-custom-rate input:focus {
    border-color: #cd853f;
    background: linear-gradient(145deg, #ffffff, #f4e6b7);
    outline: none;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.3),
      0 0 8px rgba(205,133,63,0.4);
  }
  
  /* === JOURNAL DES TRANSACTIONS RESTRUCTURÉ - LARGEURS ÉGALES === */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-journal {
    margin: 20px 16px;
    background: linear-gradient(145deg, #2c1e0f, #3d2914, #2c1e0f);
    border: 2px solid #8b6914;
    border-radius: 12px;
    padding: 0;
    box-shadow: 
      0 0 0 1px #654321,
      0 4px 12px rgba(0,0,0,0.6),
      inset 0 1px 0 rgba(139,105,20,0.3);
    overflow: hidden;
    transition: all 0.4s ease;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-journal[open] {
    background: linear-gradient(145deg, #1a0f0a, #2c1810, #1a0f0a);
    border-color: #cd853f;
    box-shadow: 
      0 0 0 1px #8b6914,
      0 8px 20px rgba(205,133,63,0.4),
      inset 0 1px 0 rgba(139,105,20,0.4);
  }
  
  /* 1) TITRE JOURNAL HARMONISÉ */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-title {
    color: #f4e6b7;
    margin: 0;
    padding: 15px 20px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
    text-align: center;
    font-size: 1.1em; /* RÉDUIT DE 1.4em À 1.1em POUR COHÉRENCE */
    font-weight: bold;
    letter-spacing: 1px;
    cursor: pointer;
    background: linear-gradient(145deg, rgba(139,69,19,0.2), rgba(101,67,33,0.1));
    border-bottom: 1px solid #8b4513;
    transition: all 0.3s ease;
    list-style: none;
    font-family: 'Georgia', serif;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-container {
    display: flex;
    justify-content: center;
    margin: 25px 0;
    padding: 0 16px;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-table-main {
    width: 100%;
    max-width: none;
    background: linear-gradient(145deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
  }
  
  /* HEADER AVEC LARGEURS ÉGALES */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-header {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
    gap: 1px;
    background: linear-gradient(145deg, #8b6914, #654321, #8b4513);
    color: #f4e6b7;
    padding: 0;
    font-weight: bold;
    font-size: 0.9em;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: 'Georgia', serif;
    align-items: stretch;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-date,
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-gamedate,
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-type,
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-amount,
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-desc {
    text-align: center;
    background: linear-gradient(145deg, rgba(139,69,19,0.4), rgba(101,67,33,0.3));
    padding: 12px 8px;
    border: none;
    color: #f4e6b7;
    font-weight: bold;
    font-family: 'Georgia', serif;
    font-size: 0.85em;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 45px;
  }
  
  /* ITEMS AVEC LARGEURS PARFAITEMENT ÉGALES */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-item {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
    gap: 1px;
    padding: 0;
    border-bottom: 2px solid rgba(139,69,19,0.3);
    color: #f4e6b7 !important;
    font-size: 0.9em;
    transition: all 0.3s ease;
    background: rgba(44,30,15,0.2);
    font-family: 'Georgia', serif;
    font-weight: 500;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
    align-items: stretch;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-item:hover {
    background: rgba(139,69,19,0.2);
    transform: translateX(3px);
    box-shadow: inset 3px 0 0 #cd853f;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-item:nth-child(even) {
    background: rgba(44,30,15,0.3);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-date {
    background: rgba(70,130,180,0.3);
    padding: 10px 8px;
    border: none;
    color: #f4e6b7 !important;
    font-weight: bold;
    font-size: 0.85em;
    text-align: center;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.9);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  /* 2) DATES DE JEUX - ARRIÈRE-PLAN ASSOMBRI */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-gamedate {
    background: linear-gradient(145deg, rgba(84,60,35,0.9), rgba(65,45,25,0.8)) !important; /* ASSOMBRI - PLUS SOMBRE QUE BLANC/BEIGE */
    border: none;
    padding: 10px 8px;
    color: #f4e6b7 !important;
    font-family: 'Georgia', serif;
    font-weight: 600;
    font-size: 0.85em;
    text-align: center;
    width: 100%;
    height: 100%;
    box-shadow: none;
    transition: all 0.3s ease;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.9);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-gamedate:focus {
    background: linear-gradient(145deg, rgba(95,70,45,0.95), rgba(75,55,35,0.9)) !important; /* ENCORE PLUS SOMBRE AU FOCUS */
    outline: none;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-gamedate::placeholder {
    color: rgba(244,230,183,0.7) !important; /* PLACEHOLDER PLUS VISIBLE */
    font-style: italic;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-type {
    padding: 10px 8px;
    font-weight: bold;
    text-align: center;
    font-size: 0.8em;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: none;
    color: #f4e6b7 !important;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(139,69,19,0.2);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-type.gain {
    background: rgba(46,139,87,0.3);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-type.depense {
    background: rgba(220,20,60,0.3);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-amount {
    font-weight: bold;
    text-align: center;
    font-size: 0.9em;
    background: rgba(212,175,55,0.3);
    padding: 10px 8px;
    color: #f4e6b7 !important;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-desc {
    font-style: italic;
    color: #f4e6b7 !important;
    padding: 10px 8px;
    background: rgba(139,69,19,0.2);
    text-align: center;
    font-size: 0.85em;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
  }
  
  /* === RÉSUMÉ FINANCIER AVEC COULEURS DISTINCTES === */
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-financial-summary {
    background: linear-gradient(145deg, rgba(139,69,19,0.2), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 12px;
    padding: 20px;
    margin: 25px 16px 16px 16px;
    display: grid;
    grid-template-columns: repeat(3, 1fr) auto;
    gap: 20px;
    align-items: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.5);
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-summary-item {
    text-align: center;
    padding: 15px;
    border-radius: 10px;
    border: 2px solid;
    box-shadow: 
      0 2px 8px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(139,105,20,0.1);
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-summary-item:nth-child(1) {
    background: linear-gradient(145deg, rgba(46,139,87,0.3), rgba(32,96,60,0.2));
    border-color: #2e8b57;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-summary-item:nth-child(1) label {
    color: #90ee90 !important;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-summary-item:nth-child(1) .sheet-summary-value {
    background: linear-gradient(145deg, rgba(46,139,87,0.6), rgba(32,96,60,0.4));
    color: #90ee90 !important;
    border-color: #32cd32;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-summary-item:nth-child(2) {
    background: linear-gradient(145deg, rgba(220,20,60,0.3), rgba(139,0,0,0.2));
    border-color: #dc143c;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-summary-item:nth-child(2) label {
    color: #ff6b6b !important;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-summary-item:nth-child(2) .sheet-summary-value {
    background: linear-gradient(145deg, rgba(220,20,60,0.6), rgba(139,0,0,0.4));
    color: #ff6b6b !important;
    border-color: #ff4500;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-summary-item:nth-child(3) {
    background: linear-gradient(145deg, rgba(212,175,55,0.3), rgba(139,105,20,0.2));
    border-color: #d4af37;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-summary-item:nth-child(3) label {
    color: #ffd700 !important;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-summary-item:nth-child(3) .sheet-summary-value {
    background: linear-gradient(145deg, rgba(212,175,55,0.6), rgba(139,105,20,0.4));
    color: #ffd700 !important;
    border-color: #ffed4e;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-summary-item label {
    display: block;
    font-size: 1em;
    font-weight: bold;
    margin-bottom: 0;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
    font-family: 'Georgia', serif;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-summary-value {
    font-weight: bold;
    font-size: 1.3em;
    padding: 10px 15px;
    border-radius: 8px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
    border: 2px solid;
    box-shadow: 
      0 2px 6px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(255,255,255,0.1);
    font-family: 'Georgia', serif;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-summary-actions {
    display: flex;
    align-items: center;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-clear-history-btn {
    background: linear-gradient(145deg, #8b6914, #654321, #8b4513);
    color: #f4e6b7;
    border: none;
    padding: 12px 18px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    font-size: 0.95em;
    transition: all 0.3s ease;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    box-shadow: 0 4px 10px rgba(0,0,0,0.4);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: 'Georgia', serif;
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-clear-history-btn:hover {
    background: linear-gradient(145deg, #b8860b, #8b6914, #cd853f);
    transform: translateY(-2px);
    box-shadow: 0 6px 14px rgba(0,0,0,0.5);
  }
  
  /* === RESPONSIVE DESIGN ADAPTATIF === */
  @media (max-width: 1200px) {
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-display {
      grid-template-columns: 1fr;
      grid-template-rows: auto auto auto;
      gap: 20px;
      padding: 20px;
    }
    
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-item,
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-wealth-level {
      min-width: auto;
      width: 100%;
    }
    
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-exchange-rates {
      min-width: auto;
      width: 100%;
    }
    
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-rates-grid {
      justify-content: space-around;
    }
    
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-financial-summary {
      grid-template-columns: 1fr;
      gap: 15px;
    }
  }
  
  @media (max-width: 900px) {
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-header,
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-item {
      font-size: 0.8em;
    }
    
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-date,
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-gamedate,
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-type,
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-amount,
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-desc {
      font-size: 0.75em;
      padding: 10px 6px;
      min-height: 40px;
    }
  }
  
  @media (max-width: 768px) {
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-container {
      padding: 0 5px;
      overflow-x: auto;
    }
    
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-table-main {
      min-width: 600px;
    }
    
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-header,
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-item {
      font-size: 0.75em;
    }
  }
  
  @media (max-width: 480px) {
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-header,
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-item {
      font-size: 0.7em;
    }
    
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-date,
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-gamedate,
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-type,
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-amount,
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-col-desc {
      padding: 8px 4px;
      min-height: 36px;
      font-size: 0.7em;
    }
    
    .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-table-main {
      min-width: 500px;
    }
  }
  
  /* === ANIMATIONS SOBRES === */
  @keyframes fadeInUp {
    0% {
      opacity: 0;
      transform: translateY(10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-transaction-item.new {
    animation: fadeInUp 0.5s ease-out;
  }
  
  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 rgba(46,139,87,0.4);
    }
    70% {
      box-shadow: 0 0 0 8px rgba(46,139,87,0);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(46,139,87,0);
    }
  }
  
  .sheet-currency-section:not([class*="rolltemplate"]) .sheet-calc-value.updated {
    animation: pulse 1s ease-out;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ==========================================
     CSS SECTION LANGUES - TOTALEMENT ISOLÉ
     ========================================== */
  
  /* === WRAPPER PRINCIPAL === */
  .charsheet .sheet-langues-wrapper {
    font-family: 'Georgia', serif;
    background: linear-gradient(145deg, #2c1e0f, #3d2914, #2c1e0f);
    border: 2px solid #8b6914;
    border-radius: 12px;
    margin: 8px 0;
    box-shadow: 
      0 0 0 1px #654321,
      0 4px 12px rgba(0,0,0,0.6),
      inset 0 1px 0 rgba(139,105,20,0.3);
    overflow: hidden;
    transition: all 0.4s ease;
  }
  
  .charsheet .sheet-langues-wrapper[open] {
    background: linear-gradient(145deg, #1a0f0a, #2c1810, #1a0f0a);
    border-color: #cd853f;
    box-shadow: 
      0 0 0 1px #8b6914,
      0 6px 20px rgba(205,133,63,0.4),
      inset 0 1px 0 rgba(139,105,20,0.4);
  }
  
  /* === TITRE STYLE CURRENCY === */
  .charsheet .sheet-langues-wrapper > summary.sheet-section-title {
    color: #f4e6b7;
    background: linear-gradient(145deg, rgba(139,69,19,0.3), rgba(101,67,33,0.2));
    border: 2px solid #8b4513;
    border-radius: 10px;
    padding: 12px 20px;
    margin: 8px 0;
    font-size: 1.2em;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
    font-family: 'Georgia', serif;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
    box-shadow: 
      0 2px 8px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(139,105,20,0.2);
    list-style: none;
  }
  
  .charsheet .sheet-langues-wrapper > summary.sheet-section-title:hover {
    background: linear-gradient(145deg, rgba(139,69,19,0.4), rgba(101,67,33,0.3));
    border-color: #cd853f;
    transform: translateY(-2px);
    box-shadow: 
      0 4px 12px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(139,105,20,0.3);
  }
  
  .charsheet .sheet-langues-wrapper > summary.sheet-section-title::-webkit-details-marker {
    display: none;
  }
  
  .charsheet .sheet-langues-wrapper > summary.sheet-section-title::before {
    content: "▶ ";
    transition: transform 0.3s ease;
    display: inline-block;
    margin-right: 10px;
  }
  
  .charsheet .sheet-langues-wrapper[open] > summary.sheet-section-title::before {
    transform: rotate(90deg);
  }
  
  /* === CONTAINER === */
  .charsheet .sheet-langues-wrapper .sheet-langues-container {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 10px;
    padding: 20px;
    margin: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    transition: all 0.4s ease;
  }
  
  .charsheet .sheet-langues-wrapper .sheet-langues-container:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
    transform: translateY(-2px);
    box-shadow: 
      0 6px 16px rgba(0,0,0,0.4),
      0 0 12px rgba(139,105,20,0.3);
    border-color: #cd853f;
  }
  
  /* === GRILLE 4 COLONNES === */
  .charsheet .sheet-langues-wrapper .sheet-langues-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr;
    gap: 20px;
    align-items: end;
  }
  
  /* === LIGNE FIXE === */
  .charsheet .sheet-langues-wrapper .sheet-langues-fixed {
    margin-bottom: 0;
  }
  
  /* === COLONNE INDIVIDUELLE === */
  .charsheet .sheet-langues-wrapper .sheet-langue-col {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  
  /* === LABELS === */
  .charsheet .sheet-langues-wrapper .sheet-langue-col label {
    color: #f4e6b7;
    font-weight: bold;
    font-size: 1em;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    text-align: center;
    font-family: 'Georgia', serif;
    margin: 0;
  }
  
  /* === INPUT LANGUE - SANS CHANGEMENT DE COULEUR === */
  .charsheet .sheet-langues-wrapper .sheet-langue-col input[type="text"] {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #8b4513;
    border-radius: 6px;
    background: linear-gradient(145deg, #fffaf2, #f4e6b7);
    color: #654321;
    font-family: 'Georgia', serif;
    font-size: 1em;
    font-weight: bold;
    text-align: center;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
    transition: border-color 0.3s ease, transform 0.3s ease;
  }
  
  .charsheet .sheet-langues-wrapper .sheet-langue-col input[type="text"]:focus {
    border-color: #cd853f;
    outline: none;
    background: linear-gradient(145deg, #fffaf2, #f4e6b7);
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
    transform: translateY(-1px);
  }
  
  .charsheet .sheet-langues-wrapper .sheet-langue-col input[type="text"]:hover {
    border-color: #cd853f;
  }
  
  .charsheet .sheet-langues-wrapper .sheet-langue-col input[type="text"]::placeholder {
    color: #8b7355;
    font-style: italic;
    opacity: 0.7;
    font-size: 0.95em;
  }
  
  
  
  
  
  
  
  /* ==========================================
     SÉPARATEUR AVEC SPAN RÉEL
     ========================================== */
  
  .charsheet .sheet-langues-wrapper .sheet-langues-separator {
    height: 2px;
    background: linear-gradient(90deg, 
      transparent 0%, 
      #8b4513 10%, 
      #cd853f 50%, 
      #8b4513 90%, 
      transparent 100%
    );
    margin: 20px 0;
    box-shadow: 0 1px 3px rgba(0,0,0,0.3);
    position: relative;
    text-align: center;
  }
  
  .charsheet .sheet-langues-wrapper .sheet-langues-separator .sheet-langues-separator-text {
    position: absolute;
    top: -12px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(145deg, #2c1e0f, #3d2914);
    color: #f4e6b7;
    padding: 4px 16px;
    border: 1px solid #8b4513;
    border-radius: 12px;
    font-size: 0.85em;
    font-weight: bold;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.9);
    box-shadow: 0 2px 6px rgba(0,0,0,0.4);
    white-space: nowrap;
    font-family: 'Georgia', serif;
    display: inline-block;
  }
  
  
  
  
  /* ==========================================
     REPEATING SECTION STYLES
     ========================================== */
  
  .charsheet .sheet-langues-wrapper fieldset.repeating_langues_custom {
    border: none;
    padding: 0;
    margin: 0;
  }
  
  .charsheet .sheet-langues-wrapper .sheet-langues-repeating {
    margin-bottom: 12px;
    padding: 16px;
    background: linear-gradient(135deg, rgba(139,69,19,0.1), rgba(101,67,33,0.05));
    border: 1px dashed #8b4513;
    border-radius: 8px;
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-langues-wrapper .sheet-langues-repeating:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.2), rgba(101,67,33,0.15));
    border-style: solid;
    border-color: #cd853f;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }
  
  /* Style spécifique pour les inputs dans repeating */
  .charsheet .sheet-langues-wrapper .sheet-langues-repeating input[type="text"] {
    background: linear-gradient(145deg, #fff9f0, #f8e8c8);
    border-color: #a0826d;
  }
  
  .charsheet .sheet-langues-wrapper .sheet-langues-repeating input[type="text"]:focus {
    background: linear-gradient(145deg, #fff9f0, #f8e8c8);
    border-color: #cd853f;
  }
  
  
  /* ==========================================
     BOUTONS REPEATING - UNIQUEMENT DANS LANGUES
     ========================================== */
  
  .charsheet .sheet-langues-wrapper .repcontrol {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-top: 16px;
    padding-top: 12px;
    border-top: 1px solid #8b4513;
  }
  
  .charsheet .sheet-langues-wrapper .repcontrol button,
  .charsheet .sheet-langues-wrapper .repcontrol .btn {
    padding: 8px 20px;
    background: linear-gradient(145deg, #8b4513, #654321);
    color: #f4e6b7;
    border: 2px solid #cd853f;
    border-radius: 8px;
    font-family: 'Georgia', serif;
    font-weight: bold;
    font-size: 0.95em;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 
      0 2px 6px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(205,133,63,0.2);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .charsheet .sheet-langues-wrapper .repcontrol button:hover,
  .charsheet .sheet-langues-wrapper .repcontrol .btn:hover {
    background: linear-gradient(145deg, #cd853f, #8b4513);
    border-color: #f4e6b7;
    transform: translateY(-2px);
    box-shadow: 
      0 4px 10px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(205,133,63,0.3);
  }
  
  .charsheet .sheet-langues-wrapper .repcontrol button:active,
  .charsheet .sheet-langues-wrapper .repcontrol .btn:active {
    transform: translateY(0);
    box-shadow: 
      0 1px 3px rgba(0,0,0,0.3),
      inset 0 2px 4px rgba(0,0,0,0.3);
  }
  
  /* Bouton "Ajouter" spécifique */
  .charsheet .sheet-langues-wrapper .repcontrol .btn.repcontrol_add {
    background: linear-gradient(145deg, #2d7a3e, #1e5a2d);
  }
  
  .charsheet .sheet-langues-wrapper .repcontrol .btn.repcontrol_add:hover {
    background: linear-gradient(145deg, #3d9a5e, #2d7a3e);
  }
  
  
  /* ==========================================
     RESPONSIVE
     ========================================== */
  
  @media (max-width: 1024px) {
    .charsheet .sheet-langues-wrapper .sheet-langues-grid {
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    
    .charsheet .sheet-langues-wrapper .sheet-langues-repeating {
      padding: 12px;
    }
    
    .charsheet .sheet-langues-wrapper .sheet-langues-separator::after {
      font-size: 0.8em;
      padding: 3px 12px;
    }
  }
  
  @media (max-width: 600px) {
    .charsheet .sheet-langues-wrapper .sheet-langues-grid {
      grid-template-columns: 1fr;
      gap: 12px;
    }
    
    .charsheet .sheet-langues-wrapper > summary.sheet-section-title {
      font-size: 1em;
      padding: 10px 16px;
    }
    
    .charsheet .sheet-langues-wrapper .sheet-langue-col input[type="text"] {
      padding: 10px 14px;
      font-size: 0.95em;
    }
    
    .charsheet .sheet-langues-wrapper .sheet-langues-repeating {
      padding: 10px;
    }
    
    .charsheet .sheet-langues-wrapper .repcontrol {
      flex-direction: column;
      gap: 8px;
    }
    
    .charsheet .sheet-langues-wrapper .repcontrol button,
    .charsheet .sheet-langues-wrapper .repcontrol .btn {
      width: 100%;
      padding: 10px;
    }
    
    .charsheet .sheet-langues-wrapper .sheet-langues-separator::after {
      font-size: 0.75em;
      padding: 2px 8px;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ==================== CSS ONGLET PROFIL - STYLE FANTASY FINAL V2 ==================== */
  /* ISOLATION COMPLÈTE - N'AFFECTE PAS LES ROLL TEMPLATES NI LANGUES/MONNAIE */
  
  /* === VARIABLES POUR COHÉRENCE === */
  .sheet-tab-content.sheet-profils {
    --profil-primary: #8b6914;
    --profil-secondary: #8b4513;
    --profil-dark: #2c1e0f;
    --profil-medium: #3d2914;
    --profil-light: #f4e6b7;
    --profil-gold: #cd853f;
    --profil-shadow: rgba(0,0,0,0.6);
    --profil-green: #4a7c59;
    --profil-red: #a84432;
    --profil-blue: #3d5a80;
  }
  
  /* === WRAPPER PRINCIPAL ONGLET PROFIL === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) {
    font-family: 'Georgia', serif;
    background: linear-gradient(145deg, #2c1e0f, #3d2914, #2c1e0f);
    padding: 16px;
    border-radius: 12px;
  }
  
  /* === BOX WRAPPER GÉNÉRAL (SAUF LANGUES ET MONNAIE) === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-box-wrapper:not(.sheet-langues-wrapper):not(.sheet-currency-section) {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid var(--profil-secondary);
    border-radius: 10px;
    padding: 0;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px var(--profil-shadow);
    overflow: hidden;
  }
  
  /* === BLOC CARACTÉRISTIQUES PERSONNALISÉ === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-carac-block {
    background: linear-gradient(145deg, rgba(139,69,19,0.2), rgba(101,67,33,0.15), rgba(74,55,40,0.1));
    border: 3px solid var(--profil-secondary);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 16px;
    box-shadow: 
      0 4px 12px var(--profil-shadow),
      inset 0 1px 0 rgba(139,105,20,0.3);
  }
  
  /* === TABLE CARACTÉRISTIQUES PERSONNALISÉE === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-carac-table {
    border: 2px solid rgba(139,69,19,0.3);
    border-radius: 8px;
    overflow: hidden;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-carac-table thead {
    background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-carac-title-row th {
    background: linear-gradient(90deg, #654321, var(--profil-primary), #654321);
    padding: 16px;
    border-bottom: 3px solid #654321;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-carac-title-text {
    font-size: 18px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--profil-light);
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
  }
  
  /* === CORRECTION PR MAX ET PR DISPLAY - CENTRAGE ET TAILLE === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) input[name="attr_pr_max"],
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) input[name="attr_pr_display"] {
    width: 100% !important;
    text-align: center !important;
    font-size: 14px !important;
    padding: 10px !important;
    min-height: 40px !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pr-max-input {
    background: linear-gradient(135deg, #ffd966, #f4c430) !important;
    border: 2px solid var(--profil-primary) !important;
    color: var(--profil-dark) !important;
    font-weight: bold !important;
    text-align: center !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pr-display-input {
    background: linear-gradient(135deg, #c8dce8, #a8c4d4) !important;
    border: 2px solid var(--profil-blue) !important;
    color: #1e3a5f !important;
    font-weight: bold !important;
    text-align: center !important;
  }
  
  /* === WRAPPER IDENTITÉ === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-id-wrapper {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid var(--profil-secondary);
    border-radius: 10px;
    padding: 0;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px var(--profil-shadow);
    overflow: hidden;
  }
  
  /* === WRAPPER PV/PM/PE === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pv-table-wrapper {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid var(--profil-secondary);
    border-radius: 10px;
    padding: 16px;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px var(--profil-shadow);
    overflow-x: auto;
  }
  
  /* === DETAILS/SUMMARY DÉPLIABLES AVEC ANIMATION FLÈCHE === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) details:not(.sheet-langues-wrapper):not(.sheet-currency-section):not(.sheet-custom-currencies):not(.sheet-transaction-journal) {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid var(--profil-secondary);
    border-radius: 10px;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px var(--profil-shadow);
    overflow: hidden;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) details:not(.sheet-langues-wrapper):not(.sheet-currency-section):not(.sheet-custom-currencies):not(.sheet-transaction-journal)[open] {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    box-shadow: 0 2px 8px var(--profil-shadow);
    border-color: var(--profil-secondary);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) summary:not(.sheet-langues-wrapper summary):not(.sheet-currency-section summary):not(.sheet-custom-currencies summary):not(.sheet-transaction-journal summary) {
    background: linear-gradient(90deg, var(--profil-primary), #6b4f10, var(--profil-primary));
    color: var(--profil-light);
    padding: 12px 16px 12px 40px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    text-shadow: 1px 1px 2px var(--profil-shadow);
    border-bottom: 2px solid #654321;
    position: relative;
    list-style: none;
  }
  
  /* FLÈCHE TRIANGLE ANIMÉE */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) summary:not(.sheet-langues-wrapper summary):not(.sheet-currency-section summary):not(.sheet-custom-currencies summary):not(.sheet-transaction-journal summary)::before {
    content: '▶';
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    transition: transform 0.3s ease;
    font-size: 14px;
    color: var(--profil-light);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) details:not(.sheet-langues-wrapper):not(.sheet-currency-section):not(.sheet-custom-currencies):not(.sheet-transaction-journal)[open] > summary::before {
    transform: translateY(-50%) rotate(90deg);
  }
  
  /* Cacher le marker par défaut */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) summary::-webkit-details-marker {
    display: none;
  }
  
  /* === WRAPPER COMPÉTENCES === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-competence-wrapper {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid var(--profil-secondary);
    border-radius: 10px;
    padding: 0;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px var(--profil-shadow);
    overflow: hidden;
  }
  
  /* === ANIMATION CHECKBOX COMPÉTENCES - INSTANTANÉ SANS DÉLAI === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) input[type="checkbox"][name*="comp_active"] {
    appearance: none;
    -webkit-appearance: none;
    width: 22px;
    height: 22px;
    border: 2px solid var(--profil-primary);
    border-radius: 4px;
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    cursor: pointer;
    position: relative;
    transition: none;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 1px 2px rgba(139,105,20,0.3);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) input[type="checkbox"][name*="comp_active"]:checked {
    background: linear-gradient(135deg, var(--profil-green), #3d6b4f);
    border-color: #2d5a3f;
    box-shadow: 
      0 0 10px rgba(74,124,89,0.5),
      inset 0 1px 3px rgba(255,255,255,0.2);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) input[type="checkbox"][name*="comp_active"]:checked::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #e8f5e9;
    font-size: 16px;
    font-weight: bold;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) input[type="checkbox"][name*="comp_active"]:hover {
    border-color: var(--profil-gold);
    box-shadow: 
      0 0 8px rgba(205,133,63,0.4),
      inset 0 1px 3px rgba(0,0,0,0.2);
  }
  
  /* === WRAPPER TRAITS SPÉCIFIQUES === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-traits-wrapper {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid var(--profil-secondary);
    border-radius: 10px;
    padding: 0;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px var(--profil-shadow);
    overflow-x: auto;
  }
  
  /* === SECTION RÉPUTATION === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dnd-section {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid var(--profil-secondary);
    border-radius: 10px;
    padding: 0;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px var(--profil-shadow);
    overflow: visible;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dnd-section[open] {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    box-shadow: 0 2px 8px var(--profil-shadow);
    border-color: var(--profil-secondary);
  }
  
  /* CORRECTION TITRE RÉPUTATION - Texte complet visible */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dnd-section .sheet-dnd-header,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dnd-section summary {
    white-space: normal !important;
    word-wrap: break-word !important;
    overflow: visible !important;
    text-overflow: clip !important;
  }
  
  /* CORRECTION BUG SELECT RÉPUTATION - FORCE AFFICHAGE COMPLET */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dnd-table select,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) select[name*="organisation_titre"] {
    min-width: 200px !important;
    width: 100% !important;
    max-width: none !important;
    padding: 10px 30px 10px 12px !important;
    font-size: 14px !important;
    background: linear-gradient(135deg, #f4e6b7, #e6d690) !important;
    border: 2px solid var(--profil-secondary) !important;
    border-radius: 6px !important;
    color: var(--profil-dark) !important;
    font-weight: 600 !important;
    box-sizing: border-box !important;
    white-space: normal !important;
    text-overflow: clip !important;
    overflow: visible !important;
    line-height: 1.4 !important;
    height: auto !important;
    min-height: 44px !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dnd-table select option {
    white-space: normal !important;
    padding: 8px !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dnd-table td {
    overflow: visible !important;
    position: relative !important;
  }
  
  /* === BLESSURES HANDICAPANTES === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-blessures-block {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid var(--profil-secondary);
    border-radius: 10px;
    padding: 0;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px var(--profil-shadow);
    overflow-x: auto;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-blessures-block[open] {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    box-shadow: 0 2px 8px var(--profil-shadow);
    border-color: var(--profil-secondary);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-causes-blessures-block {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid var(--profil-secondary);
    border-radius: 10px;
    padding: 0;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px var(--profil-shadow);
    overflow-x: auto;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-causes-blessures-block[open] {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    box-shadow: 0 2px 8px var(--profil-shadow);
    border-color: var(--profil-secondary);
  }
  
  /* === SECTION RAPPEL AVANTAGES/DÉSAVANTAGES - STYLE DISTINCT === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-rappel-wrapper {
    background: linear-gradient(145deg, rgba(61,41,20,0.3), rgba(44,30,15,0.2));
    border: 3px double var(--profil-primary);
    border-radius: 12px;
    padding: 0;
    margin-top: 16px;
    margin-bottom: 16px;
    box-shadow: 
      0 3px 10px var(--profil-shadow),
      inset 0 1px 0 rgba(139,105,20,0.2);
    overflow: hidden;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-rappel-wrapper[open] {
    background: linear-gradient(145deg, rgba(61,41,20,0.3), rgba(44,30,15,0.2));
    box-shadow: 
      0 3px 10px var(--profil-shadow),
      inset 0 1px 0 rgba(139,105,20,0.2);
    border-color: var(--profil-primary);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-rappel-title {
    background: linear-gradient(135deg, #6b4f10 0%, var(--profil-primary) 50%, #6b4f10 100%);
    color: var(--profil-light);
    padding: 14px 20px 14px 44px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    cursor: pointer;
    text-shadow: 2px 2px 4px var(--profil-shadow);
    border-bottom: 3px solid #654321;
    font-size: 13px;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-rappel-container {
    padding: 16px;
    background: linear-gradient(135deg, rgba(244,230,183,0.03), rgba(230,214,144,0.02));
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-advantage-wrapper,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-disadvantage-wrapper {
    background: linear-gradient(135deg, rgba(101,67,33,0.12), rgba(74,55,40,0.08));
    border: 2px solid rgba(139,69,19,0.4);
    border-radius: 10px;
    margin: 10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-advantage-wrapper[open],
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-disadvantage-wrapper[open] {
    background: linear-gradient(135deg, rgba(101,67,33,0.12), rgba(74,55,40,0.08));
    border-color: rgba(139,69,19,0.4);
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-advantage-title,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-disadvantage-title {
    background: linear-gradient(90deg, rgba(139,105,20,0.4), rgba(107,79,16,0.3));
    color: var(--profil-light);
    padding: 10px 16px 10px 40px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    cursor: pointer;
    text-shadow: 1px 1px 2px var(--profil-shadow);
    border-bottom: 1px solid rgba(101,67,33,0.5);
    font-size: 12px;
  }
  
  /* === TABLES GLOBALES AVEC CONTRAINTES === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    background: linear-gradient(135deg, rgba(244,230,183,0.05), rgba(230,214,144,0.03));
    border-radius: 8px;
    overflow: hidden;
    table-layout: fixed;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) thead {
    background: linear-gradient(135deg, var(--profil-primary), #6b4f10, var(--profil-primary));
    color: var(--profil-light);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) th {
    padding: 12px 10px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-shadow: 1px 1px 2px var(--profil-shadow);
    font-size: 12px;
    border-bottom: 2px solid #654321;
    word-wrap: break-word;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) td {
    padding: 10px;
    border-bottom: 1px solid rgba(139,69,19,0.1);
    word-wrap: break-word;
    overflow: hidden;
  }
  
  /* === INPUTS GLOBAUX AVEC MAX-WIDTH === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) input[type="text"],
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) input[type="number"],
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) textarea,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) select {
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    border: 2px solid transparent;
    border-radius: 6px;
    padding: 8px 10px;
    color: var(--profil-dark);
    font-family: 'Georgia', serif;
    font-weight: 600;
    transition: all 0.3s ease;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.15),
      0 1px 2px rgba(139,105,20,0.2);
    max-width: 100%;
    box-sizing: border-box;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) input[type="text"]:focus,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) input[type="number"]:focus,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) textarea:focus,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) select:focus {
    outline: none;
    border-color: var(--profil-primary);
    background: linear-gradient(135deg, #f5e8c1, #e8d09a);
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.15),
      0 0 8px rgba(139,105,20,0.4);
    transform: translateY(-1px);
  }
  
  /* === MOD RÉSISTANCE MENTALE ET RÉACTIVITÉ - COULEUR SPÉCIALE === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) input[name="attr_rm_final"],
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) input[name="attr_rea_final"] {
    background: linear-gradient(135deg, #c8dce8, #a8c4d4) !important;
    color: #1e3a5f !important;
    font-weight: bold !important;
    border: 2px solid var(--profil-blue) !important;
  }
  
  /* === BOUTONS AVEC CONTRAINTES - LARGEUR HARMONISÉE === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) button[type="roll"],
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) button[type="action"] {
    background: linear-gradient(135deg, var(--profil-primary), #6b4f10, var(--profil-primary));
    border: 2px solid #654321;
    border-radius: 6px;
    color: var(--profil-light);
    font-family: 'Georgia', serif;
    font-weight: bold;
    padding: 8px 16px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-shadow: 1px 1px 2px var(--profil-shadow);
    box-shadow: 
      0 2px 4px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(244,230,183,0.2);
    max-width: 100%;
    box-sizing: border-box;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    min-height: 44px;
    min-width: 55px;
    font-size: 16px;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) button[type="roll"]:hover,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) button[type="action"]:hover {
    background: linear-gradient(135deg, #a68b2f, var(--profil-primary), #a68b2f);
    border-color: var(--profil-primary);
    box-shadow: 
      0 4px 8px rgba(139,105,20,0.5),
      inset 0 1px 0 rgba(244,230,183,0.3);
    transform: translateY(-2px);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) button[type="roll"]:active,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) button[type="action"]:active {
    transform: translateY(0px);
    box-shadow: 
      0 1px 3px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(0,0,0,0.1);
  }
  
  /* === BOUTONS PR AVEC COULEURS DIFFÉRENTES - LARGEUR HARMONISÉE === */
  
  /* Bouton +1 PR (VERT) */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) button[name="act_pr_plus"],
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pr-btn-plus {
    background: linear-gradient(135deg, var(--profil-green), #3d6b4f, var(--profil-green)) !important;
    border: 2px solid #2d5a3f !important;
    color: #e8f5e9 !important;
    min-width: 55px !important;
    min-height: 44px !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) button[name="act_pr_plus"]:hover,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pr-btn-plus:hover {
    background: linear-gradient(135deg, #5a9d6f, var(--profil-green), #5a9d6f) !important;
    border-color: var(--profil-green) !important;
  }
  
  /* Bouton -1 PR (ROUGE) */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) button[name="act_pr_minus"],
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pr-btn-minus {
    background: linear-gradient(135deg, var(--profil-red), #8b3626, var(--profil-red)) !important;
    border: 2px solid #6d2a1d !important;
    color: #ffe4e1 !important;
    min-width: 55px !important;
    min-height: 44px !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) button[name="act_pr_minus"]:hover,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pr-btn-minus:hover {
    background: linear-gradient(135deg, #c95d47, var(--profil-red), #c95d47) !important;
    border-color: var(--profil-red) !important;
  }
  
  /* Bouton Reset PR (BLEU) */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) button[name="act_pr_reset"],
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pr-btn-reset {
    background: linear-gradient(135deg, var(--profil-blue), #2d4a6b, var(--profil-blue)) !important;
    border: 2px solid #1e3451 !important;
    color: #e3f2fd !important;
    min-width: 55px !important;
    min-height: 44px !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) button[name="act_pr_reset"]:hover,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pr-btn-reset:hover {
    background: linear-gradient(135deg, #5a7a9f, var(--profil-blue), #5a7a9f) !important;
    border-color: var(--profil-blue) !important;
  }
  
  /* === SÉPARATEUR VISUEL CARACTÉRISTIQUES === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-carac-separator {
    background: linear-gradient(90deg, transparent, var(--profil-primary), transparent);
    height: 3px;
    margin: 16px 0;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.3);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-carac-separator-title {
    background: linear-gradient(90deg, var(--profil-primary), #6b4f10, var(--profil-primary));
    color: var(--profil-light);
    text-align: center;
    padding: 8px;
    font-weight: bold;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 1px;
    border-radius: 6px;
    margin: 8px 0;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  
  /* === TITRES DE SECTION === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-section-title {
    background: linear-gradient(90deg, var(--profil-primary), #6b4f10, var(--profil-primary));
    color: var(--profil-light);
    padding: 12px 16px 12px 40px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    text-shadow: 1px 1px 2px var(--profil-shadow);
    border-bottom: 2px solid #654321;
    border-radius: 10px 10px 0 0;
    position: relative;
  }
  
  /* === STYLE AMÉLIORÉ DÉS DE DESTIN ET FATALITÉ === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-table {
    background: linear-gradient(145deg, rgba(139,69,19,0.2), rgba(101,67,33,0.15)) !important;
    border: 3px solid var(--profil-secondary) !important;
    border-radius: 12px !important;
    box-shadow: 
      0 4px 12px var(--profil-shadow),
      inset 0 1px 0 rgba(139,105,20,0.3) !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-table thead {
    background: linear-gradient(135deg, #654321, var(--profil-primary), #654321) !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-table th {
    background: linear-gradient(90deg, var(--profil-primary), #6b4f10, var(--profil-primary)) !important;
    color: var(--profil-light) !important;
    padding: 14px 12px !important;
    font-size: 14px !important;
    text-transform: uppercase !important;
    letter-spacing: 1.5px !important;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8) !important;
    border-bottom: 3px solid #654321 !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-table td {
    padding: 12px !important;
    border-bottom: 2px solid rgba(139,69,19,0.2) !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-table button {
    min-width: 60px !important;
    min-height: 50px !important;
    font-size: 28px !important;
    background: linear-gradient(135deg, var(--profil-primary), #6b4f10, var(--profil-primary)) !important;
    border: 3px solid #654321 !important;
    border-radius: 10px !important;
    box-shadow: 
      0 3px 6px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(244,230,183,0.3) !important;
    transition: all 0.2s ease !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-table button:hover {
    transform: scale(1.1) rotate(5deg) !important;
    box-shadow: 
      0 6px 12px rgba(139,105,20,0.6),
      inset 0 1px 0 rgba(244,230,183,0.4) !important;
  }
  
  /* === CORRECTION BOUTONS DÉS DE MONTÉE DE NIVEAU - CENTRAGE === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pv-table-wrapper details table button[type="action"] {
    min-width: 50px !important;
    min-height: 50px !important;
    padding: 10px !important;
    font-size: 24px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    background: linear-gradient(135deg, var(--profil-primary), #6b4f10, var(--profil-primary)) !important;
    border: 2px solid #654321 !important;
    border-radius: 8px !important;
    color: var(--profil-light) !important;
    cursor: pointer !important;
    box-shadow: 
      0 2px 4px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(244,230,183,0.2) !important;
    margin: 0 auto !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pv-table-wrapper details table button[type="action"]:hover {
    background: linear-gradient(135deg, #a68b2f, var(--profil-primary), #a68b2f) !important;
    transform: scale(1.05) !important;
    box-shadow: 
      0 4px 8px rgba(139,105,20,0.5),
      inset 0 1px 0 rgba(244,230,183,0.3) !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pv-table-wrapper details table button[type="action"]:active {
    transform: scale(0.95) !important;
    box-shadow: 
      0 1px 3px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(0,0,0,0.1) !important;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pv-table-wrapper details table td:last-child {
    text-align: center !important;
    vertical-align: middle !important;
    padding: 8px !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
  }
  
  /* === CORRECTIONS SPÉCIFIQUES DES TABLEAUX PROBLÉMATIQUES === */
  
  /* Table des DÉS DE MONTÉE DE NIVEAU */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pv-table-wrapper details table {
    min-width: 600px;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-pv-table-wrapper details {
    overflow-x: auto;
  }
  
  /* Table INITIATIVE */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-custom-roll-table {
    min-width: 600px;
    table-layout: auto;
  }
  
  /* Table DÉS DE DESTIN */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-table {
    min-width: 300px;
  }
  
  /* Table RÉPUTATIONS */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dnd-table {
    min-width: 500px;
    table-layout: auto;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dnd-section {
    overflow-x: auto;
  }
  
  /* Table BLESSURES HANDICAPANTES */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-blessures-grid {
    min-width: 800px;
    table-layout: auto;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-blessures-grid th {
    min-width: 70px;
    font-size: 11px;
    padding: 8px 4px;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-blessures-grid td {
    min-width: 70px;
    padding: 6px 4px;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-blessures-grid input[type="number"] {
    width: 100%;
    min-width: 50px;
    font-size: 12px;
    padding: 4px 6px;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-blessures-grid input[type="checkbox"] {
    width: auto;
    margin: 2px;
  }
  
  /* Table CAUSES DES BLESSURES */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-causes-blessures-grid {
    min-width: 600px;
    table-layout: auto;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-causes-blessures-grid input[type="text"] {
    width: 100%;
    min-width: 120px;
    font-size: 12px;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-causes-blessures-grid textarea {
    width: 100%;
    min-height: 60px;
    resize: vertical;
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) {
      padding: 12px;
    }
    
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-box-wrapper:not(.sheet-langues-wrapper):not(.sheet-currency-section),
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) details:not(.sheet-langues-wrapper):not(.sheet-currency-section):not(.sheet-custom-currencies):not(.sheet-transaction-journal) {
      margin-bottom: 12px;
    }
    
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) th,
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) td {
      padding: 8px 6px;
      font-size: 11px;
    }
    
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) summary,
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-section-title {
      padding: 10px 12px 10px 36px;
      font-size: 12px;
    }
    
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) button[type="roll"],
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) button[type="action"] {
      padding: 6px 10px;
      font-size: 13px;
      min-height: 40px;
      min-width: 50px;
    }
  }
  
  /* ==================== FIN CSS ONGLET PROFIL FINAL V2 ==================== */
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ==================== CSS RÈGLES DÉS INTÉGRÉES DANS LE BLOC ==================== */
  
  /* === CONTAINER INFO DANS LE BLOC DÉS === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-table + .sheet-dice-info-container {
    padding: 16px;
    background: linear-gradient(135deg, rgba(244,230,183,0.03), rgba(230,214,144,0.02));
    border-top: 2px solid rgba(139,69,19,0.3);
  }
  
  /* === SOUS-SECTIONS DÉPLIABLES === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-subsection {
    background: linear-gradient(135deg, rgba(101,67,33,0.12), rgba(74,55,40,0.08));
    border: 2px solid rgba(139,69,19,0.4);
    border-radius: 10px;
    margin: 10px 0;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    overflow: hidden;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-subsection[open] {
    background: linear-gradient(135deg, rgba(101,67,33,0.12), rgba(74,55,40,0.08));
    border-color: rgba(139,105,20,0.6);
    box-shadow: 0 3px 8px rgba(0,0,0,0.4);
  }
  
  /* === COULEUR SPÉCIFIQUE PAR TYPE === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-destin {
    border-color: rgba(74,124,89,0.5);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-destin[open] {
    border-color: var(--profil-green);
    box-shadow: 0 3px 10px rgba(74,124,89,0.4);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-fatalite {
    border-color: rgba(168,68,50,0.5);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-fatalite[open] {
    border-color: var(--profil-red);
    box-shadow: 0 3px 10px rgba(168,68,50,0.4);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-gestion {
    border-color: rgba(61,90,128,0.5);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-gestion[open] {
    border-color: var(--profil-blue);
    box-shadow: 0 3px 10px rgba(61,90,128,0.4);
  }
  
  /* === TITRES DES SOUS-SECTIONS === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-subsection-title {
    background: linear-gradient(90deg, rgba(139,105,20,0.4), rgba(107,79,16,0.3));
    color: var(--profil-light);
    padding: 12px 16px 12px 40px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    cursor: pointer;
    text-shadow: 1px 1px 2px var(--profil-shadow);
    border-bottom: 2px solid rgba(101,67,33,0.5);
    font-size: 13px;
    display: flex;
    align-items: center;
    gap: 8px;
    position: relative;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-subsection-title .sheet-subsection-icon {
    font-size: 18px;
    filter: drop-shadow(0 0 3px rgba(244,230,183,0.4));
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-subsection-title::before {
    content: '▶';
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    transition: transform 0.3s ease;
    font-size: 12px;
    color: var(--profil-light);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-subsection[open] > .sheet-dice-subsection-title::before {
    transform: translateY(-50%) rotate(90deg);
  }
  
  /* === CONTENU DES SOUS-SECTIONS === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-subsection-content {
    padding: 16px;
    background: linear-gradient(135deg, rgba(244,230,183,0.04), rgba(230,214,144,0.02));
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-intro {
    color: #e6d690;
    font-size: 13px;
    line-height: 1.6;
    margin-bottom: 16px;
    padding: 10px;
    background: rgba(139,69,19,0.1);
    border-left: 3px solid var(--profil-primary);
    border-radius: 4px;
  }
  
  /* === EFFETS DES DÉS === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-effects {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-effect {
    display: flex;
    gap: 12px;
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid rgba(139,105,20,0.3);
    border-radius: 8px;
    padding: 12px;
    transition: all 0.3s ease;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-effect:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.2), rgba(101,67,33,0.15));
    border-color: var(--profil-primary);
    box-shadow: 0 2px 6px rgba(139,105,20,0.3);
    transform: translateX(4px);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-effect-range {
    background: linear-gradient(135deg, var(--profil-primary), #6b4f10);
    color: var(--profil-light);
    font-weight: bold;
    font-size: 16px;
    min-width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    box-shadow: 
      0 2px 4px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(244,230,183,0.2);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    flex-shrink: 0;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-effect-content {
    flex: 1;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-effect-name {
    color: var(--profil-gold);
    font-weight: bold;
    font-size: 14px;
    margin-bottom: 6px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-effect-desc {
    color: #e6d690;
    font-size: 12px;
    line-height: 1.5;
  }
  
  /* === RÈGLES DE GESTION === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-rules {
    display: flex;
    flex-direction: column;
    gap: 14px;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-rule {
    display: flex;
    gap: 12px;
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid rgba(139,105,20,0.3);
    border-radius: 8px;
    padding: 14px;
    transition: all 0.3s ease;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-rule:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.2), rgba(101,67,33,0.15));
    border-color: var(--profil-blue);
    box-shadow: 0 2px 6px rgba(61,90,128,0.3);
    transform: translateX(4px);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-rule-icon {
    font-size: 28px;
    filter: drop-shadow(0 0 4px rgba(244,230,183,0.4));
    flex-shrink: 0;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-rule-content {
    flex: 1;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-rule-title {
    color: var(--profil-gold);
    font-weight: bold;
    font-size: 14px;
    margin-bottom: 6px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-rule-desc {
    color: #e6d690;
    font-size: 12px;
    line-height: 1.5;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-rule-list {
    color: #e6d690;
    font-size: 12px;
    line-height: 1.6;
    margin: 6px 0 0 20px;
    padding-left: 0;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-rule-list li {
    margin-bottom: 6px;
    position: relative;
    padding-left: 8px;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-rule-list li::marker {
    color: var(--profil-primary);
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-effect,
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-rule {
      flex-direction: column;
      gap: 10px;
    }
    
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-effect-range {
      width: 100%;
      min-width: auto;
    }
    
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-dice-subsection-title {
      font-size: 12px;
      padding: 10px 14px 10px 36px;
    }
  }
  
  
  
  
  
  
  /* ==================== SYSTÈME CARACTÉRISTIQUES PRINCIPALES V3 - LIGNE ENTIÈRE ==================== */
  
  /* === CHECKBOX CACHÉ === */
  .sheet-tab-content.sheet-profils .sheet-carac-principal-checkbox {
    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
    pointer-events: none;
  }
  
  /* === INPUT CACHÉ DE HIGHLIGHT (ne pas afficher) === */
  .sheet-tab-content.sheet-profils .sheet-row-highlight {
    display: none !important;
  }
  
  /* === CELLULE DU NOM === */
  .sheet-tab-content.sheet-profils .sheet-carac-name-cell {
    padding: 0 !important;
    position: relative;
  }
  
  /* === LABEL CLIQUABLE === */
  .sheet-tab-content.sheet-profils .sheet-carac-name-label {
    display: flex;
    align-items: center;
    justify-content: center; /* ✅ CENTRAGE */
    gap: 6px; /* ✅ Réduit légèrement l'espace */
    padding: 10px; /* ✅ Padding réduit */
    cursor: pointer;
    user-select: none;
    transition: all 0.3s ease;
    border-radius: 4px;
    width: 100%;
    box-sizing: border-box;
  }
  
  /* Hover sur le label */
  .sheet-tab-content.sheet-profils .sheet-carac-name-label:hover {
    background: rgba(139,105,20,0.15);
    transform: translateX(3px);
  }
  
  /* === ÉTOILE (CACHÉE COMPLÈTEMENT) === */
  .sheet-tab-content.sheet-profils .sheet-carac-star {
    display: none !important; /* ✅ MASQUÉE DÉFINITIVEMENT */
  }
  
  /* === TEXTE DU NOM === */
  .sheet-tab-content.sheet-profils .sheet-carac-name-text {
    font-weight: 600;
    color: var(--profil-dark);
    transition: all 0.3s ease;
    font-size: 13px; /* ✅ Réduit de 14px → 13px */
    text-align: center; /* ✅ Centrage du texte */
  }
  
  /* ========================================
     ÉTAT COCHÉ (CARACTÉRISTIQUE PRINCIPALE)
     ======================================== */
  
  /* === ILLUMINATION DE TOUTE LA LIGNE TR === */
  .sheet-tab-content.sheet-profils .sheet-carac-row:has(.sheet-carac-principal-checkbox:checked) {
    background: linear-gradient(135deg, rgba(255,215,0,0.20), rgba(255,223,0,0.14)) !important;
    box-shadow: 
      inset 0 0 12px rgba(255,215,0,0.3),
      0 2px 6px rgba(255,215,0,0.2) !important;
    border-left: 4px solid var(--profil-primary) !important;
    transition: all 0.4s ease;
  }
  
  /* === TOUTES LES TD DE LA LIGNE PRINCIPALE === */
  .sheet-tab-content.sheet-profils .sheet-carac-row:has(.sheet-carac-principal-checkbox:checked) td {
    background: transparent !important;
    transition: all 0.3s ease;
  }
  
  /* Label quand coché */
  .sheet-tab-content.sheet-profils .sheet-carac-principal-checkbox:checked + input + .sheet-carac-name-label {
    background: linear-gradient(135deg, rgba(255,215,0,0.30), rgba(255,223,0,0.22));
    padding-left: 10px;
    box-shadow: 0 2px 6px rgba(255,215,0,0.35);
  }
  
  /* === ÉTOILE VISIBLE (DÉSACTIVÉE) === */
  .sheet-tab-content.sheet-profils .sheet-carac-principal-checkbox:checked + input + .sheet-carac-name-label .sheet-carac-star {
    display: none !important; /* ✅ Même quand cochée, elle reste cachée */
  }
  
  /* === TEXTE EN GRAS DORÉ === */
  .sheet-tab-content.sheet-profils .sheet-carac-principal-checkbox:checked + input + .sheet-carac-name-label .sheet-carac-name-text {
    font-weight: bold;
    color: var(--profil-primary);
    text-shadow: 0 0 5px rgba(255,215,0,0.5);
    font-size: 15px;
  }
  
  /* === INPUTS DANS LA LIGNE PRINCIPALE === */
  .sheet-tab-content.sheet-profils .sheet-carac-row:has(.sheet-carac-principal-checkbox:checked) input[type="number"] {
    background: linear-gradient(135deg, rgba(255,245,220,0.5), rgba(255,240,200,0.4)) !important;
    border-color: rgba(255,215,0,0.5) !important;
    font-weight: 600;
  }
  
  /* === HOVER SUR LIGNE PRINCIPALE === */
  .sheet-tab-content.sheet-profils .sheet-carac-row:has(.sheet-carac-principal-checkbox:checked):hover {
    background: linear-gradient(135deg, rgba(255,215,0,0.30), rgba(255,223,0,0.22)) !important;
    box-shadow: 
      inset 0 0 16px rgba(255,215,0,0.4),
      0 3px 10px rgba(255,215,0,0.3) !important;
  }
  
  .sheet-tab-content.sheet-profils .sheet-carac-principal-checkbox:checked + input + .sheet-carac-name-label:hover {
    background: linear-gradient(135deg, rgba(255,215,0,0.40), rgba(255,223,0,0.30));
    transform: translateX(4px);
  }
  
  /* ==================== FIN SYSTÈME CARACTÉRISTIQUES PRINCIPALES V3 ==================== */
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ==================== CSS ONGLET TALENT - VERSION FINALE PREMIUM COMPLÈTE ==================== */
  
  /* Container principal */
  .sheet-talent .sheet-tlnt-section {
    width: 100%;
    font-family: 'Georgia', serif;
    background: linear-gradient(145deg, #2c1e0f, #3d2914, #2c1e0f);
    padding: 16px;
    border-radius: 12px;
    display: block;
    box-sizing: border-box;
  }
  
  /* Wrappers */
  .sheet-talent .sheet-tlnt-box-wrapper {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 10px;
    padding: 0;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.6);
    overflow: visible;
    display: block;
  }
  
  /* Details wrappers */
  .sheet-talent details.sheet-tlnt-atout-wrapper,
  .sheet-talent details.sheet-tlnt-talents-wrapper,
  .sheet-talent details.sheet-tlnt-combat-talents-wrapper,
  .sheet-talent details.sheet-tlnt-horscombat-talents-wrapper,
  .sheet-talent details.sheet-tlnt-special-talents-wrapper {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 10px;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.6);
    overflow: visible;
    display: block;
  }
  
  .sheet-talent details[open].sheet-tlnt-atout-wrapper,
  .sheet-talent details[open].sheet-tlnt-talents-wrapper,
  .sheet-talent details[open].sheet-tlnt-combat-talents-wrapper,
  .sheet-talent details[open].sheet-tlnt-horscombat-talents-wrapper,
  .sheet-talent details[open].sheet-tlnt-special-talents-wrapper {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    box-shadow: 0 2px 8px rgba(0,0,0,0.6);
    border-color: #8b4513;
  }
  
  /* Conteneur talents uniques */
  .sheet-talent .sheet-tlnt-talents-uniques-wrapper {
    padding: 16px;
    background: linear-gradient(135deg, rgba(244,230,183,0.03), rgba(230,214,144,0.02));
    display: block;
  }
  
  /* Titres de sections */
  .sheet-talent summary.sheet-tlnt-section-title {
    background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
    color: #f4e6b7;
    padding: 12px 16px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    border-bottom: 2px solid #654321;
    position: relative;
    list-style: none;
    text-align: center;
    font-size: 14px;
    display: block;
    font-family: 'Georgia', serif;
  }
  
  .sheet-talent summary.sheet-tlnt-section-title::before {
    content: '▶';
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    transition: transform 0.3s ease;
    font-size: 14px;
    color: #f4e6b7;
  }
  
  .sheet-talent details[open] > summary.sheet-tlnt-section-title::before {
    transform: translateY(-50%) rotate(90deg);
  }
  
  .sheet-talent summary.sheet-tlnt-section-title::-webkit-details-marker {
    display: none;
  }
  
  /* Grille triple colonnes */
  .sheet-talent .sheet-tlnt-triple-column-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    padding: 16px;
    background: linear-gradient(135deg, rgba(244,230,183,0.03), rgba(230,214,144,0.02));
  }
  
  .sheet-talent .sheet-tlnt-triple-column-row > .sheet-tlnt-col {
    background: linear-gradient(135deg, rgba(222,184,135,0.25), rgba(210,180,140,0.2));
    border: 2px solid rgba(139,69,19,0.4);
    border-radius: 8px;
    padding: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
    display: block;
  }
  
  .sheet-talent .sheet-tlnt-triple-column-row > .sheet-tlnt-col:hover {
    background: linear-gradient(135deg, rgba(222,184,135,0.35), rgba(210,180,140,0.3));
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    border-color: #cd853f;
  }
  
  /* Details dans colonnes */
  .sheet-talent .sheet-tlnt-col > details {
    background: transparent;
    border: none;
    border-radius: 6px;
    overflow: visible;
    display: block;
  }
  
  .sheet-talent .sheet-tlnt-col > details[open] {
    background: rgba(244,230,183,0.15);
  }
  
  .sheet-talent .sheet-tlnt-col > details > summary {
    background: linear-gradient(135deg, rgba(139,105,20,0.3), rgba(107,79,16,0.25));
    padding: 8px 8px 8px 28px;
    cursor: pointer;
    list-style: none;
    position: relative;
    font-weight: 600;
    color: #f4e6b7;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    border-radius: 6px;
    margin-bottom: 8px;
    display: block;
    font-family: 'Georgia', serif;
  }
  
  .sheet-talent .sheet-tlnt-col > details > summary::before {
    content: '▶';
    position: absolute;
    left: 8px;
    top: 50%;
    transform: translateY(-50%);
    transition: transform 0.3s ease;
    font-size: 12px;
    color: #f4e6b7;
  }
  
  .sheet-talent .sheet-tlnt-col > details[open] > summary::before {
    transform: translateY(-50%) rotate(90deg);
  }
  
  .sheet-talent .sheet-tlnt-col > details > summary::-webkit-details-marker {
    display: none;
  }
  
  /* Inputs dans summary */
  .sheet-talent .sheet-tlnt-col > details > summary > input[type="text"] {
    width: 100%;
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    border: 2px solid transparent;
    border-radius: 4px;
    color: #2c1e0f;
    font-family: 'Georgia', serif;
    font-size: 14px;
    font-weight: 700;
    padding: 6px 10px;
    transition: all 0.3s ease;
    outline: none;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
    display: block;
    box-sizing: border-box;
  }
  
  .sheet-talent .sheet-tlnt-col > details > summary > input[type="text"]:focus {
    border-color: #cd853f;
    background: linear-gradient(135deg, #f5e8c1, #e8d09a);
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 0 8px rgba(205,133,63,0.5);
    transform: translateY(-1px);
  }
  
  .sheet-talent .sheet-tlnt-col > details > summary > input[type="text"]::placeholder {
    color: rgba(44,30,15,0.6);
    font-style: italic;
  }
  
  /* === TEXTAREA EFFET - STYLE PREMIUM THÉMATIQUE === */
  .sheet-talent textarea.sheet-tlnt-effet-zone {
    width: 100% !important;
    min-height: clamp(100px, 12vh, 140px) !important;
    
    /* Fond dégradé premium avec texture parchemin */
    background: linear-gradient(145deg, 
      #fef9f0 0%, 
      #f4e6b7 15%, 
      #fdf6e3 35%, 
      #f0e68c 60%, 
      #f4e6b7 85%, 
      #fef9f0 100%) !important;
    background-size: 300% 300% !important;
    animation: sheetTlntTextareaShimmer 8s ease-in-out infinite !important;
    
    /* Bordure stylisée premium */
    border: 3px solid transparent !important;
    border-image: linear-gradient(45deg, 
      #8b6914, 
      #cd853f, 
      #daa520, 
      #8b4513, 
      #8b6914) 1 !important;
    border-radius: 12px !important;
    
    /* Style de texte premium */
    padding: 14px 16px !important;
    margin-top: 12px !important;
    color: #2c1e0f !important;
    font-family: 'Georgia', serif !important;
    font-size: clamp(12px, 1.1vw, 15px) !important;
    font-weight: 600 !important;
    line-height: 1.6 !important;
    
    /* Ombres et effets */
    box-shadow: 
      inset 0 3px 8px rgba(139,105,20,0.15),
      inset 0 1px 0 rgba(255,255,255,0.3),
      0 3px 12px rgba(139,69,19,0.2),
      0 1px 3px rgba(0,0,0,0.1) !important;
    
    /* Autres propriétés */
    resize: vertical !important;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
    display: block !important;
    box-sizing: border-box !important;
    outline: none !important;
    
    /* Texture subtile */
    position: relative !important;
    overflow: auto !important;
  }
  
  /* Animation de scintillement subtil du fond */
  @keyframes sheetTlntTextareaShimmer {
    0%, 100% { 
      background-position: 0% 50%;
      box-shadow: 
        inset 0 3px 8px rgba(139,105,20,0.15),
        inset 0 1px 0 rgba(255,255,255,0.3),
        0 3px 12px rgba(139,69,19,0.2),
        0 1px 3px rgba(0,0,0,0.1);
    }
    25% { 
      background-position: 50% 25%;
      box-shadow: 
        inset 0 3px 8px rgba(139,105,20,0.18),
        inset 0 1px 0 rgba(255,255,255,0.4),
        0 3px 12px rgba(139,69,19,0.25),
        0 1px 3px rgba(0,0,0,0.1);
    }
    50% { 
      background-position: 100% 50%;
      box-shadow: 
        inset 0 3px 8px rgba(139,105,20,0.2),
        inset 0 1px 0 rgba(255,255,255,0.5),
        0 3px 12px rgba(139,69,19,0.3),
        0 1px 3px rgba(0,0,0,0.1);
    }
    75% { 
      background-position: 50% 75%;
      box-shadow: 
        inset 0 3px 8px rgba(139,105,20,0.18),
        inset 0 1px 0 rgba(255,255,255,0.4),
        0 3px 12px rgba(139,69,19,0.25),
        0 1px 3px rgba(0,0,0,0.1);
    }
  }
  
  /* État focus - Premium */
  .sheet-talent textarea.sheet-tlnt-effet-zone:focus {
    /* Fond encore plus lumineux au focus */
    background: linear-gradient(145deg, 
      #fffef9 0%, 
      #f5e8c1 20%, 
      #fff5e6 40%, 
      #f0e68c 60%, 
      #f5e8c1 80%, 
      #fffef9 100%) !important;
    background-size: 250% 250% !important;
    animation: sheetTlntTextareaFocusGlow 3s ease-in-out infinite !important;
    
    /* Bordure focus premium */
    border-image: linear-gradient(45deg, 
      #cd853f, 
      #daa520, 
      #ffd700, 
      #cd853f, 
      #b8860b) 1 !important;
    
    /* Ombres focus premium */
    box-shadow: 
      inset 0 3px 8px rgba(205,133,63,0.2),
      inset 0 1px 0 rgba(255,255,255,0.6),
      0 0 16px rgba(205,133,63,0.4),
      0 4px 16px rgba(139,105,20,0.3),
      0 2px 8px rgba(218,165,32,0.2) !important;
    
    /* Transformation subtile */
    transform: translateY(-2px) scale(1.01) !important;
  }
  
  @keyframes sheetTlntTextareaFocusGlow {
    0%, 100% { 
      background-position: 0% 50%;
    }
    50% { 
      background-position: 100% 50%;
    }
  }
  
  /* État hover */
  .sheet-talent textarea.sheet-tlnt-effet-zone:hover {
    /* Bordure hover */
    border-image: linear-gradient(45deg, 
      #a68b2f, 
      #cd853f, 
      #daa520, 
      #8b6914, 
      #a68b2f) 1 !important;
    
    /* Transformation hover subtile */
    transform: translateY(-1px) !important;
    
    /* Ombres hover */
    box-shadow: 
      inset 0 3px 8px rgba(139,105,20,0.18),
      inset 0 1px 0 rgba(255,255,255,0.4),
      0 4px 16px rgba(139,69,19,0.25),
      0 2px 6px rgba(0,0,0,0.15) !important;
  }
  
  /* Placeholder premium */
  .sheet-talent textarea.sheet-tlnt-effet-zone::placeholder {
    color: rgba(44,30,15,0.5) !important;
    font-style: italic !important;
    font-weight: 500 !important;
    text-shadow: 0 1px 2px rgba(255,255,255,0.3) !important;
  }
  
  /* Scrollbar personnalisée premium */
  .sheet-talent textarea.sheet-tlnt-effet-zone::-webkit-scrollbar {
    width: 12px !important;
    background: transparent !important;
  }
  
  .sheet-talent textarea.sheet-tlnt-effet-zone::-webkit-scrollbar-track {
    background: linear-gradient(180deg, 
      rgba(139,105,20,0.1), 
      rgba(139,105,20,0.05)) !important;
    border-radius: 6px !important;
    border: 1px solid rgba(139,105,20,0.2) !important;
  }
  
  .sheet-talent textarea.sheet-tlnt-effet-zone::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, 
      #8b6914, 
      #cd853f, 
      #8b6914) !important;
    border-radius: 6px !important;
    border: 1px solid #654321 !important;
    box-shadow: 
      inset 0 1px 0 rgba(244,230,183,0.3),
      0 1px 3px rgba(0,0,0,0.2) !important;
  }
  
  .sheet-talent textarea.sheet-tlnt-effet-zone::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, 
      #a68b2f, 
      #daa520, 
      #a68b2f) !important;
    box-shadow: 
      inset 0 1px 0 rgba(244,230,183,0.4),
      0 2px 6px rgba(139,105,20,0.3) !important;
  }
  
  /* Effet de sélection du texte premium */
  .sheet-talent textarea.sheet-tlnt-effet-zone::selection {
    background: linear-gradient(135deg, 
      rgba(218,165,32,0.3), 
      rgba(205,133,63,0.4)) !important;
    color: #2c1e0f !important;
    text-shadow: 0 1px 2px rgba(255,255,255,0.2) !important;
  }
  
  .sheet-talent textarea.sheet-tlnt-effet-zone::-moz-selection {
    background: linear-gradient(135deg, 
      rgba(218,165,32,0.3), 
      rgba(205,133,63,0.4)) !important;
    color: #2c1e0f !important;
    text-shadow: 0 1px 2px rgba(255,255,255,0.2) !important;
  }
  
  /* Blocs talents */
  .sheet-talent details.sheet-tlnt-talent-block {
    background: linear-gradient(135deg, rgba(139,69,19,0.2), rgba(101,67,33,0.15));
    border: 2px solid #8b4513;
    border-radius: 10px;
    margin-bottom: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    overflow: visible;
    display: block;
  }
  
  .sheet-talent details.sheet-tlnt-talent-block:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    border-color: #cd853f;
  }
  
  .sheet-talent details.sheet-tlnt-talent-block[open] {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
  }
  
  /* Animations talents spéciaux - NOMS UNIQUES */
  .sheet-talent details.sheet-tlnt-talent-block.sheet-tlnt-aura-combat {
    border-color: #b91c1c;
    box-shadow: 0 0 10px rgba(185,28,28,0.5);
    animation: sheetTlntFlamePulse 1.5s infinite ease-in-out;
  }
  
  @keyframes sheetTlntFlamePulse {
    0%   { box-shadow: 0 0 6px rgba(239,68,68,0.3); }
    50%  { box-shadow: 0 0 15px rgba(239,68,68,0.7); }
    100% { box-shadow: 0 0 6px rgba(239,68,68,0.3); }
  }
  
  .sheet-talent details.sheet-tlnt-talent-block.sheet-tlnt-talent-givre {
    border-color: #a2e0ff;
    box-shadow: 0 0 10px rgba(162,224,255,0.5);
    animation: sheetTlntGivrePulse 2s infinite ease-in-out;
  }
  
  @keyframes sheetTlntGivrePulse {
    0%   { box-shadow: 0 0 6px rgba(162,224,255,0.3); }
    50%  { box-shadow: 0 0 15px rgba(162,224,255,0.7); }
    100% { box-shadow: 0 0 6px rgba(162,224,255,0.3); }
  }
  
  /* Summary talent */
  .sheet-talent details.sheet-tlnt-talent-block > summary.sheet-tlnt-talent-summary {
    background: linear-gradient(90deg, rgba(139,105,20,0.3), rgba(107,79,16,0.2));
    padding: 12px 16px;
    cursor: pointer;
    list-style: none;
    border-bottom: 1px solid rgba(139,69,19,0.4);
    overflow: visible;
    position: relative;
    display: block;
    font-family: 'Georgia', serif;
  }
  
  .sheet-talent details.sheet-tlnt-talent-block > summary.sheet-tlnt-talent-summary:hover {
    background: linear-gradient(90deg, rgba(139,105,20,0.4), rgba(107,79,16,0.3));
  }
  
  /* === HEADER TALENT CORRIGÉ === */
  .sheet-talent .sheet-tlnt-talent-header {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    flex-wrap: nowrap !important; /* Évite le retour à la ligne */
    position: relative !important;
    overflow: visible !important;
    z-index: 10 !important;
    width: 100% !important;
    box-sizing: border-box !important;
  }
  
  /* Input nom talent - prend l'espace disponible */
  .sheet-talent .sheet-tlnt-talent-header > input[type="text"] {
    flex: 1 !important;
    min-width: 0 !important; /* Important pour flexbox */
    background: linear-gradient(135deg, #f4e6b7, #e6d690) !important;
    border: 2px solid rgba(139,105,20,0.6) !important;
    border-radius: 6px !important;
    padding: 10px 12px !important;
    color: #2c1e0f !important;
    font-family: 'Georgia', serif !important;
    font-size: 14px !important;
    font-weight: 700 !important;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.2) !important;
    transition: all 0.3s ease !important;
    box-sizing: border-box !important;
    outline: none !important;
  }
  
  .sheet-talent .sheet-tlnt-talent-header > input[type="text"]:focus {
    border-color: #cd853f !important;
    background: linear-gradient(135deg, #f5e8c1, #e8d09a) !important;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 0 8px rgba(205,133,63,0.4) !important;
  }
  
  .sheet-talent .sheet-tlnt-talent-header > input[type="text"]::placeholder {
    color: rgba(44,30,15,0.6) !important;
    font-style: italic !important;
  }
  
  /* === SELECT TYPE TALENT COMPACT - VERSION PREMIUM CORRIGÉE === */
  
  /* Select principal - Compact et aligné */
  .sheet-talent .sheet-tlnt-talent-header > select.sheet-tlnt-talent-type {
    -webkit-appearance: none !important;
    -moz-appearance: none !important;
    appearance: none !important;
    
    /* Dimensions compactes */
    padding: 10px 35px 10px 40px !important;
    min-width: clamp(140px, 15vw, 180px) !important;
    width: auto !important;
    max-width: clamp(180px, 18vw, 220px) !important;
    height: auto !important;
    min-height: 42px !important;
    box-sizing: border-box !important;
    flex-shrink: 0 !important;
    
    background: linear-gradient(145deg, #f4e6b7 0%, #e6d690 50%, #daa520 100%) !important;
    border: 3px solid #8b6914 !important;
    border-radius: 8px !important;
    
    color: #2c1e0f !important;
    font-family: 'Georgia', serif !important;
    font-size: clamp(11px, 1.2vw, 14px) !important;
    font-weight: 800 !important;
    line-height: 1.2 !important;
    text-align: center !important;
    text-transform: uppercase !important;
    letter-spacing: 0.8px !important;
    
    cursor: pointer !important;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.2),
      0 2px 6px rgba(139,105,20,0.3),
      0 0 0 1px rgba(139,105,20,0.1) !important;
    transition: all 0.3s ease !important;
    position: relative !important;
    z-index: 20 !important;
    display: inline-block !important;
  }
  
  /* Effet hover */
  .sheet-talent .sheet-tlnt-talent-header > select.sheet-tlnt-talent-type:hover {
    background: linear-gradient(145deg, #ffd700 0%, #daa520 50%, #b8860b 100%) !important;
    border-color: #b8860b !important;
    transform: translateY(-2px) scale(1.02) !important;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.2),
      0 4px 10px rgba(218,165,32,0.5),
      0 0 15px rgba(255,215,0,0.2) !important;
  }
  
  /* Effet focus */
  .sheet-talent .sheet-tlnt-talent-header > select.sheet-tlnt-talent-type:focus {
    outline: none !important;
    border-color: #cd853f !important;
    background: linear-gradient(145deg, #fff5e6 0%, #f4e6b7 50%, #e6d690 100%) !important;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.2),
      0 0 12px rgba(205,133,63,0.6),
      0 4px 12px rgba(139,105,20,0.4) !important;
    transform: translateY(-1px) scale(1.01) !important;
    z-index: 30 !important;
  }
  
  /* Effet active/click */
  .sheet-talent .sheet-tlnt-talent-header > select.sheet-tlnt-talent-type:active {
    transform: translateY(0px) scale(0.98) !important;
    box-shadow: 
      inset 0 3px 6px rgba(0,0,0,0.3),
      0 1px 3px rgba(139,105,20,0.2) !important;
  }
  
  /* Options du select */
  .sheet-talent .sheet-tlnt-talent-header > select.sheet-tlnt-talent-type option {
    background: #f4e6b7 !important;
    color: #2c1e0f !important;
    font-weight: 700 !important;
    padding: 8px !important;
    font-size: 13px !important;
  }
  
  /* Bordure selon le type - PASSIF */
  .sheet-talent .sheet-tlnt-talent-header > select.sheet-tlnt-talent-type[value="passif"] {
    border-color: #4a7c59 !important;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.2),
      0 2px 6px rgba(74,124,89,0.4),
      0 0 8px rgba(46,139,87,0.2) !important;
  }
  
  .sheet-talent .sheet-tlnt-talent-header > select.sheet-tlnt-talent-type[value="passif"]:hover {
    background: linear-gradient(145deg, #e8f5e9 0%, #c8e6c9 50%, #a5d6a7 100%) !important;
    border-color: #2e8b57 !important;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.2),
      0 4px 10px rgba(46,139,87,0.5),
      0 0 15px rgba(74,124,89,0.3) !important;
  }
  
  /* Bordure selon le type - ACTIF */
  .sheet-talent .sheet-tlnt-talent-header > select.sheet-tlnt-talent-type[value="actif"] {
    border-color: #d4af37 !important;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.2),
      0 2px 6px rgba(212,175,55,0.4),
      0 0 8px rgba(255,215,0,0.2) !important;
  }
  
  .sheet-talent .sheet-tlnt-talent-header > select.sheet-tlnt-talent-type[value="actif"]:hover {
    background: linear-gradient(145deg, #fff9e6 0%, #ffe680 50%, #ffd700 100%) !important;
    border-color: #b8860b !important;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.2),
      0 4px 10px rgba(255,215,0,0.5),
      0 0 15px rgba(212,175,55,0.3) !important;
  }
  
  /* Icône indicateur - PASSIF */
  .sheet-talent select.sheet-tlnt-talent-type[value="passif"]::before {
    content: "⬡" !important;
    position: absolute !important;
    left: 12px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    font-size: 18px !important;
    color: #4a7c59 !important;
    text-shadow: 
      0 0 6px rgba(74,124,89,0.6),
      1px 1px 2px rgba(0,0,0,0.4) !important;
    animation: sheetTlntPassifGlow 2s ease-in-out infinite !important;
    pointer-events: none !important;
    z-index: 2 !important;
  }
  
  @keyframes sheetTlntPassifGlow {
    0%, 100% { 
      opacity: 0.8;
      text-shadow: 
        0 0 6px rgba(74,124,89,0.6),
        1px 1px 2px rgba(0,0,0,0.4);
    }
    50% { 
      opacity: 1;
      text-shadow: 
        0 0 12px rgba(74,124,89,0.9),
        0 0 18px rgba(46,139,87,0.5),
        1px 1px 2px rgba(0,0,0,0.4);
    }
  }
  
  /* Icône indicateur - ACTIF */
  .sheet-talent select.sheet-tlnt-talent-type[value="actif"]::before {
    content: "⚡" !important;
    position: absolute !important;
    left: 12px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    font-size: 18px !important;
    color: #d4af37 !important;
    text-shadow: 
      0 0 6px rgba(212,175,55,0.6),
      1px 1px 2px rgba(0,0,0,0.4) !important;
    animation: sheetTlntActifPulse 1s ease-in-out infinite !important;
    pointer-events: none !important;
    z-index: 2 !important;
  }
  
  @keyframes sheetTlntActifPulse {
    0%, 100% { 
      transform: translateY(-50%) scale(1);
      text-shadow: 
        0 0 6px rgba(212,175,55,0.6),
        1px 1px 2px rgba(0,0,0,0.4);
    }
    50% { 
      transform: translateY(-50%) scale(1.15);
      text-shadow: 
        0 0 12px rgba(255,215,0,0.9),
        0 0 18px rgba(212,175,55,0.6),
        1px 1px 2px rgba(0,0,0,0.4);
    }
  }
  
  /* Flèche dropdown */
  .sheet-talent select.sheet-tlnt-talent-type::after {
    content: "▼" !important;
    position: absolute !important;
    right: 12px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    font-size: 12px !important;
    color: #654321 !important;
    text-shadow: 1px 1px 2px rgba(244,230,183,0.6) !important;
    transition: all 0.3s ease !important;
    pointer-events: none !important;
    z-index: 2 !important;
  }
  
  .sheet-talent select.sheet-tlnt-talent-type:hover::after {
    color: #8b6914 !important;
    transform: translateY(-50%) scale(1.1) !important;
  }
  
  /* Animation d'apparition */
  .sheet-talent select.sheet-tlnt-talent-type {
    animation: sheetTlntSelectAppear 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
  }
  
  @keyframes sheetTlntSelectAppear {
    0% {
      opacity: 0;
      transform: translateY(15px) scale(0.9);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  
  /* Bouton activation - Compact */
  .sheet-talent .sheet-tlnt-talent-header > button.sheet-tlnt-activate-btn {
    background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914) !important;
    border: 2px solid #654321 !important;
    border-radius: 6px !important;
    color: #f4e6b7 !important;
    font-family: 'Georgia', serif !important;
    font-weight: bold !important;
    padding: 10px 16px !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6) !important;
    box-shadow: 
      0 2px 4px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(244,230,183,0.2) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    font-size: clamp(10px, 1vw, 12px) !important;
    white-space: nowrap !important;
    flex-shrink: 0 !important;
    min-width: clamp(80px, 10vw, 120px) !important;
    max-width: clamp(120px, 12vw, 140px) !important;
  }
  
  .sheet-talent .sheet-tlnt-talent-header > button.sheet-tlnt-activate-btn:hover {
    background: linear-gradient(135deg, #a68b2f, #8b6914, #a68b2f) !important;
    border-color: #8b6914 !important;
    box-shadow: 
      0 4px 8px rgba(139,105,20,0.5),
      inset 0 1px 0 rgba(244,230,183,0.3) !important;
    transform: translateY(-2px) !important;
  }
  
  .sheet-talent .sheet-tlnt-talent-header > button.sheet-tlnt-activate-btn:active {
    transform: translateY(0px) !important;
    box-shadow: 
      0 1px 3px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(0,0,0,0.1) !important;
  }
  
  /* Contenu talent */
  .sheet-talent .sheet-tlnt-talent-content {
    padding: 16px;
    background: linear-gradient(135deg, rgba(244,230,183,0.05), rgba(230,214,144,0.03));
    border-top: 1px solid rgba(139,69,19,0.3);
    display: block;
  }
  
  /* === RESPONSIVE CORRIGÉ === */
  @media (max-width: 1024px) {
    .sheet-talent .sheet-tlnt-triple-column-row {
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
  }
  
  @media (max-width: 768px) {
    .sheet-talent .sheet-tlnt-section {
      padding: 12px;
    }
    
    .sheet-talent .sheet-tlnt-triple-column-row {
      grid-template-columns: 1fr;
      gap: 10px;
      padding: 12px;
    }
    
    .sheet-talent summary.sheet-tlnt-section-title {
      padding: 10px 12px 10px 36px;
      font-size: 12px;
    }
    
    .sheet-talent .sheet-tlnt-talent-header {
      flex-wrap: wrap !important; /* Permet le retour à la ligne sur mobile */
      gap: 8px !important;
    }
    
    .sheet-talent .sheet-tlnt-talent-header > input[type="text"] {
      order: 1 !important;
      flex: 1 1 100% !important; /* Prend toute la largeur sur mobile */
      margin-bottom: 8px !important;
    }
    
    .sheet-talent .sheet-tlnt-talent-header > select.sheet-tlnt-talent-type {
      order: 2 !important;
      flex: 1 !important;
      min-width: clamp(120px, 45%, 160px) !important;
      max-width: none !important;
      font-size: 12px !important;
      padding: 8px 30px 8px 35px !important;
      min-height: 40px !important;
    }
    
    .sheet-talent .sheet-tlnt-talent-header > button.sheet-tlnt-activate-btn {
      order: 3 !important;
      flex: 1 !important;
      min-width: clamp(120px, 45%, 160px) !important;
      max-width: none !important;
      text-align: center !important;
    }
    
    .sheet-talent select.sheet-tlnt-talent-type::before {
      font-size: 16px !important;
      left: 10px !important;
    }
    
    .sheet-talent select.sheet-tlnt-talent-type::after {
      right: 10px !important;
      font-size: 10px !important;
    }
    
    /* Responsive pour textarea */
    .sheet-talent textarea.sheet-tlnt-effet-zone {
      min-height: clamp(80px, 10vh, 120px) !important;
      font-size: clamp(11px, 1vw, 14px) !important;
      padding: 12px 14px !important;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ================================================================= */
  /* =============== CSS ROLL20 - ONGLET COMBAT OPTIMISÉ ============ */
  /* ================================================================= */
  
  /* === VARIABLES CSS === */
  :root {
    --sheet-primary-color: #8b4513;
    --sheet-secondary-color: #daa520;
    --sheet-accent-color: #b8860b;
    --sheet-dark-bg: #2c1810;
    --sheet-light-bg: #f4e6b7;
    --sheet-border-radius: 8px;
    --sheet-box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    --sheet-transition: all 0.3s ease;
  }
  
  /* === CONTENEUR PRINCIPAL === */
  .sheet-tab-content.sheet-combat {
    padding: 20px;
    background: linear-gradient(145deg, #2c1e0f, #3d2914, #2c1e0f);
    border-radius: var(--sheet-border-radius);
    font-family: 'Georgia', serif;
    line-height: 1.4;
  }
  
  /* ================================================================= */
  /* ==================== WRAPPER GÉNÉRAL ==================== */
  /* ================================================================= */
  
  .sheet-combat-v2-wrapper {
    margin-bottom: 25px;
    background: linear-gradient(145deg, rgba(244,230,183,0.9), rgba(222,184,135,0.8));
    border: 2px solid var(--sheet-primary-color);
    border-radius: var(--sheet-border-radius);
    box-shadow: var(--sheet-box-shadow);
  }
  
  .sheet-combat-v2-title {
    background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
    color: #f4e6b7;
    padding: 12px 20px;
    margin: 0;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    border-radius: var(--sheet-border-radius) var(--sheet-border-radius) 0 0;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
    transition: var(--sheet-transition);
    text-align: center;
    font-family: 'Georgia', serif;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .sheet-combat-v2-title:hover {
    background: linear-gradient(145deg, var(--sheet-accent-color) 0%, var(--sheet-secondary-color) 50%, var(--sheet-accent-color) 100%);
    transform: translateY(-2px);
  }
  
  /* ================================================================= */
  /* ==================== SECTION REPOS AMÉLIORÉE ==================== */
  /* ================================================================= */
  
  .sheet-combat-v2-repos-table {
    width: 100%;
    border-collapse: collapse;
    margin: 15px 0;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.8));
    border-radius: var(--sheet-border-radius);
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(139,69,19,0.2);
    border: 2px solid var(--sheet-accent-color);
  }
  
  .sheet-combat-v2-repos-table th {
    background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914);
    color: var(--sheet-light-bg);
    padding: 12px 15px;
    font-weight: bold;
    text-align: center;
    border-bottom: 2px solid var(--sheet-primary-color);
    font-family: 'Georgia', serif;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    position: relative;
  }
  
  .sheet-combat-v2-repos-header-action {
    background: linear-gradient(135deg, #8b6914, #6b4f10);
    border-right: 1px solid rgba(244,230,183,0.3);
  }
  
  .sheet-combat-v2-repos-header-bonus {
    background: linear-gradient(135deg, #b8860b, #8b6914);
    border-right: 1px solid rgba(244,230,183,0.3);
  }
  
  .sheet-combat-v2-repos-header-launch {
    background: linear-gradient(135deg, #daa520, #b8860b);
  }
  
  .sheet-combat-v2-repos-row {
    transition: var(--sheet-transition);
    border-bottom: 1px solid rgba(139,69,19,0.2);
  }
  
  .sheet-combat-v2-repos-row:hover {
    background: linear-gradient(135deg, rgba(218,165,32,0.1), rgba(244,230,183,0.2));
    transform: translateX(2px);
  }
  
  .sheet-combat-v2-repos-action {
    padding: 12px 15px;
    text-align: center;
    border-right: 1px solid rgba(139,69,19,0.2);
  }
  
  .sheet-combat-v2-repos-action-label {
    font-weight: bold;
    color: var(--sheet-primary-color);
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: 'Georgia', serif;
  }
  
  .sheet-combat-v2-repos-bonus {
    padding: 12px 15px;
    text-align: center;
    border-right: 1px solid rgba(139,69,19,0.2);
  }
  
  .sheet-combat-v2-repos-input-container {
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  .sheet-combat-v2-repos-input {
    width: 70px;
    padding: 8px 12px;
    border: 2px solid var(--sheet-accent-color);
    border-radius: 6px;
    text-align: center;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.8));
    font-weight: bold;
    font-size: 14px;
    color: var(--sheet-primary-color);
    font-family: 'Georgia', serif;
    transition: var(--sheet-transition);
    box-shadow: inset 0 1px 3px rgba(139,69,19,0.2);
  }
  
  .sheet-combat-v2-repos-input:focus {
    border-color: var(--sheet-secondary-color);
    background: linear-gradient(135deg, rgba(255,255,255,1), rgba(244,230,183,0.9));
    box-shadow: 
      inset 0 1px 3px rgba(139,69,19,0.2),
      0 0 8px rgba(218,165,32,0.4);
    transform: translateY(-1px);
    outline: none;
  }
  
  .sheet-combat-v2-repos-launch {
    padding: 12px 15px;
    text-align: center;
  }
  
  .sheet-combat-v2-repos-btn {
    background: linear-gradient(135deg, var(--sheet-secondary-color), var(--sheet-accent-color));
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    font-size: 18px;
    cursor: pointer;
    box-shadow: 0 3px 6px rgba(0,0,0,0.3);
    transition: var(--sheet-transition);
    color: white;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
    border: 2px solid rgba(244,230,183,0.3);
    position: relative;
    overflow: hidden;
  }
  
  .sheet-combat-v2-repos-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255,255,255,0.3);
    border-radius: 50%;
    transition: all 0.3s ease;
    transform: translate(-50%, -50%);
  }
  
  .sheet-combat-v2-repos-btn:hover {
    transform: scale(1.1) rotate(5deg);
    box-shadow: 0 6px 12px rgba(0,0,0,0.4);
  }
  
  .sheet-combat-v2-repos-btn:hover::before {
    width: 100%;
    height: 100%;
  }
  
  .sheet-combat-v2-repos-btn:focus {
    outline: 2px solid var(--sheet-secondary-color);
    outline-offset: 2px;
  }
  
  .sheet-combat-v2-repos-icon {
    position: relative;
    z-index: 1;
  }
  
  /* === QUALITÉ DU REPOS STYLE PLUS SOMBRE === */
  .sheet-combat-v2-repos-quality {
    padding: 20px;
    background: linear-gradient(135deg, rgba(44,30,15,0.9), rgba(61,41,20,0.8));
    border-radius: var(--sheet-border-radius);
    margin: 15px;
    border: 2px solid rgba(101,67,33,0.6);
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
  }
  
  .sheet-combat-v2-repos-quality-title {
    margin: 0 0 20px 0;
    font-size: 16px;
    font-weight: bold;
    color: var(--sheet-light-bg);
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-family: 'Georgia', serif;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .sheet-combat-v2-repos-quality-container {
    background: linear-gradient(135deg, rgba(61,41,20,0.6), rgba(44,30,15,0.5));
    border-radius: var(--sheet-border-radius);
    padding: 15px;
    border: 1px solid rgba(101,67,33,0.4);
  }
  
  .sheet-combat-v2-repos-options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 12px;
  }
  
  .sheet-combat-v2-repos-option {
    display: flex;
    align-items: center;
    cursor: pointer;
    padding: 12px 15px;
    border-radius: 8px;
    transition: var(--sheet-transition);
    background: linear-gradient(135deg, rgba(255,255,255,0.7), rgba(244,230,183,0.5));
    border: 2px solid transparent;
    position: relative;
    overflow: hidden;
  }
  
  /* État sélectionné visible */
  .sheet-combat-v2-repos-option:has(input:checked) {
    background: linear-gradient(135deg, rgba(139,105,20,0.2), rgba(218,165,32,0.3));
    border-color: var(--sheet-secondary-color);
    box-shadow: 
      0 0 10px rgba(218,165,32,0.4),
      inset 0 2px 4px rgba(139,105,20,0.1);
    transform: translateY(-1px);
  }
  
  .sheet-combat-v2-repos-option::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(218,165,32,0.2), transparent);
    transition: left 0.5s ease;
  }
  
  .sheet-combat-v2-repos-option:hover::before {
    left: 100%;
  }
  
  .sheet-combat-v2-repos-execrable:hover {
    background: linear-gradient(135deg, rgba(220,20,60,0.1), rgba(255,99,71,0.1));
    border-color: rgba(220,20,60,0.3);
  }
  
  .sheet-combat-v2-repos-mauvais:hover {
    background: linear-gradient(135deg, rgba(255,140,0,0.1), rgba(255,165,0,0.1));
    border-color: rgba(255,140,0,0.3);
  }
  
  .sheet-combat-v2-repos-normal:hover {
    background: linear-gradient(135deg, rgba(218,165,32,0.2), rgba(244,230,183,0.3));
    border-color: rgba(218,165,32,0.4);
  }
  
  .sheet-combat-v2-repos-bon:hover {
    background: linear-gradient(135deg, rgba(144,238,144,0.2), rgba(152,251,152,0.2));
    border-color: rgba(144,238,144,0.4);
  }
  
  .sheet-combat-v2-repos-apaisant:hover {
    background: linear-gradient(135deg, rgba(72,209,204,0.2), rgba(64,224,208,0.2));
    border-color: rgba(72,209,204,0.4);
  }
  
  .sheet-combat-v2-repos-option input[type="radio"] {
    display: none;
  }
  
  .sheet-combat-v2-repos-radio {
    width: 20px;
    height: 20px;
    border: 3px solid var(--sheet-accent-color);
    border-radius: 50%;
    margin-right: 12px;
    position: relative;
    background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(244,230,183,0.7));
    transition: var(--sheet-transition);
    box-shadow: inset 0 1px 3px rgba(139,69,19,0.2);
  }
  
  .sheet-combat-v2-repos-option input[type="radio"]:checked + .sheet-combat-v2-repos-radio {
    border-color: var(--sheet-secondary-color);
    background: linear-gradient(135deg, var(--sheet-secondary-color), var(--sheet-accent-color));
    box-shadow: 
      inset 0 1px 3px rgba(139,69,19,0.2),
      0 0 8px rgba(218,165,32,0.4);
  }
  
  .sheet-combat-v2-repos-option input[type="radio"]:checked + .sheet-combat-v2-repos-radio::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 8px;
    height: 8px;
    background: var(--sheet-light-bg);
    border-radius: 50%;
    box-shadow: 0 1px 2px rgba(0,0,0,0.3);
  }
  
  .sheet-combat-v2-repos-option input[type="radio"]:focus + .sheet-combat-v2-repos-radio {
    outline: 2px solid var(--sheet-secondary-color);
    outline-offset: 2px;
  }
  
  .sheet-combat-v2-repos-text {
    font-size: 13px;
    color: var(--sheet-dark-bg);
    font-weight: 600;
    flex: 1;
    font-family: 'Georgia', serif;
  }
  
  .sheet-combat-v2-repos-value {
    font-size: 12px;
    font-weight: bold;
    color: var(--sheet-accent-color);
    background: linear-gradient(135deg, rgba(244,230,183,0.6), rgba(222,184,135,0.4));
    padding: 2px 8px;
    border-radius: 12px;
    border: 1px solid rgba(139,69,19,0.2);
    margin-left: 8px;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ================================================================= */
  /* ==================== BONUS DES MODS - STRUCTURE MAINTENUE ===== */
  /* ================================================================= */
  
  .sheet-combat-v2-bonus-grid {
    padding: 20px;
    background: linear-gradient(135deg, rgba(244,230,183,0.03), rgba(230,214,144,0.02));
    width: 100%;
  }
  
  /* === CONTENEUR PRINCIPAL CENTRÉ === */
  .sheet-combat-v2-bonus-container-centered {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 15px;
    margin-bottom: 20px;
    flex-wrap: nowrap;
    width: 100%;
  }
  
  /* === SECTIONS DÉFENSE ET ATTAQUE ADAPTATIVES === */
  .sheet-combat-v2-bonus-section-defense,
  .sheet-combat-v2-bonus-section-attack {
    background: linear-gradient(135deg, rgba(222,184,135,0.25), rgba(210,180,140,0.2));
    border: 2px solid rgba(139,69,19,0.4);
    border-radius: 10px;
    padding: 16px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
    flex: 1;
    width: calc(50% - 7.5px);
    min-width: 0;
    text-align: center;
  }
  
  .sheet-combat-v2-bonus-section-defense:hover,
  .sheet-combat-v2-bonus-section-attack:hover {
    background: linear-gradient(135deg, rgba(222,184,135,0.35), rgba(210,180,140,0.3));
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    border-color: #cd853f;
  }
  
  /* === TITRES DES SECTIONS === */
  .sheet-combat-v2-bonus-section-title {
    background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
    color: #f4e6b7;
    padding: 10px 16px;
    margin: -16px -16px 16px -16px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 1px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    border-radius: 8px 8px 0 0;
    text-align: center;
    font-size: 14px;
    font-family: 'Georgia', serif;
  }
  
  /* === LIGNE DE STATISTIQUE OPTIMISÉE === */
  .sheet-combat-v2-bonus-stat-row {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 8px;
    align-items: center;
    padding: 10px 12px;
    background: linear-gradient(135deg, rgba(244,230,183,0.15), rgba(230,214,144,0.1));
    border: 1px solid rgba(139,69,19,0.3);
    border-radius: 6px;
    margin-bottom: 8px;
    transition: all 0.3s ease;
  }
  
  .sheet-combat-v2-bonus-stat-row:hover {
    background: linear-gradient(135deg, rgba(244,230,183,0.25), rgba(230,214,144,0.2));
    border-color: #cd853f;
    transform: translateX(2px);
  }
  
  /* === LABELS DES STATS OPTIMISÉS === */
  .sheet-combat-v2-bonus-stat-label {
    font-weight: bold;
    color: #2c1e0f;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: 'Georgia', serif;
    text-align: left;
    padding: 4px 8px;
    background: linear-gradient(135deg, rgba(139,105,20,0.1), rgba(107,79,16,0.08));
    border-radius: 4px;
    border: 1px solid rgba(139,69,19,0.2);
  }
  
  /* === INPUTS MODIFICATEURS COMPACTS === */
  .sheet-combat-v2-bonus-stat-input {
    position: relative;
    display: flex;
    justify-content: center;
  }
  
  .sheet-combat-v2-bonus-stat-input input[type="number"] {
    width: 60px;
    padding: 6px 8px;
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    border: 2px solid transparent;
    border-radius: 4px;
    color: #2c1e0f;
    font-family: 'Georgia', serif;
    font-size: 13px;
    font-weight: 700;
    text-align: center;
    transition: all 0.3s ease;
    outline: none;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);
  }
  
  .sheet-combat-v2-bonus-stat-input input[type="number"]:focus {
    border-color: #cd853f;
    background: linear-gradient(135deg, #f5e8c1, #e8d09a);
    box-shadow: 
      inset 0 1px 2px rgba(0,0,0,0.2),
      0 0 6px rgba(205,133,63,0.5);
    transform: translateY(-1px);
  }
  
  /* === AFFICHAGE TOTAL COMPACT - CORRIGÉ === */
  .sheet-combat-v2-bonus-stat-total {
    background: linear-gradient(135deg, #8b6914, #6b4f10);
    color: #f4e6b7;
    padding: 6px 16px; /* Augmenté de 12px à 16px */
    border-radius: 4px;
    font-weight: bold;
    text-align: center;
    font-size: 13px;
    min-width: 50px; /* Augmenté de 40px à 50px */
    box-shadow: 
      inset 0 1px 0 rgba(244,230,183,0.3),
      0 2px 4px rgba(0,0,0,0.3);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    font-family: 'Georgia', serif;
    border: 1px solid rgba(139,105,20,0.4);
  }
  
  /* === SECTION DÉTAILS BONUS === */
  .sheet-combat-v2-bonus-details {
    margin-top: 16px;
    background: rgba(255,255,255,0.7);
    border: 1px solid rgba(139,69,19,0.3);
    border-radius: 8px;
    overflow: hidden;
  }
  
  .sheet-combat-v2-bonus-details-title {
    background: linear-gradient(135deg, rgba(139,105,20,0.3), rgba(107,79,16,0.25));
    padding: 8px 12px;
    cursor: pointer;
    list-style: none;
    position: relative;
    font-weight: 600;
    color: #2c1e0f;
    text-shadow: 1px 1px 2px rgba(244,230,183,0.8);
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-family: 'Georgia', serif;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .sheet-combat-v2-bonus-details-content {
    padding: 15px;
  }
  
  /* === NOTES GÉNÉRALES === */
  .sheet-combat-v2-bonus-notes {
    margin-bottom: 20px;
  }
  
  .sheet-combat-v2-bonus-notes-label {
    font-weight: bold;
    color: #2c1e0f;
    margin-bottom: 8px;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: 'Georgia', serif;
  }
  
  .sheet-combat-v2-bonus-notes-textarea {
    width: 100%;
    min-height: 70px;
    padding: 12px 15px;
    background: linear-gradient(145deg, #fef9f0 0%, #f4e6b7 15%, #fdf6e3 35%, #f0e68c 60%, #f4e6b7 85%, #fef9f0 100%);
    border: 2px solid var(--sheet-accent-color);
    border-radius: 8px;
    color: #2c1e0f;
    font-family: 'Georgia', serif;
    font-size: 13px;
    font-weight: 600;
    line-height: 1.5;
    resize: vertical;
    transition: all 0.3s ease;
    outline: none;
    box-shadow: inset 0 2px 4px rgba(139,105,20,0.15);
  }
  
  .sheet-combat-v2-bonus-notes-textarea:focus {
    border-color: var(--sheet-secondary-color);
    box-shadow: 
      inset 0 2px 4px rgba(205,133,63,0.2),
      0 0 10px rgba(205,133,63,0.4);
    transform: translateY(-1px);
  }
  
  .sheet-combat-v2-bonus-notes-textarea::placeholder {
    color: rgba(44,30,15,0.5);
    font-style: italic;
    font-weight: 500;
  }
  
  /* === GRILLE BONUS DÉTAILLÉS AMÉLIORÉE === */
  .sheet-combat-v2-bonus-details-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 15px;
  }
  
  .sheet-combat-v2-bonus-detail-card {
    background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(244,230,183,0.8));
    border: 2px solid rgba(139,69,19,0.3);
    border-radius: 10px;
    overflow: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 2px 6px rgba(139,69,19,0.2);
    position: relative;
  }
  
  .sheet-combat-v2-bonus-detail-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--sheet-accent-color), var(--sheet-secondary-color), var(--sheet-accent-color));
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .sheet-combat-v2-bonus-detail-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(139,69,19,0.3);
    border-color: var(--sheet-secondary-color);
  }
  
  .sheet-combat-v2-bonus-detail-card:hover::before {
    opacity: 1;
  }
  
  .sheet-combat-v2-bonus-detail-header {
    background: linear-gradient(135deg, rgba(139,105,20,0.8), rgba(107,79,16,0.7));
    color: var(--sheet-light-bg);
    padding: 10px 15px;
    font-weight: bold;
    text-align: center;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: 'Georgia', serif;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    border-bottom: 1px solid rgba(139,69,19,0.3);
  }
  
  .sheet-combat-v2-bonus-detail-content {
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
  }
  
  .sheet-combat-v2-bonus-detail-name {
    background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(244,230,183,0.6));
    border: 2px solid rgba(139,69,19,0.2);
    border-radius: 6px;
    padding: 8px 12px;
    font-size: 12px;
    color: #2c1e0f;
    font-family: 'Georgia', serif;
    font-weight: 600;
    transition: all 0.3s ease;
    outline: none;
    width: 100%;
    text-align: center;
  }
  
  .sheet-combat-v2-bonus-detail-name:focus {
    border-color: var(--sheet-secondary-color);
    background: linear-gradient(135deg, rgba(255,255,255,1), rgba(244,230,183,0.8));
    box-shadow: 0 0 8px rgba(205,133,63,0.4);
    transform: translateY(-1px);
  }
  
  /* === VALEUR BONUS DÉTAILLÉE - CORRIGÉE === */
  .sheet-combat-v2-bonus-detail-value {
    background: linear-gradient(135deg, #cd853f, #daa520);
    border: 2px solid rgba(139,69,19,0.3);
    border-radius: 6px;
    padding: 8px 10px; /* Réduit de 12px à 10px sur les côtés */
    font-size: 14px;
    color: #f4e6b7;
    font-family: 'Georgia', serif;
    font-weight: bold;
    text-align: center;
    transition: all 0.3s ease;
    outline: none;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    width: 100px; /* Augmenté de 80px à 100px */
    box-sizing: border-box; /* Inclut padding et border dans la largeur */
    min-width: 100px; /* Assure une largeur minimale */
  }
  
  .sheet-combat-v2-bonus-detail-value:focus {
    border-color: #f4e6b7;
    box-shadow: 0 0 8px rgba(244,230,183,0.6);
    transform: translateY(-1px);
  }
  
  .sheet-combat-v2-bonus-detail-value::placeholder {
    color: rgba(244,230,183,0.7);
    font-weight: normal;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  /* ================================================================= */
  /* ==================== TECHNIQUES DE COMBAT THÈME BRUN ==================== */
  /* ================================================================= */
  
  .sheet-combat-v2-techniques-container {
    margin-bottom: 25px;
  }
  
  .sheet-combat-v2-techniques-wrapper {
    background: linear-gradient(145deg, rgba(244,230,183,0.9), rgba(222,184,135,0.8));
    border: 2px solid var(--sheet-primary-color);
    border-radius: var(--sheet-border-radius);
    box-shadow: var(--sheet-box-shadow);
  }
  
  .sheet-combat-v2-technique {
    margin: 15px;
    border: 2px solid rgba(139,69,19,0.3);
    border-radius: var(--sheet-border-radius);
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.8));
    box-shadow: 0 3px 8px rgba(139,69,19,0.2);
    overflow: hidden;
  }
  
  .sheet-combat-v2-technique-title {
    background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914);
    padding: 15px 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    color: var(--sheet-light-bg);
    text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
    text-align: center;
    font-family: 'Georgia', serif;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    font-weight: bold;
    font-size: 14px;
    border-bottom: 2px solid rgba(139,69,19,0.3);
    position: relative;
    overflow: hidden;
  }
  
  .sheet-combat-v2-technique-title::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(244,230,183,0.2), transparent);
    transition: left 0.6s ease;
  }
  
  .sheet-combat-v2-technique-title:hover::before {
    left: 100%;
  }
  
  .sheet-combat-v2-technique-name {
    flex: 1;
    padding: 10px 15px;
    border: 2px solid rgba(244,230,183,0.8);
    border-radius: 6px;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.9));
    font-weight: bold;
    color: var(--sheet-primary-color);
    font-family: 'Georgia', serif;
    transition: all 0.3s ease;
    text-align: center;
  }
  
  .sheet-combat-v2-technique-name:focus {
    border-color: var(--sheet-secondary-color);
    background: rgba(255,255,255,1);
    box-shadow: 0 0 10px rgba(218,165,32,0.5);
    outline: none;
  }
  
  .sheet-combat-v2-technique-btn {
    padding: 10px 20px;
    background: linear-gradient(135deg, rgba(139,105,20,0.9), rgba(107,79,16,0.8));
    border: 2px solid rgba(244,230,183,0.8);
    border-radius: 8px;
    color: var(--sheet-light-bg);
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    box-shadow: 0 3px 6px rgba(0,0,0,0.3);
    backdrop-filter: blur(2px);
    position: relative;
    z-index: 1;
  }
  
  .sheet-combat-v2-technique-btn:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 6px 12px rgba(0,0,0,0.4);
    background: linear-gradient(135deg, var(--sheet-secondary-color), var(--sheet-accent-color));
    border-color: var(--sheet-light-bg);
  }
  
  .sheet-combat-v2-technique-btn:focus {
    outline: 2px solid var(--sheet-light-bg);
    outline-offset: 2px;
  }
  
  .sheet-combat-v2-technique-details {
    padding: 20px;
    background: linear-gradient(135deg, rgba(255,255,255,0.8), rgba(244,230,183,0.6));
  }
  
  .sheet-combat-v2-technique-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.8));
    border-radius: var(--sheet-border-radius);
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(139,69,19,0.2);
    border: 2px solid rgba(139,69,19,0.3);
  }
  
  .sheet-combat-v2-technique-table th {
    background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914);
    color: var(--sheet-light-bg);
    padding: 12px 10px;
    font-weight: bold;
    text-align: center;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: 'Georgia', serif;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    border-bottom: 2px solid var(--sheet-primary-color);
  }
  
  .sheet-combat-v2-technique-table td {
    padding: 10px 8px;
    border-bottom: 1px solid rgba(139,69,19,0.2);
    vertical-align: middle;
    background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(244,230,183,0.7));
  }
  
  .sheet-combat-v2-technique-table tr:hover td {
    background: linear-gradient(135deg, rgba(218,165,32,0.1), rgba(244,230,183,0.3));
    transform: translateX(2px);
  }
  
  .sheet-combat-v2-short-input {
    width: 70px !important;
    text-align: center;
    padding: 8px 6px !important;
    font-weight: bold;
    background: linear-gradient(135deg, rgba(218,165,32,0.2), rgba(244,230,183,0.4)) !important;
    border: 2px solid rgba(139,69,19,0.3) !important;
  }
  
  .sheet-combat-v2-nature-input {
    width: 140px;
    background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(244,230,183,0.6)) !important;
  }
  
  .sheet-combat-v2-technique-table input {
    width: 100%;
    padding: 8px 10px;
    border: 2px solid rgba(139,69,19,0.2);
    border-radius: 6px;
    background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(244,230,183,0.6));
    font-size: 12px;
    font-family: 'Georgia', serif;
    transition: all 0.3s ease;
    outline: none;
  }
  
  .sheet-combat-v2-technique-table input:focus {
    border-color: var(--sheet-secondary-color);
    background: linear-gradient(135deg, rgba(255,255,255,1), rgba(244,230,183,0.8));
    box-shadow: 0 0 8px rgba(218,165,32,0.4);
    transform: translateY(-1px);
  }
  
  /* === SECTION EFFET TECHNIQUE ENRICHIE === */
  .sheet-combat-v2-effet-section {
    background: linear-gradient(135deg, rgba(244,230,183,0.95), rgba(222,184,135,0.85));
    border: 2px solid rgba(139,69,19,0.4);
    border-radius: var(--sheet-border-radius);
    padding: 12px;
    box-shadow: 
      inset 0 1px 2px rgba(255,255,255,0.5),
      0 2px 6px rgba(139,69,19,0.2);
    position: relative;
    overflow: hidden;
  }
  
  .sheet-combat-v2-effet-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, 
      transparent,
      var(--sheet-secondary-color),
      transparent);
  }
  
  .sheet-combat-v2-effet-title {
    font-weight: bold;
    color: var(--sheet-primary-color);
    margin-bottom: 10px;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    font-family: 'Georgia', serif;
    text-align: center;
    text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
    position: relative;
  }
  
  .sheet-combat-v2-effet-title::before {
    content: '⚡';
    position: absolute;
    left: 20px;
    font-size: 16px;
  }
  
  .sheet-combat-v2-effet-title::after {
    content: '⚡';
    position: absolute;
    right: 20px;
    font-size: 16px;
  }
  
  .sheet-combat-v2-effet-content {
    display: flex;
    flex-direction: column;
  }
  
  .sheet-combat-v2-effet-textarea {
    width: 100%;
    min-height: 70px;
    padding: 10px 12px;
    border: 2px solid rgba(139,69,19,0.3);
    border-radius: 6px;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.8));
    resize: vertical;
    font-family: 'Georgia', serif;
    font-size: 12px;
    line-height: 1.5;
    transition: all 0.3s ease;
    outline: none;
    box-shadow: inset 0 2px 4px rgba(139,69,19,0.15);
  }
  
  .sheet-combat-v2-effet-textarea:focus {
    border-color: var(--sheet-secondary-color);
    background: linear-gradient(135deg, rgba(255,255,255,1), rgba(244,230,183,0.9));
    box-shadow: 
      inset 0 2px 4px rgba(139,69,19,0.15),
      0 0 10px rgba(218,165,32,0.5);
    transform: translateY(-1px);
  }
  
  /* ================================================================= */
  /* ==================== CLASSE D'ARME OPTIMISÉE ==================== */
  /* ================================================================= */
  
  .sheet-combat-v2-wrapper {
    background: linear-gradient(145deg, rgba(244,230,183,0.9), rgba(222,184,135,0.8));
    border: 2px solid #8b6914;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    margin-bottom: 16px;
    overflow: hidden;
  }
  
  .sheet-combat-v2-title {
    background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
    color: #f4e6b7;
    padding: 12px 16px;
    font-weight: bold;
    font-size: 16px;
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    transition: all 0.3s ease;
    list-style: none;
  }
  
  .sheet-combat-v2-title::-webkit-details-marker {
    display: none;
  }
  
  .sheet-combat-v2-title::marker {
    display: none;
  }
  
  .sheet-combat-v2-title:hover {
    background: linear-gradient(90deg, #cd853f, #8b6914, #cd853f);
  }
  
  .sheet-combat-v2-weapon-columns {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    padding: 20px;
    background: rgba(244,230,183,0.1);
  }
  
  /* Responsive */
  @media (max-width: 1400px) {
    .sheet-combat-v2-weapon-columns {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  @media (max-width: 768px) {
    .sheet-combat-v2-weapon-columns {
      grid-template-columns: 1fr;
    }
  }
  
  .sheet-combat-v2-weapon-card {
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.8));
    border: 2px solid rgba(139,69,19,0.3);
    border-radius: 12px;
    padding: 16px;
    box-shadow: 0 3px 10px rgba(139,69,19,0.2);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .sheet-combat-v2-weapon-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #daa520, #cd853f, #daa520);
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .sheet-combat-v2-weapon-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 16px rgba(139,69,19,0.35);
    border-color: #cd853f;
  }
  
  .sheet-combat-v2-weapon-card:hover::before {
    opacity: 1;
  }
  
  .sheet-combat-v2-weapon-field {
    margin-bottom: 12px;
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  
  .sheet-combat-v2-weapon-field:last-child {
    margin-bottom: 0;
  }
  
  .sheet-combat-v2-weapon-label {
    font-weight: bold;
    color: #654321;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: 'Georgia', serif;
    text-align: center;
    background: linear-gradient(135deg, rgba(139,105,20,0.15), rgba(107,79,16,0.1));
    padding: 6px 10px;
    border-radius: 6px;
    border: 1px solid rgba(139,69,19,0.2);
    text-shadow: 0 1px 1px rgba(255,255,255,0.5);
  }
  
  /* === CHAMP PERSONNALISÉ CACHÉ PAR DÉFAUT === */
  .sheet-weapon-custom-field {
    display: none;
    animation: slideDown 0.3s ease-out;
  }
  
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* === SELECT TYPE D'ARME - CORRIGÉ === */
  .sheet-combat-v2-weapon-select-type {
    width: 100%;
    padding: 10px 12px;
    border: 2px solid rgba(139,69,19,0.4);
    border-radius: 6px;
    background: #ffffff; /* Fond blanc simple au lieu de gradient */
    color: #2c1e0f; /* Couleur très foncée pour contraste */
    font-family: 'Georgia', serif;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    outline: none;
    box-shadow: inset 0 1px 3px rgba(139,69,19,0.1);
    min-height: 40px; /* Hauteur minimale */
    line-height: 1.4; /* Line-height pour centrage vertical */
    display: block; /* Display block au lieu de flex */
  }
  
  .sheet-combat-v2-weapon-select-type:focus {
    border-color: #cd853f;
    background: #fff;
    box-shadow: 0 0 8px rgba(205,133,63,0.4);
    transform: translateY(-1px);
  }
  
  .sheet-combat-v2-weapon-select-type:hover {
    background: #f4e6b7;
    border-color: #8b6914;
  }
  
  /* Options du select */
  .sheet-combat-v2-weapon-select-type option {
    background: #ffffff; /* Fond blanc pour les options */
    color: #2c1e0f; /* Texte noir */
    font-weight: 600;
    padding: 8px 12px;
    font-size: 13px;
  }
  
  .sheet-combat-v2-weapon-select-type option:first-child {
    color: #999; /* Gris pour "-- Sélectionner --" */
  }
  
  /* caché par défaut */
  .sheet-weapon-custom-field { display: none; }
  
  /* afficher si le flag caché est à 1 (le hidden est juste avant) */
  input[name="attr_weapon_custom1_show"][value="1"] + .sheet-weapon-custom-field { display: block; }
  input[name="attr_weapon_custom2_show"][value="1"] + .sheet-weapon-custom-field { display: block; }
  input[name="attr_weapon_custom3_show"][value="1"] + .sheet-weapon-custom-field { display: block; }
  input[name="attr_weapon_custom4_show"][value="1"] + .sheet-weapon-custom-field { display: block; }
  
  
  /* === INPUT STANDARD === */
  .sheet-combat-v2-weapon-input {
    width: 100%;
    padding: 10px 12px;
    border: 2px solid rgba(139,69,19,0.3);
    border-radius: 6px;
    background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(244,230,183,0.6));
    font-family: 'Georgia', serif;
    font-size: 13px;
    transition: all 0.3s ease;
    outline: none;
    text-align: center;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
  }
  
  .sheet-combat-v2-weapon-input:focus {
    border-color: #cd853f;
    background: linear-gradient(135deg, rgba(255,255,255,1), rgba(244,230,183,0.8));
    box-shadow: 0 0 8px rgba(218,165,32,0.4);
    transform: translateY(-1px);
  }
  
  /* === SELECT CLASSE === */
  .sheet-combat-v2-weapon-select {
    width: 100%;
    padding: 12px 15px;
    border: 3px solid rgba(139,69,19,0.5);
    border-radius: 8px;
    background: linear-gradient(135deg, rgba(255,255,255,0.98), rgba(244,230,183,0.95));
    color: #654321;
    font-family: 'Georgia', serif;
    font-size: 15px;
    font-weight: bold;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    outline: none;
    box-shadow: 
      inset 0 2px 4px rgba(139,69,19,0.1),
      0 2px 6px rgba(139,69,19,0.2);
    text-shadow: 1px 1px 2px rgba(244,230,183,0.8);
    min-height: 48px;
    line-height: 1.3;
  }
  
  .sheet-combat-v2-weapon-select:focus {
    border-color: #cd853f;
    background: linear-gradient(135deg, rgba(255,255,255,1), rgba(244,230,183,1));
    box-shadow: 
      inset 0 2px 4px rgba(139,69,19,0.1),
      0 0 12px rgba(218,165,32,0.6),
      0 4px 8px rgba(139,69,19,0.3);
    transform: translateY(-2px) scale(1.02);
  }
  
  .sheet-combat-v2-weapon-select:hover {
    background: linear-gradient(135deg, rgba(244,230,183,0.3), rgba(222,184,135,0.2));
    border-color: #8b6914;
    transform: translateY(-1px);
  }
  
  .sheet-combat-v2-weapon-select option {
    background: rgba(44, 30, 15, 0.95);
    color: #f4e6b7;
    font-weight: bold;
    padding: 12px 20px;
    font-size: 14px;
    text-align: center;
    font-family: 'Georgia', serif;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .sheet-combat-v2-weapon-select option:checked,
  .sheet-combat-v2-weapon-select option:hover {
    background: linear-gradient(135deg, #cd853f, #daa520);
    color: #fff;
  }
  /* Champ "Nom personnalisé" caché par défaut */
    .sheet-weapon-custom-field { display: none; }
    /* Afficher quand le flag caché de la colonne vaut 1 (le hidden est juste avant) */
    input[name="attr_weapon_custom1_show"][value="1"] + .sheet-weapon-custom-field { display: block; }
    input[name="attr_weapon_custom2_show"][value="1"] + .sheet-weapon-custom-field { display: block; }
    input[name="attr_weapon_custom3_show"][value="1"] + .sheet-weapon-custom-field { display: block; }
    input[name="attr_weapon_custom4_show"][value="1"] + .sheet-weapon-custom-field { display: block; }
  
    /* Bonus en lecture seule (visuel doux) */
    .sheet-bonus-readonly[readonly] {
      background: #efe6d8;
      color: #2a1b10;
      opacity: 0.95;
      cursor: not-allowed;
    }
  
  
  
  
  
  
  
  
  
  /* ================================================================= */
  /* ==================== RÉSISTANCES MAGIQUES - COULEURS PERMANENTES + ANIMATIONS ==================== */
  /* ================================================================= */
  
  .sheet-combat-v2-resistances {
    background: linear-gradient(145deg, rgba(244,230,183,0.9), rgba(222,184,135,0.8));
    border: 2px solid var(--sheet-primary-color);
    border-radius: var(--sheet-border-radius);
    box-shadow: var(--sheet-box-shadow);
  }
  
  .sheet-combat-v2-resistances-table {
    width: 100%;
    border-collapse: collapse;
    margin: 15px 0;
    max-width: 100%;
    table-layout: fixed;
  }
  
  .sheet-combat-v2-res-cell {
    border: 2px solid transparent;
    border-radius: var(--sheet-border-radius);
    padding: 10px;
    margin: 0;
    text-align: center;
    vertical-align: middle;
    position: relative;
    width: 25%;
    transition: all 0.4s ease;
    box-sizing: border-box;
  }
  
  /* Animation au survol seulement */
  .sheet-combat-v2-res-cell:hover {
    transform: scale(1.05) translateY(-2px);
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    z-index: 10;
    position: relative;
  }
  
  .sheet-combat-v2-res-label {
    font-weight: bold;
    font-size: 11px;
    margin-bottom: 6px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  
  .sheet-combat-v2-res-input-wrap {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
  }
  
  .sheet-combat-v2-res-input {
    width: 55px;
    padding: 6px 8px;
    border: 2px solid rgba(255,255,255,0.8);
    border-radius: 6px;
    text-align: center;
    background: rgba(255,255,255,0.95);
    font-weight: bold;
    font-size: 12px;
    transition: all 0.3s ease;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
  }
  
  .sheet-combat-v2-res-input:focus {
    outline: none;
    border-color: rgba(255,255,255,1);
    background: rgba(255,255,255,1);
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 0 10px rgba(255,255,255,0.8);
    transform: scale(1.05);
  }
  
  .sheet-combat-v2-res-input-wrap span {
    font-weight: bold;
    font-size: 12px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  
  /* === COULEURS PERMANENTES AVEC CONTRASTE ÉLEVÉ === */
  
  /* Magie pure - Bleu royal profond */
  .sheet-combat-v2-res-magie-pure {
    background: linear-gradient(145deg, rgba(13, 71, 161, 0.85), rgba(25, 118, 210, 0.75)) !important;
    color: white !important;
    border-color: rgba(13, 71, 161, 0.6) !important;
  }
  .sheet-combat-v2-res-magie-pure .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-magie-pure .sheet-combat-v2-res-input-wrap span {
    color: white !important;
  }
  .sheet-combat-v2-res-magie-pure:hover {
    background: linear-gradient(145deg, rgba(13, 71, 161, 0.95), rgba(25, 118, 210, 0.85)) !important;
    border-color: rgba(13, 71, 161, 0.8) !important;
    box-shadow: 0 8px 20px rgba(13, 71, 161, 0.6) !important;
  }
  
  /* Feu - Rouge-orange vif */
  .sheet-combat-v2-res-feu {
    background: linear-gradient(145deg, rgba(255, 69, 0, 0.85), rgba(255, 140, 0, 0.75)) !important;
    color: white !important;
    border-color: rgba(255, 69, 0, 0.6) !important;
  }
  .sheet-combat-v2-res-feu .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-feu .sheet-combat-v2-res-input-wrap span {
    color: white !important;
  }
  .sheet-combat-v2-res-feu:hover {
    background: linear-gradient(145deg, rgba(255, 69, 0, 0.95), rgba(255, 140, 0, 0.85)) !important;
    border-color: rgba(255, 69, 0, 0.8) !important;
    box-shadow: 0 8px 20px rgba(255, 69, 0, 0.6) !important;
  }
  
  /* Eau - Bleu océan */
  .sheet-combat-v2-res-eau {
    background: linear-gradient(145deg, rgba(30, 144, 255, 0.85), rgba(100, 149, 237, 0.75)) !important;
    color: white !important;
    border-color: rgba(30, 144, 255, 0.6) !important;
  }
  .sheet-combat-v2-res-eau .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-eau .sheet-combat-v2-res-input-wrap span {
    color: white !important;
  }
  .sheet-combat-v2-res-eau:hover {
    background: linear-gradient(145deg, rgba(30, 144, 255, 0.95), rgba(100, 149, 237, 0.85)) !important;
    border-color: rgba(30, 144, 255, 0.8) !important;
    box-shadow: 0 8px 20px rgba(30, 144, 255, 0.6) !important;
  }
  
  /* Vent - Bleu ciel clair */
  .sheet-combat-v2-res-vent {
    background: linear-gradient(145deg, rgba(135, 206, 235, 0.85), rgba(176, 224, 230, 0.75)) !important;
    color: #2c1810 !important;
    border-color: rgba(135, 206, 235, 0.6) !important;
  }
  .sheet-combat-v2-res-vent .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-vent .sheet-combat-v2-res-input-wrap span {
    color: #2c1810 !important;
    text-shadow: 1px 1px 2px rgba(255,255,255,0.8) !important;
  }
  .sheet-combat-v2-res-vent:hover {
    background: linear-gradient(145deg, rgba(135, 206, 235, 0.95), rgba(176, 224, 230, 0.85)) !important;
    border-color: rgba(135, 206, 235, 0.8) !important;
    box-shadow: 0 8px 20px rgba(135, 206, 235, 0.6) !important;
  }
  
  /* Terre - Marron terreux */
  .sheet-combat-v2-res-terre {
    background: linear-gradient(145deg, rgba(139, 69, 19, 0.85), rgba(160, 82, 45, 0.75)) !important;
    color: white !important;
    border-color: rgba(139, 69, 19, 0.6) !important;
  }
  .sheet-combat-v2-res-terre .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-terre .sheet-combat-v2-res-input-wrap span {
    color: white !important;
  }
  .sheet-combat-v2-res-terre:hover {
    background: linear-gradient(145deg, rgba(139, 69, 19, 0.95), rgba(160, 82, 45, 0.85)) !important;
    border-color: rgba(139, 69, 19, 0.8) !important;
    box-shadow: 0 8px 20px rgba(139, 69, 19, 0.6) !important;
  }
  
  /* Foudre - Jaune électrique */
  .sheet-combat-v2-res-foudre {
    background: linear-gradient(145deg, rgba(255, 215, 0, 0.85), rgba(255, 255, 0, 0.75)) !important;
    color: #2c1810 !important;
    border-color: rgba(255, 215, 0, 0.6) !important;
  }
  .sheet-combat-v2-res-foudre .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-foudre .sheet-combat-v2-res-input-wrap span {
    color: #2c1810 !important;
    text-shadow: 1px 1px 2px rgba(255,255,255,0.8) !important;
  }
  .sheet-combat-v2-res-foudre:hover {
    background: linear-gradient(145deg, rgba(255, 215, 0, 0.95), rgba(255, 255, 0, 0.85)) !important;
    border-color: rgba(255, 215, 0, 0.8) !important;
    box-shadow: 0 8px 20px rgba(255, 215, 0, 0.6) !important;
  }
  
  /* Glace - Bleu glacé */
  .sheet-combat-v2-res-glace {
    background: linear-gradient(145deg, rgba(173, 216, 230, 0.85), rgba(224, 255, 255, 0.75)) !important;
    color: #2c1810 !important;
    border-color: rgba(173, 216, 230, 0.6) !important;
  }
  .sheet-combat-v2-res-glace .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-glace .sheet-combat-v2-res-input-wrap span {
    color: #2c1810 !important;
    text-shadow: 1px 1px 2px rgba(255,255,255,0.8) !important;
  }
  .sheet-combat-v2-res-glace:hover {
    background: linear-gradient(145deg, rgba(173, 216, 230, 0.95), rgba(224, 255, 255, 0.85)) !important;
    border-color: rgba(173, 216, 230, 0.8) !important;
    box-shadow: 0 8px 20px rgba(173, 216, 230, 0.6) !important;
  }
  
  /* Sang - Rouge sombre */
  .sheet-combat-v2-res-sang {
    background: linear-gradient(145deg, rgba(139, 0, 0, 0.85), rgba(178, 34, 34, 0.75)) !important;
    color: white !important;
    border-color: rgba(139, 0, 0, 0.6) !important;
  }
  .sheet-combat-v2-res-sang .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-sang .sheet-combat-v2-res-input-wrap span {
    color: white !important;
  }
  .sheet-combat-v2-res-sang:hover {
    background: linear-gradient(145deg, rgba(139, 0, 0, 0.95), rgba(178, 34, 34, 0.85)) !important;
    border-color: rgba(139, 0, 0, 0.8) !important;
    box-shadow: 0 8px 20px rgba(139, 0, 0, 0.6) !important;
  }
  
  /* Toxine - Vert acide */
  .sheet-combat-v2-res-toxine {
    background: linear-gradient(145deg, rgba(154, 205, 50, 0.85), rgba(173, 255, 47, 0.75)) !important;
    color: #2c1810 !important;
    border-color: rgba(154, 205, 50, 0.6) !important;
  }
  .sheet-combat-v2-res-toxine .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-toxine .sheet-combat-v2-res-input-wrap span {
    color: #2c1810 !important;
    text-shadow: 1px 1px 2px rgba(255,255,255,0.8) !important;
  }
  .sheet-combat-v2-res-toxine:hover {
    background: linear-gradient(145deg, rgba(154, 205, 50, 0.95), rgba(173, 255, 47, 0.85)) !important;
    border-color: rgba(154, 205, 50, 0.8) !important;
    box-shadow: 0 8px 20px rgba(154, 205, 50, 0.6) !important;
  }
  
  /* Ombre - Gris sombre */
  .sheet-combat-v2-res-ombre {
    background: linear-gradient(145deg, rgba(105, 105, 105, 0.85), rgba(128, 128, 128, 0.75)) !important;
    color: white !important;
    border-color: rgba(105, 105, 105, 0.6) !important;
  }
  .sheet-combat-v2-res-ombre .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-ombre .sheet-combat-v2-res-input-wrap span {
    color: white !important;
  }
  .sheet-combat-v2-res-ombre:hover {
    background: linear-gradient(145deg, rgba(105, 105, 105, 0.95), rgba(128, 128, 128, 0.85)) !important;
    border-color: rgba(105, 105, 105, 0.8) !important;
    box-shadow: 0 8px 20px rgba(105, 105, 105, 0.6) !important;
  }
  
  /* Ténèbres - Noir profond */
  .sheet-combat-v2-res-tenebres {
    background: linear-gradient(145deg, rgba(25, 25, 25, 0.85), rgba(47, 47, 47, 0.75)) !important;
    color: white !important;
    border-color: rgba(25, 25, 25, 0.6) !important;
  }
  .sheet-combat-v2-res-tenebres .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-tenebres .sheet-combat-v2-res-input-wrap span {
    color: white !important;
  }
  .sheet-combat-v2-res-tenebres:hover {
    background: linear-gradient(145deg, rgba(25, 25, 25, 0.95), rgba(47, 47, 47, 0.85)) !important;
    border-color: rgba(25, 25, 25, 0.8) !important;
    box-shadow: 0 8px 20px rgba(25, 25, 25, 0.6) !important;
  }
  
  /* Lumière - Jaune doré brillant */
  .sheet-combat-v2-res-lumiere {
    background: linear-gradient(145deg, rgba(255, 255, 224, 0.85), rgba(255, 250, 205, 0.75)) !important;
    color: #2c1810 !important;
    border-color: rgba(255, 255, 224, 0.6) !important;
  }
  .sheet-combat-v2-res-lumiere .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-lumiere .sheet-combat-v2-res-input-wrap span {
    color: #2c1810 !important;
    text-shadow: 1px 1px 2px rgba(255,255,255,0.8) !important;
  }
  .sheet-combat-v2-res-lumiere:hover {
    background: linear-gradient(145deg, rgba(255, 255, 224, 0.95), rgba(255, 250, 205, 0.85)) !important;
    border-color: rgba(255, 255, 224, 0.8) !important;
    box-shadow: 0 8px 20px rgba(255, 255, 224, 0.6) !important;
  }
  
  /* Végétation - Vert forêt */
  .sheet-combat-v2-res-vegetation {
    background: linear-gradient(145deg, rgba(34, 139, 34, 0.85), rgba(46, 204, 113, 0.75)) !important;
    color: white !important;
    border-color: rgba(34, 139, 34, 0.6) !important;
  }
  .sheet-combat-v2-res-vegetation .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-vegetation .sheet-combat-v2-res-input-wrap span {
    color: white !important;
  }
  .sheet-combat-v2-res-vegetation:hover {
    background: linear-gradient(145deg, rgba(34, 139, 34, 0.95), rgba(46, 204, 113, 0.85)) !important;
    border-color: rgba(34, 139, 34, 0.8) !important;
    box-shadow: 0 8px 20px rgba(34, 139, 34, 0.6) !important;
  }
  
  /* Nécrotique - Vert cadavre */
  .sheet-combat-v2-res-necrotique {
    background: linear-gradient(145deg, rgba(85, 107, 47, 0.85), rgba(107, 142, 35, 0.75)) !important;
    color: white !important;
    border-color: rgba(85, 107, 47, 0.6) !important;
  }
  .sheet-combat-v2-res-necrotique .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-necrotique .sheet-combat-v2-res-input-wrap span {
    color: white !important;
  }
  .sheet-combat-v2-res-necrotique:hover {
    background: linear-gradient(145deg, rgba(85, 107, 47, 0.95), rgba(107, 142, 35, 0.85)) !important;
    border-color: rgba(85, 107, 47, 0.8) !important;
    box-shadow: 0 8px 20px rgba(85, 107, 47, 0.6) !important;
  }
  
  /* Corruption - Violet sombre */
  .sheet-combat-v2-res-corruption {
    background: linear-gradient(145deg, rgba(75, 0, 130, 0.85), rgba(138, 43, 226, 0.75)) !important;
    color: white !important;
    border-color: rgba(75, 0, 130, 0.6) !important;
  }
  .sheet-combat-v2-res-corruption .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-corruption .sheet-combat-v2-res-input-wrap span {
    color: white !important;
  }
  .sheet-combat-v2-res-corruption:hover {
    background: linear-gradient(145deg, rgba(75, 0, 130, 0.95), rgba(138, 43, 226, 0.85)) !important;
    border-color: rgba(75, 0, 130, 0.8) !important;
    box-shadow: 0 8px 20px rgba(75, 0, 130, 0.6) !important;
  }
  
  /* Abysses - Bleu sombre profond */
  .sheet-combat-v2-res-abysses {
    background: linear-gradient(145deg, rgba(19, 38, 77, 0.85), rgba(25, 51, 102, 0.75)) !important;
    color: white !important;
    border-color: rgba(19, 38, 77, 0.6) !important;
  }
  .sheet-combat-v2-res-abysses .sheet-combat-v2-res-label,
  .sheet-combat-v2-res-abysses .sheet-combat-v2-res-input-wrap span {
    color: white !important;
  }
  .sheet-combat-v2-res-abysses:hover {
    background: linear-gradient(145deg, rgba(19, 38, 77, 0.95), rgba(25, 51, 102, 0.85)) !important;
    border-color: rgba(19, 38, 77, 0.8) !important;
    box-shadow: 0 8px 20px rgba(19, 38, 77, 0.6) !important;
  }
  
  .sheet-combat-v2-res-cell-empty {
    border: none !important;
    background: transparent !important;
    animation: none !important;
  }
  
  .sheet-combat-v2-res-cell-empty:hover {
    transform: none !important;
    box-shadow: none !important;
  }
  
  /* ================================================================= */
  /* ==================== RESPONSIVE DESIGN ==================== */
  /* ================================================================= */
  
  @media (max-width: 768px) {
    .sheet-combat-v2-repos-options {
      grid-template-columns: 1fr;
    }
    
    .sheet-combat-v2-weapon-columns {
      grid-template-columns: 1fr;
    }
    
    .sheet-combat-v2-reserve-grid {
      grid-template-columns: 1fr;
    }
    
    .sheet-combat-v2-resistances-table {
      font-size: 10px;
    }
    
    .sheet-combat-v2-res-cell {
      min-width: 90px;
      padding: 6px;
    }
    
    .sheet-combat-v2-res-input {
      width: 40px;
    }
    
    .sheet-combat-v2-bonus-container-centered {
      flex-direction: column;
      align-items: stretch;
      gap: 15px;
    }
    
    .sheet-combat-v2-bonus-section-defense,
    .sheet-combat-v2-bonus-section-attack {
      width: 100%;
      min-width: 100%;
      max-width: 100%;
    }
    
    .sheet-combat-v2-bonus-details-grid {
      grid-template-columns: 1fr;
    }
    
    .sheet-combat-v2-rolls-table {
      font-size: 12px;
    }
    
    .sheet-combat-v2-rolls-table th,
    .sheet-combat-v2-rolls-table td {
      padding: 6px 4px;
    }
    
    .sheet-combat-v2-checkmark {
      width: 20px !important;
      height: 20px !important;
    }
    
    .sheet-combat-v2-resistance-title ~ .sheet-combat-v2-macros-sub-content .sheet-combat-v2-table-header-name {
      width: 40%;
    }
    
    .sheet-combat-v2-resistance-title ~ .sheet-combat-v2-macros-sub-content .sheet-combat-v2-table-header-dice {
      width: 35%;
    }
    
    .sheet-combat-v2-resistance-title ~ .sheet-combat-v2-macros-sub-content .sheet-combat-v2-table-header-activation {
      width: 25%;
    }
    
    .sheet-combat-v2-attack-title ~ .sheet-combat-v2-macros-sub-content .sheet-combat-v2-table-header-name {
      width: 25%;
    }
    
    .sheet-combat-v2-attack-title ~ .sheet-combat-v2-macros-sub-content .sheet-combat-v2-table-header-dice {
      width: 25%;
    }
    
    .sheet-combat-v2-attack-title ~ .sheet-combat-v2-macros-sub-content .sheet-combat-v2-table-header-nature {
      width: 30%;
    }
    
    .sheet-combat-v2-attack-title ~ .sheet-combat-v2-macros-sub-content .sheet-combat-v2-table-header-activation {
      width: 20%;
    }
  }
  
  @media (max-width: 480px) {
    .sheet-tab-content.sheet-combat {
      padding: 10px;
    }
    
    .sheet-combat-v2-macro-summary {
      flex-direction: column;
      gap: 8px;
    }
    
    .sheet-combat-v2-technique-title {
      flex-direction: column;
      gap: 8px;
    }
    
    .sheet-combat-v2-bonus-details-grid {
      grid-template-columns: 1fr;
    }
    
    .sheet-combat-v2-weapon-card {
      transform: scale(1);
    }
    
    .sheet-combat-v2-res-cell:hover {
      transform: scale(1.04) translateY(-1px);
    }
    
    .sheet-combat-v2-rolls-table {
      font-size: 11px;
    }
    
    .sheet-combat-v2-rolls-table th,
    .sheet-combat-v2-rolls-table td {
      padding: 4px 2px;
    }
    
    .sheet-combat-v2-checkmark {
      width: 18px !important;
      height: 18px !important;
    }
    
    .sheet-combat-v2-checkbox-wrapper {
      min-height: 30px;
    }
    
    .sheet-combat-v2-resistance-title ~ .sheet-combat-v2-macros-sub-content .sheet-combat-v2-table-header-activation,
    .sheet-combat-v2-attack-title ~ .sheet-combat-v2-macros-sub-content .sheet-combat-v2-table-header-activation {
      width: 30% !important;
    }
    
    .sheet-combat-v2-reserve-grid {
      grid-template-columns: 1fr;
      gap: 15px;
    }
    
    .sheet-combat-v2-reserve-primary-fields {
      grid-template-columns: 1fr;
    }
  }
  
  /* ================================================================= */
  /* ==================== FOCUS ET ACCESSIBILITÉ ==================== */
  /* ================================================================= */
  
  input:focus,
  select:focus,
  button:focus,
  textarea:focus,
  summary:focus,
  label:focus-visible {
    outline: 2px solid var(--sheet-secondary-color);
    outline-offset: 2px;
  }
  
  button:active {
    transform: scale(0.98);
  }
  
  select:active,
  input:active {
    transform: scale(1.02);
  }
  
  /* ================================================================= */
  /* ==================== ANIMATIONS ==================== */
  /* ================================================================= */
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes slideInFromLeft {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  @keyframes checkPulse {
    0% { 
      transform: scale(1); 
      box-shadow: 0 0 0 rgba(218,165,32,0.7);
    }
    50% { 
      transform: scale(1.15); 
      box-shadow: 0 0 20px rgba(218,165,32,0.7);
    }
    100% { 
      transform: scale(1.1); 
      box-shadow: 0 0 8px rgba(218,165,32,0.4);
    }
  }
  
  .sheet-combat-v2-wrapper[open] > *:not(summary),
  .sheet-combat-v2-macros-main[open] > *:not(summary),
  .sheet-combat-v2-macros-sub[open] > *:not(summary) {
    animation: fadeIn 0.3s ease-out;
  }
  
  .sheet-combat-v2-bonus-detail-card {
    animation: slideInFromLeft 0.3s ease-out;
  }
  
  .sheet-combat-v2-bonus-detail-card:nth-child(2) {
    animation-delay: 0.1s;
  }
  
  .sheet-combat-v2-bonus-detail-card:nth-child(3) {
    animation-delay: 0.2s;
  }
  
  .sheet-combat-v2-bonus-detail-card:nth-child(4) {
    animation-delay: 0.3s;
  }
  
  /* ================================================================= */
  /* ==================== PRINT STYLES ==================== */
  /* ================================================================= */
  
  @media print {
    .sheet-tab-content.sheet-combat {
      background: white;
      box-shadow: none;
    }
    
    .sheet-combat-v2-wrapper,
    .sheet-combat-v2-macros-main,
    .sheet-combat-v2-macros-sub {
      border: 1px solid black;
      box-shadow: none;
    }
    
    .sheet-combat-v2-macro-btn,
    .sheet-combat-v2-repos-btn,
    .sheet-combat-v2-technique-btn {
      display: none;
    }
    
    .sheet-combat-v2-bonus-detail-card {
      break-inside: avoid;
    }
    
    .sheet-combat-v2-res-cell {
      animation: none;
    }
    
    .sheet-combat-v2-res-cell {
      background: white !important;
      color: black !important;
      border: 1px solid black !important;
    }
    
    .sheet-combat-v2-res-label,
    .sheet-combat-v2-res-input-wrap span {
      color: black !important;
      text-shadow: none !important;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* =========================== ROLL TEMPLATE: JETS SPÉCIAUX =========================== */
  
  .sheet-rolltemplate-despecial {
      font-family: 'Georgia', serif;
  }
  
  /* === CONTAINER DE BASE (DÉ DE DESTIN) === */
  .sheet-rolltemplate-despecial .sheet-template-container {
      background: linear-gradient(145deg, #3d2914, #2c1e0f, #3d2914);
      border: 3px solid #8b6914;
      border-radius: 12px;
      box-shadow: 
          0 0 0 2px #654321,
          0 6px 16px rgba(0,0,0,0.8),
          inset 0 1px 0 rgba(139,105,20,0.4);
      margin: 8px 0;
      overflow: hidden;
      max-width: 400px;
      color: #f4e6b7;
  }
  
  /* === CONTAINER DÉ DE FATALITÉ === */
  .sheet-rolltemplate-despecial .sheet-template-container.sheet-fatalite {
      background: linear-gradient(145deg, #1a0000, #0d0000, #1a0000);
      border: 3px solid #8b0000;
      box-shadow: 
          0 0 0 2px #660000,
          0 6px 20px rgba(139, 0, 0, 0.9),
          0 0 25px rgba(204, 0, 0, 0.7),
          inset 0 1px 0 rgba(139, 0, 0, 0.4);
      animation: sheet-fatalite-container-pulse 2s ease-in-out infinite;
  }
  
  @keyframes sheet-fatalite-container-pulse {
      0%, 100% { 
          box-shadow: 
              0 0 0 2px #660000,
              0 6px 20px rgba(139, 0, 0, 0.9),
              0 0 25px rgba(204, 0, 0, 0.7),
              inset 0 1px 0 rgba(139, 0, 0, 0.4);
          border-color: #8b0000;
      }
      50% { 
          box-shadow: 
              0 0 0 3px #660000,
              0 8px 25px rgba(204, 0, 0, 1),
              0 0 35px rgba(255, 0, 0, 0.9),
              inset 0 1px 0 rgba(204, 0, 0, 0.6);
          border-color: #cc0000;
      }
  }
  
  /* === HEADER DÉ DE DESTIN === */
  .sheet-rolltemplate-despecial .sheet-header {
      background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
      padding: 12px 16px;
      text-align: center;
      border-bottom: 2px solid #654321;
  }
  
  .sheet-rolltemplate-despecial .sheet-title {
      font-size: 16px;
      font-weight: bold;
      color: #f4e6b7;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      margin: 0;
  }
  
  /* === HEADER DÉ DE FATALITÉ (ROUGE SANG) === */
  .sheet-rolltemplate-despecial .sheet-fatalite .sheet-header {
      background: linear-gradient(135deg, #8b0000 0%, #660000 25%, #4d0000 50%, #660000 75%, #8b0000 100%);
      border-bottom: 2px solid #330000;
      animation: sheet-fatalite-header-glow 2.5s ease-in-out infinite;
      position: relative;
      overflow: hidden;
  }
  
  @keyframes sheet-fatalite-header-glow {
      0%, 100% {
          background: linear-gradient(135deg, #8b0000 0%, #660000 25%, #4d0000 50%, #660000 75%, #8b0000 100%);
          box-shadow: inset 0 0 15px rgba(139, 0, 0, 0.5);
      }
      50% {
          background: linear-gradient(135deg, #a52a2a 0%, #8b0000 25%, #660000 50%, #8b0000 75%, #a52a2a 100%);
          box-shadow: inset 0 0 25px rgba(204, 0, 0, 0.8);
      }
  }
  
  .sheet-rolltemplate-despecial .sheet-fatalite .sheet-title {
      color: #ffffff;
      text-shadow: 
          2px 2px 3px rgba(0,0,0,1),
          0 0 10px rgba(255, 68, 68, 0.9),
          0 0 20px rgba(204, 0, 0, 0.6);
      animation: sheet-fatalite-text-pulse 2s ease-in-out infinite;
  }
  
  @keyframes sheet-fatalite-text-pulse {
      0%, 100% {
          text-shadow: 
              2px 2px 3px rgba(0,0,0,1),
              0 0 10px rgba(255, 68, 68, 0.9),
              0 0 20px rgba(204, 0, 0, 0.6);
      }
      50% {
          text-shadow: 
              2px 2px 3px rgba(0,0,0,1),
              0 0 15px rgba(255, 68, 68, 1),
              0 0 30px rgba(255, 0, 0, 0.9);
      }
  }
  
  /* Effet de lueur sanglante qui traverse le header */
  .sheet-rolltemplate-despecial .sheet-fatalite .sheet-header::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, 
          transparent, 
          rgba(255, 68, 68, 0.4), 
          transparent);
      animation: sheet-fatalite-sweep 3s ease-in-out infinite;
  }
  
  @keyframes sheet-fatalite-sweep {
      0% { left: -100%; }
      50% { left: 100%; }
      100% { left: 100%; }
  }
  
  /* === SÉPARATEUR === */
  .sheet-rolltemplate-despecial .sheet-separator {
      height: 1px;
      background: linear-gradient(to right, transparent, #8b6914, transparent);
      margin: 0;
  }
  
  .sheet-rolltemplate-despecial .sheet-fatalite .sheet-separator {
      background: linear-gradient(to right, transparent, #cc0000, transparent);
      box-shadow: 0 0 5px rgba(204, 0, 0, 0.6);
  }
  
  /* === CONTENT WRAPPER === */
  .sheet-rolltemplate-despecial .sheet-content-wrapper {
      padding: 16px;
  }
  
  /* === LIGNE DE RÉSULTAT === */
  .sheet-rolltemplate-despecial .sheet-result-row {
      background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
      border: 2px solid #8b4513;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
  }
  
  .sheet-rolltemplate-despecial .sheet-result-row:hover {
      background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
      border-color: #a0522d;
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(160,82,45,0.4);
  }
  
  .sheet-rolltemplate-despecial .sheet-fatalite .sheet-result-row {
      background: linear-gradient(135deg, rgba(139,0,0,0.25), rgba(102,0,0,0.15));
      border-color: #8b0000;
      box-shadow: 0 2px 6px rgba(139,0,0,0.5);
  }
  
  .sheet-rolltemplate-despecial .sheet-fatalite .sheet-result-row:hover {
      background: linear-gradient(135deg, rgba(139,0,0,0.35), rgba(102,0,0,0.25));
      border-color: #cc0000;
      box-shadow: 0 4px 10px rgba(204,0,0,0.6);
  }
  
  .sheet-rolltemplate-despecial .sheet-result-label {
      font-weight: bold;
      color: #f5e6c8;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .sheet-rolltemplate-despecial .sheet-fatalite .sheet-result-label {
      color: #ffcccc;
      text-shadow: 
          1px 1px 2px rgba(0,0,0,0.9),
          0 0 5px rgba(255, 68, 68, 0.5);
  }
  
  /* === VALEUR DU RÉSULTAT === */
  .sheet-rolltemplate-despecial .sheet-result-value {
      background: linear-gradient(145deg, #b8860b, #8b6914, #6b4f10);
      border: 2px solid #654321;
      border-radius: 6px;
      padding: 6px 12px;
      font-size: 16px;
      font-weight: bold;
      color: #f4e6b7;
      text-shadow: 
          1px 1px 2px rgba(0,0,0,0.8),
          0 0 8px rgba(184,134,11,0.4);
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.3),
          0 2px 6px rgba(0,0,0,0.5),
          0 0 8px rgba(139,105,20,0.5);
      min-width: 60px;
      text-align: center;
  }
  
  .sheet-rolltemplate-despecial .sheet-fatalite .sheet-result-value {
      background: linear-gradient(145deg, #dc143c 0%, #8b0000 50%, #660000 100%);
      border: 2px solid #440000;
      color: #ffffff;
      text-shadow: 
          2px 2px 3px rgba(0,0,0,1),
          0 0 12px rgba(255, 68, 68, 0.8),
          0 0 20px rgba(220, 20, 60, 0.6);
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.6),
          0 2px 8px rgba(139,0,0,0.7),
          0 0 15px rgba(204,0,0,0.8);
      animation: sheet-fatalite-result-pulse 1.5s ease-in-out infinite;
  }
  
  @keyframes sheet-fatalite-result-pulse {
      0%, 100% {
          box-shadow: 
              inset 0 1px 3px rgba(0,0,0,0.6),
              0 2px 8px rgba(139,0,0,0.7),
              0 0 15px rgba(204,0,0,0.8);
      }
      50% {
          box-shadow: 
              inset 0 1px 3px rgba(0,0,0,0.6),
              0 3px 12px rgba(204,0,0,0.9),
              0 0 25px rgba(255,0,0,1);
      }
  }
  
  /* === EFFET === */
  .sheet-rolltemplate-despecial .sheet-effect-row {
      background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
      border: 2px solid #8b4513;
      border-radius: 8px;
      padding: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
  }
  
  .sheet-rolltemplate-despecial .sheet-effect-row:hover {
      background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
      border-color: #a0522d;
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(160,82,45,0.4);
  }
  
  .sheet-rolltemplate-despecial .sheet-fatalite .sheet-effect-row {
      background: linear-gradient(135deg, rgba(139,0,0,0.25), rgba(102,0,0,0.15));
      border: 2px solid #8b0000;
      border-left: 4px solid #dc143c;
      box-shadow: 0 2px 6px rgba(139,0,0,0.5);
  }
  
  .sheet-rolltemplate-despecial .sheet-fatalite .sheet-effect-row:hover {
      background: linear-gradient(135deg, rgba(139,0,0,0.35), rgba(102,0,0,0.25));
      border-color: #cc0000;
      border-left-color: #ff4444;
      box-shadow: 0 4px 10px rgba(204,0,0,0.6);
  }
  
  .sheet-rolltemplate-despecial .sheet-effect-label {
      font-weight: bold;
      color: #f5e6c8;
      margin-bottom: 6px;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .sheet-rolltemplate-despecial .sheet-fatalite .sheet-effect-label {
      color: #ff6666;
      text-shadow: 
          1px 1px 2px rgba(0,0,0,0.9),
          0 0 8px rgba(255, 68, 68, 0.7);
  }
  
  .sheet-rolltemplate-despecial .sheet-effect-text {
      color: #f4e6b7;
      font-size: 14px;
      line-height: 1.4;
      font-style: italic;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
  }
  
  .sheet-rolltemplate-despecial .sheet-fatalite .sheet-effect-text {
      color: #ffcccc;
      text-shadow: 
          1px 1px 2px rgba(0,0,0,0.9),
          0 0 4px rgba(255, 68, 68, 0.3);
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
      .sheet-rolltemplate-despecial .sheet-template-container {
          max-width: 100%;
          margin: 4px 0;
      }
      
      .sheet-rolltemplate-despecial .sheet-content-wrapper {
          padding: 12px;
      }
      
      .sheet-rolltemplate-despecial .sheet-result-value {
          font-size: 14px;
          padding: 5px 10px;
          min-width: 50px;
      }
  }
  
  @media (max-width: 480px) {
      .sheet-rolltemplate-despecial .sheet-template-container {
          margin: 4px 0;
      }
      
      .sheet-rolltemplate-despecial .sheet-header {
          padding: 8px 12px;
      }
      
      .sheet-rolltemplate-despecial .sheet-title {
          font-size: 14px;
      }
      
      .sheet-rolltemplate-despecial .sheet-result-value {
          font-size: 12px;
          padding: 4px 8px;
          min-width: 40px;
      }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* =========================== ROLL TEMPLATE: REPOS (RR = RestResult) =========================== */
  
  .sheet-rolltemplate-restresult {
      font-family: 'Georgia', serif;
  }
  
  /* Container principal */
  .sheet-rolltemplate-restresult .sheet-rr-wrapper {
      background: linear-gradient(145deg, #3d2914, #2c1e0f, #3d2914);
      border: 3px solid #8b6914;
      border-radius: 12px;
      box-shadow: 0 0 0 2px #654321, 0 6px 16px rgba(0,0,0,0.8), inset 0 1px 0 rgba(139,105,20,0.4);
      margin: 8px 0;
      overflow: hidden;
      max-width: 400px;
      color: #f4e6b7;
  }
  
  /* Header */
  .sheet-rolltemplate-restresult .sheet-rr-head {
      background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
      padding: 12px 16px;
      text-align: center;
      border-bottom: 2px solid #654321;
  }
  
  .sheet-rolltemplate-restresult .sheet-rr-name {
      font-size: 16px;
      font-weight: bold;
      color: #f4e6b7;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      margin: 0;
      display: inline-block;
  }
  
  /* Body */
  .sheet-rolltemplate-restresult .sheet-rr-body {
      padding: 16px;
  }
  
  /* Séparateur */
  .sheet-rolltemplate-restresult .sheet-rr-line {
      height: 1px;
      background: linear-gradient(to right, transparent, #8b6914, transparent);
      margin: 12px 0;
  }
  
  /* Blocs génériques */
  .sheet-rolltemplate-restresult .sheet-rr-block {
      background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
      border: 2px solid #8b4513;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
  }
  
  .sheet-rolltemplate-restresult .sheet-rr-block:last-child {
      margin-bottom: 0;
  }
  
  .sheet-rolltemplate-restresult .sheet-rr-block:hover {
      background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
      border-color: #a0522d;
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(160,82,45,0.4);
  }
  
  /* Bloc jet principal */
  .sheet-rolltemplate-restresult .sheet-rr-jet-block {
      display: flex;
      justify-content: space-between;
      align-items: center;
  }
  
  .sheet-rolltemplate-restresult .sheet-rr-jet-lbl {
      font-weight: bold;
      color: #f5e6c8;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .sheet-rolltemplate-restresult .sheet-rr-jet-val {
      background: linear-gradient(145deg, #8b6914, #6b4f10);
      border: 2px solid #654321;
      border-radius: 6px;
      padding: 6px 12px;
      font-size: 16px;
      font-weight: bold;
      color: #f4e6b7;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.3), 0 2px 6px rgba(0,0,0,0.5);
      min-width: 60px;
      text-align: center;
  }
  
  /* Bloc récupération */
  .sheet-rolltemplate-restresult .sheet-rr-recov-title {
      font-weight: bold;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin: 0 0 10px 0;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      display: flex;
      align-items: center;
      gap: 6px;
      color: #90ee90;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.9), 0 0 6px rgba(144, 238, 144, 0.5);
  }
  
  .sheet-rolltemplate-restresult .sheet-rr-icon-recov {
      font-size: 16px;
  }
  
  .sheet-rolltemplate-restresult .sheet-rr-recov-txt {
      color: #f4e6b7;
      font-size: 14px;
      line-height: 1.5;
      margin: 6px 0;
  }
  
  .sheet-rolltemplate-restresult .sheet-rr-percent-line {
      margin-top: 10px;
      font-weight: bold;
  }
  
  .sheet-rolltemplate-restresult .sheet-rr-expr {
      color: #daa520;
      font-size: 12px;
      font-style: italic;
      margin: 0 4px;
  }
  
  .sheet-rolltemplate-restresult .sheet-rr-recov-result {
      background: linear-gradient(145deg, #4169e1, #0047ab);
      border: 2px solid #1e3a8a;
      border-radius: 6px;
      padding: 4px 10px;
      font-weight: bold;
      color: white;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      display: inline-block;
      min-width: 50px;
      text-align: center;
      box-shadow: inset 0 1px 2px rgba(0,0,0,0.3), 0 2px 4px rgba(0,0,0,0.5);
      margin-left: 4px;
  }
  
  /* ✅ CASE RÉCUPÉRATION EN VERT */
  .sheet-rolltemplate-restresult .sheet-rr-percent {
      background: linear-gradient(145deg, #228b22, #006400);
      border: 2px solid #14532d;
      border-radius: 6px;
      padding: 6px 12px;
      font-weight: bold;
      font-size: 16px;
      color: white;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8), 0 0 8px rgba(34,139,34,0.5);
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.3), 0 2px 6px rgba(0,0,0,0.5), 0 0 8px rgba(34,139,34,0.5);
      display: inline-block;
      min-width: 60px;
      text-align: center;
      margin-left: 4px;
  }
  
  /* Bloc message */
  .sheet-rolltemplate-restresult .sheet-rr-msg-block {
      border-color: #cc7722;
      border-left: 4px solid #ffa500;
  }
  
  .sheet-rolltemplate-restresult .sheet-rr-msg-title {
      font-weight: bold;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin: 0 0 10px 0;
      display: flex;
      align-items: center;
      gap: 6px;
      color: #ffa500;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.9), 0 0 6px rgba(255, 165, 0, 0.5);
  }
  
  .sheet-rolltemplate-restresult .sheet-rr-icon-msg {
      font-size: 16px;
  }
  
  .sheet-rolltemplate-restresult .sheet-rr-msg-txt {
      color: #f4e6b7;
      font-size: 14px;
      line-height: 1.4;
      font-style: italic;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
      margin-top: 4px;
  }
  
  /* Responsive */
  @media (max-width: 768px) {
      .sheet-rolltemplate-restresult .sheet-rr-wrapper {
          max-width: 100%;
          margin: 4px 0;
      }
      
      .sheet-rolltemplate-restresult .sheet-rr-body {
          padding: 12px;
      }
      
      .sheet-rolltemplate-restresult .sheet-rr-jet-val,
      .sheet-rolltemplate-restresult .sheet-rr-recov-result,
      .sheet-rolltemplate-restresult .sheet-rr-percent {
          font-size: 14px;
          padding: 5px 10px;
          min-width: 50px;
      }
  }
  
  @media (max-width: 480px) {
      .sheet-rolltemplate-restresult .sheet-rr-head {
          padding: 8px 12px;
      }
      
      .sheet-rolltemplate-restresult .sheet-rr-name {
          font-size: 14px;
      }
      
      .sheet-rolltemplate-restresult .sheet-rr-recov-title,
      .sheet-rolltemplate-restresult .sheet-rr-msg-title {
          font-size: 13px;
      }
      
      .sheet-rolltemplate-restresult .sheet-rr-recov-txt {
          font-size: 13px;
      }
      
      .sheet-rolltemplate-restresult .sheet-rr-jet-val,
      .sheet-rolltemplate-restresult .sheet-rr-recov-result,
      .sheet-rolltemplate-restresult .sheet-rr-percent {
          font-size: 12px;
          padding: 4px 8px;
          min-width: 40px;
      }
  }
  
  /* ===== SUPPRESSION DU FOND VIOLET ROLL20 ===== */
  .sheet-rolltemplate-restresult .inlinerollresult,
  .sheet-rolltemplate-restresult .didroll,
  .sheet-rolltemplate-restresult .rolled {
      background: transparent !important;
      background-color: transparent !important;
      border: none !important;
      padding: 0 !important;
      margin: 0 !important;
      color: inherit !important;
      font-weight: inherit !important;
  }
  
  /* Forcer la couleur du texte dans les cases */
  .sheet-rolltemplate-restresult .sheet-rr-jet-val,
  .sheet-rolltemplate-restresult .sheet-rr-percent {
      color: white !important;
  }
  
  .sheet-rolltemplate-restresult .sheet-rr-jet-val *,
  .sheet-rolltemplate-restresult .sheet-rr-percent * {
      color: white !important;
      background: transparent !important;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* =========================== ROLL TEMPLATE: MACRO TECHNIQUE CORPS =========================== */
  
  .sheet-rolltemplate-macroTechniquecorps {
      font-family: 'Georgia', serif;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-wrap {
      background: linear-gradient(145deg, #3d2914, #2c1e0f, #3d2914);
      border: 3px solid #8b6914;
      border-radius: 12px;
      box-shadow: 0 0 0 2px #654321, 0 6px 16px rgba(0,0,0,0.8), inset 0 1px 0 rgba(139,105,20,0.4);
      margin: 8px 0;
      overflow: hidden;
      max-width: 400px;
      color: #f4e6b7;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-head {
      background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
      padding: 12px 16px;
      text-align: center;
      border-bottom: 2px solid #654321;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-nom {
      font-size: 16px;
      font-weight: bold;
      color: #f4e6b7;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      margin-bottom: 6px;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-type {
      font-size: 12px;
      color: #daa520;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: bold;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-body {
      padding: 16px;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-dmg {
      background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
      border: 2px solid #8b4513;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-dmg-lbl {
      color: #daa520;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      font-weight: bold;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-dmg-val {
      color: #f4e6b7;
      font-weight: bold;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-nat {
      padding: 8px 12px;
      margin-bottom: 12px;
      text-align: center;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-nat-lbl {
      color: #f5e6c8;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      font-weight: bold;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-elem {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 6px;
      font-weight: bold;
      font-size: 13px;
      margin-left: 8px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      border: 2px solid;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-elem-Feu,
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-elem-feu {
      background: linear-gradient(135deg, #dc143c, #b22222);
      border-color: #8b0000;
      color: white;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-elem-Eau,
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-elem-eau {
      background: linear-gradient(135deg, #4169e1, #0047ab);
      border-color: #1e3a8a;
      color: white;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-elem-Terre,
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-elem-terre {
      background: linear-gradient(135deg, #8b4513, #654321);
      border-color: #451a03;
      color: white;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-elem-Air,
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-elem-air {
      background: linear-gradient(135deg, #87ceeb, #4682b4);
      border-color: #2563eb;
      color: #2f2f2f;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-elem-Foudre,
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-elem-foudre {
      background: linear-gradient(135deg, #ffff00, #ffd700);
      border-color: #ca8a04;
      color: #2f2f2f;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-elem-Glace,
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-elem-glace {
      background: linear-gradient(135deg, #b0e0e6, #87ceeb);
      border-color: #0284c7;
      color: #2f2f2f;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-fx {
      background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
      border: 2px solid #8b4513;
      border-left: 4px solid #daa520;
      border-radius: 8px;
      padding: 0;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      overflow: hidden;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-fx-sum {
      padding: 10px 12px;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
      color: #daa520;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      list-style: none;
      user-select: none;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-fx-sum::-webkit-details-marker {
      display: none;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-fx-txt {
      padding: 12px;
      color: #f4e6b7;
      font-size: 14px;
      line-height: 1.5;
      border-top: 1px solid rgba(139,69,19,0.3);
      background: rgba(44,30,15,0.3);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
  }
  /* === OVERRIDE DES RÉSULTATS DE DÉS ROLL20 === */
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-dmg-val .inlinerollresult,
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-dmg-val .inlinerollresult.fullcrit,
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-dmg-val .inlinerollresult.fullfail,
  .sheet-rolltemplate-macroTechniquecorps .sheet-mtccorps-dmg-val .inlinerollresult.importantroll,
  .sheet-rolltemplate-macroTechniquecorps .inlinerollresult {
      background: linear-gradient(145deg, #b8860b, #8b6914, #6b4f10) !important;
      border: 2px solid #654321 !important;
      border-radius: 6px !important;
      padding: 4px 10px !important;
      color: #f4e6b7 !important;
      font-weight: bold !important;
      font-size: 14px !important;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8), 0 0 8px rgba(184,134,11,0.4) !important;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.3), 0 2px 6px rgba(0,0,0,0.5), 0 0 8px rgba(139,105,20,0.5) !important;
      display: inline-block !important;
      min-width: 40px !important;
      text-align: center !important;
  }
  
  /* Hover sur les dés */
  .sheet-rolltemplate-macroTechniquecorps .inlinerollresult:hover {
      background: linear-gradient(145deg, #cd853f, #b8860b, #8b6914) !important;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.3), 0 3px 8px rgba(0,0,0,0.6), 0 0 12px rgba(205,133,63,0.6) !important;
      transform: scale(1.02) !important;
  }
  
  /* Supprimer les styles de tooltip Roll20 */
  .sheet-rolltemplate-macroTechniquecorps .inlinerollresult .didroll {
      color: #f4e6b7 !important;
      font-weight: bold !important;
  }
  
  .sheet-rolltemplate-macroTechniquecorps .inlinerollresult .backing {
      display: none !important;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* =========================== 
     ROLL TEMPLATE: TALENTS
     =========================== */
  
  .sheet-rolltemplate-talent {
      font-family: 'Georgia', serif;
  }
  
  /* === CONTENEUR PRINCIPAL === */
  .sheet-rolltemplate-talent .sheet-talent-template-container {
      background: linear-gradient(145deg, #3d2914, #2c1e0f, #3d2914);
      border: 3px solid #8b6914;
      border-radius: 12px;
      box-shadow: 
          0 0 0 2px #654321, 
          0 6px 16px rgba(0,0,0,0.8), 
          inset 0 1px 0 rgba(139,105,20,0.4);
      margin: 8px 0;
      overflow: hidden;
      max-width: 400px;
      color: #f4e6b7;
  }
  
  /* === HEADER SECTION === */
  .sheet-rolltemplate-talent .sheet-talent-header-section {
      background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
      padding: 14px 16px;
      border-bottom: 2px solid #654321;
      display: flex;
      flex-direction: column;
      gap: 8px;
  }
  
  .sheet-rolltemplate-talent .sheet-talent-title {
      font-size: 17px;
      font-weight: bold;
      color: #f4e6b7;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      text-shadow: 
          1px 1px 2px rgba(0,0,0,0.8), 
          0 0 6px rgba(218,165,32,0.3);
      margin: 0;
      text-align: center;
  }
  
  /* === BADGES CATÉGORIE / TYPE === */
  .sheet-rolltemplate-talent .sheet-talent-badges {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
  }
  
  .sheet-rolltemplate-talent .sheet-talent-category-badge,
  .sheet-rolltemplate-talent .sheet-talent-type-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 6px;
      font-weight: bold;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.6px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      border: 2px solid;
      box-shadow: 0 2px 4px rgba(0,0,0,0.4);
  }
  
  /* Catégorie : Combat */
  .sheet-rolltemplate-talent .sheet-talent-category-badge:is([data-category="Combat"], :has(+ *)):not([data-category]) {
      background: linear-gradient(135deg, #dc143c, #b22222);
      border-color: #8b0000;
      color: white;
  }
  
  /* Catégorie par défaut (si valeur texte) */
  .sheet-rolltemplate-talent .sheet-talent-category-badge {
      background: linear-gradient(135deg, #cd853f, #b8860b);
      border-color: #8b6914;
      color: white;
  }
  
  /* Type badge (plus discret) */
  .sheet-rolltemplate-talent .sheet-talent-type-badge {
      background: linear-gradient(135deg, rgba(139,105,20,0.8), rgba(107,79,16,0.8));
      border-color: #654321;
      color: #f5e6c8;
      font-size: 10px;
  }
  
  /* === SÉPARATEUR === */
  .sheet-rolltemplate-talent .sheet-talent-separator {
      height: 2px;
      background: linear-gradient(
          90deg, 
          transparent, 
          #8b6914 20%, 
          #daa520 50%, 
          #8b6914 80%, 
          transparent
      );
      margin: 0;
      box-shadow: 0 1px 3px rgba(0,0,0,0.5);
  }
  
  /* === SECTION EFFET === */
  .sheet-rolltemplate-talent .sheet-talent-effect-section {
      padding: 16px;
      background: rgba(44,30,15,0.2);
  }
  
  .sheet-rolltemplate-talent .sheet-talent-effect-label {
      color: #daa520;
      font-size: 13px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      margin-bottom: 8px;
      border-left: 4px solid #daa520;
      padding-left: 10px;
  }
  
  .sheet-rolltemplate-talent .sheet-talent-effect-content {
      color: #f4e6b7;
      font-size: 14px;
      line-height: 1.6;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
      padding: 8px 12px;
      background: linear-gradient(135deg, rgba(139,69,19,0.12), rgba(101,67,33,0.08));
      border: 1px solid rgba(139,105,20,0.3);
      border-radius: 6px;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
  }
  
  /* === OVERRIDE DES RÉSULTATS DE DÉS ROLL20 (au cas où) === */
  .sheet-rolltemplate-talent .inlinerollresult,
  .sheet-rolltemplate-talent .inlinerollresult.fullcrit,
  .sheet-rolltemplate-talent .inlinerollresult.fullfail,
  .sheet-rolltemplate-talent .inlinerollresult.importantroll {
      background: linear-gradient(145deg, #b8860b, #8b6914, #6b4f10) !important;
      border: 2px solid #654321 !important;
      border-radius: 6px !important;
      padding: 4px 10px !important;
      color: #f4e6b7 !important;
      font-weight: bold !important;
      font-size: 14px !important;
      text-shadow: 
          1px 1px 2px rgba(0,0,0,0.8), 
          0 0 8px rgba(184,134,11,0.4) !important;
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.3), 
          0 2px 6px rgba(0,0,0,0.5), 
          0 0 8px rgba(139,105,20,0.5) !important;
      display: inline-block !important;
      min-width: 40px !important;
      text-align: center !important;
  }
  
  .sheet-rolltemplate-talent .inlinerollresult:hover {
      background: linear-gradient(145deg, #cd853f, #b8860b, #8b6914) !important;
      box-shadow: 
          inset 0 1px 3px rgba(0,0,0,0.3), 
          0 3px 8px rgba(0,0,0,0.6), 
          0 0 12px rgba(205,133,63,0.6) !important;
      transform: scale(1.02) !important;
  }
  
  .sheet-rolltemplate-talent .inlinerollresult .didroll {
      color: #f4e6b7 !important;
      font-weight: bold !important;
  }
  
  .sheet-rolltemplate-talent .inlinerollresult .backing {
      display: none !important;
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 480px) {
      .sheet-rolltemplate-talent .sheet-talent-template-container {
          max-width: 100%;
          margin: 6px 0;
      }
      
      .sheet-rolltemplate-talent .sheet-talent-title {
          font-size: 15px;
          letter-spacing: 0.5px;
      }
      
      .sheet-rolltemplate-talent .sheet-talent-badges {
          gap: 6px;
      }
      
      .sheet-rolltemplate-talent .sheet-talent-effect-section {
          padding: 12px;
      }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === WRAPPER FLEX POUR LES DEUX OPTIONS === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-trait-options-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    padding: 12px 16px;
    background: linear-gradient(135deg, rgba(139,105,20,0.15), rgba(107,79,16,0.1));
    border: 2px solid rgba(139,69,19,0.2);
    border-radius: 8px;
    margin: 12px 16px;
  }
  
  /* === OPTION MARGE === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-margin-option {
    background: linear-gradient(135deg, rgba(74,124,89,0.15), rgba(61,107,79,0.1));
    border: 2px solid rgba(74,124,89,0.3);
    border-radius: 8px;
    padding: 10px 14px;
    flex: 1;
    min-width: 220px;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-margin-option label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    font-weight: 600;
    color: #f4e6b7;
    font-size: 13px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  
  /* === OPTION WHISPER === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-whisper-option {
    background: linear-gradient(135deg, rgba(139,69,19,0.2), rgba(101,67,33,0.15));
    border: 2px solid rgba(139,69,19,0.3);
    border-radius: 8px;
    padding: 10px 14px;
    flex: 1;
    min-width: 220px;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-whisper-option label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    font-weight: 600;
    color: #f4e6b7;
    font-size: 13px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  
  /* === CHECKBOXES COMMUNES === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-margin-option input[type="checkbox"],
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-whisper-option input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;
    width: 24px;
    height: 24px;
    border: 2px solid #8b6914;
    border-radius: 6px;
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    cursor: pointer;
    position: relative;
    transition: all 0.2s ease;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 1px 2px rgba(139,105,20,0.3);
    flex-shrink: 0;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-margin-option input[type="checkbox"]:checked {
    background: linear-gradient(135deg, #4a7c59, #3d6b4f);
    border-color: #2d5a3f;
    box-shadow: 
      0 0 12px rgba(74,124,89,0.6),
      inset 0 1px 3px rgba(255,255,255,0.2);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-whisper-option input[type="checkbox"]:checked {
    background: linear-gradient(135deg, #8b6914, #6b4f10);
    border-color: #654321;
    box-shadow: 
      0 0 12px rgba(139,105,20,0.6),
      inset 0 1px 3px rgba(255,255,255,0.2);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-margin-option input[type="checkbox"]:checked::after,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-whisper-option input[type="checkbox"]:checked::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #e8f5e9;
    font-size: 18px;
    font-weight: bold;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-margin-option input[type="checkbox"]:hover,
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-whisper-option input[type="checkbox"]:hover {
    border-color: #cd853f;
    box-shadow: 
      0 0 10px rgba(205,133,63,0.5),
      inset 0 1px 3px rgba(0,0,0,0.2);
    transform: scale(1.05);
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 600px) {
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-trait-options-wrapper {
      flex-direction: column;
      gap: 8px;
    }
    
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-margin-option,
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-whisper-option {
      min-width: 100%;
    }
  }
  /* ================================================================ */
  /* === OPTIONS AVANTAGE / DÉSAVANTAGE (STYLE UNIFIÉ) ============= */
  /* ================================================================ */
  
  /* === OPTION AVANTAGE (VERT) === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-avantage-option {
    background: linear-gradient(135deg, rgba(76,175,80,0.15), rgba(56,142,60,0.1));
    border: 2px solid rgba(76,175,80,0.35);
    border-radius: 8px;
    padding: 10px 14px;
    flex: 1;
    min-width: 220px;
    transition: all 0.3s ease;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-avantage-option:hover {
    background: linear-gradient(135deg, rgba(76,175,80,0.25), rgba(56,142,60,0.18));
    border-color: rgba(76,175,80,0.5);
    box-shadow: 0 2px 8px rgba(76,175,80,0.3);
    transform: translateY(-2px);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-avantage-option label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    font-weight: 600;
    color: #c8e6c9;
    font-size: 13px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  
  /* === OPTION DÉSAVANTAGE (ROUGE/ORANGE) === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-desavantage-option {
    background: linear-gradient(135deg, rgba(244,67,54,0.15), rgba(211,47,47,0.1));
    border: 2px solid rgba(244,67,54,0.35);
    border-radius: 8px;
    padding: 10px 14px;
    flex: 1;
    min-width: 220px;
    transition: all 0.3s ease;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-desavantage-option:hover {
    background: linear-gradient(135deg, rgba(244,67,54,0.25), rgba(211,47,47,0.18));
    border-color: rgba(244,67,54,0.5);
    box-shadow: 0 2px 8px rgba(244,67,54,0.3);
    transform: translateY(-2px);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-desavantage-option label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    font-weight: 600;
    color: #ffcdd2;
    font-size: 13px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  
  /* === CHECKBOXES AVANTAGE === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-avantage-option input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;
    width: 24px;
    height: 24px;
    border: 2px solid #4caf50;
    border-radius: 6px;
    background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
    cursor: pointer;
    position: relative;
    transition: all 0.2s ease;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 1px 2px rgba(76,175,80,0.3);
    flex-shrink: 0;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-avantage-option input[type="checkbox"]:checked {
    background: linear-gradient(135deg, #4caf50, #388e3c);
    border-color: #2e7d32;
    box-shadow: 
      0 0 12px rgba(76,175,80,0.8),
      inset 0 1px 3px rgba(255,255,255,0.3);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-avantage-option input[type="checkbox"]:checked::after {
    content: '⬆';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #e8f5e9;
    font-size: 16px;
    font-weight: bold;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-avantage-option input[type="checkbox"]:hover {
    border-color: #66bb6a;
    box-shadow: 
      0 0 10px rgba(102,187,106,0.6),
      inset 0 1px 3px rgba(0,0,0,0.2);
    transform: scale(1.05);
  }
  
  /* === CHECKBOXES DÉSAVANTAGE === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-desavantage-option input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;
    width: 24px;
    height: 24px;
    border: 2px solid #f44336;
    border-radius: 6px;
    background: linear-gradient(135deg, #ffcdd2, #ef9a9a);
    cursor: pointer;
    position: relative;
    transition: all 0.2s ease;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 1px 2px rgba(244,67,54,0.3);
    flex-shrink: 0;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-desavantage-option input[type="checkbox"]:checked {
    background: linear-gradient(135deg, #f44336, #d32f2f);
    border-color: #c62828;
    box-shadow: 
      0 0 12px rgba(244,67,54,0.8),
      inset 0 1px 3px rgba(255,255,255,0.3);
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-desavantage-option input[type="checkbox"]:checked::after {
    content: '⬇';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #ffebee;
    font-size: 16px;
    font-weight: bold;
  }
  
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-desavantage-option input[type="checkbox"]:hover {
    border-color: #ef5350;
    box-shadow: 
      0 0 10px rgba(239,83,80,0.6),
      inset 0 1px 3px rgba(0,0,0,0.2);
    transform: scale(1.05);
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 600px) {
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-avantage-option,
    .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-desavantage-option {
      min-width: 100%;
    }
  }
  
  /* === WRAPPER MIS À JOUR (OPTIONNEL - si tu veux ajuster l'espacement) === */
  .sheet-tab-content.sheet-profils:not([class*="rolltemplate"]) .sheet-carac-options-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    padding: 12px 16px;
    background: linear-gradient(135deg, rgba(139,105,20,0.15), rgba(107,79,16,0.1));
    border: 2px solid rgba(139,69,19,0.2);
    border-radius: 8px;
    margin: 12px 16px;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ============================================
     STYLE MARGE DE RÉUSSITE DANS LE ROLLTEMPLATE
     ============================================ */
  
  .sheet-rolltemplate-trait-test .sheet-margin-display {
    background: linear-gradient(145deg, rgba(61,97,180,0.25), rgba(52,73,94,0.2));
    border: 3px solid #3d61b4;
    border-radius: 12px;
    padding: 14px 16px;
    margin: 14px 0;
    color: #e3f2fd;
    font-weight: bold;
    font-size: 15px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.9);
    box-shadow: 
      0 4px 8px rgba(0,0,0,0.5),
      inset 0 1px 0 rgba(255,255,255,0.1);
  }
  
  .sheet-rolltemplate-trait-test .sheet-margin-display strong {
    color: #90caf9;
    text-shadow: 1px 1px 0 rgba(255,255,255,0.3), 2px 2px 4px rgba(0,0,0,0.8);
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-family: 'Georgia', serif;
  }
  
  /* Style des valeurs numériques de la marge */
  .sheet-rolltemplate-trait-test .sheet-margin-display .inlinerollresult {
    background: linear-gradient(145deg, #5a9fd4, #3d61b4) !important;
    border: 3px solid #2d4a8c !important;
    border-radius: 8px !important;
    padding: 5px 12px !important;
    color: #ffffff !important;
    font-weight: 900 !important;
    font-size: 17px !important;
    text-shadow: 2px 2px 0 rgba(0,0,0,0.8), 0 0 10px rgba(255,255,255,0.6) !important;
    box-shadow: 0 3px 6px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.2) !important;
    font-family: 'Courier New', monospace !important;
    margin: 0 4px !important;
    display: inline-block !important;
    min-width: 60px !important;
    text-align: center !important;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === CHECKBOXES CARACTÉRISTIQUES - VERSION COMPACTE === */
  .sheet-carac-options-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    padding: 5px 8px;
    background: linear-gradient(135deg, rgba(139,105,20,0.15), rgba(107,79,16,0.1));
    border: 1px solid rgba(139,69,19,0.2);
    border-radius: 4px;
    margin: 4px 0;
  }
  
  .sheet-carac-options-wrapper .sheet-margin-option,
  .sheet-carac-options-wrapper .sheet-whisper-option {
    background: linear-gradient(135deg, rgba(74,124,89,0.15), rgba(61,107,79,0.1));
    border: 1px solid rgba(74,124,89,0.3);
    border-radius: 4px;
    padding: 4px 8px;
    flex: 1;
    min-width: 150px;
  }
  
  .sheet-carac-options-wrapper .sheet-whisper-option {
    background: linear-gradient(135deg, rgba(139,69,19,0.2), rgba(101,67,33,0.15));
    border: 1px solid rgba(139,69,19,0.3);
  }
  
  .sheet-carac-options-wrapper label {
    display: flex;
    align-items: center;
    gap: 5px;
    cursor: pointer;
    font-weight: 600;
    color: #f4e6b7;
    font-size: 10px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  
  .sheet-carac-options-wrapper input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;
    width: 14px;
    height: 14px;
    border: 1px solid #8b6914;
    border-radius: 3px;
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    cursor: pointer;
    position: relative;
    transition: all 0.2s ease;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);
    flex-shrink: 0;
  }
  
  .sheet-carac-options-wrapper .sheet-margin-option input[type="checkbox"]:checked {
    background: linear-gradient(135deg, #4a7c59, #3d6b4f);
    border-color: #2d5a3f;
    box-shadow: 0 0 6px rgba(74,124,89,0.4);
  }
  
  .sheet-carac-options-wrapper .sheet-whisper-option input[type="checkbox"]:checked {
    background: linear-gradient(135deg, #8b6914, #6b4f10);
    border-color: #654321;
    box-shadow: 0 0 6px rgba(139,105,20,0.4);
  }
  
  .sheet-carac-options-wrapper input[type="checkbox"]:checked::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #e8f5e9;
    font-size: 11px;
    font-weight: bold;
  }
  
  .sheet-carac-options-wrapper input[type="checkbox"]:hover {
    border-color: #cd853f;
    transform: scale(1.05);
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 600px) {
    .sheet-carac-options-wrapper {
      flex-direction: column;
      gap: 4px;
    }
    
    .sheet-carac-options-wrapper .sheet-margin-option,
    .sheet-carac-options-wrapper .sheet-whisper-option {
      min-width: 100%;
    }
    
    .sheet-carac-options-wrapper label {
      font-size: 9px;
    }
  }
  
  
  
  
  
  
  
  
  
  
  /* === STYLE MARGE DANS ROLLTEMPLATE CARAC === */
  .sheet-rolltemplate-carac-test .sheet-margin-display {
    background: linear-gradient(145deg, rgba(61,97,180,0.25), rgba(52,73,94,0.2));
    border: 3px solid #3d61b4;
    border-radius: 12px;
    padding: 14px 16px;
    margin: 14px 0;
    color: #e3f2fd;
    font-weight: bold;
    font-size: 15px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.9);
    box-shadow: 
      0 4px 8px rgba(0,0,0,0.5),
      inset 0 1px 0 rgba(255,255,255,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
  }
  
  .sheet-rolltemplate-carac-test .sheet-margin-display strong {
    color: #90caf9;
    text-shadow: 1px 1px 0 rgba(255,255,255,0.3), 2px 2px 4px rgba(0,0,0,0.8);
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-family: 'Georgia', serif;
    white-space: nowrap;
  }
  
  /* Style des valeurs numériques dans la marge */
  .sheet-rolltemplate-carac-test .sheet-margin-display .inlinerollresult {
    background: linear-gradient(145deg, #5a9fd4, #3d61b4) !important;
    border: 3px solid #2d4a8c !important;
    border-radius: 8px !important;
    padding: 6px 14px !important;
    color: #ffffff !important;
    font-weight: 900 !important;
    font-size: 18px !important;
    text-shadow: 2px 2px 0 rgba(0,0,0,0.8), 0 0 10px rgba(255,255,255,0.6) !important;
    box-shadow: 0 3px 6px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.2) !important;
    font-family: 'Courier New', monospace !important;
    display: inline-block !important;
    min-width: 60px !important;
    text-align: center !important;
    white-space: nowrap !important;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  .sheet-subsection-title {
    margin: 6px 0 4px;
    font-weight: 700;
    text-transform: uppercase;
    font-size: 11px;
    opacity: .8;
  }
  /* Sous-sections pliables */
  .sheet-subsection {
    margin: 6px 0 10px;
    border-radius: 6px;
  }
  
  /* Style du <summary> de sous-section */
  .sheet-subsection-summary {
    list-style: none;         /* cache la puce par défaut */
    cursor: pointer;
    font-weight: 700;
    text-transform: uppercase;
    font-size: 11px;
    padding: 6px 8px;
    border-radius: 6px;
    background: rgba(0,0,0,.12);
    display: flex;
    align-items: center;
    gap: 6px;
  }
  
  /* Petit chevron */
  .sheet-subsection-summary::before {
    content: "▸";
    display: inline-block;
    transition: transform .2s ease;
  }
  
  /* Rotation du chevron quand c'est ouvert */
  .sheet-subsection[open] > .sheet-subsection-summary::before {
    transform: rotate(90deg);
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === CONTAINERS ARMES ET ARMURES === */
  .sheet-inventory-right-column .sheet-weapon-container,
  .sheet-inventory-right-column .sheet-armor-container {
    margin-bottom: 16px;
    padding: 12px;
    background: linear-gradient(135deg, rgba(139,69,19,0.1), rgba(101,67,33,0.05));
    border: 2px solid rgba(139,69,19,0.2);
    border-radius: 8px;
  }
  
  /* === LIGNES DÉGÂTS/DÉFENSE === */
  .sheet-inventory-right-column .sheet-damage-row,
  .sheet-inventory-right-column .sheet-defense-row {
    display: flex;
    gap: 12px;
    align-items: center;
    margin-top: 8px;
    flex-wrap: wrap;
  }
  
  .sheet-inventory-right-column .sheet-damage-inputs,
  .sheet-inventory-right-column .sheet-defense-inputs {
    display: flex;
    gap: 8px;
    flex: 1;
    min-width: 300px;
  }
  
  /* === INPUTS DÉGÂTS/DÉFENSE NORMAUX - TEXTE CENTRÉ === */
  .sheet-inventory-right-column .sheet-damage-input,
  .sheet-inventory-right-column .sheet-defense-input {
    flex: 1;
    padding: 8px 12px;
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    border: 2px solid #8b6914;
    border-radius: 6px;
    color: #2c1e0f;
    font-weight: 600;
    text-align: center;
    transition: all 0.3s ease;
  }
  
  .sheet-inventory-right-column .sheet-damage-input:focus,
  .sheet-inventory-right-column .sheet-defense-input:focus {
    border-color: #cd853f;
    box-shadow: 0 0 8px rgba(139,105,20,0.5);
    transform: translateY(-1px);
  }
  
  /* === INPUTS MAGIQUES - TEXTE CENTRÉ === */
  .sheet-inventory-right-column .sheet-damage-magic-input,
  .sheet-inventory-right-column .sheet-defense-magic-input {
    flex: 1;
    padding: 8px 12px;
    background: linear-gradient(135deg, #b19cd9, #9b7eba);
    border: 2px solid #6b4f8a;
    border-radius: 6px;
    color: #1a0033;
    font-weight: 600;
    display: none;
    transition: all 0.3s ease;
    text-align: center;
  }
  
  .sheet-inventory-right-column .sheet-damage-magic-input:focus,
  .sheet-inventory-right-column .sheet-defense-magic-input:focus {
    border-color: #9b7eba;
    box-shadow: 0 0 12px rgba(155,126,186,0.6);
    transform: translateY(-1px);
  }
  
  /* === PLACEHOLDERS CENTRÉS === */
  .sheet-inventory-right-column .sheet-damage-input::placeholder,
  .sheet-inventory-right-column .sheet-defense-input::placeholder,
  .sheet-inventory-right-column .sheet-damage-magic-input::placeholder,
  .sheet-inventory-right-column .sheet-defense-magic-input::placeholder {
    text-align: center;
  }
  
  /* === AFFICHAGE CONDITIONNEL DES INPUTS MAGIQUES === */
  .sheet-inventory-right-column .sheet-weapon-container:has(.sheet-magic-damage-checkbox:checked) .sheet-damage-magic-input,
  .sheet-inventory-right-column .sheet-armor-container:has(.sheet-magic-defense-checkbox:checked) .sheet-defense-magic-input {
    display: block;
    animation: slideInMagic 0.4s ease-out;
  }
  
  @keyframes slideInMagic {
    0% {
      opacity: 0;
      transform: translateX(-20px) scale(0.95);
    }
    60% {
      transform: translateX(5px) scale(1.02);
    }
    100% {
      opacity: 1;
      transform: translateX(0) scale(1);
    }
  }
  
  /* === LABELS CHECKBOXES MAGIQUES - CENTRÉS === */
  .sheet-inventory-right-column .sheet-magic-damage-label,
  .sheet-inventory-right-column .sheet-magic-defense-label {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    white-space: nowrap;
    cursor: pointer;
    padding: 8px 14px;
    background: linear-gradient(135deg, rgba(107,79,138,0.15), rgba(155,126,186,0.1));
    border: 2px solid rgba(107,79,138,0.3);
    border-radius: 6px;
    transition: all 0.3s ease;
    text-align: center;
  }
  
  .sheet-inventory-right-column .sheet-magic-damage-label:hover,
  .sheet-inventory-right-column .sheet-magic-defense-label:hover {
    background: linear-gradient(135deg, rgba(107,79,138,0.25), rgba(155,126,186,0.2));
    border-color: rgba(107,79,138,0.5);
    transform: translateY(-1px);
    box-shadow: 0 2px 6px rgba(107,79,138,0.3);
  }
  
  .sheet-inventory-right-column .sheet-magic-damage-label span,
  .sheet-inventory-right-column .sheet-magic-defense-label span {
    font-size: 12px;
    font-weight: 600;
    color: #f4e6b7;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    text-align: center;
  }
  
  /* === CHECKBOXES MAGIQUES AVEC ANIMATION AMÉLIORÉE === */
  .sheet-inventory-right-column .sheet-magic-damage-checkbox,
  .sheet-inventory-right-column .sheet-magic-defense-checkbox {
    appearance: none;
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    border: 2px solid #6b4f8a;
    border-radius: 5px;
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    cursor: pointer;
    position: relative;
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    flex-shrink: 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }
  
  .sheet-inventory-right-column .sheet-magic-damage-checkbox:hover,
  .sheet-inventory-right-column .sheet-magic-defense-checkbox:hover {
    transform: scale(1.1);
    border-color: #9b7eba;
    box-shadow: 0 3px 8px rgba(107,79,138,0.4);
  }
  
  .sheet-inventory-right-column .sheet-magic-damage-checkbox:checked,
  .sheet-inventory-right-column .sheet-magic-defense-checkbox:checked {
    background: linear-gradient(135deg, #9b7eba, #6b4f8a);
    border-color: #4a2c5a;
    box-shadow: 
      0 0 15px rgba(155,126,186,0.8),
      0 0 30px rgba(155,126,186,0.4),
      inset 0 1px 3px rgba(255,255,255,0.3);
    animation: magicCheckPulse 0.5s ease;
  }
  
  @keyframes magicCheckPulse {
    0% {
      transform: scale(1);
      box-shadow: 0 0 0 rgba(155,126,186,0);
    }
    50% {
      transform: scale(1.2);
      box-shadow: 
        0 0 20px rgba(155,126,186,1),
        0 0 40px rgba(155,126,186,0.6);
    }
    100% {
      transform: scale(1);
      box-shadow: 
        0 0 15px rgba(155,126,186,0.8),
        0 0 30px rgba(155,126,186,0.4);
    }
  }
  
  .sheet-inventory-right-column .sheet-magic-damage-checkbox:checked::after,
  .sheet-inventory-right-column .sheet-magic-defense-checkbox:checked::after {
    content: '✨';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    color: #fff;
    font-size: 14px;
    animation: magicIconAppear 0.4s ease forwards;
    text-shadow: 0 0 8px rgba(255,255,255,0.8);
  }
  
  @keyframes magicIconAppear {
    0% {
      transform: translate(-50%, -50%) scale(0) rotate(-180deg);
      opacity: 0;
    }
    60% {
      transform: translate(-50%, -50%) scale(1.3) rotate(20deg);
    }
    100% {
      transform: translate(-50%, -50%) scale(1) rotate(0deg);
      opacity: 1;
    }
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .sheet-inventory-right-column .sheet-damage-inputs,
    .sheet-inventory-right-column .sheet-defense-inputs {
      flex-direction: column;
      width: 100%;
      min-width: unset;
    }
    
    .sheet-inventory-right-column .sheet-damage-row,
    .sheet-inventory-right-column .sheet-defense-row {
      flex-direction: column;
      align-items: stretch;
    }
    
    .sheet-inventory-right-column .sheet-magic-damage-label,
    .sheet-inventory-right-column .sheet-magic-defense-label {
      width: 100%;
      justify-content: center;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === BLOC BONUS BIJOUX - VERSION ULTRA-COMPACTE === */
  .sheet-bonus-block {
    margin-top: 6px;
    background: linear-gradient(145deg, rgba(244,230,183,0.9), rgba(222,184,135,0.8));
    border: 2px solid #8b6914;
    border-radius: 5px;
    overflow: hidden;
    box-shadow: 0 2px 6px rgba(139,69,19,0.2);
  }
  
  .sheet-bonus-summary {
    background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914);
    color: #f4e6b7;
    padding: 4px 8px;
    cursor: pointer;
    font-weight: bold;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.6px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
    transition: all 0.3s ease;
    border-bottom: 1px solid rgba(139,69,19,0.3);
    text-align: center;
    font-family: 'Georgia', serif;
  }
  
  .sheet-bonus-summary:hover {
    background: linear-gradient(135deg, #daa520, #8b6914, #daa520);
  }
  
  .sheet-bonus-table-container {
    padding: 6px;
    background: linear-gradient(135deg, rgba(255,255,255,0.8), rgba(244,230,183,0.6));
  }
  
  /* === TABLEAU BONUS - ULTRA-COMPACT === */
  .sheet-bonus-table {
    width: 100%;
    border-collapse: collapse;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.8));
    border-radius: 5px;
    overflow: hidden;
    box-shadow: 0 2px 6px rgba(139,69,19,0.2);
    border: 2px solid rgba(139,69,19,0.3);
  }
  
  .sheet-bonus-table thead {
    background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914);
  }
  
  .sheet-bonus-table th {
    background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914);
    color: #f4e6b7;
    padding: 6px 4px;
    font-weight: bold;
    text-align: center;
    font-size: 9px;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    font-family: 'Georgia', serif;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    border-bottom: 1px solid #8b6914;
  }
  
  .sheet-bonus-table th:nth-child(1) { 
    width: 25%;
    text-align: center;
  }
  
  .sheet-bonus-table th:nth-child(2) { 
    width: 45%;
    text-align: center;
  }
  
  .sheet-bonus-table th:nth-child(3) { 
    width: 30%;
    text-align: center;
  }
  
  .sheet-bonus-table tbody tr {
    transition: all 0.3s ease;
    background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(244,230,183,0.7));
  }
  
  .sheet-bonus-table tbody tr:hover {
    background: linear-gradient(135deg, rgba(218,165,32,0.1), rgba(244,230,183,0.3));
    transform: translateX(2px);
  }
  
  .sheet-bonus-table tbody tr:has(input[type="checkbox"]:checked) {
    background: linear-gradient(135deg, rgba(74,124,89,0.25), rgba(139,195,74,0.15));
    box-shadow: inset 0 0 8px rgba(74,124,89,0.3);
  }
  
  /* === CELLULES TD - ULTRA-COMPACTES === */
  .sheet-bonus-table td {
    padding: 4px 2px;
    border-bottom: 1px solid rgba(139,69,19,0.2);
    font-size: 11px;
    color: #2c1e0f;
    vertical-align: middle !important;
    text-align: center !important;
    height: 40px;
  }
  
  .sheet-bonus-table td:nth-child(1) {
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    color: #8b6914;
    text-shadow: 1px 1px 2px rgba(244,230,183,0.8);
    font-family: 'Georgia', serif;
    font-size: 10px;
  }
  
  /* === INPUTS VALEUR - ULTRA-COMPACTS === */
  .sheet-bonus-table input[type="number"] {
    width: 85px !important;
    max-width: 95%;
    margin: 0 auto !important;
    display: block !important;
    padding: 4px 6px;
    border: 1px solid rgba(139,69,19,0.3);
    border-radius: 4px;
    background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(244,230,183,0.6));
    font-size: 12px;
    font-family: 'Georgia', serif;
    transition: all 0.3s ease;
    outline: none;
    color: #2c1e0f;
    font-weight: bold;
    text-align: center !important;
    box-shadow: inset 0 1px 2px rgba(139,69,19,0.1);
    box-sizing: border-box;
  }
  
  .sheet-bonus-table input[type="number"]:focus {
    border-color: #daa520;
    background: linear-gradient(135deg, rgba(255,255,255,1), rgba(244,230,183,0.8));
    box-shadow: 0 0 6px rgba(218,165,32,0.4);
    transform: translateY(-1px);
  }
  
  /* === CHECKBOX - ULTRA-COMPACTE === */
  .sheet-bonus-check-label {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    cursor: pointer;
    position: relative;
    width: 100%;
    height: 100%;
    min-height: 32px;
    padding: 0 !important;
    margin: 0 auto !important;
  }
  
  .sheet-bonus-check-label input[type="checkbox"] {
    position: absolute;
    opacity: 0;
    cursor: pointer;
    width: 100%;
    height: 100%;
    margin: 0;
    left: 0;
    top: 0;
  }
  
  .sheet-bonus-check-label .sheet-check-icon {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 20px;
    height: 20px;
    border: 1px solid rgba(139,69,19,0.3);
    border-radius: 4px;
    background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(244,230,183,0.6));
    color: transparent;
    font-size: 14px;
    font-weight: bold;
    transition: all 0.3s ease;
    pointer-events: none;
    box-shadow: 0 1px 3px rgba(139,69,19,0.2);
    margin: 0 auto !important;
  }
  
  .sheet-bonus-check-label input[type="checkbox"]:checked + .sheet-check-icon {
    background: linear-gradient(135deg, rgba(74,124,89,0.9), rgba(61,107,79,0.8));
    border-color: rgba(74,124,89,0.6);
    color: #e8f5e9;
    box-shadow: 0 0 8px rgba(74,124,89,0.6);
    transform: scale(1.08);
  }
  
  .sheet-bonus-check-label:hover .sheet-check-icon {
    transform: scale(1.12);
    border-color: #daa520;
    box-shadow: 0 0 6px rgba(218,165,32,0.5);
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 600px) {
    .sheet-bonus-table th,
    .sheet-bonus-table td {
      padding: 4px 2px;
      font-size: 9px;
    }
    
    .sheet-bonus-table input[type="number"] {
      width: 75px !important;
      padding: 4px 6px;
      font-size: 11px;
    }
    
    .sheet-bonus-check-label .sheet-check-icon {
      width: 18px;
      height: 18px;
      font-size: 12px;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* === CHECKBOX À DEUX MAINS - ULTRA-COMPACTE ET ISOLÉE === */
  .sheet-inventory-right-column .sheet-inventory-block .sheet-subsection .sheet-twohands-label {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    white-space: nowrap;
    cursor: pointer;
    padding: 2px 4px;
    background: linear-gradient(135deg, rgba(139,105,20,0.15), rgba(107,79,16,0.1));
    border: 1px solid rgba(139,69,19,0.3);
    border-radius: 3px;
    transition: all 0.3s ease;
    margin-left: 4px;
    font-size: 8px;
    line-height: 1;
    max-width: 60px;
  }
  
  .sheet-inventory-right-column .sheet-inventory-block .sheet-subsection .sheet-twohands-label:hover {
    background: linear-gradient(135deg, rgba(139,105,20,0.25), rgba(107,79,16,0.2));
    border-color: rgba(139,69,19,0.5);
  }
  
  .sheet-inventory-right-column .sheet-inventory-block .sheet-subsection .sheet-twohands-checkbox {
    appearance: none;
    -webkit-appearance: none;
    width: 12px;
    height: 12px;
    border: 1px solid #8b6914;
    border-radius: 2px;
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    cursor: pointer;
    position: relative;
    transition: all 0.2s ease;
    flex-shrink: 0;
    margin: 0;
    padding: 0;
  }
  
  .sheet-inventory-right-column .sheet-inventory-block .sheet-subsection .sheet-twohands-checkbox:checked {
    background: linear-gradient(135deg, #d35400, #e67e22);
    border-color: #a04000;
    box-shadow: 0 0 4px rgba(211,84,0,0.5);
  }
  
  .sheet-inventory-right-column .sheet-inventory-block .sheet-subsection .sheet-twohands-checkbox:checked::after {
    content: '⚔';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #fff;
    font-size: 8px;
    font-weight: bold;
    line-height: 1;
  }
  
  .sheet-inventory-right-column .sheet-inventory-block .sheet-subsection .sheet-twohands-text {
    font-size: 8px;
    font-weight: 600;
    color: #f4e6b7;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.6);
    letter-spacing: 0.2px;
    line-height: 1;
  }
  
  /* === DÉSACTIVATION ARME SECONDAIRE - ULTRA-SCOPÉE === */
  .sheet-inventory-right-column .sheet-inventory-block .sheet-subsection .sheet-weapons-container:has(.sheet-twohands-checkbox:checked) .sheet-arme-secondaire-container {
    opacity: 0.4;
    filter: grayscale(50%) brightness(0.6);
    pointer-events: none;
    position: relative;
  }
  
  .sheet-inventory-right-column .sheet-inventory-block .sheet-subsection .sheet-weapons-container:has(.sheet-twohands-checkbox:checked) .sheet-arme-secondaire-container::after {
    content: ' 2 mains';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0,0,0,0.85);
    color: #ff6b6b;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 10px;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.9);
    white-space: nowrap;
    z-index: 10;
    pointer-events: none;
  }
  /* place bien la pastille tout à droite de la ligne d'arme */
  .charsheet .sheet-inventory-right-column .sheet-inventory-block .sheet-subsection .sheet-inventory-row .sheet-twohands-label {
    margin-left: auto; /* pousse le label à droite */
  }
  
  /* la pastille : largeur fixe + pas de débordement */
  .charsheet .sheet-inventory-right-column .sheet-inventory-block .sheet-subsection .sheet-twohands-label {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    width: 78px;              /* <= fixe la largeur */
    max-width: 78px;          /* sécurité */
    height: 16px;
    padding: 2px 4px;
    box-sizing: border-box;
    overflow: hidden;         /* cache le surplus */
  }
  
  /* la case reste à taille fixe */
  .charsheet .sheet-inventory-right-column .sheet-inventory-block .sheet-subsection .sheet-twohands-checkbox {
    flex: 0 0 12px;           /* 12px fixes */
  }
  
  /* le texte peut rétrécir + ellipsis si trop long */
  .charsheet .sheet-inventory-right-column .sheet-inventory-block .sheet-subsection .sheet-twohands-text {
    flex: 1 1 auto;
    min-width: 0;             /* IMPORTANT en flex pour autoriser le shrink */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;  /* … si ça dépasse */
    font-size: 8px;
    line-height: 1;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ================================================================= */
  /* ============= CSS JETS D'ATTAQUE ET DÉFENSE - CORRIGÉ ========== */
  /* ================================================================= */
  
  /* === SOUS-TITRE === */
  .sheet-combat-v2-section-header {
    padding: 15px 20px;
    text-align: center;
    border-bottom: 2px solid var(--sheet-primary-color);
  }
  
  .sheet-combat-v2-subtitle {
    margin: 0;
    font-size: 18px;
    font-weight: bold;
    color: var(--sheet-primary-color);
    text-transform: uppercase;
    letter-spacing: 1.5px;
    font-family: 'Georgia', serif;
    text-shadow: 1px 1px 2px rgba(244,230,183,0.6);
  }
  
  /* === TABLEAU ATTAQUE === */
  .sheet-combat-v2-attack-table {
    width: 100%;
    border-collapse: collapse;
    margin: 15px 0;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.8));
    border-radius: var(--sheet-border-radius);
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(139,69,19,0.2);
    border: 2px solid var(--sheet-accent-color);
    table-layout: auto; /* ✅ PERMET L'EXPANSION DES COLONNES */
  }
  
  .sheet-combat-v2-attack-table th {
    background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914);
    color: var(--sheet-light-bg);
    padding: 10px 8px;
    font-weight: bold;
    text-align: center;
    border-bottom: 2px solid var(--sheet-primary-color);
    font-family: 'Georgia', serif;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap; /* ✅ EMPÊCHE LES TITRES DE SE COUPER */
  }
  
  .sheet-combat-v2-attack-row {
    transition: var(--sheet-transition);
    border-bottom: 1px solid rgba(139,69,19,0.2);
  }
  
  .sheet-combat-v2-attack-row:hover {
    background: linear-gradient(135deg, rgba(218,165,32,0.1), rgba(244,230,183,0.2));
  }
  
  /* === CELLULES COMMUNES === */
  .sheet-combat-v2-attack-table td {
    padding: 10px 8px;
    text-align: center;
    border-right: 1px solid rgba(139,69,19,0.15);
  }
  
  .sheet-combat-v2-attack-table td:last-child {
    border-right: none;
  }
  
  /* === INPUTS === */
  
  /* Nom */
  .sheet-combat-v2-input-nom {
    width: 100%;
    min-width: 150px;
    max-width: 200px;
    padding: 8px 10px;
    border: 2px solid var(--sheet-accent-color);
    border-radius: 6px;
    text-align: left;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.8));
    font-weight: 600;
    font-size: 13px;
    color: var(--sheet-primary-color);
    font-family: 'Georgia', serif;
    transition: var(--sheet-transition);
    box-shadow: inset 0 1px 3px rgba(139,69,19,0.2);
    overflow: visible;
    text-overflow: clip;
  }
  
  /* Base jet */
  .sheet-combat-v2-input-base {
    min-width: 100px; /* ✅ AUGMENTÉ */
    width: 100%;
    max-width: 140px;
    padding: 8px 10px;
    border: 2px solid var(--sheet-accent-color);
    border-radius: 6px;
    text-align: center;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.8));
    font-weight: bold;
    font-size: 13px;
    color: var(--sheet-primary-color);
    font-family: 'Georgia', serif;
    transition: var(--sheet-transition);
    box-shadow: inset 0 1px 3px rgba(139,69,19,0.2);
    overflow: visible;
    text-overflow: clip;
  }
  
  /* Bonus de mods et classe d'arme */
  .sheet-combat-v2-input-bonus {
    min-width: 100px; /* ✅ AUGMENTÉ */
    width: 100%;
    max-width: 140px;
    padding: 8px 10px;
    border: 2px solid var(--sheet-accent-color);
    border-radius: 6px;
    text-align: center;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.8));
    font-weight: bold;
    font-size: 13px;
    color: var(--sheet-primary-color);
    font-family: 'Georgia', serif;
    transition: var(--sheet-transition);
    box-shadow: inset 0 1px 3px rgba(139,69,19,0.2);
    overflow: visible;
    text-overflow: clip;
  }
  
  /* === BONUS POURCENTAGE - LARGEUR AUGMENTÉE === */
  .sheet-combat-v2-bonus-pct-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px; /* ✅ AUGMENTÉ DE 4px À 6px */
    flex-wrap: nowrap; /* ✅ EMPÊCHE LE WRAP */
  }
  
  .sheet-combat-v2-input-bonus-pct {
    min-width: 70px; /* ✅ 50px → 70px POUR 3-4 CHIFFRES */
    width: 100%;
    max-width: 90px; /* ✅ AUGMENTÉ */
    padding: 8px 8px; /* ✅ PADDING LÉGÈREMENT AUGMENTÉ */
    border: 2px solid var(--sheet-accent-color);
    border-radius: 6px;
    text-align: center;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.8));
    font-weight: bold;
    font-size: 13px;
    color: var(--sheet-primary-color);
    font-family: 'Georgia', serif;
    transition: var(--sheet-transition);
    box-shadow: inset 0 1px 3px rgba(139,69,19,0.2);
    overflow: visible; /* ✅ EMPÊCHE LA COUPE */
    box-sizing: border-box; /* ✅ INCLUT BORDER DANS WIDTH */
  }
  
  .sheet-combat-v2-pct-symbol {
    font-weight: bold;
    font-size: 14px;
    color: var(--sheet-primary-color);
    flex-shrink: 0; /* ✅ EMPÊCHE LE % DE SE COMPRIMER */
    white-space: nowrap; /* ✅ EMPÊCHE LE WRAP */
  }
  
  /* === CELLULE BONUS % - EMPÊCHE LA COMPRESSION === */
  .sheet-combat-v2-cell-bonus-pct {
    min-width: 100px; /* ✅ LARGEUR MINIMALE DE LA CELLULE */
    white-space: nowrap; /* ✅ EMPÊCHE LE WRAP */
  }
  
  /* === CHAMPS NATURE ET TYPE === */
  .sheet-combat-v2-input-nature,
  .sheet-combat-v2-input-type {
    width: 100%;
    min-width: 100px;
    max-width: 140px;
    padding: 8px 10px;
    border: 2px solid var(--sheet-accent-color);
    border-radius: 6px;
    text-align: center;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.8));
    font-weight: 600;
    font-size: 12px;
    color: var(--sheet-primary-color);
    font-family: 'Georgia', serif;
    transition: var(--sheet-transition);
    box-shadow: inset 0 1px 3px rgba(139,69,19,0.2);
    overflow: visible;
    text-overflow: clip;
  }
  
  /* === FOCUS STATES === */
  .sheet-combat-v2-input-nom:focus,
  .sheet-combat-v2-input-base:focus,
  .sheet-combat-v2-input-bonus:focus,
  .sheet-combat-v2-input-bonus-pct:focus,
  .sheet-combat-v2-input-nature:focus,
  .sheet-combat-v2-input-type:focus {
    border-color: var(--sheet-secondary-color);
    background: linear-gradient(135deg, rgba(255,255,255,1), rgba(244,230,183,0.9));
    box-shadow: 
      inset 0 1px 3px rgba(139,69,19,0.2),
      0 0 8px rgba(218,165,32,0.4);
    transform: translateY(-1px);
    outline: none;
  }
  
  /* === BOUTON LANCER DE DÉS === */
  .sheet-combat-v2-dice-btn {
    background: linear-gradient(135deg, var(--sheet-secondary-color), var(--sheet-accent-color));
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    font-size: 20px;
    cursor: pointer;
    box-shadow: 0 3px 6px rgba(0,0,0,0.3);
    transition: var(--sheet-transition);
    color: white;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
    border: 2px solid rgba(244,230,183,0.3);
    position: relative;
    overflow: hidden;
    flex-shrink: 0;
  }
  
  .sheet-combat-v2-dice-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255,255,255,0.3);
    border-radius: 50%;
    transition: all 0.3s ease;
    transform: translate(-50%, -50%);
  }
  
  .sheet-combat-v2-dice-btn:hover {
    transform: scale(1.15) rotate(10deg);
    box-shadow: 0 6px 12px rgba(0,0,0,0.4);
  }
  
  .sheet-combat-v2-dice-btn:hover::before {
    width: 100%;
    height: 100%;
  }
  
  .sheet-combat-v2-dice-btn:focus {
    outline: 2px solid var(--sheet-secondary-color);
    outline-offset: 2px;
  }
  
  .sheet-combat-v2-dice-icon {
    position: relative;
    z-index: 1;
  }
  
  /* === CELLULE DÉS - EMPÊCHE LA COMPRESSION === */
  .sheet-combat-v2-cell-dice {
    width: 60px;
    min-width: 60px;
    text-align: center;
  }
  
  /* === SECTION INFOS DÉPLIABLE (ULTRA COMPACTE) === */
  .sheet-combat-v2-infos-row {
    background: linear-gradient(135deg, rgba(44,30,15,0.05), rgba(61,41,20,0.03));
  }
  
  .sheet-combat-v2-infos-td {
    padding: 0 !important;
    border-top: 2px solid rgba(139,69,19,0.2);
  }
  
  .sheet-combat-v2-infos-details {
    width: 100%;
  }
  
  .sheet-combat-v2-infos-summary {
    cursor: pointer;
    padding: 4px 10px;
    background: linear-gradient(135deg, rgba(139,105,20,0.15), rgba(184,134,11,0.1));
    border-bottom: 1px solid rgba(139,69,19,0.2);
    font-weight: bold;
    font-size: 10px;
    color: var(--sheet-primary-color);
    text-transform: uppercase;
    letter-spacing: 0.3px;
    font-family: 'Georgia', serif;
    transition: var(--sheet-transition);
    text-align: center;
  }
  
  .sheet-combat-v2-infos-summary:hover {
    background: linear-gradient(135deg, rgba(218,165,32,0.2), rgba(244,230,183,0.2));
    transform: translateX(2px);
  }
  
  .sheet-combat-v2-infos-content {
    padding: 8px 12px;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.7));
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 8px;
  }
  
  .sheet-combat-v2-info-field {
    display: flex;
    flex-direction: column;
    gap: 3px;
  }
  
  .sheet-combat-v2-info-label {
    font-weight: bold;
    font-size: 9px;
    color: var(--sheet-primary-color);
    text-transform: uppercase;
    letter-spacing: 0.2px;
    font-family: 'Georgia', serif;
    line-height: 1.2;
  }
  
  .sheet-combat-v2-info-input {
    width: 100%;
    padding: 5px 8px;
    border: 2px solid var(--sheet-accent-color);
    border-radius: 6px;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(244,230,183,0.8));
    font-size: 10px;
    color: var(--sheet-primary-color);
    font-family: 'Georgia', serif;
    transition: var(--sheet-transition);
    box-shadow: inset 0 1px 3px rgba(139,69,19,0.2);
  }
  
  .sheet-combat-v2-info-input:focus {
    border-color: var(--sheet-secondary-color);
    background: linear-gradient(135deg, rgba(255,255,255,1), rgba(244,230,183,0.9));
    box-shadow: 
      inset 0 1px 3px rgba(139,69,19,0.2),
      0 0 8px rgba(218,165,32,0.4);
    transform: translateY(-1px);
    outline: none;
  }
  
  /* Rendu des champs readonly */
  .sheet-readonly[readonly] {
    pointer-events: none;
    background: linear-gradient(135deg, #6b4f10, #4f3a0b);
    color: #f4e6b7;
    text-align: center;
    font-weight: bold;
    border: 1px solid rgba(0,0,0,0.25);
  }
  
  /* Indicateur visuel qu'il est lié à un select */
  .sheet-combat-v2-input-bonus[value^="+"]:not([value=""]),
  .sheet-combat-v2-input-bonus[value^="-"]:not([value=""]) {
    background: linear-gradient(135deg, rgba(218,165,32,0.15), rgba(244,230,183,0.9));
    border-color: var(--sheet-secondary-color);
  }
  
  /* Indicateur visuel pour les champs auto-remplis */
  .sheet-combat-v2-input-bonus[value*="d"]:not([value=""]) {
    background: linear-gradient(135deg, rgba(218,165,32,0.2), rgba(244,230,183,0.95));
    border-color: var(--sheet-secondary-color);
    font-weight: bold;
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 1200px) {
    .sheet-combat-v2-attack-table th,
    .sheet-combat-v2-attack-table td {
      padding: 8px 6px;
      font-size: 11px;
    }
    
    .sheet-combat-v2-input-nom {
      max-width: 140px;
      min-width: 120px;
    }
    
    .sheet-combat-v2-input-base {
      min-width: 90px;
    }
    
    .sheet-combat-v2-input-bonus {
      min-width: 90px;
    }
    
    .sheet-combat-v2-input-bonus-pct {
      min-width: 65px; /* ✅ RÉDUIT POUR ÉCRANS MOYENS */
    }
  }
  
  @media (max-width: 768px) {
    .sheet-combat-v2-attack-table {
      display: block;
      overflow-x: auto;
    }
    
    .sheet-combat-v2-infos-content {
      grid-template-columns: 1fr;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ================================================================= */
  /* =========== ROLL TEMPLATE : JETS D'ATTAQUE ===================== */
  /* ================================================================= */
  
  /* === CONTENEUR PRINCIPAL === */
  .sheet-rolltemplate-attack {
    font-family: 'Cinzel', 'Times New Roman', serif;
    margin: 12px auto;
    max-width: 420px; /* ✅ RETOUR à 420px car une seule colonne */
    text-align: center;
    position: relative;
  }
  
  /* === FOND ET BORDURE === */
  .sheet-rolltemplate-attack .sheet-template-attack-container {
    background: linear-gradient(145deg, #4a3728 0%, #3d2914 25%, #2c1e0f 50%, #3d2914 75%, #4a3728 100%);
    border: 4px solid #8b6914;
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.8);
    overflow: hidden;
    color: #f4e6b7;
    padding: 0;
    width: 100%;
    position: relative;
  }
  
  /* === EN-TÊTE DORÉ === */
  .sheet-rolltemplate-attack .sheet-template-attack-header {
    background: linear-gradient(145deg, #8b6914 0%, #b8860b 25%, #daa520 50%, #b8860b 75%, #8b6914 100%);
    color: #2c1e0f;
    padding: 15px 20px;
    margin: 0;
    text-align: center;
    border-bottom: 3px solid #654321;
    border-radius: 16px 16px 0 0;
  }
  
  /* === TITRE === */
  .sheet-rolltemplate-attack .sheet-template-attack-title {
    font-size: 18px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin: 0;
    text-shadow: 1px 1px 0 rgba(244,230,183,0.8), 2px 2px 4px rgba(0,0,0,0.6);
    font-family: 'Cinzel', 'Times New Roman', serif;
    line-height: 1.2;
  }
  
  /* === BADGE PERSONNAGE === */
  .sheet-rolltemplate-attack .sheet-template-attack-character {
    background: rgba(26,20,16,0.9);
    border: 2px solid #8b7355;
    border-radius: 8px;
    color: #f4e6b7;
    display: inline-block;
    font-size: 11px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-top: 8px;
    padding: 4px 12px;
    text-shadow: 1px 1px 0 rgba(0,0,0,0.8), 2px 2px 4px rgba(0,0,0,0.9);
  }
  
  /* === ZONE DE CONTENU === */
  .sheet-rolltemplate-attack .sheet-template-attack-content {
    padding: 20px; /* ✅ SIMPLIFIÉ car plus besoin d'espace horizontal */
    background: transparent;
    position: relative;
  }
  
  /* === BOÎTE DU RÉSULTAT === */
  .sheet-rolltemplate-attack .sheet-template-attack-dice {
    background: linear-gradient(145deg, #daa520 0%, #b8860b 25%, #8b6914 50%, #6b4f10 75%, #8b6914 100%);
    border: 3px solid #654321;
    border-radius: 12px;
    padding: 12px 16px;
    text-align: center;
    font-size: 28px;
    font-weight: 900;
    color: #f5f5dc;
    text-shadow: 2px 2px 0 rgba(44,30,15,0.9), -1px -1px 0 rgba(44,30,15,0.7), 0 0 8px rgba(245,245,220,0.8);
    box-shadow: 
      0 4px 8px rgba(0,0,0,0.6),
      inset 0 1px 0 rgba(255,255,255,0.3);
    min-height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 14px;
    font-family: 'Cinzel', 'Times New Roman', serif;
    width: 100%;
  }
  
  /* === RÉSULTATS DES DÉS ROLL20 === */
  .sheet-rolltemplate-attack .inlinerollresult {
    background: transparent !important;
    border: none !important;
    color: #f5f5dc !important;
    font-weight: 900 !important;
    font-size: 28px !important;
    text-shadow: 2px 2px 0 rgba(44,30,15,0.9), -1px -1px 0 rgba(44,30,15,0.7), 0 0 8px rgba(245,245,220,0.8) !important;
    padding: 0 !important;
    margin: 0 !important;
    font-family: 'Cinzel', 'Times New Roman', serif !important;
  }
  
  /* === CRITIQUE RÉUSSI === */
  .sheet-rolltemplate-attack .inlinerollresult.fullcrit {
    color: #ffd700 !important;
    text-shadow: 0 0 10px rgba(255,215,0,0.8), 2px 2px 0 rgba(44,30,15,0.9) !important;
  }
  
  /* === CRITIQUE RATÉ === */
  .sheet-rolltemplate-attack .inlinerollresult.fullfail {
    color: #dc143c !important;
    text-shadow: 0 0 10px rgba(220,20,60,0.8), 2px 2px 0 rgba(44,30,15,0.9) !important;
  }
  
  /* === GRILLE 1 COLONNE (VERTICAL) === */
  .sheet-rolltemplate-attack .sheet-template-attack-info-grid {
    display: grid;
    grid-template-columns: 1fr; /* ✅ UNE SEULE COLONNE */
    gap: 10px; /* ✅ ESPACE ENTRE NATURE ET TYPE */
    margin-top: 0;
    width: 100%;
  }
  
  /* === CASES NATURE / TYPE === */
  .sheet-rolltemplate-attack .sheet-template-attack-info-item {
    background: linear-gradient(145deg, rgba(139,69,19,0.35), rgba(101,67,33,0.25), rgba(74,55,40,0.35));
    border: 2px solid #8b4513;
    border-radius: 12px;
    padding: 10px 16px; /* ✅ PADDING OPTIMISÉ POUR UNE COLONNE */
    text-align: center;
    box-shadow: 
      0 3px 6px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(139,69,19,0.3);
    transition: all 0.3s ease;
    min-width: 0;
    overflow: visible;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 55px; /* ✅ HAUTEUR MINIMALE */
  }
  
  .sheet-rolltemplate-attack .sheet-template-attack-info-item:hover {
    transform: translateY(-2px);
    box-shadow: 
      0 5px 10px rgba(0,0,0,0.5),
      inset 0 1px 0 rgba(139,69,19,0.4);
    background: linear-gradient(145deg, rgba(139,69,19,0.45), rgba(101,67,33,0.35), rgba(74,55,40,0.45));
  }
  
  /* === LABELS (NATURE / TYPE) === */
  .sheet-rolltemplate-attack .sheet-template-attack-info-label {
    font-size: 10px;
    font-weight: bold;
    color: #daa520;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 6px;
    text-shadow: 1px 1px 0 rgba(244,230,183,0.8), 2px 2px 4px rgba(0,0,0,0.6);
    font-family: 'Georgia', serif;
    white-space: nowrap;
    line-height: 1;
  }
  
  /* === VALEURS (Tranchant / Physique) === */
  .sheet-rolltemplate-attack .sheet-template-attack-info-value {
    font-size: 14px; /* ✅ AUGMENTÉ à 14px car plus d'espace */
    font-weight: bold;
    color: #f4e6b7;
    padding: 6px 14px; /* ✅ AUGMENTÉ le padding */
    border-radius: 8px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    font-family: 'Georgia', serif;
    line-height: 1.3;
    width: 100%;
    box-sizing: border-box;
    white-space: nowrap; /* ✅ TEXTE SUR UNE LIGNE */
    overflow: visible;
    display: block;
  }
  
  /* === BADGE NATURE === */
  .sheet-rolltemplate-attack .sheet-attack-nature-badge {
    background: linear-gradient(145deg, rgba(184,134,11,0.5), rgba(218,165,32,0.4)) !important;
    border: 2px solid rgba(139,69,19,0.6) !important;
    box-shadow: 
      inset 0 1px 0 rgba(255,255,255,0.3),
      0 2px 4px rgba(0,0,0,0.3) !important;
  }
  
  /* === BADGE TYPE === */
  .sheet-rolltemplate-attack .sheet-attack-type-badge {
    background: linear-gradient(145deg, rgba(139,69,19,0.5), rgba(160,82,45,0.4)) !important;
    border: 2px solid rgba(101,67,33,0.6) !important;
    box-shadow: 
      inset 0 1px 0 rgba(255,255,255,0.3),
      0 2px 4px rgba(0,0,0,0.3) !important;
  }
  
  /* === CENTRAGE GLOBAL === */
  .sheet-rolltemplate-attack,
  .sheet-rolltemplate-attack * {
    text-align: center !important;
    box-sizing: border-box;
  }
  
  .sheet-rolltemplate-attack {
    margin-left: auto !important;
    margin-right: auto !important;
  }
  
  /* ================================================================= */
  /* ===================== RESPONSIVE DESIGN ========================= */
  /* ================================================================= */
  
  /* === TABLETTES (< 768px) === */
  @media (max-width: 768px) {
    .sheet-rolltemplate-attack {
      max-width: 95%;
      margin: 8px auto;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-header {
      padding: 12px 16px;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-title {
      font-size: 16px;
      letter-spacing: 1px;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-content {
      padding: 16px;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-dice {
      font-size: 24px;
      padding: 10px 14px;
      min-height: 45px;
    }
    
    .sheet-rolltemplate-attack .inlinerollresult {
      font-size: 24px !important;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-info-grid {
      gap: 8px;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-info-item {
      padding: 10px 14px;
      min-height: 50px;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-info-label {
      font-size: 10px;
      margin-bottom: 5px;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-info-value {
      font-size: 13px;
      padding: 6px 12px;
    }
  }
  
  /* === MOBILES (< 480px) === */
  @media (max-width: 480px) {
    .sheet-rolltemplate-attack {
      max-width: 100%;
      margin: 4px auto;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-header {
      padding: 10px 12px;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-title {
      font-size: 14px;
      letter-spacing: 0.5px;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-character {
      font-size: 10px;
      padding: 3px 10px;
      margin-top: 6px;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-content {
      padding: 12px;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-dice {
      font-size: 22px;
      padding: 8px 12px;
      min-height: 40px;
      margin-bottom: 12px;
    }
    
    .sheet-rolltemplate-attack .inlinerollresult {
      font-size: 22px !important;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-info-grid {
      gap: 8px;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-info-item {
      padding: 8px 12px;
      min-height: 45px;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-info-label {
      font-size: 9px;
      margin-bottom: 4px;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-info-value {
      font-size: 12px;
      padding: 5px 10px;
    }
  }
  
  /* === TRÈS PETITS ÉCRANS (< 360px) === */
  @media (max-width: 360px) {
    .sheet-rolltemplate-attack .sheet-template-attack-title {
      font-size: 13px;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-dice {
      font-size: 20px;
      padding: 8px 12px;
    }
    
    .sheet-rolltemplate-attack .inlinerollresult {
      font-size: 20px !important;
    }
    
    .sheet-rolltemplate-attack .sheet-template-attack-info-value {
      font-size: 11px;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ========================================
     PAGE VERROUILLÉE DLC
     Style cadenas + scellement
     ======================================== */
  
  /* === CONTENEUR PRINCIPAL === */
  .charsheet .sheet-dlc-locked-container {
    position: relative;
    min-height: 500px;
    background: linear-gradient(135deg, 
      rgba(44, 30, 15, 0.95) 0%, 
      rgba(61, 41, 20, 0.95) 50%, 
      rgba(44, 30, 15, 0.95) 100%);
    border: 4px solid #8b6914;
    border-radius: 20px;
    margin: 20px 0;
    padding: 40px;
    overflow: hidden;
    box-shadow: 
      0 0 0 2px #654321,
      0 8px 30px rgba(0, 0, 0, 0.8),
      inset 0 0 50px rgba(0, 0, 0, 0.5);
    
    /* Empêcher toute interaction */
    pointer-events: none;
    user-select: none;
  }
  
  /* === OVERLAY DE SCELLEMENT === */
  .charsheet .sheet-dlc-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
      repeating-linear-gradient(
        45deg,
        transparent,
        transparent 10px,
        rgba(139, 105, 20, 0.05) 10px,
        rgba(139, 105, 20, 0.05) 20px
      );
    z-index: 1;
    pointer-events: none;
  }
  
  /* === CADENAS DANS LES COINS === */
  .charsheet .sheet-dlc-lock {
    position: absolute;
    font-size: 48px;
    opacity: 0.6;
    z-index: 3;
    filter: drop-shadow(0 0 10px rgba(218, 165, 32, 0.5));
    animation: lockPulse 3s ease-in-out infinite;
  }
  
  .charsheet .sheet-dlc-lock-topleft {
    top: 20px;
    left: 20px;
    transform: rotate(-15deg);
    animation-delay: 0s;
  }
  
  .charsheet .sheet-dlc-lock-topright {
    top: 20px;
    right: 20px;
    transform: rotate(15deg);
    animation-delay: 0.5s;
  }
  
  .charsheet .sheet-dlc-lock-bottomleft {
    bottom: 20px;
    left: 20px;
    transform: rotate(15deg);
    animation-delay: 1s;
  }
  
  .charsheet .sheet-dlc-lock-bottomright {
    bottom: 20px;
    right: 20px;
    transform: rotate(-15deg);
    animation-delay: 1.5s;
  }
  
  /* === CADENAS CENTRAL === */
  .charsheet .sheet-dlc-lock-central {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 2;
    text-align: center;
    opacity: 0.15;
  }
  
  .charsheet .sheet-dlc-lock-icon {
    font-size: 150px;
    filter: drop-shadow(0 0 20px rgba(218, 165, 32, 0.3));
    animation: lockFloat 4s ease-in-out infinite;
  }
  
  .charsheet .sheet-dlc-lock-chain {
    font-size: 60px;
    margin-top: -20px;
    animation: lockFloat 4s ease-in-out infinite reverse;
  }
  
  /* === BOÎTE DE MESSAGE === */
  .charsheet .sheet-dlc-message-box {
    position: relative;
    z-index: 4;
    text-align: center;
    padding: 60px 40px;
    background: linear-gradient(135deg, 
      rgba(139, 105, 20, 0.3) 0%, 
      rgba(218, 165, 32, 0.2) 50%, 
      rgba(139, 105, 20, 0.3) 100%);
    border: 3px solid #daa520;
    border-radius: 15px;
    box-shadow: 
      0 0 30px rgba(218, 165, 32, 0.4),
      inset 0 0 20px rgba(0, 0, 0, 0.3);
    max-width: 600px;
    margin: 80px auto;
  }
  
  /* === TITRE PRINCIPAL === */
  .charsheet .sheet-dlc-title {
    font-size: 36px;
    font-weight: bold;
    color: #daa520;
    text-transform: uppercase;
    letter-spacing: 4px;
    margin-bottom: 20px;
    text-shadow: 
      0 0 10px rgba(218, 165, 32, 0.8),
      2px 2px 4px rgba(0, 0, 0, 0.9),
      0 0 20px rgba(218, 165, 32, 0.5);
    font-family: 'Cinzel', 'Times New Roman', serif;
    animation: titleGlow 2s ease-in-out infinite alternate;
  }
  
  /* === SOUS-TITRE === */
  .charsheet .sheet-dlc-subtitle {
    font-size: 24px;
    font-weight: bold;
    color: #f4e6b7;
    margin-bottom: 15px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    font-family: 'Georgia', serif;
  }
  
  /* === TEXTE === */
  .charsheet .sheet-dlc-text {
    font-size: 18px;
    color: #d4c294;
    margin-bottom: 30px;
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
    font-style: italic;
  }
  
  /* === COMING SOON === */
  .charsheet .sheet-dlc-coming-soon {
    font-size: 22px;
    font-weight: bold;
    color: #cd853f;
    padding: 15px 30px;
    background: linear-gradient(90deg, 
      transparent 0%, 
      rgba(218, 165, 32, 0.2) 50%, 
      transparent 100%);
    border-top: 2px solid rgba(218, 165, 32, 0.5);
    border-bottom: 2px solid rgba(218, 165, 32, 0.5);
    margin-top: 20px;
    text-shadow: 
      0 0 5px rgba(218, 165, 32, 0.6),
      1px 1px 3px rgba(0, 0, 0, 0.8);
    animation: comingSoonPulse 2s ease-in-out infinite;
  }
  
  /* ========================================
     ANIMATIONS
     ======================================== */
  
  /* Animation des cadenas (pulsation) */
  @keyframes lockPulse {
    0%, 100% {
      opacity: 0.4;
      transform: scale(1) rotate(var(--rotate, 0deg));
    }
    50% {
      opacity: 0.8;
      transform: scale(1.1) rotate(var(--rotate, 0deg));
    }
  }
  
  /* Animation flottement cadenas central */
  @keyframes lockFloat {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-20px);
    }
  }
  
  /* Animation lueur du titre */
  @keyframes titleGlow {
    0% {
      text-shadow: 
        0 0 10px rgba(218, 165, 32, 0.6),
        2px 2px 4px rgba(0, 0, 0, 0.9),
        0 0 20px rgba(218, 165, 32, 0.3);
    }
    100% {
      text-shadow: 
        0 0 20px rgba(218, 165, 32, 1),
        2px 2px 4px rgba(0, 0, 0, 0.9),
        0 0 40px rgba(218, 165, 32, 0.6);
    }
  }
  
  /* Animation Coming Soon */
  @keyframes comingSoonPulse {
    0%, 100% {
      opacity: 0.8;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.05);
    }
  }
  
  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    .charsheet .sheet-dlc-title {
      font-size: 24px;
      letter-spacing: 2px;
    }
    
    .charsheet .sheet-dlc-subtitle {
      font-size: 18px;
    }
    
    .charsheet .sheet-dlc-text {
      font-size: 16px;
    }
    
    .charsheet .sheet-dlc-lock {
      font-size: 32px;
    }
    
    .charsheet .sheet-dlc-lock-icon {
      font-size: 100px;
    }
    
    .charsheet .sheet-dlc-message-box {
      padding: 40px 20px;
      margin: 60px 20px;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ==================== BARRE D'ONGLETS FANTASY MÉDIÉVAL ==================== */
  
  /* === VARIABLES FANTASY === */
  :root {
    --fantasy-primary: #8b6914;
    --fantasy-secondary: #8b4513;
    --fantasy-dark: #2c1e0f;
    --fantasy-medium: #3d2914;
    --fantasy-light: #f4e6b7;
    --fantasy-gold: #cd853f;
    --fantasy-shadow: rgba(0,0,0,0.6);
    --fantasy-green: #4a7c59;
    --fantasy-red: #a84432;
    --fantasy-blue: #3d5a80;
  }
  
  /* === CONTAINER PRINCIPAL === */
  .sheet-tabsbar {
    font-family: 'Georgia', serif;
    background: linear-gradient(145deg, var(--fantasy-dark), var(--fantasy-medium), var(--fantasy-dark));
    padding: 6px 4px 3px 4px;
    border: 3px solid var(--fantasy-secondary);
    border-radius: 8px;
    box-shadow: 
      0 4px 12px var(--fantasy-shadow),
      inset 0 1px 0 rgba(139,105,20,0.3);
    margin-bottom: 0;
    position: relative;
    overflow: visible;
    display: flex;
    align-items: center;
  }
  
  /* Effet de texture parchemin en arrière-plan */
  .sheet-tabsbar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(139,105,20,0.02) 2px,
        rgba(139,105,20,0.02) 4px
      );
    pointer-events: none;
    border-radius: 8px;
  }
  
  /* === WRAPPER DES BOUTONS === */
  .sheet-tab-buttons {
    display: flex;
    gap: 4px;
    align-items: center;
    flex-wrap: wrap;
    position: relative;
    z-index: 1;
    width: 100%;
  }
  
  /* ========================================
     ENGRENAGE - STYLE FANTASY
     ======================================== */
  
  .sheet-gear-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    margin-right: 0;
  }
  
  /* Bouton engrenage */
  .sheet-gear-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    min-width: 36px;
    padding: 0;
    background: linear-gradient(135deg, var(--fantasy-primary), #6b4f10, var(--fantasy-primary));
    border: 2px solid #654321;
    border-radius: 6px;
    color: var(--fantasy-light);
    font-size: 18px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    box-shadow: 
      0 2px 6px var(--fantasy-shadow),
      inset 0 1px 0 rgba(244,230,183,0.2);
    text-shadow: 1px 1px 2px var(--fantasy-shadow);
  }
  
  .sheet-gear-btn::before {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    right: 2px;
    bottom: 2px;
    border: 1px solid rgba(244,230,183,0.2);
    border-radius: 4px;
    opacity: 0.3;
    transition: opacity 0.3s ease;
  }
  
  .sheet-gear-btn:hover {
    background: linear-gradient(135deg, #a68b2f, var(--fantasy-primary), #a68b2f);
    border-color: var(--fantasy-primary);
    color: var(--fantasy-light);
    box-shadow: 
      0 4px 10px rgba(139,105,20,0.6),
      inset 0 1px 0 rgba(244,230,183,0.3);
    transform: translateY(-2px) rotate(15deg);
  }
  
  .sheet-gear-btn:hover::before {
    opacity: 0.6;
  }
  
  /* Animation engrenage ouvert */
  .sheet-gear-toggle:checked ~ .sheet-gear-btn {
    background: linear-gradient(135deg, var(--fantasy-gold), var(--fantasy-primary));
    border-color: var(--fantasy-gold);
    color: var(--fantasy-dark);
    animation: gear-pulse 2s ease-in-out infinite;
    box-shadow: 
      0 0 20px rgba(205,133,63,0.6),
      inset 0 2px 4px rgba(0,0,0,0.3);
  }
  
  @keyframes gear-pulse {
    0%, 100% { 
      box-shadow: 
        0 0 15px rgba(205,133,63,0.4),
        inset 0 2px 4px rgba(0,0,0,0.3);
    }
    50% { 
      box-shadow: 
        0 0 30px rgba(205,133,63,0.8),
        inset 0 2px 4px rgba(0,0,0,0.2);
    }
  }
  
  /* Cacher le checkbox */
  .sheet-gear-toggle {
    display: none;
  }
  
  /* === PANNEAU D'OPTIONS === */
  .sheet-settings-panel {
    position: absolute;
    top: calc(100% + 8px);
    left: 0;
    min-width: 300px;
    background: linear-gradient(145deg, rgba(139,69,19,0.2), rgba(101,67,33,0.15), rgba(74,55,40,0.1));
    border: 3px solid var(--fantasy-secondary);
    border-radius: 10px;
    padding: 16px;
    box-shadow: 
      0 6px 16px var(--fantasy-shadow),
      inset 0 1px 0 rgba(139,105,20,0.3);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-15px) scale(0.95);
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    z-index: 1000;
  }
  
  /* Ouverture du panneau */
  .sheet-gear-toggle:checked ~ .sheet-settings-panel {
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
  }
  
  /* Titre du panneau */
  .sheet-settings-title {
    font-size: 15px;
    font-weight: bold;
    color: var(--fantasy-gold);
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 12px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--fantasy-secondary);
    text-shadow: 1px 1px 3px var(--fantasy-shadow);
    position: relative;
  }
  
  .sheet-settings-title::after {
    content: '⚙';
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    color: var(--fantasy-primary);
    font-size: 18px;
  }
  
  /* Lignes d'options */
  .sheet-settings-row {
    margin: 12px 0;
    position: relative;
  }
  
  .sheet-settings-row::before {
    content: '';
    position: absolute;
    left: -8px;
    top: 50%;
    width: 3px;
    height: 0;
    background: var(--fantasy-gold);
    transition: height 0.3s ease;
    transform: translateY(-50%);
    border-radius: 2px;
  }
  
  .sheet-settings-row:hover::before {
    height: 100%;
    box-shadow: 0 0 8px rgba(205,133,63,0.5);
  }
  
  .sheet-settings-row label {
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--fantasy-light);
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    padding: 8px 10px;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    border-radius: 4px;
  }
  
  .sheet-settings-row label:hover {
    color: var(--fantasy-gold);
    background: rgba(139,105,20,0.15);
    padding-left: 18px;
  }
  
  /* Checkbox custom fantasy */
  .sheet-settings-row input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    border: 2px solid var(--fantasy-primary);
    border-radius: 4px;
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease;
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.2),
      0 1px 2px rgba(139,105,20,0.3);
  }
  
  .sheet-settings-row input[type="checkbox"]:hover {
    border-color: var(--fantasy-gold);
    box-shadow: 
      0 0 10px rgba(205,133,63,0.4),
      inset 0 1px 3px rgba(0,0,0,0.2);
  }
  
  .sheet-settings-row input[type="checkbox"]:checked {
    background: linear-gradient(135deg, var(--fantasy-green), #3d6b4f);
    border-color: #2d5a3f;
    box-shadow: 
      0 0 12px rgba(74,124,89,0.5),
      inset 0 1px 3px rgba(255,255,255,0.2);
  }
  
  .sheet-settings-row input[type="checkbox"]:checked::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #e8f5e9;
    font-size: 14px;
    font-weight: bold;
    text-shadow: 0 0 4px rgba(0,0,0,0.5);
  }
  
  /* ========================================
     BOUTONS D'ONGLETS - STYLE FANTASY
     ======================================== */
  
  .sheet-tab-button {
    padding: 0 14px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--fantasy-primary), #6b4f10, var(--fantasy-primary));
    border: 2px solid #654321;
    border-radius: 6px;
    color: var(--fantasy-light);
    font-family: 'Georgia', serif;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 
      0 2px 6px var(--fantasy-shadow),
      inset 0 1px 0 rgba(244,230,183,0.2);
    text-shadow: 1px 1px 2px var(--fantasy-shadow);
  }
  
  /* Bordure intérieure subtile */
  .sheet-tab-button::before {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    right: 2px;
    bottom: 2px;
    border: 1px solid rgba(244,230,183,0.2);
    border-radius: 4px;
    opacity: 0.3;
    transition: opacity 0.3s ease;
  }
  
  /* Effet de lumière au survol */
  .sheet-tab-button::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(244,230,183,0.3), transparent);
    transition: left 0.5s ease;
  }
  
  .sheet-tab-button:hover {
    background: linear-gradient(135deg, #a68b2f, var(--fantasy-primary), #a68b2f);
    border-color: var(--fantasy-primary);
    color: var(--fantasy-light);
    box-shadow: 
      0 4px 10px rgba(139,105,20,0.6),
      inset 0 1px 0 rgba(244,230,183,0.3);
    transform: translateY(-2px);
  }
  
  .sheet-tab-button:hover::before {
    opacity: 0.6;
  }
  
  .sheet-tab-button:hover::after {
    left: 100%;
  }
  
  /* Onglet actif */
  .sheet-tab-button:active,
  .sheet-tab-button.active {
    background: linear-gradient(135deg, var(--fantasy-gold), var(--fantasy-primary));
    border-color: var(--fantasy-gold);
    color: var(--fantasy-dark);
    box-shadow: 
      0 0 20px rgba(205,133,63,0.6),
      inset 0 2px 4px rgba(0,0,0,0.3);
    transform: translateY(0);
  }
  
  .sheet-tab-button.active::before {
    opacity: 1;
    border-color: rgba(244,230,183,0.5);
    animation: glow-border 2s ease-in-out infinite;
  }
  
  @keyframes glow-border {
    0%, 100% { 
      opacity: 0.5;
      box-shadow: 0 0 5px rgba(205,133,63,0.3);
    }
    50% { 
      opacity: 1;
      box-shadow: 0 0 15px rgba(205,133,63,0.6);
    }
  }
  
  /* Effet de relief subtil sur l'onglet actif */
  .sheet-tab-button.active {
    animation: subtle-float 3s ease-in-out infinite;
  }
  
  @keyframes subtle-float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-1px); }
  }
  
  /* ========================================
     RESPONSIVE
     ======================================== */
  
  @media (max-width: 768px) {
    .sheet-tabsbar {
      padding: 5px 3px 2px 3px;
    }
    
    .sheet-tab-buttons {
      gap: 3px;
    }
    
    .sheet-tab-button {
      height: 32px;
      padding: 0 10px;
      font-size: 10px;
    }
    
    .sheet-gear-btn {
      width: 32px;
      height: 32px;
      min-width: 32px;
      font-size: 16px;
    }
    
    .sheet-settings-panel {
      min-width: 260px;
      padding: 14px;
    }
  }
  
  /* ==================== FIN BARRE D'ONGLETS FANTASY MÉDIÉVAL ==================== */
  /* ==================== GESTION DES ONGLETS ET OPTIONS CONDITIONNELLES ==================== */
  
  /* === Cacher les inputs des onglets === */
  .charsheet .sheet-tab-input,
  .charsheet .sheet-hidden {
    display: none !important;
    position: absolute !important;
    left: -9999px !important;
  }
  
  /* === Cacher les options "Sort uniquement" par défaut === */
  .charsheet .sheet-sort-only-option {
    display: none;
  }
  
  /* === Afficher les options "Sort uniquement" quand onglet Sort est actif === */
  .charsheet input[name="attr_ui_tab"]:checked[value="sort"] ~ .sheet-tabsbar .sheet-sort-only-option {
    display: block;
  }
  
  /* === Style spécial pour les options Sort (optionnel) === */
  .charsheet .sheet-sort-only-option {
    background: rgba(139,105,20,0.15);
    border-left: 3px solid #8b6914;
    padding-left: 8px;
    margin-top: 8px;
    border-radius: 4px;
  }
  
  .charsheet .sheet-sort-only-option label {
    color: #deb887;
    font-weight: 600;
  }
  
  /* ==================== MASQUAGE DES ZONES DE COULEUR ==================== */
  
  /* === Cacher toutes les zones de couleur quand la checkbox est cochée === */
  .charsheet input[name="attr_hide_color_zones"]:checked ~ .sheet-tab-content .sheet-jet-color-zone {
    display: none !important;
  }
  
  /* === Alternative : cibler depuis n'importe où dans le DOM === */
  .charsheet input[name="attr_hide_color_zones"]:checked ~ * .sheet-jet-color-zone,
  .charsheet input[name="attr_hide_color_zones"]:checked ~ .sheet-tabsbar ~ * .sheet-jet-color-zone {
    display: none !important;
  }
  
  /* ==================== AFFICHAGE CONDITIONNEL DES ONGLETS ==================== */
  
  /* Cacher tout le contenu par défaut */
  .charsheet .sheet-tab-content {
    display: none;
  }
  
  /* Afficher uniquement le contenu de l'onglet actif */
  .charsheet input[name="attr_ui_tab"]:checked[value="profils"] ~ .sheet-tab-content.sheet-profils,
  .charsheet input[name="attr_ui_tab"]:checked[value="combat"] ~ .sheet-tab-content.sheet-combat,
  .charsheet input[name="attr_ui_tab"]:checked[value="talent"] ~ .sheet-tab-content.sheet-talent,
  .charsheet input[name="attr_ui_tab"]:checked[value="sort"] ~ .sheet-tab-content.sheet-sort,
  .charsheet input[name="attr_ui_tab"]:checked[value="inventaire"] ~ .sheet-tab-content.sheet-inventaire,
  .charsheet input[name="attr_ui_tab"]:checked[value="entrainement"] ~ .sheet-tab-content.sheet-entrainement,
  .charsheet input[name="attr_ui_tab"]:checked[value="connaissance"] ~ .sheet-tab-content.sheet-connaissance,
  .charsheet input[name="attr_ui_tab"]:checked[value="infos"] ~ .sheet-tab-content.sheet-infos,
  .charsheet input[name="attr_ui_tab"]:checked[value="tableau"] ~ .sheet-tab-content.sheet-tableau,
  .charsheet input[name="attr_ui_tab"]:checked[value="metier"] ~ .sheet-tab-content.sheet-metier,
  .charsheet input[name="attr_ui_tab"]:checked[value="corruption"] ~ .sheet-tab-content.sheet-corruption {
    display: block;
  }
  
  /* === Style visuel pour le bouton d'onglet actif === */
  .charsheet input[name="attr_ui_tab"]:checked[value="profils"] ~ .sheet-tabsbar label[for="attr_ui_tab_profils"],
  .charsheet input[name="attr_ui_tab"]:checked[value="combat"] ~ .sheet-tabsbar label[for="attr_ui_tab_combat"],
  .charsheet input[name="attr_ui_tab"]:checked[value="talent"] ~ .sheet-tabsbar label[for="attr_ui_tab_talent"],
  .charsheet input[name="attr_ui_tab"]:checked[value="sort"] ~ .sheet-tabsbar label[for="attr_ui_tab_sort"],
  .charsheet input[name="attr_ui_tab"]:checked[value="inventaire"] ~ .sheet-tabsbar label[for="attr_ui_tab_inventaire"],
  .charsheet input[name="attr_ui_tab"]:checked[value="entrainement"] ~ .sheet-tabsbar label[for="attr_ui_tab_entrainement"],
  .charsheet input[name="attr_ui_tab"]:checked[value="connaissance"] ~ .sheet-tabsbar label[for="attr_ui_tab_connaissance"],
  .charsheet input[name="attr_ui_tab"]:checked[value="infos"] ~ .sheet-tabsbar label[for="attr_ui_tab_infos"],
  .charsheet input[name="attr_ui_tab"]:checked[value="tableau"] ~ .sheet-tabsbar label[for="attr_ui_tab_tableau"],
  .charsheet input[name="attr_ui_tab"]:checked[value="metier"] ~ .sheet-tabsbar label[for="attr_ui_tab_metier"],
  .charsheet input[name="attr_ui_tab"]:checked[value="corruption"] ~ .sheet-tabsbar label[for="attr_ui_tab_corruption"] {
    background: linear-gradient(135deg, var(--fantasy-gold), var(--fantasy-primary)) !important;
    border-color: var(--fantasy-gold) !important;
    color: var(--fantasy-dark) !important;
    box-shadow: 
      0 0 20px rgba(205,133,63,0.6),
      inset 0 2px 4px rgba(0,0,0,0.3) !important;
    transform: translateY(0);
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* Positioning container */
  .sheet-gear-wrapper {
    position: relative;
    display: inline-block;   /* sits nicely in the tabs bar */
  }
  
  /* Hide the raw checkbox */
  .sheet-gear-toggle {
    position: absolute;
    opacity: 0;
    pointer-events: none;
  }
  
  /* Panel: hidden by default */
  .sheet-settings-panel {
    display: none;
    position: absolute;
    top: 100%;               /* just below the gear button */
    left: 0;
    min-width: 260px;
    z-index: 999;
    /* basic frame (tweak to your theme) */
    background: #1f1a14;
    border: 2px solid #8b6914;
    border-radius: 10px;
    padding: 10px 12px;
    box-shadow: 0 8px 16px rgba(0,0,0,.6);
  }
  
  /* When the checkbox is checked, show the panel */
  .sheet-gear-toggle:checked ~ .sheet-settings-panel {
    display: block;
  }
  
  /* Optional: keep panel open when clicking inside */
  .sheet-settings-panel * {
    pointer-events: auto;
  }
  
  /* (Optional) basic visuals for rows/titles */
  .sheet-settings-title {
    font-weight: bold;
    margin-bottom: 8px;
  }
  .sheet-settings-row {
    margin: 6px 0;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ==================== SECTION FAVEUR DU DESTIN (COMPACTE) ==================== */
  
  /* Wrapper principal */
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-wrapper {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 8px;
    padding: 0;
    margin-top: 16px;
    margin-bottom: 0;
    box-shadow: 0 2px 6px rgba(0,0,0,0.6);
    overflow: hidden;
  }
  
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-wrapper[open] {
    box-shadow: 0 3px 8px rgba(0,0,0,0.7);
    border-color: #8b6914;
  }
  
  /* Titre - Taille conservée */
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-title {
    background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
    color: #f4e6b7;
    padding: 12px 16px 12px 38px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    cursor: pointer;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    border-bottom: 2px solid #654321;
    font-size: 14px;
    position: relative;
    list-style: none;
  }
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-wrapper[open] > .sheet-faveur-explicative-title::before {
    transform: translateY(-50%) rotate(90deg);
  }
  
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-title::-webkit-details-marker {
    display: none;
  }
  
  /* Contenu - Padding réduit */
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-content {
    padding: 12px;
    background: linear-gradient(135deg, rgba(44,30,15,0.3), rgba(61,41,20,0.2));
  }
  /* Chaque règle - Plus compacte */
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-rule {
    background: linear-gradient(135deg, rgba(61,41,20,0.4), rgba(74,55,40,0.3));
    border: 2px solid rgba(139,105,20,0.3);
    border-left: 3px solid #8b6914;
    border-radius: 6px;
    padding: 10px;
    margin-bottom: 10px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.5);
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-rule:hover {
    background: linear-gradient(135deg, rgba(61,41,20,0.5), rgba(74,55,40,0.4));
    border-left-color: #b8860b;
    box-shadow: 0 3px 8px rgba(139,105,20,0.3);
    transform: translateX(3px);
  }
  
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-rule:last-child {
    margin-bottom: 0;
  }
  
  /* Header - Taille réduite */
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-rule-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
    font-size: 13px;
    color: #cd853f;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
  }
  
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-icon {
    font-size: 16px;
    min-width: 20px;
    text-align: center;
    display: inline-block;
  }
  
  /* Texte - Police réduite */
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-rule-text {
    color: #f4e6b7;
    font-size: 12px;
    line-height: 1.5;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.9);
  }
  
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-rule-text ul {
    margin: 6px 0;
    padding-left: 18px;
    list-style-type: disc;
  }
  
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-rule-text li {
    margin-bottom: 4px;
  }
  
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-rule-text strong {
    color: #ffd966;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.9);
  }
  
  /* Limite - Réduite */
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-limit {
    display: block;
    margin-top: 8px;
    padding: 6px 10px;
    background: rgba(61,41,20,0.5);
    border-left: 3px solid #a84432;
    border-radius: 4px;
    font-size: 11px;
    font-style: italic;
    color: #f4c89a;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.9);
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.4);
  }
  
  /* Exemple - Réduit */
  .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-example {
    display: block;
    margin-top: 8px;
    padding: 6px 10px;
    background: rgba(61,41,20,0.5);
    border-left: 3px solid #4a7c59;
    border-radius: 4px;
    font-size: 11px;
    font-style: italic;
    color: #b8d4c8;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.9);
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.4);
  }
  /* Responsive */
  @media (max-width: 768px) {
    .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-title {
      padding: 10px 14px 10px 36px;
      font-size: 12px;
    }
    
    .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-content {
      padding: 10px;
    }
    
    .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-rule {
      padding: 8px;
    }
    
    .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-rule-header {
      font-size: 12px;
    }
    
    .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-icon {
      font-size: 14px;
    }
    
    .charsheet .sheet-tab-content.sheet-profils .sheet-id-wrapper .sheet-faveur-explicative-rule-text {
      font-size: 11px;
    }
  }
  
  /* ==================== FIN SECTION FAVEUR DU DESTIN ==================== */
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ==================== RÉVÉLATION D'AIDE ==================== */
  
  /* Par défaut, cacher toutes les sections d'aide */
  .sheet-aide-section {
    display: none !important;
  }
  
  /* Afficher quand la checkbox est cochée */
  /* Note: Utilise le fait que la checkbox est dans sheet-settings-panel */
  .sheet-settings-panel input[name="attr_aide_revelation"]:checked ~ * .sheet-aide-section,
  body:has(input[name="attr_aide_revelation"]:checked) .sheet-aide-section {
    display: block !important;
  }
  
  /* Forcer l'affichage des details */
  body:has(input[name="attr_aide_revelation"]:checked) details.sheet-aide-section {
    display: block !important;
  }
  
  /* Fallback si :has() pas supporté - utiliser une classe manuelle */
  .charsheet[data-aide="visible"] .sheet-aide-section {
    display: block !important;
  }
  
  /* ==================== FIN RÉVÉLATION D'AIDE ==================== */
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ==================== AIDE RÉSISTANCES ÉLÉMENTAIRES ==================== */
  
  /* Section d'aide pour les résistances */
  .charsheet .sheet-resistance-aide {
    background: linear-gradient(135deg, rgba(61,97,128,0.15), rgba(53,87,118,0.1));
    border: 2px solid rgba(61,97,128,0.4);
    border-left: 4px solid #3d6180;
    border-radius: 8px;
    padding: 12px 16px;
    margin: 12px 0 16px 0;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }
  
  .charsheet .sheet-resistance-aide-content {
    display: flex;
    align-items: flex-start;
    gap: 12px;
  }
  
  .charsheet .sheet-resistance-aide-icon {
    font-size: 24px;
    min-width: 30px;
    text-align: center;
    color: #6ba3d4;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    line-height: 1;
  }
  
  .charsheet .sheet-resistance-aide-text {
    flex: 1;
    color: #e6f2ff;
    font-size: 13px;
    line-height: 1.6;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .charsheet .sheet-resistance-aide-text strong {
    color: #a8d0f5;
    font-size: 14px;
    display: block;
    margin-bottom: 6px;
  }
  
  /* Responsive */
  @media (max-width: 768px) {
    .charsheet .sheet-resistance-aide {
      padding: 10px 12px;
    }
    
    .charsheet .sheet-resistance-aide-icon {
      font-size: 20px;
      min-width: 24px;
    }
    
    .charsheet .sheet-resistance-aide-text {
      font-size: 12px;
    }
    
    .charsheet .sheet-resistance-aide-text strong {
      font-size: 13px;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* =================== CSS FICHE DE PERSONNAGE CORRIGÉ ======================= */
  /* ========================================================================== */
  
  /* === SECTION CSS AMÉLIORÉE AVEC THÈME BRUN DORÉ === */
  
  /* HEADER DE CAPACITÉ AVEC NOM ET BOUTON */
  .charsheet .sheet-capacite-header {
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
  }
  
  .charsheet .sheet-capacite-header input[type="text"] {
    flex: 1;
    padding: 8px 12px;
    border: 2px solid #8b6914;
    border-radius: 6px;
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    color: #3d2914;
    font-family: 'Georgia', serif;
    font-size: 14px;
    font-weight: 600;
    text-align: center;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 1px 3px rgba(139,105,20,0.3);
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-capacite-header input[type="text"]:focus {
    border-color: #b8860b;
    outline: none;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 0 10px rgba(184,134,11,0.4);
    background: linear-gradient(135deg, #f5e8c1, #e8d09a);
  }
  
  /* BOUTON ROLL PRINCIPAL À CÔTÉ DU NOM */
  .charsheet .sheet-capacite-roll-btn {
    background: linear-gradient(135deg, #b8860b, #8b6914, #6b4f10);
    border: 2px solid #5d4f1a;
    border-radius: 8px;
    color: #f4e6b7;
    cursor: pointer;
    font-size: 18px;
    padding: 8px 12px;
    transition: all 0.3s ease;
    box-shadow: 0 3px 6px rgba(0,0,0,0.4);
    min-width: 45px;
    min-height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  
  .charsheet .sheet-capacite-roll-btn:hover {
    background: linear-gradient(135deg, #cd853f, #b8860b, #8b6914);
    border-color: #4a3c14;
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 6px 12px rgba(0,0,0,0.5);
  }
  
  .charsheet .sheet-capacite-roll-btn:active {
    transform: translateY(0) scale(0.98);
    box-shadow: 0 2px 4px rgba(0,0,0,0.4);
  }
  
  @keyframes diceRoll {
    0% { transform: rotate(0deg); }
    25% { transform: rotate(90deg); }
    50% { transform: rotate(180deg); }
    75% { transform: rotate(270deg); }
    100% { transform: rotate(360deg); }
  }
  
  /* INTÉGRATION AVEC LE STYLE EXISTANT */
  .charsheet .sheet-capacite-bloc,
  .charsheet .sheet-capacite-block {
    background: linear-gradient(145deg, #3d2914, #2c1e0f, #3d2914);
    border: 3px solid #8b6914;
    border-radius: 12px;
    box-shadow: 
      0 0 0 2px #654321,
      0 6px 16px rgba(0,0,0,0.8),
      inset 0 1px 0 rgba(139,105,20,0.4);
    margin: 15px auto;
    overflow: hidden;
  }
  
  .charsheet .sheet-capacite-summary {
    background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
    color: #f4e6b7;
    padding: 12px 16px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  /* === BLOC CAPACITÉ PRINCIPAL - ESPACEMENT MINIMAL === */
  .charsheet .sheet-capacite-bloc {
    background: linear-gradient(145deg, #3d2914, #2c1e0f, #3d2914);
    border: 3px solid #8b6914;
    border-radius: 12px;
    box-shadow: 
      0 0 0 2px #654321,
      0 6px 16px rgba(0,0,0,0.8),
      inset 0 1px 0 rgba(139,105,20,0.4);
    margin: 2px auto;
    overflow: hidden;
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-capacite-bloc:hover {
    border-color: #b8860b;
    box-shadow: 
      0 0 0 2px #8b6914,
      0 8px 20px rgba(139,105,20,0.6),
      inset 0 1px 0 rgba(184,134,11,0.5);
    transform: translateY(-2px);
  }
  
  .charsheet .sheet-capacite-bloc > summary {
    background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
    background-size: 200% 200%;
    animation: gradientShift 4s ease infinite;
    color: #f4e6b7;
    padding: 12px 16px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    border: none;
    list-style: none;
  }
  
  .charsheet .sheet-capacite-bloc > summary::-webkit-details-marker {
    display: none;
  }
  
  .charsheet .sheet-capacite-bloc > summary::marker {
    display: none;
  }
  
  .charsheet .sheet-capacite-bloc > summary::after {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent, 
      rgba(244,230,183,0.4), 
      transparent);
    transition: left 0.6s ease;
  }
  
  .charsheet .sheet-capacite-bloc > summary:hover::after {
    left: 100%;
  }
  
  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  /* === CONTENU DU BLOC CAPACITÉ - ARRIÈRE-FOND SOMBRE MAINTENU === */
  .charsheet .sheet-capacite-bloc[open] {
    background: linear-gradient(145deg, #3d2914, #2c1e0f, #3d2914);
  }
  
  .charsheet .sheet-capacite-bloc[open] > *:not(summary) {
    padding: 16px;
    background: linear-gradient(135deg, rgba(61,41,20,0.8), rgba(44,30,15,0.6));
    border-top: 1px solid rgba(139,105,20,0.3);
  }
  
  /* === STYLES POUR LES INPUTS DANS LE SUMMARY === */
  .charsheet .sheet-capacite-bloc > summary input[type="text"] {
    border: none;
    background: transparent;
    width: 100%;
    font-weight: bold;
    font-size: 16px;
    color: #f4e6b7;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    font-family: 'Georgia', serif;
    text-transform: none;
    letter-spacing: 0;
    outline: none;
  }
  
  .charsheet .sheet-capacite-bloc > summary input[type="text"]::placeholder {
    color: rgba(244,230,183,0.7);
    font-style: italic;
    opacity: 0.8;
  }
  
  .charsheet .sheet-capacite-bloc > summary input[type="text"]:focus {
    background: rgba(244,230,183,0.1);
    border-radius: 4px;
    padding: 2px 6px;
  }
  
  /* === INDICATEUR D'OUVERTURE/FERMETURE === */
  .charsheet .sheet-capacite-bloc > summary::before {
    content: "▶";
    color: #f4e6b7;
    font-size: 12px;
    margin-right: 8px;
    transition: transform 0.3s ease;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .charsheet .sheet-capacite-bloc[open] > summary::before {
    transform: rotate(90deg);
  }
  
  /* === AJUSTEMENT POUR LE CONTENU INTERNE === */
  .charsheet .sheet-capacite-bloc[open] .sheet-jets-block,
  .charsheet .sheet-capacite-bloc[open] .sheet-couts-effets-block,
  .charsheet .sheet-capacite-bloc[open] .sheet-effet-alteration-block {
    background: linear-gradient(135deg, rgba(139,105,20,0.15), rgba(107,79,16,0.1));
    border-color: rgba(139,105,20,0.6);
  }
  
  .charsheet .sheet-capacite-bloc[open] .sheet-jets-container,
  .charsheet .sheet-capacite-bloc[open] .sheet-couts-effets-container,
  .charsheet .sheet-capacite-bloc[open] .sheet-effet-alteration-container {
    background: linear-gradient(135deg, rgba(61,41,20,0.3), rgba(44,30,15,0.2));
  }
  
  /* === STYLES POUR LES PASSIFS - HARMONISATION === */
  
  /* Bloc interne passif */
  .charsheet .sheet-capacite-bloc .sheet-capacite-block {
    background: linear-gradient(135deg, rgba(139,105,20,0.15), rgba(107,79,16,0.1));
    border: 2px solid #8b6914;
    border-radius: 10px;
    overflow: hidden;
    transition: all 0.3s ease;
    margin: 8px 0;
    box-shadow: 
      0 3px 8px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(139,105,20,0.3);
  }
  
  .charsheet .sheet-capacite-bloc .sheet-capacite-block:hover {
    border-color: #a0752d;
    box-shadow: 
      0 5px 12px rgba(139,105,20,0.5),
      inset 0 1px 0 rgba(160,117,45,0.4);
    transform: translateY(-1px);
  }
  
  /* Summary du passif */
  .charsheet .sheet-capacite-bloc .sheet-capacite-summary {
    background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914);
    background-size: 200% 200%;
    animation: gradientShift 4s ease infinite;
    color: #f4e6b7;
    padding: 12px 16px;
    margin: 0;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    text-align: left;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: none;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    gap: 12px !important;
  }
  
  .charsheet .sheet-capacite-bloc .sheet-capacite-summary::after {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent, 
      rgba(244,230,183,0.4), 
      transparent);
    transition: left 0.6s ease;
  }
  
  .charsheet .sheet-capacite-bloc .sheet-capacite-summary:hover::after {
    left: 100%;
  }
  
  /* Inputs dans le summary du passif */
  .charsheet .sheet-capacite-bloc .sheet-capacite-summary input[type="text"] {
    border: 2px solid rgba(139,105,20,0.5);
    border-radius: 6px;
    background: linear-gradient(135deg, rgba(244,230,183,0.2), rgba(230,214,144,0.15));
    color: #f4e6b7;
    font-family: 'Georgia', serif;
    font-size: 14px;
    font-weight: 600;
    text-align: center;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.2),
      0 1px 3px rgba(139,105,20,0.3);
    transition: all 0.3s ease;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    padding: 8px 12px;
  }
  
  .charsheet .sheet-capacite-bloc .sheet-capacite-summary input[type="text"]:focus {
    border-color: #b8860b;
    outline: none;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.2),
      0 0 10px rgba(184,134,11,0.4);
    background: linear-gradient(135deg, rgba(244,230,183,0.3), rgba(230,214,144,0.2));
    transform: scale(1.02);
  }
  
  .charsheet .sheet-capacite-bloc .sheet-capacite-summary input[type="text"]::placeholder {
    color: rgba(244,230,183,0.7);
    font-style: italic;
    opacity: 0.8;
  }
  
  /* Input spécifique pour la note (plus petit) */
  .charsheet .sheet-capacite-bloc .sheet-capacite-summary input[name*="note"] {
    width: 120px !important;
    flex-shrink: 0;
    font-size: 12px;
    text-align: center;
  }
  
  /* Tableau des passifs */
  .charsheet .sheet-sort-table {
    width: 100%;
    border-collapse: collapse;
    background: linear-gradient(135deg, rgba(61,41,20,0.3), rgba(44,30,15,0.2));
    margin: 0;
  }
  
  .charsheet .sheet-sort-table thead th {
    background: linear-gradient(135deg, #8b4513, #654321);
    color: #deb887;
    padding: 12px 16px;
    text-align: center;
    font-weight: bold;
    font-size: 14px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: 1px solid rgba(139,69,19,0.5);
  }
  
  .charsheet .sheet-sort-table tbody td {
    padding: 16px;
    background: linear-gradient(135deg, rgba(222,184,135,0.15), rgba(210,180,140,0.1));
    border: 1px solid rgba(139,105,20,0.3);
  }
  
  /* Textarea dans le tableau */
  .charsheet .sheet-sort-table textarea {
    width: 100%;
    min-height: 120px;
    padding: 12px 16px;
    border: 2px solid #8b4513;
    border-radius: 6px;
    background: linear-gradient(135deg, #deb887, #d2b48c);
    color: #654321;
    font-family: 'Georgia', serif;
    font-size: 13px;
    line-height: 1.4;
    resize: vertical;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 1px 3px rgba(0,0,0,0.15);
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-sort-table textarea:focus {
    border-color: #a0522d;
    outline: none;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 0 10px rgba(160,82,45,0.4),
      0 2px 6px rgba(160,82,45,0.3);
    background: linear-gradient(135deg, #f5deb3, #deb887);
  }
  
  .charsheet .sheet-sort-table textarea::placeholder {
    color: #8b6f3a;
    font-style: italic;
    opacity: 0.8;
    font-size: 12px;
  }
  
  /* Suppression des marqueurs de details par défaut */
  .charsheet .sheet-capacite-bloc .sheet-capacite-block > summary::-webkit-details-marker,
  .charsheet .sheet-capacite-bloc .sheet-capacite-block > summary::marker {
    display: none;
  }
  
  /* Indicateur d'ouverture pour les passifs */
  .charsheet .sheet-capacite-bloc .sheet-capacite-block > summary::before {
    content: "▶";
    color: #f4e6b7;
    font-size: 12px;
    margin-right: 8px;
    transition: transform 0.3s ease;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .charsheet .sheet-capacite-bloc .sheet-capacite-block[open] > summary::before {
    transform: rotate(90deg);
  }
  
  /* === SECTION JETS DÉPLIABLE === */
  
  .charsheet .sheet-jets-block {
    background: linear-gradient(135deg, rgba(139,105,20,0.15), rgba(107,79,16,0.1));
    border: 2px solid #8b6914;
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.4s ease;
    margin: 12px 0;
    box-shadow: 
      0 3px 8px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(139,105,20,0.3);
  }
  
  .charsheet .sheet-jets-block:hover {
    border-color: #a0752d;
    box-shadow: 
      0 5px 12px rgba(139,105,20,0.5),
      inset 0 1px 0 rgba(160,117,45,0.4);
    transform: translateY(-1px);
  }
  
  .charsheet .sheet-jets-title {
    background: linear-gradient(135deg, #8b6914, #6b4f10, #8b6914);
    background-size: 200% 200%;
    animation: gradientShift 4s ease infinite;
    color: #f4e6b7;
    padding: 10px 18px;
    margin: 0;
    cursor: pointer;
    font-weight: bold;
    font-size: 13px;
    text-align: center;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: none;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .charsheet .sheet-jets-title::after {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent, 
      rgba(244,230,183,0.4), 
      transparent);
    transition: left 0.6s ease;
  }
  
  .charsheet .sheet-jets-title:hover::after {
    left: 100%;
  }
  
  /* CONTAINER DES JETS */
  .charsheet .sheet-jets-container {
    padding: 14px;
    background: linear-gradient(135deg, rgba(244,230,183,0.15), rgba(230,214,144,0.1));
  }
  
  /* TABLE DES JETS - VERSION FLEXBOX */
  .charsheet .sheet-jets-header {
    display: flex;
    background: linear-gradient(135deg, #8b6914, #6b4f10);
    border: 2px solid #a68b2f;
    border-radius: 8px 8px 0 0;
    overflow: hidden;
  }
  
  .charsheet .sheet-jets-header .sheet-jet-col {
    flex: 1;
    color: #f4e6b7;
    padding: 10px 8px;
    text-align: center;
    font-weight: bold;
    font-size: 12px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    text-transform: uppercase;
    letter-spacing: 0.3px;
    border-right: 1px solid rgba(244,230,183,0.4);
  }
  
  .charsheet .sheet-jets-header .sheet-jet-col:last-child {
    border-right: none;
  }
  
  .charsheet .sheet-jet-row {
    display: flex;
    background: rgba(244,230,183,0.15);
    border: 1px solid #a68b2f;
    border-top: none;
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-jet-row:hover {
    background: rgba(205,133,63,0.15);
  }
  
  .charsheet .sheet-jet-row .sheet-jet-col {
    flex: 1;
    padding: 8px;
    text-align: center;
    border-right: 1px solid rgba(139,105,20,0.3);
  }
  
  .charsheet .sheet-jet-row .sheet-jet-col:last-child {
    border-right: none;
  }
  
  /* COLONNE CHECKBOX SPÉCIFIQUE - CENTRAGE PARFAIT */
  .charsheet .sheet-checkbox-col {
    flex: 0 0 80px !important;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0 !important;
  }
  
  /* LIGNE PRINCIPALE TOUJOURS VISIBLE ET PLEINE OPACITÉ */
  .charsheet .sheet-jet-principal {
    opacity: 1;
  }
  
  /* LIGNES SECONDAIRES - ASSOMBRISSEMENT À 50% PAR DÉFAUT */
  .charsheet .sheet-jet-secondaire {
    opacity: 0.5;
    transition: opacity 0.4s ease;
  }
  
  /* LIGNES SECONDAIRES - ÉCLAIRAGE 100% UNIQUEMENT QUAND CHECKBOX ACTIF EST COCHÉE */
  .charsheet .sheet-jet-secondaire:has(input[type="checkbox"]:checked) {
    opacity: 1;
  }
  
  /* FALLBACK SANS :has() POUR COMPATIBILITÉ ROLL20 */
  .charsheet .sheet-jet-secondaire.sheet-active {
    opacity: 1;
  }
  
  /* INPUTS DANS LES LIGNES DE JETS */
  .charsheet .sheet-jet-row input[type="text"],
  .charsheet .sheet-jet-row input[type="number"] {
    width: 100%;
    padding: 6px 8px;
    border: 1px solid #a68b2f;
    border-radius: 4px;
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    color: #3d2914;
    font-family: 'Georgia', serif;
    font-size: 12px;
    font-weight: 600;
    text-align: center;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.15);
    transition: border-color 0.2s ease, box-shadow 0.2s ease, opacity 0.3s ease;
  }
  
  .charsheet .sheet-jet-row input:focus {
    border-color: #b8860b;
    outline: none;
    box-shadow: 
      inset 0 1px 2px rgba(0,0,0,0.15),
      0 0 6px rgba(184,134,11,0.4);
    background: linear-gradient(135deg, #f5e8c1, #e8d09a);
  }
  
  .charsheet .sheet-jet-row input::placeholder {
    color: #8b6f3a;
    font-style: italic;
    opacity: 0.7;
    font-size: 11px;
  }
  
  /* CENTRAGE PARFAIT DES CHECKBOX AMÉLIORÉ */
  .charsheet .sheet-checkbox-center {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    padding: 8px 4px;
  }
  
  /* CHECKBOX CUSTOM AVEC ANIMATIONS AMÉLIORÉES */
  .charsheet .sheet-custom-checkbox {
    position: relative;
    display: inline-block;
    cursor: pointer;
  }
  
  .charsheet .sheet-custom-checkbox input[type="checkbox"] {
    opacity: 0;
    position: absolute;
    cursor: pointer;
    height: 0;
    width: 0;
  }
  
  .charsheet .sheet-checkmark {
    position: relative;
    display: inline-block;
    height: 22px;
    width: 22px;
    background: linear-gradient(135deg, #f4e6b7, #e6d690);
    border: 2px solid #a68b2f;
    border-radius: 6px;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.15);
    transform-origin: center;
  }
  
  .charsheet .sheet-custom-checkbox:hover .sheet-checkmark {
    border-color: #b8860b;
    transform: scale(1.15) rotate(5deg);
    box-shadow: 
      0 0 12px rgba(184,134,11,0.5),
      inset 0 1px 2px rgba(0,0,0,0.15);
    background: linear-gradient(135deg, #f5e8c1, #e8d09a);
  }
  
  .charsheet .sheet-custom-checkbox input:checked ~ .sheet-checkmark {
    background: linear-gradient(135deg, #b8860b, #8b6914);
    border-color: #6b4f10;
    box-shadow: 
      0 0 15px rgba(184,134,11,0.7),
      inset 0 2px 4px rgba(0,0,0,0.3);
    transform: scale(1.1) rotate(-5deg);
    animation: checkPulse 0.6s ease-out;
  }
  
  @keyframes checkPulse {
    0% { 
      transform: scale(1) rotate(0deg); 
      box-shadow: 0 0 0 rgba(184,134,11,0);
    }
    50% { 
      transform: scale(1.3) rotate(-10deg); 
      box-shadow: 0 0 20px rgba(184,134,11,0.8);
    }
    100% { 
      transform: scale(1.1) rotate(-5deg); 
      box-shadow: 0 0 15px rgba(184,134,11,0.7);
    }
  }
  
  .charsheet .sheet-checkmark:after {
    content: "";
    position: absolute;
    display: none;
    left: 7px;
    top: 3px;
    width: 6px;
    height: 11px;
    border: solid #f4e6b7;
    border-width: 0 3px 3px 0;
    transform: rotate(45deg);
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-custom-checkbox input:checked ~ .sheet-checkmark:after {
    display: block;
    animation: checkMark 0.5s ease-out 0.1s both;
  }
  
  @keyframes checkMark {
    0% {
      height: 0;
      width: 0;
      opacity: 0;
    }
    50% {
      height: 6px;
      width: 3px;
      opacity: 0.7;
    }
    100% {
      height: 11px;
      width: 6px;
      opacity: 1;
    }
  }
  
  /* ANIMATION AU DÉCOCHAGE */
  .charsheet .sheet-custom-checkbox input:not(:checked) ~ .sheet-checkmark {
    animation: uncheckPulse 0.3s ease-out;
  }
  
  @keyframes uncheckPulse {
    0% { 
      transform: scale(1.1) rotate(-5deg); 
    }
    50% { 
      transform: scale(0.9) rotate(2deg); 
    }
    100% { 
      transform: scale(1) rotate(0deg); 
    }
  }
  
  /* === ZONE COULEUR DE TEMPLATE - STYLES COMPLETS AVEC THÈME BRUN === */
  
  /* CONTAINER PRINCIPAL DE LA ZONE COULEUR DE TEMPLATE */
  .charsheet .sheet-jet-color-zone {
    margin-top: 8px;
    padding: 0;
    position: relative;
    z-index: 5;
  }
  
  /* SECTION REPLIABLE */
  .charsheet .sheet-color-section {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 8px;
    overflow: visible;
    transition: all 0.3s ease;
    box-shadow: 0 2px 6px rgba(139,69,19,0.3);
    position: relative;
    z-index: 10;
  }
  
  .charsheet .sheet-color-section:hover {
    border-color: #a0522d;
    box-shadow: 0 4px 10px rgba(160,82,45,0.4);
    transform: translateY(-1px);
  }
  
  /* TITRE DE LA ZONE COULEUR DE TEMPLATE */
  .charsheet .sheet-color-title {
    background: linear-gradient(135deg, #8b4513, #654321, #8b4513);
    background-size: 200% 200%;
    animation: colorGradientShift 4s ease infinite;
    color: #deb887;
    padding: 8px 12px;
    margin: 0;
    cursor: pointer;
    font-weight: bold;
    font-size: 12px;
    text-align: center;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    text-transform: uppercase;
    letter-spacing: 0.3px;
    border: none;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
  }
  
  .charsheet .sheet-color-title::after {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent, 
      rgba(222,184,135,0.5), 
      transparent);
    transition: left 0.6s ease;
  }
  
  .charsheet .sheet-color-title:hover::after {
    left: 100%;
  }
  
  @keyframes colorGradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  /* ICÔNE ET LABEL */
  .charsheet .sheet-color-icon {
    font-size: 14px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
  }
  
  .charsheet .sheet-color-label {
    font-weight: bold;
    letter-spacing: 0.5px;
  }
  
  /* CONTAINER DES SÉLECTEURS */
  .charsheet .sheet-color-container {
    padding: 16px 16px 20px 16px;
    background: linear-gradient(135deg, rgba(222,184,135,0.15), rgba(210,180,140,0.1));
    display: flex;
    flex-direction: row;
    gap: 12px;
    overflow: visible;
    position: relative;
    z-index: 15;
    min-height: 120px;
  }
  
  /* GROUPES DE COULEURS */
  .charsheet .sheet-color-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
    padding: 8px;
    background: rgba(139,69,19,0.1);
    border: 1px solid #8b4513;
    border-radius: 8px;
    transition: all 0.3s ease;
    flex: 1;
    overflow: visible;
    position: relative;
    z-index: 20;
  }
  
  .charsheet .sheet-color-group:hover {
    background: rgba(139,69,19,0.2);
    border-color: #a0522d;
    z-index: 25;
  }
  
  /* LABELS DES GROUPES */
  .charsheet .sheet-color-group-label {
    display: flex;
    align-items: center;
    gap: 6px;
    color: #8b4513;
    font-weight: bold;
    font-size: 11px;
    text-transform: uppercase;
    text-shadow: 1px 1px 1px rgba(222,184,135,0.8);
    margin: 0;
    letter-spacing: 0.3px;
  }
  
  .charsheet .sheet-color-type-icon,
  .charsheet .sheet-color-nature-icon {
    font-size: 12px;
  }
  
  /* WRAPPER POUR LES SELECTS */
  .charsheet .sheet-color-select-wrapper {
    position: relative;
    width: 100%;
    overflow: visible;
    z-index: 30;
    margin-bottom: 4px;
  }
  
  /* SELECTS PERSONNALISÉS */
  .charsheet .sheet-color-select {
    width: 100%;
    padding: 10px 25px 10px 10px;
    min-height: 40px;
    border: 2px solid #8b4513;
    border-radius: 6px;
    background: linear-gradient(135deg, #deb887, #d2b48c);
    color: #654321;
    font-family: 'Georgia', serif;
    font-size: 11px;
    font-weight: 600;
    text-align: left;
    line-height: 1.5;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 1px 3px rgba(139,69,19,0.3);
    transition: all 0.3s ease;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    cursor: pointer;
    position: relative;
    z-index: 35;
    display: flex;
    align-items: center;
  }
  
  .charsheet .sheet-color-select:focus {
    border-color: #a0522d;
    outline: none;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 0 10px rgba(160,82,45,0.4),
      0 2px 6px rgba(160,82,45,0.3);
    background: linear-gradient(135deg, #f5deb3, #deb887);
    transform: scale(1.02);
    z-index: 50;
  }
  
  .charsheet .sheet-color-select:hover {
    border-color: #a0522d;
    background: linear-gradient(135deg, rgba(222,184,135,1), rgba(210,180,140,0.9));
    z-index: 40;
  }
  
  /* FLÈCHE PERSONNALISÉE */
  .charsheet .sheet-color-arrow {
    position: absolute;
    top: 50%;
    right: 8px;
    transform: translateY(-50%);
    color: #654321;
    font-size: 10px;
    pointer-events: none;
    text-shadow: 1px 1px 2px rgba(222,184,135,0.7);
    transition: all 0.3s ease;
    z-index: 36;
  }
  
  .charsheet .sheet-color-select-wrapper:hover .sheet-color-arrow {
    color: #a0522d;
    transform: translateY(-50%) scale(1.1) rotate(180deg);
  }
  
  /* OPTIONS DES SELECTS */
  .charsheet .sheet-color-select option {
    background: #deb887;
    color: #654321;
    font-family: 'Georgia', serif;
    font-size: 11px;
    font-weight: 600;
    padding: 10px 10px;
    border: none;
    line-height: 1.5;
    min-height: 36px;
  }
  
  .charsheet .sheet-color-select option:hover,
  .charsheet .sheet-color-select option:checked {
    background: linear-gradient(135deg, #8b4513, #654321);
    color: #deb887;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
  }
  
  /* === NOUVELLES CLASSES DYNAMIQUES POUR LES COULEURS ÉTENDUES === */
  
  /* COULEURS POUR TYPE */
  .sheet-jet-type-blanc_argente { background: linear-gradient(135deg, #f8f8ff, #e6e6fa) !important; color: #2f2f2f !important; }
  .sheet-jet-type-rouge_ecarlate { background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  .sheet-jet-type-orange_incandescent { background: linear-gradient(135deg, #ff4500, #ff6347) !important; }
  .sheet-jet-type-bleu_azur_profond { background: linear-gradient(135deg, #0047ab, #003d82) !important; }
  .sheet-jet-type-turquoise_clair { background: linear-gradient(135deg, #40e0d0, #20b2aa) !important; }
  .sheet-jet-type-bleu_ciel_mouvant { background: linear-gradient(135deg, #87ceeb, #4682b4) !important; }
  .sheet-jet-type-brun_pierre { background: linear-gradient(135deg, #8b4513, #654321) !important; }
  .sheet-jet-type-ocre_dore { background: linear-gradient(135deg, #cc7722, #b8860b) !important; }
  .sheet-jet-type-jaune_electrique { background: linear-gradient(135deg, #ffff00, #ffd700) !important; color: #2f2f2f !important; }
  .sheet-jet-type-violet_orage { background: linear-gradient(135deg, #663399, #4b0082) !important; }
  .sheet-jet-type-vert_tendre_lumineux { background: linear-gradient(135deg, #90ee90, #32cd32) !important; }
  .sheet-jet-type-bleu_glace { background: linear-gradient(135deg, #b0e0e6, #87ceeb) !important; color: #2f2f2f !important; }
  .sheet-jet-type-blanc_cristallin { background: linear-gradient(135deg, #ffffff, #f0f8ff) !important; color: #2f2f2f !important; }
  .sheet-jet-type-rouge_sombre_carmin { background: linear-gradient(135deg, #8b0000, #660000) !important; }
  .sheet-jet-type-vert_acide { background: linear-gradient(135deg, #adff2f, #7fff00) !important; color: #2f2f2f !important; }
  .sheet-jet-type-verdatre_maladif { background: linear-gradient(135deg, #556b2f, #6b8e23) !important; }
  .sheet-jet-type-gris_anthracite { background: linear-gradient(135deg, #2f4f4f, #1c1c1c) !important; }
  .sheet-jet-type-violet_tenebreux { background: linear-gradient(135deg, #301934, #1a0d1a) !important; }
  .sheet-jet-type-noir_absolu_pourpre { background: linear-gradient(135deg, #0d0d0d, #2d0a2d) !important; }
  .sheet-jet-type-blanc_pur { background: linear-gradient(135deg, #ffffff, #fffafa) !important; color: #2f2f2f !important; }
  .sheet-jet-type-dore_rayonnant { background: linear-gradient(135deg, #ffd700, #ffb347) !important; color: #2f2f2f !important; }
  .sheet-jet-type-vert_emeraude_profond { background: linear-gradient(135deg, #50c878, #228b22) !important; }
  .sheet-jet-type-vert_feuillu { background: linear-gradient(135deg, #228b22, #006400) !important; }
  
  /* COULEURS POUR NATURE */
  .sheet-jet-nature-blanc_argente { background: linear-gradient(135deg, #f8f8ff, #e6e6la) !important; color: #2f2f2f !important; }
  .sheet-jet-nature-rouge_ecarlate { background: linear-gradient(135deg, #dc143c, #b22222) !important; }
  .sheet-jet-nature-orange_incandescent { background: linear-gradient(135deg, #ff4500, #ff6347) !important; }
  .sheet-jet-nature-bleu_azur_profond { background: linear-gradient(135deg, #0047ab, #003d82) !important; }
  .sheet-jet-nature-turquoise_clair { background: linear-gradient(135deg, #40e0d0, #20b2aa) !important; }
  .sheet-jet-nature-bleu_ciel_mouvant { background: linear-gradient(135deg, #87ceeb, #4682b4) !important; }
  .sheet-jet-nature-brun_pierre { background: linear-gradient(135deg, #8b4513, #654321) !important; }
  .sheet-jet-nature-ocre_dore { background: linear-gradient(135deg, #cc7722, #b8860b) !important; }
  .sheet-jet-nature-jaune_electrique { background: linear-gradient(135deg, #ffff00, #ffd700) !important; color: #2f2f2f !important; }
  .sheet-jet-nature-violet_orage { background: linear-gradient(135deg, #663399, #4b0082) !important; }
  .sheet-jet-nature-vert_tendre_lumineux { background: linear-gradient(135deg, #90ee90, #32cd32) !important; }
  .sheet-jet-nature-bleu_glace { background: linear-gradient(135deg, #b0e0e6, #87ceeb) !important; color: #2f2f2f !important; }
  .sheet-jet-nature-blanc_cristallin { background: linear-gradient(135deg, #ffffff, #f0f8ff) !important; color: #2f2f2f !important; }
  .sheet-jet-nature-rouge_sombre_carmin { background: linear-gradient(135deg, #8b0000, #660000) !important; }
  .sheet-jet-nature-vert_acide { background: linear-gradient(135deg, #adff2f, #7fff00) !important; color: #2f2f2f !important; }
  .sheet-jet-nature-verdatre_maladif { background: linear-gradient(135deg, #556b2f, #6b8e23) !important; }
  .sheet-jet-nature-gris_anthracite { background: linear-gradient(135deg, #2f4f4f, #1c1c1c) !important; }
  .sheet-jet-nature-violet_tenebreux { background: linear-gradient(135deg, #301934, #1a0d1a) !important; }
  .sheet-jet-nature-noir_absolu_pourpre { background: linear-gradient(135deg, #0d0d0d, #2d0a2d) !important; }
  .sheet-jet-nature-blanc_pur { background: linear-gradient(135deg, #ffffff, #fffafa) !important; color: #2f2f2f !important; }
  .sheet-jet-nature-dore_rayonnant { background: linear-gradient(135deg, #ffd700, #ffb347) !important; color: #2f2f2f !important; }
  .sheet-jet-nature-vert_emeraude_profond { background: linear-gradient(135deg, #50c878, #228b22) !important; }
  .sheet-jet-nature-vert_feuillu { background: linear-gradient(135deg, #228b22, #006400) !important; }
  
  /* === SECTION COÛTS ET EFFETS UNIFIÉE === */
  
  /* BLOCK PRINCIPAL COÛTS ET EFFETS */
  .charsheet .sheet-couts-effets-block {
    background: linear-gradient(135deg, rgba(139,105,20,0.15), rgba(107,79,16,0.1));
    border: 3px solid #8b6914;
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.4s ease;
    margin: 12px 0;
    box-shadow: 
      0 4px 12px rgba(0,0,0,0.5),
      inset 0 2px 0 rgba(139,105,20,0.4);
  }
  
  .charsheet .sheet-couts-effets-block:hover {
    border-color: #b8860b;
    box-shadow: 
      0 6px 16px rgba(139,105,20,0.6),
      inset 0 2px 0 rgba(184,134,11,0.5);
    transform: translateY(-2px);
  }
  
  /* TITRE PRINCIPAL UNIFIÉ */
  .charsheet .sheet-couts-effets-title {
    background: linear-gradient(135deg, #8b6914, #b8860b, #6b4f10, #8b6914);
    background-size: 300% 300%;
    animation: gradientShiftLarge 6s ease infinite;
    color: #f4e6b7;
    padding: 10px 18px;
    margin: 0;
    cursor: pointer;
    font-weight: bold;
    font-size: 13px;
    text-align: center;
    text-shadow: 
      1px 1px 2px rgba(0,0,0,0.8),
      0 0 10px rgba(184,134,11,0.4);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: none;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .charsheet .sheet-couts-effets-title::after {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent, 
      rgba(244,230,183,0.6), 
      transparent);
    transition: left 0.8s ease;
  }
  
  .charsheet .sheet-couts-effets-title:hover::after {
    left: 100%;
  }
  
  @keyframes gradientShiftLarge {
    0% { background-position: 0% 50%; }
    33% { background-position: 100% 50%; }
    66% { background-position: 50% 100%; }
    100% { background-position: 0% 50%; }
  }
  
  /* CONTAINER PRINCIPAL */
  .charsheet .sheet-couts-effets-container {
    padding: 14px;
    background: linear-gradient(135deg, rgba(244,230,183,0.2), rgba(230,214,144,0.15));
    display: flex;
    flex-direction: column;
    gap: 14px;
  }
  
  /* SOUS-SECTIONS DÉPLIABLES */
  .charsheet .sheet-sous-section {
    background: rgba(139,69,19,0.1);
    border: 2px solid #8b4513;
    border-radius: 10px;
    overflow: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }
  
  .charsheet .sheet-sous-section:hover {
    border-color: #a0522d;
    box-shadow: 0 4px 10px rgba(160,82,45,0.4);
    transform: translateY(-1px);
  }
  
  /* SOUS-TITRES CENTRÉS ET DÉPLIABLES */
  .charsheet .sheet-sous-titre {
    background: linear-gradient(135deg, #8b4513, #654321);
    color: #deb887;
    padding: 12px 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-weight: bold;
    font-size: 14px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
  }
  
  .charsheet .sheet-sous-titre:hover {
    background: linear-gradient(135deg, #a0522d, #8b4513);
  }
  
  /* === SECTION COÛTS D'ACTIVATION - NOUVELLE VERSION TABLEAU === */
  
  /* GRILLE PRINCIPALE DES COÛTS */
  .charsheet .sheet-cout-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 16px;
    padding: 16px;
    background: rgba(222,184,135,0.15);
  }
  
  /* ITEMS DE COÛT */
  .charsheet .sheet-cout-item-large {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    padding: 16px 12px;
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 8px;
    transition: all 0.3s ease;
    position: relative;
  }
  
  .charsheet .sheet-cout-item-large:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
    border-color: #a0522d;
    transform: scale(1.02);
    box-shadow: 0 4px 12px rgba(160,82,45,0.4);
  }
  
  /* ICÔNES DES COÛTS */
  .charsheet .sheet-cout-icon {
    font-size: 24px;
    margin-bottom: 4px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
    color: #8b4513;
  }
  
  /* TITRE DU COÛT */
  .charsheet .sheet-cout-title {
    color: #8b4513;
    font-weight: bold;
    font-size: 12px;
    text-transform: uppercase;
    text-shadow: 1px 1px 1px rgba(222,184,135,0.8);
    text-align: center;
    margin: 0 0 8px 0;
    letter-spacing: 0.3px;
    display: block;
    width: 100%;
  }
  
  /* TABLEAU DES COÛTS */
  .charsheet .sheet-cout-table {
    width: 100%;
    border-collapse: collapse;
    background: rgba(222,184,135,0.1);
    border: 1px solid #8b4513;
    border-radius: 6px;
    overflow: hidden;
  }
  
  /* EN-TÊTES DU TABLEAU */
  .charsheet .sheet-cout-table thead th {
    background: linear-gradient(135deg, #8b4513, #654321);
    color: #deb887;
    padding: 8px 6px;
    text-align: center;
    font-weight: bold;
    font-size: 10px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    text-transform: uppercase;
    letter-spacing: 0.3px;
    border: none;
  }
  
  /* LIGNES DU TABLEAU */
  .charsheet .sheet-cout-table tbody tr {
    background: rgba(222,184,135,0.05);
  }
  
  .charsheet .sheet-cout-table tbody td {
    padding: 8px 6px;
    text-align: center;
    border: none;
  }
  
  /* INPUTS DANS LE TABLEAU */
  .charsheet .sheet-cout-table input[type="number"] {
    width: 100%;
    max-width: 80px;
    padding: 8px 6px;
    border: 2px solid #8b4513;
    border-radius: 6px;
    background: linear-gradient(135deg, #deb887, #d2b48c);
    color: #654321;
    font-family: 'Georgia', serif;
    font-size: 14px;
    font-weight: 600;
    text-align: center;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 1px 3px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    margin: 0 auto;
    display: block;
  }
  
  .charsheet .sheet-cout-table input[type="number"]:hover {
    border-color: #a0522d;
    background: linear-gradient(135deg, #f5deb3, #deb887);
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 2px 6px rgba(160,82,45,0.3);
    transform: scale(1.03);
  }
  
  .charsheet .sheet-cout-table input[type="number"]:focus {
    border-color: #a0522d;
    outline: none;
    background: linear-gradient(135deg, #f5deb3, #e5d4a8);
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 0 8px rgba(160,82,45,0.4),
      0 3px 8px rgba(160,82,45,0.4);
    transform: scale(1.05);
  }
  
  /* INPUT "AUTRE COÛT" */
  .charsheet .sheet-cout-autre-input {
    width: 100%;
    max-width: 200px;
    padding: 10px 12px;
    border: 2px solid #8b4513;
    border-radius: 6px;
    background: linear-gradient(135deg, #deb887, #d2b48c);
    color: #654321;
    font-family: 'Georgia', serif;
    font-size: 13px;
    font-weight: 600;
    text-align: center;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 1px 3px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    margin-top: 4px;
  }
  
  .charsheet .sheet-cout-autre-input:hover {
    border-color: #a0522d;
    background: linear-gradient(135deg, #f5deb3, #deb887);
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 2px 6px rgba(160,82,45,0.3);
    transform: scale(1.02);
  }
  
  .charsheet .sheet-cout-autre-input:focus {
    border-color: #a0522d;
    outline: none;
    background: linear-gradient(135deg, #f5deb3, #e5d4a8);
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 0 8px rgba(160,82,45,0.4),
      0 3px 8px rgba(160,82,45,0.4);
    transform: scale(1.03);
  }
  
  .charsheet .sheet-cout-autre-input::placeholder {
    color: #8b6f3a;
    font-style: italic;
    opacity: 0.8;
    font-size: 11px;
  }
  
  /* CONTENUS DES EFFETS */
  .charsheet .sheet-effet-content {
    padding: 16px;
    background: rgba(222,184,135,0.15);
  }
  
  .charsheet .sheet-effet-content textarea {
    width: 100%;
    min-height: 100px;
    padding: 12px 16px;
    border: 2px solid #8b4513;
    border-radius: 6px;
    background: linear-gradient(135deg, #deb887, #d2b48c);
    color: #654321;
    font-family: 'Georgia', serif;
    font-size: 13px;
    line-height: 1.4;
    resize: vertical;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 1px 3px rgba(0,0,0,0.15);
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-effet-content textarea:focus {
    border-color: #a0522d;
    outline: none;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 0 10px rgba(160,82,45,0.4),
      0 2px 6px rgba(160,82,45,0.3);
    background: linear-gradient(135deg, #f5deb3, #deb887);
  }
  
  .charsheet .sheet-effet-content textarea::placeholder {
    color: #8b6f3a;
    font-style: italic;
    opacity: 0.8;
    font-size: 12px;
  }
  
  /* === BLOC EFFET ET ALTÉRATION === */
  
  .charsheet .sheet-effet-alteration-block {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.4s ease;
    margin: 12px 0;
    box-shadow: 
      0 3px 8px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(139,69,19,0.3);
  }
  
  .charsheet .sheet-effet-alteration-block:hover {
    border-color: #a0522d;
    box-shadow: 
      0 5px 12px rgba(139,69,19,0.5),
      inset 0 1px 0 rgba(160,82,45,0.4);
    transform: translateY(-1px);
  }
  
  .charsheet .sheet-effet-alteration-title {
    background: linear-gradient(135deg, #8b4513, #654321, #8b4513);
    background-size: 200% 200%;
    animation: gradientShift 4s ease infinite;
    color: #deb887;
    padding: 12px 20px;
    margin: 0;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    text-align: center;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: none;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .charsheet .sheet-effet-alteration-title::after {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent, 
      rgba(222,184,135,0.4), 
      transparent);
    transition: left 0.6s ease;
  }
  
  .charsheet .sheet-effet-alteration-title:hover::after {
    left: 100%;
  }
  
  .charsheet .sheet-effet-alteration-container {
    padding: 20px;
    background: linear-gradient(135deg, rgba(222,184,135,0.15), rgba(210,180,140,0.1));
    display: flex;
    justify-content: center;
  }
  
  /* GRILLE DES ALTÉRATIONS ADAPTATIVE */
  .charsheet .sheet-alterations-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 16px;
    max-width: none;
    width: 100%;
    justify-content: center;
  }
  
  /* ITEMS D'ALTÉRATION */
  .charsheet .sheet-alteration-item {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 10px;
    padding: 12px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    cursor: pointer;
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: center;
    min-height: 80px;
  }
  
  .charsheet .sheet-alteration-item:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
    border-color: #a0522d;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(160,82,45,0.4);
  }
  
  /* CHECKBOX CACHÉ */
  .charsheet .sheet-alteration-checkbox {
    display: none;
  }
  
  /* CONTENU DES ALTÉRATIONS - CENTRÉ */
  .charsheet .sheet-alteration-content {
    display: flex;
    flex-direction: column;
    gap: 8px;
    align-items: center;
    text-align: center;
  }
  
  /* LABELS DES ALTÉRATIONS - CENTRÉS */
  .charsheet .sheet-alteration-label {
    color: #8b4513;
    font-weight: bold;
    font-size: 13px;
    text-shadow: 1px 1px 1px rgba(222,184,135,0.8);
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
  }
  
  /* INPUT DE VALEUR DES ALTÉRATIONS - CENTRÉ */
  .charsheet .sheet-alteration-content input[type="number"] {
    width: 80px;
    padding: 6px 10px;
    border: 1px solid #8b4513;
    border-radius: 5px;
    background: linear-gradient(135deg, #deb887, #d2b48c);
    color: #654321;
    font-family: 'Georgia', serif;
    font-size: 12px;
    font-weight: 600;
    text-align: center;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.15);
    transition: all 0.3s ease;
    margin: 0 auto;
  }
  
  .charsheet .sheet-alteration-content input[type="number"]:focus {
    border-color: #a0522d;
    outline: none;
    box-shadow: 
      inset 0 1px 2px rgba(0,0,0,0.15),
      0 0 8px rgba(160,82,45,0.4);
    background: linear-gradient(135deg, #f5deb3, #deb887);
    transform: scale(1.02);
  }
  
  /* INPUT DES DÉGÂTS - CENTRÉ */
  .charsheet .sheet-des-input {
    width: 70px;
    padding: 4px 6px;
    border: 1px solid #8b4513;
    border-radius: 4px;
    background: linear-gradient(135deg, #deb887, #d2b48c);
    color: #654321;
    font-family: 'Georgia', serif;
    font-size: 11px;
    font-weight: 600;
    text-align: center;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.15);
    transition: all 0.3s ease;
    margin: 4px auto 0;
    display: block;
  }
  
  .charsheet .sheet-des-input:focus {
    border-color: #a0522d;
    outline: none;
    box-shadow: 
      inset 0 1px 2px rgba(0,0,0,0.15),
      0 0 6px rgba(160,82,45,0.4);
    background: linear-gradient(135deg, #f5deb3, #deb887);
    transform: scale(1.05);
  }
  
  .charsheet .sheet-des-input::placeholder {
    color: #8b6f3a;
    font-style: italic;
    opacity: 0.8;
    font-size: 10px;
  }
  
  /* SELECT CUSTOMISÉ POUR RÉDUCTION D'ARMURE - CENTRÉ */
  .charsheet .sheet-custom-select {
    position: relative;
    width: 100%;
    max-width: 160px;
    margin: 6px auto 0;
  }
  
  .charsheet .sheet-custom-select select {
    width: 100%;
    padding: 6px 25px 6px 10px;
    border: 2px solid #8b4513;
    border-radius: 6px;
    background: linear-gradient(135deg, #deb887, #d2b48c);
    color: #654321;
    font-family: 'Georgia', serif;
    font-size: 11px;
    font-weight: 600;
    text-align: center;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 1px 3px rgba(0,0,0,0.15);
    transition: all 0.3s ease;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    cursor: pointer;
  }
  
  .charsheet .sheet-custom-select select:focus {
    border-color: #a0522d;
    outline: none;
    box-shadow: 
      inset 0 2px 4px rgba(0,0,0,0.15),
      0 0 10px rgba(160,82,45,0.4),
      0 2px 6px rgba(160,82,45,0.3);
    background: linear-gradient(135deg, #f5deb3, #deb887);
    transform: scale(1.02);
  }
  
  .charsheet .sheet-custom-select select:hover {
    border-color: #a0522d;
    background: linear-gradient(135deg, rgba(222,184,135,1), rgba(210,180,140,0.9));
  }
  
  /* FLÈCHE POUR SELECT CUSTOM */
  .charsheet .sheet-select-arrow {
    position: absolute;
    top: 50%;
    right: 8px;
    transform: translateY(-50%);
    color: #654321;
    font-size: 12px;
    pointer-events: none;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-custom-select:hover .sheet-select-arrow {
    color: #a0522d;
    transform: translateY(-50%) scale(1.1);
  }
  
  /* EFFETS SPÉCIAUX POUR CASES COCHÉES */
  .charsheet .sheet-alteration-item:has(.sheet-alteration-checkbox:checked) {
    background: linear-gradient(135deg, rgba(184,134,11,0.4), rgba(139,105,20,0.3));
    border-color: #b8860b;
    box-shadow: 0 0 12px rgba(184,134,11,0.5);
  }
  
  /* FALLBACK SANS :has() - UTILISE UN ATTRIBUT DATA POUR ROLL20 */
  .charsheet .sheet-alteration-item[data-checked="true"] {
    background: linear-gradient(135deg, rgba(184,134,11,0.4), rgba(139,105,20,0.3));
    border-color: #b8860b;
    box-shadow: 0 0 12px rgba(184,134,11,0.5);
  }
  
  /* LE LABEL CHANGE DE COULEUR QUAND COCHÉ */
  .charsheet .sheet-alteration-checkbox:checked + .charsheet .sheet-alteration-content .sheet-alteration-label {
    color: #b8860b;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  /* EFFET LIBRE SPÉCIAL - CENTRÉ */
  .charsheet .sheet-effet-libre-nom {
    width: 120px;
    padding: 3px 6px;
    border: 1px solid #8b4513;
    border-radius: 3px;
    background: linear-gradient(135deg, #deb887, #d2b48c);
    color: #654321;
    font-family: 'Georgia', serif;
    font-size: 11px;
    font-weight: 600;
    text-align: center;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.15);
    transition: all 0.3s ease;
    margin: 0 auto 6px;
    display: block;
  }
  
  .charsheet .sheet-effet-libre-nom:focus {
    border-color: #a0522d;
    outline: none;
    box-shadow: 
      inset 0 1px 2px rgba(0,0,0,0.15),
      0 0 6px rgba(160,82,45,0.4);
    background: linear-gradient(135deg, #f5deb3, #deb887);
  }
  
  .charsheet .sheet-effet-libre-nom::placeholder {
    color: #8b6f3a;
    font-style: italic;
    opacity: 0.8;
    font-size: 10px;
  }
  
  /* === SECTION EFFETS CÔTE À CÔTE === */
  .charsheet .sheet-effets-row {
    display: flex;
    gap: 16px;
    width: 100%;
    margin-top: 20px;
  }
  
  .charsheet .sheet-effet-gauche,
  .charsheet .sheet-effet-droite {
    flex: 1;
    min-width: 0;
  }
  
  /* Ajustements pour les titres en mode côte à côte */
  .charsheet .sheet-effets-row .sheet-sous-titre {
    padding: 10px 14px;
    font-size: 13px;
  }
  
  .charsheet .sheet-effets-row .sheet-sous-icone {
    font-size: 14px;
  }
  
  .charsheet .sheet-effets-row .sheet-sous-label {
    font-size: 12px;
  }
  
  /* Textareas dans la disposition côte à côte */
  .charsheet .sheet-effets-row textarea {
    min-height: 120px;
    max-height: 300px;
  }
  
  /* === AJUSTEMENT POUR LES LABELS PLUS LONGS === */
  .charsheet .sheet-effets-row .sheet-sous-label {
    font-size: 11px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  /* Sur écrans moyens, permettre le retour à la ligne */
  @media (min-width: 769px) and (max-width: 1024px) {
    .charsheet .sheet-effets-row .sheet-sous-label {
      white-space: normal;
      line-height: 1.2;
    }
    
    .charsheet .sheet-effets-row .sheet-sous-titre {
      padding: 8px 12px;
      min-height: 40px;
      align-items: center;
    }
  }
  
  /* Ajustement spécifique pour "Effet de la Compétence Spéciale" */
  .charsheet .sheet-effet-gauche .sheet-sous-label {
    max-width: calc(100% - 30px);
  }
  
  /* === BADGE DE NIVEAU - VERSION ULTRA-COMPACTE POUR ONGLET === */
  
  
  /* === BADGE DE NIVEAU - VERSION OPTIMISÉE SANS DÉBORDEMENT === */
  
  /* CONTAINER PRINCIPAL DU BADGE */
  .charsheet .sheet-niveau-badge {
    display: inline-flex;
    align-items: center;
    gap: 2px; /* ✅ RÉDUIT : pour compacité */
    padding: 3px 4px; /* ✅ RÉDUIT : padding minimal */
    background: linear-gradient(135deg, #8b6914, #b8860b);
    border: 2px solid #deb887;
    border-radius: 5px;
    box-shadow: 
      0 2px 4px rgba(0,0,0,0.3),
      inset 0 1px 0 rgba(222,184,135,0.3);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden; /* ✅ IMPORTANT : hidden pour éviter débordement */
    width: 68px; /* ✅ LARGEUR FIXE au lieu de max-width */
    height: 30px; /* ✅ HAUTEUR FIXE */
    flex-shrink: 0;
    box-sizing: border-box; /* ✅ IMPORTANT : inclut padding et border */
  }
  
  .charsheet .sheet-niveau-badge::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent, 
      rgba(244,230,183,0.4), 
      transparent);
    transition: left 0.6s ease;
    pointer-events: none;
    z-index: 1;
  }
  
  .charsheet .sheet-niveau-badge:hover::before {
    left: 100%;
  }
  
  .charsheet .sheet-niveau-badge:hover {
    border-color: #f4e6b7;
    box-shadow: 
      0 3px 8px rgba(184,134,11,0.4),
      inset 0 1px 0 rgba(244,230,183,0.4);
    transform: translateY(-1px);
  }
  
  /* LABEL "NIV." - OPTIMISÉ */
  .charsheet .sheet-niveau-label {
    color: #f4e6b7;
    font-family: 'Georgia', serif;
    font-size: 9px; /* ✅ RÉDUIT : de 11px à 9px */
    font-weight: 900;
    text-transform: uppercase;
    text-shadow: 
      1px 1px 2px rgba(0,0,0,0.8),
      0 0 6px rgba(244,230,183,0.3);
    letter-spacing: 0.2px;
    margin: 0;
    padding: 0;
    user-select: none;
    position: relative;
    z-index: 2;
    white-space: nowrap;
    flex-shrink: 0;
    width: 24px; /* ✅ LARGEUR FIXE */
    text-align: left;
  }
  
  /* SELECT PERSONNALISÉ - CALIBRÉ EXACTEMENT */
  .charsheet .sheet-niveau-select {
    width: 28px; /* ✅ LARGEUR EXACTE */
    height: 22px; /* ✅ HAUTEUR EXACTE */
    padding: 0 14px 0 4px; /* ✅ PADDING MINIMAL */
    border: 1px solid #654321; /* ✅ BORDURE PLUS FINE */
    border-radius: 4px;
    background: linear-gradient(135deg, #deb887, #d2b48c);
    color: #3d2817;
    font-family: 'Georgia', serif;
    font-size: 11px; /* ✅ TAILLE OPTIMALE */
    font-weight: 900;
    text-align: center;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.15);
    transition: all 0.3s ease;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    cursor: pointer;
    position: relative;
    z-index: 3;
    margin: 0;
    line-height: 1;
    display: block;
    flex-shrink: 0;
    box-sizing: border-box; /* ✅ IMPORTANT */
  }
  
  .charsheet .sheet-niveau-select:hover {
    border-color: #8b4513;
    background: linear-gradient(135deg, #f5deb3, #deb887);
    box-shadow: 
      inset 0 1px 2px rgba(0,0,0,0.15),
      0 2px 4px rgba(139,69,19,0.3);
    transform: scale(1.02); /* ✅ RÉDUIT : moins d'agrandissement */
    z-index: 5;
  }
  
  .charsheet .sheet-niveau-select:focus {
    border-color: #a0522d;
    outline: none;
    background: linear-gradient(135deg, #f5deb3, #e5d4a8);
    box-shadow: 
      inset 0 1px 2px rgba(0,0,0,0.15),
      0 0 6px rgba(160,82,45,0.3);
    transform: scale(1.03); /* ✅ RÉDUIT */
    z-index: 10;
  }
  
  /* OPTIONS DU SELECT */
  .charsheet .sheet-niveau-select option {
    background: #deb887;
    color: #3d2817;
    font-family: 'Georgia', serif;
    font-size: 12px;
    font-weight: 700;
    padding: 6px 8px;
    border: none;
  }
  
  .charsheet .sheet-niveau-select option:hover,
  .charsheet .sheet-niveau-select option:checked {
    background: linear-gradient(135deg, #8b6914, #b8860b);
    color: #f4e6b7;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }
  
  /* FLÈCHE PERSONNALISÉE - REPOSITIONNÉE */
  .charsheet .sheet-niveau-arrow {
    position: absolute;
    top: 50%;
    right: 7px; /* ✅ AJUSTÉ : plus près du bord */
    transform: translateY(-50%);
    color: #3d2817;
    font-size: 6px; /* ✅ RÉDUIT */
    pointer-events: none;
    text-shadow: 1px 1px 1px rgba(222,184,135,0.5);
    transition: all 0.3s ease;
    z-index: 4;
  }
  
  .charsheet .sheet-niveau-badge:hover .sheet-niveau-arrow {
    color: #654321;
    transform: translateY(-50%) scale(1.1) rotate(180deg); /* ✅ RÉDUIT : moins d'agrandissement */
  }
  
  /* VERSION MINI (optionnelle si besoin) */
  .charsheet .sheet-niveau-badge.sheet-mini {
    gap: 1px;
    padding: 2px 3px;
    width: 62px;
    height: 26px;
  }
  
  .charsheet .sheet-niveau-badge.sheet-mini .sheet-niveau-label {
    font-size: 8px;
    width: 22px;
  }
  
  .charsheet .sheet-niveau-badge.sheet-mini .sheet-niveau-select {
    width: 26px;
    height: 20px;
    font-size: 10px;
    padding: 0 12px 0 3px;
  }
  
  .charsheet .sheet-niveau-badge.sheet-mini .sheet-niveau-arrow {
    font-size: 5px;
    right: 6px;
  }
  
  /* RESPONSIVE */
  @media (max-width: 768px) {
    .charsheet .sheet-niveau-badge {
      width: 66px;
      height: 28px;
      padding: 3px 4px;
      gap: 2px;
    }
    
    .charsheet .sheet-niveau-label {
      font-size: 9px;
      width: 23px;
    }
    
    .charsheet .sheet-niveau-select {
      width: 27px;
      height: 21px;
      font-size: 11px;
    }
    
    .charsheet .sheet-niveau-arrow {
      font-size: 6px;
      right: 7px;
    }
  }
  
  @media (max-width: 480px) {
    .charsheet .sheet-niveau-badge {
      width: 64px;
      height: 26px;
      padding: 2px 3px;
      gap: 2px;
    }
    
    .charsheet .sheet-niveau-label {
      font-size: 8px;
      width: 22px;
    }
    
    .charsheet .sheet-niveau-select {
      width: 26px;
      height: 20px;
      font-size: 10px;
      padding: 0 12px 0 3px;
    }
    
    .charsheet .sheet-niveau-arrow {
      font-size: 5px;
      right: 6px;
    }
  }
  
  /* === AJUSTEMENTS POUR LE CONTENEUR PARENT (si nécessaire) === */
  
  /* Si le badge est dans le header de capacité */
  .charsheet .sheet-capacite-header {
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
    overflow: visible; /* ✅ Permet de voir le badge complet */
  }
  
  /* Si besoin de forcer l'alignement */
  .charsheet .sheet-capacite-header .sheet-niveau-badge {
    margin-left: auto; /* ✅ Pousse le badge à droite si nécessaire */
  }
  /* ===== GESTION DE L'OPTION "CACHER ZONE COULEUR TEMPLATE" ===== */
  
  /* Masquer l'option par défaut (elle n'est visible que dans l'onglet Sort/Capacité) */
  .charsheet .sheet-sort-only-option {
    display: none;
  }
  
  /* Afficher l'option uniquement quand on est dans l'onglet Sort/Capacité */
  .charsheet .sheet-tab-content.sheet-sort ~ * .sheet-sort-only-option,
  .charsheet .sheet-tab-content.sheet-sort .sheet-sort-only-option {
    display: block;
  }
  
  /* Alternative plus robuste : afficher l'option quand le tab Sort est visible */
  .charsheet input[name="attr_ui_tab"]:checked[value="sort"] ~ .sheet-tabsbar .sheet-sort-only-option {
    display: block;
  }
  
  /* Masquer toutes les zones de couleur de template quand la checkbox est cochée */
  .charsheet input[name="attr_hide_color_zones"]:checked ~ .sheet-tab-content .sheet-jet-color-zone {
    display: none !important;
  }
  
  /* Variante pour s'assurer que ça fonctionne dans tous les contextes */
  .charsheet input[name="attr_hide_color_zones"]:checked ~ * .sheet-jet-color-zone,
  .charsheet input[name="attr_hide_color_zones"]:checked ~ .sheet-tabsbar ~ * .sheet-jet-color-zone {
    display: none !important;
  }
  
  /* Style pour l'option dans le panneau (optionnel - pour la mettre en évidence) */
  .charsheet .sheet-sort-only-option {
    background: rgba(139,105,20,0.15);
    border-left: 3px solid #8b6914;
    padding-left: 8px;
    margin-top: 8px;
    border-radius: 4px;
  }
  
  .charsheet .sheet-sort-only-option label {
    color: #deb887;
    font-weight: 600;
  }
  .charsheet .sheet-hidden {
    display: none !important;
    position: absolute !important;
    left: -9999px !important;
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* ========================================
      PATCH FOND SOMBRE FORCÉ
     À placer EN PREMIER dans le CSS
     ======================================== */
  
  /* FOND NOIR SUR TOUT L'ONGLET */
  .charsheet .sheet-voie-sanguinaire {
    background: #000000 !important;
    padding: 20px;
    min-height: 100vh;
  }
  
  /* FOND NOIR SUR TOUS LES CONTENEURS */
  .charsheet .sheet-voie-sanguinaire > *,
  .charsheet .sheet-voie-sanguinaire section,
  .charsheet .sheet-voie-sanguinaire div:not(.sheet-vampire-header):not(.sheet-section-title-vampire):not(.sheet-subsection-title-vampire):not(.sheet-reward-title) {
    background-color: transparent !important;
  }
  
  /* FOND TRÈS SOMBRE SUR LES TABLES */
  .charsheet .sheet-voie-sanguinaire table {
    background: #0a0a0a !important;
    border: 2px solid #8b0000 !important;
  }
  
  .charsheet .sheet-voie-sanguinaire table thead {
    background: linear-gradient(to right, #4a0000, #0d0d0d) !important;
  }
  
  .charsheet .sheet-voie-sanguinaire table tbody {
    background: #0a0a0a !important;
  }
  
  .charsheet .sheet-voie-sanguinaire table tbody tr {
    background: rgba(10, 10, 10, 0.9) !important;
    border-bottom: 1px solid rgba(139, 0, 0, 0.3) !important;
  }
  
  .charsheet .sheet-voie-sanguinaire table tbody tr:hover {
    background: rgba(30, 10, 10, 0.9) !important;
  }
  
  .charsheet .sheet-voie-sanguinaire table tbody td,
  .charsheet .sheet-voie-sanguinaire table thead th {
    background: transparent !important;
    color: #ffebcd !important;
  }
  
  /* INPUTS ET SELECTS NOIRS */
  .charsheet .sheet-voie-sanguinaire input[type="number"],
  .charsheet .sheet-voie-sanguinaire input[type="text"],
  .charsheet .sheet-voie-sanguinaire select {
    background: #000000 !important;
    border: 2px solid #8b0000 !important;
    color: #ffebcd !important;
  }
  
  /* BUTTONS ROUGES */
  .charsheet .sheet-voie-sanguinaire button,
  .charsheet .sheet-voie-sanguinaire input[type="button"] {
    background: linear-gradient(to bottom, #b22222, #4a0000) !important;
    border: 2px solid #8b0000 !important;
    color: #ffebcd !important;
  }
  
  /* DETAILS (SECTIONS PLIABLES) SOMBRES */
  .charsheet .sheet-voie-sanguinaire details {
    background: rgba(10, 10, 10, 0.95) !important;
    border: 2px solid #8b0000 !important;
  }
  
  .charsheet .sheet-voie-sanguinaire details summary {
    background: linear-gradient(to right, #4a0000, #b22222) !important;
    color: #ffebcd !important;
  }
  
  /* TEXTE CLAIR PARTOUT */
  .charsheet .sheet-voie-sanguinaire,
  .charsheet .sheet-voie-sanguinaire * {
    color: #ffebcd !important;
  }
  
  /* TITRES GARDENT LEUR COULEUR OR */
  .charsheet .sheet-voie-sanguinaire .sheet-vampire-title,
  .charsheet .sheet-voie-sanguinaire .sheet-vampire-subtitle {
    color: #b8860b !important;
  }
  /* ========================================
     CSS ÉVOLUTION VAMPIRIQUE - ROLL20
     VERSION 2.8 - ISOLÉ À L'ONGLET
     Thème Dark Fantasy Vampire Gothique
     Scope: .charsheet .sheet-voie-sanguinaire
     Rolltemplates: globaux (chat)
     ======================================== */
  
  /* ========== VARIABLES CSS (Scopées à l'onglet) ========== */
  .charsheet .sheet-voie-sanguinaire {
    --vampire-black: #0d0d0d;
    --vampire-black-light: #1a1a1a;
    --vampire-blood: #8b0000;
    --vampire-blood-light: #b22222;
    --vampire-blood-dark: #4a0000;
    --vampire-purple: #4b0082;
    --vampire-purple-light: #6a0dad;
    --vampire-gold: #b8860b;
    --vampire-gold-dark: #8b6914;
    --vampire-bone: #ffebcd;
    --vampire-gray: #2f2f2f;
    --vampire-red-glow: rgba(139, 0, 0, 0.3);
    --vampire-purple-glow: rgba(75, 0, 130, 0.3);
  }
  
  /* ========== FIX FOND SOMBRE FORCÉ ========== */
  .charsheet .sheet-voie-sanguinaire {
    background: linear-gradient(135deg, #0d0d0d 0%, #1a1a1a 50%, #0d0d0d 100%) !important;
    min-height: 100vh;
    padding: 20px;
  }
  
  /* Force aussi le texte en clair */
  .charsheet .sheet-voie-sanguinaire * {
    color: #e4d8c4;
  }
  
  /* ========== CLASSE CACHÉE ========== */
  .charsheet .sheet-voie-sanguinaire .sheet-hidden {
    position: absolute !important;
    left: -9999px !important;
    top: auto !important;
    width: 1px !important;
    height: 1px !important;
    opacity: 0 !important;
    overflow: hidden !important;
    pointer-events: none !important;
  }
  
  /* ========== CONTENEUR PRINCIPAL ========== */
  .charsheet .sheet-voie-sanguinaire .sheet-evolution {
    background: linear-gradient(135deg, var(--vampire-black) 0%, var(--vampire-black-light) 50%, var(--vampire-black) 100%),
      repeating-linear-gradient(
        90deg,
        transparent,
        transparent 2px,
        rgba(139, 0, 0, 0.03) 2px,
        rgba(139, 0, 0, 0.03) 4px
      );
    padding: 20px;
    border-radius: 10px;
    border: 3px double var(--vampire-blood);
    box-shadow: inset 0 0 30px rgba(139, 0, 0, 0.2), 0 0 50px rgba(139, 0, 0, 0.4);
    font-family: 'Uncial Antiqua', serif;
    position: relative;
    overflow: hidden;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-evolution::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at center, transparent 0%, rgba(0, 0, 0, 0.7) 100%);
    pointer-events: none;
    z-index: 0;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-evolution > * {
    position: relative;
    z-index: 1;
  }
  
  /* ======================================== 
     BARRE DE PROGRESSION VERTICALE 
     ======================================== */
  .charsheet .sheet-voie-sanguinaire .sheet-progression-bar-container {
    position: fixed;
    top: 80px;
    right: 20px;
    width: 80px;
    height: calc(100vh - 120px);
    max-height: 800px;
    z-index: 999;
    pointer-events: auto;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-progression-bar-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
    filter: drop-shadow(0 0 20px rgba(139, 0, 0, 0.6));
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-progression-bar-background {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 100%;
    background: linear-gradient(to bottom, rgba(26, 26, 26, 0.9), rgba(13, 13, 13, 0.9));
    border: 2px solid #2f2f2f;
    border-radius: 20px;
    box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.8);
    overflow: hidden;
    pointer-events: none;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-progression-bars {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 100%;
    border-radius: 20px;
    overflow: hidden;
    pointer-events: none;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-progression-bars::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 50% 0%, rgba(255, 255, 255, 0.25) 0%, transparent 40%),
      linear-gradient(to top, rgba(139, 0, 0, 0.7), rgba(178, 34, 34, 0.3));
    mix-blend-mode: soft-light;
    pointer-events: none;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-progression-fill {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 0%;
    border-radius: 999px;
    background: linear-gradient(to top, #7f1d1d, #dc2626, #fca5a5);
    transition: height 0.3s ease;
    pointer-events: none;
  }
  
  /* Mapping des 38 états - Simplifié (dépend des inputs cachés globaux) */
  .charsheet input[name="attr_progression_completed_steps"][value="0"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 0%; }
  .charsheet input[name="attr_progression_completed_steps"][value="1"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 2.7%; }
  .charsheet input[name="attr_progression_completed_steps"][value="2"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 5.4%; }
  .charsheet input[name="attr_progression_completed_steps"][value="3"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 8.1%; }
  .charsheet input[name="attr_progression_completed_steps"][value="4"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 10.8%; }
  .charsheet input[name="attr_progression_completed_steps"][value="5"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 13.5%; }
  .charsheet input[name="attr_progression_completed_steps"][value="6"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 16.2%; }
  .charsheet input[name="attr_progression_completed_steps"][value="7"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 18.9%; }
  .charsheet input[name="attr_progression_completed_steps"][value="8"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 21.6%; }
  .charsheet input[name="attr_progression_completed_steps"][value="9"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 24.3%; }
  .charsheet input[name="attr_progression_completed_steps"][value="10"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 27%; }
  .charsheet input[name="attr_progression_completed_steps"][value="11"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 29.7%; }
  .charsheet input[name="attr_progression_completed_steps"][value="12"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 32.4%; }
  .charsheet input[name="attr_progression_completed_steps"][value="13"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 35.1%; }
  .charsheet input[name="attr_progression_completed_steps"][value="14"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 37.8%; }
  .charsheet input[name="attr_progression_completed_steps"][value="15"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 40.5%; }
  .charsheet input[name="attr_progression_completed_steps"][value="16"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 43.2%; }
  .charsheet input[name="attr_progression_completed_steps"][value="17"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 45.9%; }
  .charsheet input[name="attr_progression_completed_steps"][value="18"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 48.6%; }
  .charsheet input[name="attr_progression_completed_steps"][value="19"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 51.4%; }
  .charsheet input[name="attr_progression_completed_steps"][value="20"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 54.1%; }
  .charsheet input[name="attr_progression_completed_steps"][value="21"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 56.8%; }
  .charsheet input[name="attr_progression_completed_steps"][value="22"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 59.5%; }
  .charsheet input[name="attr_progression_completed_steps"][value="23"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 62.2%; }
  .charsheet input[name="attr_progression_completed_steps"][value="24"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 64.9%; }
  .charsheet input[name="attr_progression_completed_steps"][value="25"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 67.6%; }
  .charsheet input[name="attr_progression_completed_steps"][value="26"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 70.3%; }
  .charsheet input[name="attr_progression_completed_steps"][value="27"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 73%; }
  .charsheet input[name="attr_progression_completed_steps"][value="28"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 75.7%; }
  .charsheet input[name="attr_progression_completed_steps"][value="29"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 78.4%; }
  .charsheet input[name="attr_progression_completed_steps"][value="30"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 81.1%; }
  .charsheet input[name="attr_progression_completed_steps"][value="31"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 83.8%; }
  .charsheet input[name="attr_progression_completed_steps"][value="32"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 86.5%; }
  .charsheet input[name="attr_progression_completed_steps"][value="33"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 89.2%; }
  .charsheet input[name="attr_progression_completed_steps"][value="34"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 91.9%; }
  .charsheet input[name="attr_progression_completed_steps"][value="35"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 94.6%; }
  .charsheet input[name="attr_progression_completed_steps"][value="36"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 97.3%; }
  .charsheet input[name="attr_progression_completed_steps"][value="37"] ~ .sheet-voie-sanguinaire .sheet-progression-fill { height: 100%; }
  
  /* ========== MARQUEURS DE PALIERS ========== */
  .charsheet .sheet-voie-sanguinaire .sheet-tier-markers {
    position: absolute;
    top: 0;
    left: 50px;
    width: 30px;
    height: 100%;
    display: flex;
    flex-direction: column-reverse;
    justify-content: space-around;
    pointer-events: auto;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-tier-marker {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: linear-gradient(135deg, #1a1a1a, #0d0d0d);
    border: 2px solid #8b0000;
    color: #ffebcd;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9em;
    font-weight: bold;
    cursor: help;
    transition: all 0.3s ease;
    box-shadow: 0 0 10px rgba(139, 0, 0, 0.5);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-tier-marker:hover {
    transform: scale(1.2);
    border-color: #b22222;
    box-shadow: 0 0 20px rgba(139, 0, 0, 0.8);
    color: #b8860b;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="1"] { border-color: #8b0000; }
  .charsheet .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="2"] { border-color: #b22222; }
  .charsheet .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="3"] { border-color: #d2691e; }
  .charsheet .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="4"] { border-color: #ff6347; }
  .charsheet .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="5"] { border-color: #4b0082; }
  .charsheet .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="6"] { border-color: #6a0dad; }
  .charsheet .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="7"] { border-color: #8b008b; }
  
  @keyframes voieSangMarkerPulse {
    0%, 100% { box-shadow: 0 0 25px rgba(139, 0, 0, 1); }
    50% { box-shadow: 0 0 35px rgba(139, 0, 0, 1); }
  }
  
  /* Marqueurs actifs */
  .charsheet input[name="attr_progression_tier_display"][value="1"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="1"],
  .charsheet input[name="attr_progression_tier_display"][value="2"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="1"],
  .charsheet input[name="attr_progression_tier_display"][value="2"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="2"],
  .charsheet input[name="attr_progression_tier_display"][value="3"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="1"],
  .charsheet input[name="attr_progression_tier_display"][value="3"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="2"],
  .charsheet input[name="attr_progression_tier_display"][value="3"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="3"],
  .charsheet input[name="attr_progression_tier_display"][value="4"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="1"],
  .charsheet input[name="attr_progression_tier_display"][value="4"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="2"],
  .charsheet input[name="attr_progression_tier_display"][value="4"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="3"],
  .charsheet input[name="attr_progression_tier_display"][value="4"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="4"],
  .charsheet input[name="attr_progression_tier_display"][value="5"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="1"],
  .charsheet input[name="attr_progression_tier_display"][value="5"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="2"],
  .charsheet input[name="attr_progression_tier_display"][value="5"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="3"],
  .charsheet input[name="attr_progression_tier_display"][value="5"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="4"],
  .charsheet input[name="attr_progression_tier_display"][value="5"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="5"],
  .charsheet input[name="attr_progression_tier_display"][value="6"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="1"],
  .charsheet input[name="attr_progression_tier_display"][value="6"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="2"],
  .charsheet input[name="attr_progression_tier_display"][value="6"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="3"],
  .charsheet input[name="attr_progression_tier_display"][value="6"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="4"],
  .charsheet input[name="attr_progression_tier_display"][value="6"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="5"],
  .charsheet input[name="attr_progression_tier_display"][value="6"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="6"],
  .charsheet input[name="attr_progression_tier_display"][value="7"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="1"],
  .charsheet input[name="attr_progression_tier_display"][value="7"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="2"],
  .charsheet input[name="attr_progression_tier_display"][value="7"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="3"],
  .charsheet input[name="attr_progression_tier_display"][value="7"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="4"],
  .charsheet input[name="attr_progression_tier_display"][value="7"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="5"],
  .charsheet input[name="attr_progression_tier_display"][value="7"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="6"],
  .charsheet input[name="attr_progression_tier_display"][value="7"]:checked ~ .sheet-voie-sanguinaire .sheet-tier-marker[data-tier="7"] {
    background: radial-gradient(circle, #8b0000, #4a0000);
    border-width: 3px;
    box-shadow: 0 0 25px rgba(139, 0, 0, 1);
    animation: voieSangMarkerPulse 2s ease-in-out infinite;
  }
  
  /* ========== INDICATEUR DE PROGRESSION ========== */
  .charsheet .sheet-voie-sanguinaire .sheet-progression-indicator {
    position: absolute;
    top: -60px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, rgba(13, 13, 13, 0.95), rgba(26, 26, 26, 0.95));
    border: 2px solid #8b0000;
    border-radius: 10px;
    padding: 10px 15px;
    min-width: 140px;
    text-align: center;
    box-shadow: 0 0 20px rgba(139, 0, 0, 0.6);
    pointer-events: auto;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-progression-percent {
    font-size: 1.6em;
    font-weight: bold;
    color: #b8860b;
    text-shadow: 0 0 10px rgba(184, 134, 11, 0.8);
    margin-bottom: 5px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-progression-text {
    font-size: 0.75em;
    color: #ffebcd;
    margin-bottom: 3px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-progression-warning {
    display: none;
    font-size: 0.7em;
    color: #ff6347;
    background: rgba(139, 0, 0, 0.3);
    padding: 4px 8px;
    border-radius: 5px;
    margin-top: 5px;
    border: 1px solid #ff6347;
    animation: voieSangWarningBlink 1.5s ease-in-out infinite;
  }
  
  @keyframes voieSangWarningBlink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }
  
  .charsheet input[name="attr_progression_has_warning"]:checked ~ .sheet-voie-sanguinaire .sheet-progression-warning {
    display: block;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-progression-stats {
    font-size: 0.7em;
    color: #8b0000;
    margin-top: 3px;
  }
  
  /* ========== RESPONSIVE BARRE ========== */
  @media screen and (max-width: 1200px) {
    .charsheet .sheet-voie-sanguinaire .sheet-progression-bar-container {
      width: 60px;
      right: 10px;
    }
    .charsheet .sheet-voie-sanguinaire .sheet-tier-markers {
      left: 45px;
      width: 25px;
    }
    .charsheet .sheet-voie-sanguinaire .sheet-tier-marker {
      width: 25px;
      height: 25px;
      font-size: 0.8em;
    }
    .charsheet .sheet-voie-sanguinaire .sheet-progression-indicator {
      min-width: 110px;
      padding: 8px 12px;
      top: -55px;
    }
    .charsheet .sheet-voie-sanguinaire .sheet-progression-percent {
      font-size: 1.3em;
    }
  }
  
  @media screen and (max-width: 768px) {
    .charsheet .sheet-voie-sanguinaire .sheet-progression-bar-container {
      display: none;
    }
  }
  
  /* ======================================== 
     HEADER VAMPIRIQUE 
     ======================================== */
  .charsheet .sheet-voie-sanguinaire .sheet-vampire-header {
    text-align: center;
    margin: 20px 0 30px 0;
    padding: 20px;
    background: linear-gradient(135deg, var(--vampire-blood-dark) 0%, var(--vampire-purple) 100%);
    border: 2px solid var(--vampire-blood);
    border-radius: 15px;
    box-shadow: 0 0 30px rgba(139, 0, 0, 0.6), inset 0 0 20px rgba(0, 0, 0, 0.5);
    position: relative;
    overflow: hidden;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-vampire-header::before {
    content: "";
    position: absolute;
    font-size: 120px;
    opacity: 0.1;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-15deg);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-vampire-title {
    font-size: 2em;
    color: var(--vampire-bone);
    text-shadow: 0 0 10px var(--vampire-blood), 2px 2px 5px rgba(0, 0, 0, 0.8);
    margin: 0 0 10px 0;
    font-weight: bold;
    letter-spacing: 2px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-vampire-subtitle {
    font-size: 1.2em;
    color: var(--vampire-gold);
    text-shadow: 0 0 5px rgba(184, 134, 11, 0.5);
    margin: 0;
    font-style: italic;
  }
  
  /* ======================================== 
     TITRES DE SECTIONS 
     ======================================== */
  .charsheet .sheet-voie-sanguinaire .sheet-section-title-vampire {
    background: linear-gradient(to right, var(--vampire-blood), var(--vampire-purple));
    color: var(--vampire-bone);
    padding: 12px 20px;
    border-radius: 8px;
    font-weight: bold;
    font-size: 1.3em;
    margin: 20px 0 15px 0;
    border: 2px solid var(--vampire-blood-light);
    box-shadow: 0 0 20px var(--vampire-red-glow), inset 0 0 10px rgba(0, 0, 0, 0.4);
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-section-title-vampire:hover {
    background: linear-gradient(to right, var(--vampire-blood-light), var(--vampire-purple-light));
    box-shadow: 0 0 30px rgba(139, 0, 0, 0.8), inset 0 0 15px rgba(0, 0, 0, 0.6);
    transform: translateY(-2px);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-subsection-title-vampire {
    background: linear-gradient(135deg, var(--vampire-black-light) 0%, var(--vampire-gray) 100%);
    color: var(--vampire-bone);
    padding: 10px 15px;
    border-left: 5px solid var(--vampire-blood);
    border-radius: 5px;
    font-weight: bold;
    font-size: 1.1em;
    margin: 10px 0;
    box-shadow: 0 0 15px rgba(139, 0, 0, 0.3), inset 0 0 10px rgba(0, 0, 0, 0.3);
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
  }
  
  /* ======================================== 
     SECTION RESSOURCES 
     ======================================== */
  .charsheet .sheet-voie-sanguinaire .sheet-evolution-resources {
    margin: 20px auto 30px;
    display: flex;
    justify-content: center;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-evolution-resources-inner {
    max-width: 900px;
    width: 100%;
    background: radial-gradient(circle at top, rgba(139, 0, 0, 0.25), rgba(13, 13, 13, 0.95));
    border: 2px solid var(--vampire-blood);
    border-radius: 12px;
    box-shadow: 0 0 25px rgba(139, 0, 0, 0.5), inset 0 0 18px rgba(0, 0, 0, 0.7);
    padding: 16px 22px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-pv-table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    font-size: 0.95em;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-col-ressource { width: 30%; }
  .charsheet .sheet-voie-sanguinaire .sheet-col-valeur { width: 15%; text-align: center; }
  .charsheet .sheet-voie-sanguinaire .sheet-col-info { width: 55%; }
  
  .charsheet .sheet-voie-sanguinaire .sheet-pv-table thead {
    background: linear-gradient(to right, var(--vampire-blood-dark), var(--vampire-black));
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-pv-table th {
    padding: 10px 8px;
    color: var(--vampire-bone);
    text-align: center;
    border-bottom: 2px solid var(--vampire-blood);
    text-shadow: 0 0 4px rgba(0, 0, 0, 0.8);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-pv-table tbody tr {
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-pv-table td {
    padding: 10px 10px;
    vertical-align: middle;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-blood-row {
    background: linear-gradient(90deg, rgba(139, 0, 0, 0.25), transparent);
    border-left: 4px solid var(--vampire-blood);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-tears-row {
    background: linear-gradient(90deg, rgba(75, 0, 130, 0.25), transparent);
    border-left: 4px solid var(--vampire-purple);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-rage-row {
    background: linear-gradient(90deg, rgba(178, 34, 34, 0.2), transparent);
    border-left: 4px solid var(--vampire-blood-light);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-stat-label {
    display: flex;
    align-items: center;
    gap: 6px;
    color: var(--vampire-bone);
    font-weight: bold;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-stat-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    border: 1px solid var(--vampire-blood);
    background: radial-gradient(circle, rgba(139, 0, 0, 0.4), rgba(0, 0, 0, 0.9));
    font-size: 0.85em;
    text-shadow: 0 0 4px rgba(0, 0, 0, 0.9);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-stat-text {
    white-space: nowrap;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-stat-value {
    text-align: center;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-evolution-resources input[type="number"] {
    width: 70px;
    max-width: 100%;
    text-align: center;
    background: linear-gradient(to bottom, #1a1a1a, #0d0d0d);
    border: 2px solid var(--vampire-blood);
    color: var(--vampire-bone);
    border-radius: 6px;
    padding: 4px 4px;
    box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.7);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-info-cell {
    color: var(--vampire-gold);
    font-size: 0.9em;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-info-line {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 4px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-info-label {
    font-weight: bold;
    color: var(--vampire-bone);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-info-separator {
    color: var(--vampire-bone);
    opacity: 0.9;
    margin: 0 2px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-info-suffix {
    color: var(--vampire-bone);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-palier-display,
  .charsheet .sheet-voie-sanguinaire .sheet-niveau-display,
  .charsheet .sheet-voie-sanguinaire .sheet-rage-display {
    background: linear-gradient(to bottom, var(--vampire-black-light), var(--vampire-black));
    border: 2px solid var(--vampire-blood);
    color: var(--vampire-bone);
    font-weight: bold;
    padding: 3px 8px;
    border-radius: 4px;
    text-align: center;
    min-width: 40px;
    box-shadow: inset 0 0 8px rgba(139, 0, 0, 0.4);
    text-shadow: 0 0 4px var(--vampire-blood);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-pv-table tbody tr:hover {
    background-color: rgba(255, 255, 255, 0.03);
  }
  
  @media screen and (max-width: 768px) {
    .charsheet .sheet-voie-sanguinaire .sheet-evolution-resources-inner {
      padding: 12px 10px;
    }
    .charsheet .sheet-voie-sanguinaire .sheet-pv-table {
      font-size: 0.85em;
    }
    .charsheet .sheet-voie-sanguinaire .sheet-stat-label {
      flex-wrap: wrap;
    }
  }
  
  /* ======================================== 
     OBTENTION DES POINTS D'ÉVOLUTION 
     ======================================== */
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-wrapper {
    margin: 20px 0 30px 0;
    border-radius: 8px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-wrapper > summary {
    list-style: none;
    cursor: pointer;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-wrapper > summary::-webkit-details-marker {
    display: none;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-section {
    margin-top: 10px;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-block {
    background: linear-gradient(135deg, rgba(13, 13, 13, 0.95) 0%, rgba(26, 26, 26, 0.95) 100%);
    border: 2px solid var(--vampire-blood);
    border-radius: 10px;
    box-shadow: 0 0 20px var(--vampire-red-glow), inset 0 0 15px rgba(0, 0, 0, 0.7);
    padding: 15px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-title {
    font-weight: bold;
    font-size: 1.1em;
    color: var(--vampire-bone);
    text-shadow: 0 0 6px rgba(139, 0, 0, 0.8);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-header-buttons {
    display: flex;
    gap: 6px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-roll-button,
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-gain-button,
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-reset-button {
    background: linear-gradient(to bottom, var(--vampire-blood-light), var(--vampire-blood-dark));
    border: 2px solid var(--vampire-blood);
    border-radius: 6px;
    color: var(--vampire-bone);
    padding: 6px 10px;
    font-family: 'Uncial Antiqua', serif;
    font-size: 0.85em;
    cursor: pointer;
    box-shadow: 0 0 12px rgba(139, 0, 0, 0.6);
    text-shadow: 0 0 4px rgba(0, 0, 0, 0.9);
    transition: all 0.2s ease;
    white-space: nowrap;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-roll-button:hover,
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-gain-button:hover,
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-reset-button:hover {
    background: linear-gradient(to bottom, var(--vampire-blood), var(--vampire-blood-light));
    transform: translateY(-1px);
    box-shadow: 0 0 18px rgba(139, 0, 0, 0.9);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 5px;
    font-size: 0.9em;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-table thead {
    background: linear-gradient(to right, var(--vampire-blood-dark), var(--vampire-black));
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-table th {
    padding: 8px;
    color: var(--vampire-bone);
    border-bottom: 2px solid var(--vampire-blood);
    text-align: left;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-table td {
    padding: 8px;
    border-bottom: 1px solid rgba(139, 0, 0, 0.3);
    vertical-align: top;
    color: var(--vampire-bone);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-method {
    width: 18%;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-method-stack {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-pick {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    user-select: none;
    width: 100%;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-pick .sheet-obtention-select {
    position: absolute;
    inset: 0;
    opacity: 0;
    margin: 0;
    width: 100%;
    height: 100%;
    cursor: pointer;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-method-btn {
    display: block;
    width: 100%;
    padding: 8px 10px;
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.18);
    background: rgba(0, 0, 0, 0.25);
    line-height: 1.2;
    transition: all 0.2s ease;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-pick:hover .sheet-obtention-method-btn {
    border-color: rgba(255, 255, 255, 0.35);
    background: rgba(0, 0, 0, 0.33);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-pick:focus-within .sheet-obtention-method-btn {
    outline: 2px solid rgba(255, 255, 255, 0.25);
    outline-offset: 2px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-pick .sheet-obtention-select:checked + .sheet-obtention-method-btn {
    border-color: rgba(255, 0, 0, 0.55);
    background: rgba(255, 0, 0, 0.12);
    box-shadow: 0 0 0 2px rgba(255, 0, 0, 0.18);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-pick .sheet-obtention-select:checked + .sheet-obtention-method-btn strong {
    color: var(--vampire-gold);
    text-shadow: 0 0 4px rgba(184, 134, 11, 0.8);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-desc {
    width: 34%;
    font-size: 0.9em;
    line-height: 1.5;
    color: var(--vampire-bone);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-col {
    width: 24%;
    font-size: 0.85em;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-inline {
    display: flex;
    align-items: center;
    gap: 4px;
    margin: 2px 0;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-inline span {
    font-size: 0.8em;
    color: var(--vampire-gold);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-col input[type="number"],
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-col input[type="text"] {
    flex: 1;
    background: linear-gradient(to bottom, #1a1a1a, #0d0d0d);
    border: 1px solid var(--vampire-gray);
    border-radius: 4px;
    padding: 4px 6px;
    color: var(--vampire-bone);
    font-size: 0.85em;
    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.6);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-col input[type="number"] {
    max-width: 70px;
    text-align: center;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-col input[type="text"] {
    max-width: 180px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-col input[readonly] {
    background: linear-gradient(to bottom, #151515, #050505);
    border-color: rgba(139, 0, 0, 0.7);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-table tr:nth-child(even) {
    background: rgba(255, 255, 255, 0.02);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-table tr:hover td {
    background: rgba(139, 0, 0, 0.06);
  }
  
  @media screen and (max-width: 900px) {
    .charsheet .sheet-voie-sanguinaire .sheet-obtention-desc {
      display: none;
    }
    .charsheet .sheet-voie-sanguinaire .sheet-obtention-table th:nth-child(2),
    .charsheet .sheet-voie-sanguinaire .sheet-obtention-table td:nth-child(2) {
      display: none;
    }
  }
  
  /* ========== BONUS LIGNE ========== */
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-toggle-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    user-select: none;
    font-size: 11px;
    letter-spacing: 0.2px;
    opacity: 0.92;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-toggle {
    position: absolute;
    opacity: 0;
    width: 1px;
    height: 1px;
    pointer-events: none;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-toggle-box {
    width: 14px;
    height: 14px;
    border: 1px solid rgba(190, 40, 40, 0.8);
    border-radius: 4px;
    background: rgba(20, 10, 10, 0.65);
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.35);
    display: inline-block;
    position: relative;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-toggle:checked + .sheet-bonus-toggle-box {
    background: rgba(160, 20, 20, 0.75);
    box-shadow: 0 0 8px rgba(180, 40, 40, 0.35), inset 0 0 0 1px rgba(0, 0, 0, 0.35);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-toggle:checked + .sheet-bonus-toggle-box::after {
    content: "";
    position: absolute;
    left: 3px;
    top: 1px;
    width: 6px;
    height: 10px;
    border-right: 2px solid rgba(255, 255, 255, 0.9);
    border-bottom: 2px solid rgba(255, 255, 255, 0.9);
    transform: rotate(40deg);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-toggle-text {
    color: rgba(235, 210, 210, 0.95);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-bonus-row td.sheet-obtention-bonus-cell {
    padding: 0 !important;
    border-top: none !important;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-bonus-row .sheet-bonus-master:not(:checked) ~ .sheet-bonus-content {
    display: none;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-obtention-bonus-row .sheet-bonus-master:checked ~ .sheet-bonus-content {
    display: block;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-content {
    margin: 6px 10px 10px 10px;
    padding: 10px;
    border-radius: 10px;
    background: rgba(15, 8, 10, 0.75);
    border: 1px solid rgba(190, 40, 40, 0.35);
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.35);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-item {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-label {
    font-size: 11px;
    color: rgba(235, 210, 210, 0.9);
    opacity: 0.95;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-content input[type="text"] {
    width: 100%;
    box-sizing: border-box;
    padding: 6px 8px;
    border-radius: 8px;
    border: 1px solid rgba(190, 40, 40, 0.35);
    background: rgba(0, 0, 0, 0.35);
    color: rgba(245, 235, 235, 0.95);
  }
  
  @media (max-width: 640px) {
    .charsheet .sheet-voie-sanguinaire .sheet-bonus-grid {
      grid-template-columns: 1fr;
    }
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-col {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 10px;
    border-radius: 10px;
    background: rgba(0, 0, 0, 0.22);
    border: 1px solid rgba(190, 40, 40, 0.20);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-head {
    font-weight: 700;
    font-size: 12px;
    letter-spacing: 0.2px;
    color: rgba(245, 235, 235, 0.95);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-subhead {
    font-weight: 700;
    font-size: 11px;
    opacity: 0.9;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-sep {
    height: 1px;
    background: rgba(190, 40, 40, 0.20);
    margin: 2px 0;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-field {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-field-label {
    font-size: 11px;
    opacity: 0.9;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-switch {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 11px;
    cursor: pointer;
    user-select: none;
    opacity: 0.95;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-switch input {
    width: 14px;
    height: 14px;
  }
  
  @media (max-width: 640px) {
    .charsheet .sheet-voie-sanguinaire .sheet-bonus-grid-2 {
      grid-template-columns: 1fr;
    }
  }
  
  /* ======================================== 
     PALIERS D'ÉVOLUTION 
     ======================================== */
  .charsheet .sheet-voie-sanguinaire .sheet-evolution-palier {
    margin: 20px 0;
    border: 3px solid;
    border-radius: 10px;
    background: linear-gradient(135deg, rgba(13, 13, 13, 0.95) 0%, rgba(26, 26, 26, 0.95) 100%);
    box-shadow: 0 0 25px rgba(139, 0, 0, 0.4), inset 0 0 20px rgba(0, 0, 0, 0.6);
    overflow: hidden;
    transition: all 0.4s ease;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-evolution-palier:hover {
    box-shadow: 0 0 35px rgba(139, 0, 0, 0.6), inset 0 0 25px rgba(0, 0, 0, 0.7);
    transform: translateY(-3px);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-palier-1 { border-color: #8b0000; box-shadow: 0 0 20px rgba(139, 0, 0, 0.5); }
  .charsheet .sheet-voie-sanguinaire .sheet-palier-2 { border-color: #b22222; box-shadow: 0 0 20px rgba(178, 34, 34, 0.5); }
  .charsheet .sheet-voie-sanguinaire .sheet-palier-3 { border-color: #dc143c; box-shadow: 0 0 20px rgba(220, 20, 60, 0.5); }
  .charsheet .sheet-voie-sanguinaire .sheet-palier-4 { border-color: #ff4500; box-shadow: 0 0 20px rgba(255, 69, 0, 0.5); }
  .charsheet .sheet-voie-sanguinaire .sheet-palier-5 { border-color: #9370db; box-shadow: 0 0 20px rgba(147, 112, 219, 0.5); }
  .charsheet .sheet-voie-sanguinaire .sheet-palier-6 { border-color: #4b0082; box-shadow: 0 0 20px rgba(75, 0, 130, 0.5); }
  .charsheet .sheet-voie-sanguinaire .sheet-palier-7 { border-color: #8b008b; box-shadow: 0 0 30px rgba(139, 0, 139, 0.7); }
  
  .charsheet .sheet-voie-sanguinaire .sheet-evolution-palier summary {
    cursor: pointer;
    padding: 12px 20px;
    background: linear-gradient(to right, var(--vampire-blood-dark), var(--vampire-blood));
    color: var(--vampire-bone);
    font-weight: bold;
    font-size: 1.1em;
    transition: all 0.3s ease;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    border-bottom: 2px solid rgba(139, 0, 0, 0.5);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-evolution-palier summary:hover {
    background: linear-gradient(to right, var(--vampire-blood), var(--vampire-blood-light));
    box-shadow: inset 0 0 15px rgba(139, 0, 0, 0.5);
    padding-left: 25px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-evolution-palier[open] summary {
    border-bottom: 3px solid var(--vampire-blood);
    margin-bottom: 15px;
    box-shadow: 0 3px 10px rgba(139, 0, 0, 0.4);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-palier-content {
    padding: 20px;
    animation: voieSangFadeInBlood 0.5s ease-in-out;
  }
  
  @keyframes voieSangFadeInBlood {
    from {
      opacity: 0;
      transform: translateY(-10px);
      filter: blur(3px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
      filter: blur(0);
    }
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-palier-desc {
    background: linear-gradient(135deg, rgba(139, 0, 0, 0.15) 0%, rgba(75, 0, 130, 0.15) 100%);
    border-left: 5px solid var(--vampire-blood);
    padding: 15px;
    margin: 15px 0;
    border-radius: 6px;
    color: var(--vampire-bone);
    line-height: 1.8;
    box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.4), 0 0 10px rgba(139, 0, 0, 0.2);
  }
  
  /* ======================================== 
     SECTION DE CHOIX 
     ======================================== */
  .charsheet .sheet-voie-sanguinaire .sheet-choice-section {
    background: linear-gradient(135deg, rgba(139, 0, 0, 0.2) 0%, rgba(75, 0, 130, 0.2) 100%);
    border: 2px solid var(--vampire-blood);
    border-radius: 8px;
    padding: 15px;
    margin: 20px 0;
    box-shadow: 0 0 15px var(--vampire-red-glow), inset 0 0 10px rgba(0, 0, 0, 0.4);
    position: relative;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-choice-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(to right, transparent, var(--vampire-blood), transparent);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-choice-label {
    display: block;
    font-weight: bold;
    color: var(--vampire-bone);
    margin-bottom: 10px;
    font-size: 1.1em;
    text-shadow: 0 0 5px var(--vampire-blood);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-choice-section select {
    width: 100%;
    background: linear-gradient(to bottom, #1a1a1a, #0d0d0d);
    color: #ffebcd;
    border: 2px solid var(--vampire-blood);
    border-radius: 6px;
    padding: 12px 15px;
    font-family: 'Uncial Antiqua', serif;
    font-size: 1em;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
    min-height: 45px;
    line-height: 1.5;
    letter-spacing: 0.5px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-choice-section select:hover {
    border-color: var(--vampire-blood-light);
    background: linear-gradient(to bottom, #2a2a2a, #1a1a1a);
    box-shadow: 0 0 15px rgba(139, 0, 0, 0.5), inset 0 0 15px rgba(139, 0, 0, 0.2);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-choice-section select:focus {
    outline: none;
    border-color: var(--vampire-blood-light);
    background: #1a1a1a;
    box-shadow: 0 0 20px rgba(139, 0, 0, 0.7), inset 0 0 20px rgba(139, 0, 0, 0.3);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-choice-section select option {
    background: #1a1a1a;
    color: #ffebcd;
    padding: 10px 15px;
    font-size: 1em;
    line-height: 1.8;
    min-height: 40px;
    font-weight: 500;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-choice-section select option:hover,
  .charsheet .sheet-voie-sanguinaire .sheet-choice-section select option:checked,
  .charsheet .sheet-voie-sanguinaire .sheet-choice-section select option:focus {
    background: #8b0000;
    color: #ffffff;
    font-weight: 600;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-choice-section select option[value=""] {
    color: #b8860b;
    font-style: italic;
    font-weight: 600;
  }
  
  /* ======================================== 
     RÉCOMPENSES 
     ======================================== */
  .charsheet .sheet-voie-sanguinaire .sheet-rewards-section {
    margin-top: 25px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-reward-title {
    background: linear-gradient(to right, var(--vampire-blood-dark), var(--vampire-purple));
    color: var(--vampire-bone);
    padding: 8px 15px;
    border-radius: 6px;
    font-weight: bold;
    margin: 20px 0 15px 0;
    border: 2px solid var(--vampire-blood);
    box-shadow: 0 0 15px rgba(139, 0, 0, 0.4);
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-reward-block {
    background: linear-gradient(135deg, rgba(13, 13, 13, 0.6) 0%, rgba(26, 26, 26, 0.6) 100%);
    border: 2px solid var(--vampire-gray);
    border-left: 5px solid var(--vampire-blood);
    border-radius: 6px;
    padding: 15px;
    margin: 12px 0;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(0, 0, 0, 0.3);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-reward-block:hover {
    background: linear-gradient(135deg, rgba(139, 0, 0, 0.15) 0%, rgba(75, 0, 130, 0.15) 100%);
    border-left-width: 7px;
    box-shadow: 0 4px 12px rgba(139, 0, 0, 0.5), inset 0 0 15px rgba(139, 0, 0, 0.1);
    transform: translateX(3px);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-reward-label {
    display: block;
    font-weight: bold;
    color: var(--vampire-bone);
    margin-bottom: 10px;
    text-shadow: 0 0 3px rgba(139, 0, 0, 0.5);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-reward-label input[type="checkbox"] {
    margin-right: 10px;
    cursor: not-allowed;
    vertical-align: middle;
    accent-color: var(--vampire-blood);
    transform: scale(1.2);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-reward-label input[type="checkbox"]:checked {
    filter: drop-shadow(0 0 5px var(--vampire-blood));
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-reward-block select {
    width: 100%;
    background: linear-gradient(to bottom, #1a1a1a, #0d0d0d);
    color: #ffebcd;
    border: 2px solid #4a0000;
    border-radius: 5px;
    padding: 10px 12px;
    font-family: 'Uncial Antiqua', serif;
    font-size: 0.95em;
    font-weight: 500;
    margin-top: 8px;
    transition: all 0.3s ease;
    box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.5);
    min-height: 40px;
    line-height: 1.5;
    letter-spacing: 0.3px;
    cursor: pointer;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-reward-block select:hover {
    border-color: var(--vampire-blood);
    background: linear-gradient(to bottom, #2a2a2a, #1a1a1a);
    box-shadow: 0 0 10px rgba(139, 0, 0, 0.3), inset 0 0 10px rgba(139, 0, 0, 0.1);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-reward-block select:focus {
    outline: none;
    border-color: var(--vampire-blood-light);
    background: #1a1a1a;
    box-shadow: 0 0 15px rgba(139, 0, 0, 0.6), inset 0 0 15px rgba(139, 0, 0, 0.2);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-reward-block select option {
    background: #1a1a1a;
    color: #ffebcd;
    padding: 10px 12px;
    font-size: 0.95em;
    line-height: 1.8;
    min-height: 38px;
    font-weight: 500;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-reward-block select option:hover,
  .charsheet .sheet-voie-sanguinaire .sheet-reward-block select option:checked,
  .charsheet .sheet-voie-sanguinaire .sheet-reward-block select option:focus {
    background: #8b0000;
    color: #ffffff;
    font-weight: 600;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-reward-block select option[value=""] {
    color: #b8860b;
    font-style: italic;
    font-weight: 600;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-reward-block select:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    filter: grayscale(80%);
    background: linear-gradient(to bottom, rgba(13, 13, 13, 0.5), rgba(10, 10, 10, 0.5));
  }
  
  /* ======================================== 
     RÉCOMPENSES D'ÉVOLUTION (SPÉCIALES) 
     ======================================== */
  .charsheet .sheet-voie-sanguinaire .sheet-evolution-reward {
    background: linear-gradient(135deg, rgba(139, 0, 0, 0.25) 0%, rgba(75, 0, 130, 0.25) 100%);
    border: 3px solid var(--vampire-blood-light);
    border-left: 8px solid var(--vampire-gold);
    box-shadow: 0 0 25px rgba(139, 0, 0, 0.6), inset 0 0 20px rgba(0, 0, 0, 0.4);
    position: relative;
    overflow: hidden;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-evolution-reward::before {
    content: "⭐";
    position: absolute;
    font-size: 80px;
    opacity: 0.1;
    top: 50%;
    right: 20px;
    transform: translateY(-50%) rotate(15deg);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-evolution-reward .sheet-reward-label {
    color: var(--vampire-gold);
    font-size: 1.15em;
    text-shadow: 0 0 8px var(--vampire-gold);
  }
  
  @keyframes voieSangBloodPulseReward {
    0%, 100% {
      box-shadow: 0 0 25px rgba(139, 0, 0, 0.6), inset 0 0 20px rgba(0, 0, 0, 0.4);
    }
    50% {
      box-shadow: 0 0 40px rgba(139, 0, 0, 0.9), inset 0 0 30px rgba(139, 0, 0, 0.2);
    }
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-evolution-reward:hover {
    animation: voieSangBloodPulseReward 2s ease-in-out infinite;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-gains {
    background: linear-gradient(to right, rgba(139, 0, 0, 0.2), rgba(75, 0, 130, 0.2));
    border-radius: 5px;
    padding: 12px;
    margin: 10px 0;
    color: var(--vampire-gold);
    font-size: 0.95em;
    line-height: 1.6;
    border-left: 3px solid var(--vampire-gold);
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.3);
  }
  
  /* ======================================== 
     SCROLLBAR PERSONNALISÉE 
     ======================================== */
  .charsheet .sheet-voie-sanguinaire .sheet-evolution ::-webkit-scrollbar {
    width: 12px;
    height: 12px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-evolution ::-webkit-scrollbar-track {
    background: var(--vampire-black);
    border-radius: 6px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-evolution ::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, var(--vampire-blood), var(--vampire-blood-dark));
    border-radius: 6px;
    border: 2px solid var(--vampire-black);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-evolution ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(to bottom, var(--vampire-blood-light), var(--vampire-blood));
    box-shadow: 0 0 10px rgba(139, 0, 0, 0.6);
  }
  
  /* ======================================== 
     RESPONSIVE GLOBAL 
     ======================================== */
  @media screen and (max-width: 768px) {
    .charsheet .sheet-voie-sanguinaire .sheet-vampire-title {
      font-size: 1.5em;
    }
    .charsheet .sheet-voie-sanguinaire .sheet-evolution-resources table {
      font-size: 0.9em;
    }
    .charsheet .sheet-voie-sanguinaire .sheet-palier-content {
      padding: 15px 10px;
    }
    .charsheet .sheet-voie-sanguinaire .sheet-choice-section select,
    .charsheet .sheet-voie-sanguinaire .sheet-reward-block select {
      font-size: 1em;
      padding: 12px 10px;
      min-height: 48px;
    }
    .charsheet .sheet-voie-sanguinaire .sheet-choice-section select option,
    .charsheet .sheet-voie-sanguinaire .sheet-reward-block select option {
      min-height: 42px;
      padding: 12px 10px;
      font-size: 1em;
    }
  }
  
  /* ======================================== 
     ÉTAT DÉSACTIVÉ 
     ======================================== */
  .charsheet .sheet-voie-sanguinaire .sheet-evolution input:disabled,
  .charsheet .sheet-voie-sanguinaire .sheet-evolution select:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    filter: grayscale(70%);
  }
  
  /* ===== Checkbox "Activer le bonus" ===== */
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-switch{
    position: relative;
    display: inline-flex;
    align-items: center;
    cursor: pointer;
    user-select: none;
    margin-top: 6px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-switch input{
    position: absolute;
    opacity: 0;
    width: 1px;
    height: 1px;
    pointer-events: none;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-switch span{
    position: relative;
    padding-left: 52px;
    line-height: 22px;
    font-weight: 600;
    color: var(--vampire-bone, #ffebcd);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-switch span::before{
    content: "";
    position: absolute;
    left: 0;
    top: 50%;
    width: 42px;
    height: 22px;
    transform: translateY(-50%);
    border-radius: 999px;
    background: var(--vampire-black-light, #1a1a1a);
    border: 1px solid rgba(184, 134, 11, 0.45);
    box-shadow: inset 0 0 0 1px rgba(0,0,0,0.35);
    transition: background 140ms ease, border-color 140ms ease, box-shadow 140ms ease;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-switch span::after{
    content: "";
    position: absolute;
    left: 3px;
    top: 50%;
    width: 16px;
    height: 16px;
    transform: translateY(-50%);
    border-radius: 50%;
    background: var(--vampire-bone, #ffebcd);
    box-shadow: 0 1px 2px rgba(0,0,0,0.6);
    transition: left 140ms ease, background 140ms ease;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-switch input:checked + span::before{
    background: var(--vampire-blood, #8b0000);
    border-color: rgba(178, 34, 34, 0.75);
    box-shadow: 0 0 0 2px rgba(139,0,0,0.20);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-switch input:checked + span::after{
    left: 23px;
    background: #fff3dc;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-switch input:focus + span::before{
    box-shadow: 0 0 0 2px rgba(184, 134, 11, 0.35);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-bonus-switch:hover span::before{
    border-color: rgba(184, 134, 11, 0.65);
  }
  
  /* =========================================================
     ROLLTEMPLATES — Dark Futuriste Vampire
     GLOBAUX (chat Roll20)
     ========================================================= */
  
  .sheet-rolltemplate-vampobt *,
  .sheet-rolltemplate-gainpts * { box-sizing: border-box; }
  
  /* =========================
     ROLLTEMPLATE : vampobt
     ========================= */
  
  .sheet-rolltemplate-vampobt{
    font-family: "Rajdhani","Orbitron","Trebuchet MS",Arial,sans-serif;
    color: rgba(245,235,235,0.96);
  }
  
  .sheet-rolltemplate-vampobt .sheet-template-obtention-container{
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(160,30,45,0.55);
    border-radius: 12px;
    background:
      radial-gradient(1200px 400px at 20% -10%, rgba(120,10,25,0.25), transparent 60%),
      radial-gradient(900px 300px at 110% 0%, rgba(0,190,220,0.10), transparent 55%),
      linear-gradient(135deg, rgba(18,18,20,0.98), rgba(8,8,10,0.98));
    box-shadow:
      0 8px 22px rgba(0,0,0,0.55),
      inset 0 0 0 1px rgba(255,255,255,0.03),
      inset 0 0 18px rgba(120,10,25,0.18);
    padding: 10px 10px 12px;
    animation: rtVampFadeIn 220ms ease-out both;
  }
  
  .sheet-rolltemplate-vampobt .sheet-template-obtention-container::before{
    content:"";
    position:absolute;
    inset:0;
    pointer-events:none;
    opacity:0.22;
    background: repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.02) 0px,
      rgba(255,255,255,0.02) 1px,
      transparent 3px,
      transparent 7px
    );
    animation: rtScanDrift 6s linear infinite;
  }
  
  .sheet-rolltemplate-vampobt .sheet-template-obtention-container::after{
    content:"";
    position:absolute;
    inset:-40px;
    pointer-events:none;
    opacity:0.28;
    background:
      radial-gradient(700px 180px at 20% 10%, rgba(160,30,45,0.20), transparent 70%),
      radial-gradient(600px 160px at 90% 30%, rgba(0,170,200,0.12), transparent 70%),
      radial-gradient(520px 140px at 50% 90%, rgba(120,10,25,0.16), transparent 70%);
    filter: blur(2px);
    animation: rtFogDrift 7.5s ease-in-out infinite;
  }
  
  .sheet-rolltemplate-vampobt .sheet-template-obtention-header{
    position: relative;
    padding: 10px 12px;
    border-radius: 10px;
    background:
      linear-gradient(90deg, rgba(120,10,25,0.35), rgba(10,10,14,0.25) 55%, rgba(0,170,200,0.08));
    border: 1px solid rgba(160,30,45,0.45);
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,0.03),
      0 0 18px rgba(120,10,25,0.18);
    animation: rtVampHeaderPulse 3.2s ease-in-out infinite;
    overflow: hidden;
  }
  
  .sheet-rolltemplate-vampobt .sheet-template-obtention-header::after{
    content:"驪  驪";
    position:absolute;
    top: 6px;
    left: -60px;
    font-size: 14px;
    opacity: 0.18;
    letter-spacing: 10px;
    filter: drop-shadow(0 0 6px rgba(0,0,0,0.6));
    animation: rtBatFly 6.5s linear infinite;
    pointer-events:none;
  }
  
  .sheet-rolltemplate-vampobt .sheet-template-obtention-title{
    font-weight: 800;
    letter-spacing: 0.6px;
    font-size: 16px;
    text-transform: uppercase;
    color: rgba(250,235,235,0.98);
    text-shadow: 0 0 10px rgba(160,30,45,0.20);
  }
  
  .sheet-rolltemplate-vampobt .sheet-template-obtention-sub{
    margin-top: 4px;
    font-size: 12px;
    letter-spacing: 0.2px;
    opacity: 0.9;
    color: rgba(210,195,195,0.95);
  }
  
  .sheet-rolltemplate-vampobt .sheet-template-obtention-content{
    margin-top: 10px;
    display:flex;
    flex-direction:column;
    gap: 8px;
  }
  
  .sheet-rolltemplate-vampobt .sheet-template-obtention-row{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    padding: 8px 10px;
    border-radius: 10px;
    background:
      linear-gradient(135deg, rgba(255,255,255,0.03), rgba(0,0,0,0.12)),
      radial-gradient(400px 60px at 20% 0%, rgba(120,10,25,0.12), transparent 70%);
    border: 1px solid rgba(255,255,255,0.06);
    box-shadow: inset 0 0 0 1px rgba(0,0,0,0.25);
    transition: transform 140ms ease, border-color 140ms ease, box-shadow 140ms ease;
  }
  
  .sheet-rolltemplate-vampobt .sheet-template-obtention-row:hover{
    transform: translateY(-1px);
    border-color: rgba(160,30,45,0.28);
    box-shadow: 0 6px 18px rgba(0,0,0,0.35), inset 0 0 0 1px rgba(0,170,200,0.06);
  }
  
  .sheet-rolltemplate-vampobt .sheet-template-obtention-label{
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 0.2px;
    color: rgba(245,235,235,0.94);
    opacity: 0.96;
  }
  
  .sheet-rolltemplate-vampobt .sheet-template-obtention-roll{
    font-size: 13px;
    font-weight: 800;
    letter-spacing: 0.3px;
    padding: 4px 8px;
    border-radius: 9px;
    white-space: nowrap;
    color: rgba(175,235,255,0.95);
    background: linear-gradient(180deg, rgba(0,0,0,0.22), rgba(0,0,0,0.42));
    border: 1px solid rgba(0,170,200,0.18);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.03), 0 0 14px rgba(0,170,200,0.10);
    animation: rtVampRollGlow 2.8s ease-in-out infinite;
  }
  
  .sheet-rolltemplate-vampobt .sheet-template-obtention-roll.sheet-rt-ok{
    color: rgba(185,255,210,0.98);
    border-color: rgba(0,255,140,0.28);
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,0.03),
      0 0 14px rgba(0,255,140,0.12);
    animation: rtOkGlow 2.6s ease-in-out infinite;
  }
  
  .sheet-rolltemplate-vampobt .sheet-template-obtention-roll.sheet-rt-bad{
    color: rgba(255,170,170,0.98);
    border-color: rgba(255,70,70,0.30);
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,0.03),
      0 0 16px rgba(160,30,45,0.18);
    animation: rtBadGlow 2.6s ease-in-out infinite;
  }
  
  .sheet-rolltemplate-vampobt .inlinerollresult{
    background: transparent !important;
    border: none !important;
    padding: 0 !important;
    font-weight: 900 !important;
    color: inherit !important;
    text-shadow: 0 0 10px rgba(0,170,200,0.20) !important;
  }
  
  /* =========================
     ROLLTEMPLATE : gainpts
     ========================= */
  
  .sheet-rolltemplate-gainpts{
    font-family: "Rajdhani","Orbitron","Trebuchet MS",Arial,sans-serif;
    color: rgba(245,235,235,0.96);
  }
  
  .sheet-rolltemplate-gainpts .sheet-rt-card{
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(0,170,200,0.20);
    border-radius: 12px;
    background:
      radial-gradient(900px 260px at 15% -10%, rgba(0,170,200,0.16), transparent 60%),
      radial-gradient(900px 280px at 110% 0%, rgba(120,10,25,0.16), transparent 55%),
      linear-gradient(135deg, rgba(16,16,18,0.98), rgba(8,8,10,0.98));
    box-shadow:
      0 8px 22px rgba(0,0,0,0.55),
      inset 0 0 0 1px rgba(255,255,255,0.03);
    padding: 10px 10px 12px;
    animation: rtGainFadeIn 220ms ease-out both;
  }
  
  .sheet-rolltemplate-gainpts .sheet-rt-card::before{
    content:"";
    position:absolute;
    inset:0;
    pointer-events:none;
    opacity:0.16;
    background: repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.02) 0px,
      rgba(255,255,255,0.02) 1px,
      transparent 3px,
      transparent 7px
    );
    animation: rtScanDrift 7s linear infinite;
  }
  
  .sheet-rolltemplate-gainpts .sheet-rt-card::after{
    content:"";
    position:absolute;
    inset:-30px;
    pointer-events:none;
    opacity:0.22;
    background:
      radial-gradient(700px 180px at 20% 10%, rgba(0,170,200,0.14), transparent 70%),
      radial-gradient(650px 170px at 90% 30%, rgba(120,10,25,0.14), transparent 70%);
    filter: blur(2px);
    animation: rtFogDrift 9s ease-in-out infinite;
  }
  
  .sheet-rolltemplate-gainpts .sheet-rt-title{
    font-weight: 900;
    letter-spacing: 0.6px;
    font-size: 15px;
    text-transform: uppercase;
    padding: 10px 12px;
    border-radius: 10px;
    background: linear-gradient(90deg, rgba(0,170,200,0.16), rgba(0,0,0,0.10) 55%, rgba(120,10,25,0.12));
    border: 1px solid rgba(255,255,255,0.07);
    text-shadow: 0 0 10px rgba(0,170,200,0.15);
    position: relative;
    overflow: hidden;
  }
  
  .sheet-rolltemplate-gainpts .sheet-rt-title::after{
    content:"";
    position:absolute;
    top:-40%;
    left:-60%;
    width: 60%;
    height: 180%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
    transform: rotate(18deg);
    animation: rtTitleShimmer 5.8s ease-in-out infinite;
    pointer-events:none;
  }
  
  .sheet-rolltemplate-gainpts .sheet-rt-note{
    margin-top: 8px;
    padding: 8px 10px;
    border-radius: 10px;
    background: rgba(0,0,0,0.22);
    border: 1px dashed rgba(255,255,255,0.10);
    font-size: 12.5px;
    opacity: 0.92;
  }
  
  .sheet-rolltemplate-gainpts .sheet-rt-row{
    margin-top: 8px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap: 10px;
    padding: 8px 10px;
    border-radius: 10px;
    background: linear-gradient(135deg, rgba(255,255,255,0.03), rgba(0,0,0,0.12));
    border: 1px solid rgba(255,255,255,0.06);
    transition: transform 140ms ease, border-color 140ms ease, box-shadow 140ms ease;
  }
  
  .sheet-rolltemplate-gainpts .sheet-rt-row:hover{
    transform: translateY(-1px);
    border-color: rgba(0,170,200,0.20);
    box-shadow: 0 6px 18px rgba(0,0,0,0.35);
  }
  
  .sheet-rolltemplate-gainpts .sheet-rt-method{
    font-weight: 800;
    font-size: 13px;
    letter-spacing: 0.2px;
    opacity: 0.96;
    flex: 1 1 auto;
    min-width: 0;
  }
  
  .sheet-rolltemplate-gainpts .sheet-rt-gains{
    flex: 0 0 auto;
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: minmax(78px, 78px);
    gap: 10px;
    align-items: center;
  }
  
  .sheet-rolltemplate-gainpts .sheet-rt-gain{
    font-weight: 900;
    font-size: 12px;
    letter-spacing: 0.2px;
    padding: 8px 10px;
    border-radius: 9px;
    background: linear-gradient(180deg, rgba(0,0,0,0.22), rgba(0,0,0,0.42));
    border: 1px solid rgba(255,255,255,0.07);
    color: rgba(210,245,255,0.92);
    box-shadow: inset 0 0 0 1px rgba(0,0,0,0.25);
    animation: rtGainChipGlow 3.6s ease-in-out infinite;
    white-space: nowrap;
    text-align: center;
    line-height: 1;
  }
  
  .sheet-rolltemplate-gainpts .inlinerollresult,
  .sheet-rolltemplate-gainpts .inlinerollresult.fullcrit,
  .sheet-rolltemplate-gainpts .inlinerollresult.fullfail,
  .sheet-rolltemplate-gainpts .inlinerollresult.importantroll{
    display: inline !important;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
    color: inherit !important;
    font-weight: 900 !important;
    text-shadow: 0 0 10px rgba(0,170,200,0.18) !important;
  }
  
  /* =========================
     Animations
     ========================= */
  
  @keyframes rtVampFadeIn{
    from { opacity:0; transform: translateY(4px); filter: blur(1px); }
    to   { opacity:1; transform: translateY(0); filter: blur(0); }
  }
  
  @keyframes rtGainFadeIn{
    from { opacity:0; transform: translateY(4px); }
    to   { opacity:1; transform: translateY(0); }
  }
  
  @keyframes rtVampHeaderPulse{
    0%,100% { box-shadow: inset 0 0 0 1px rgba(255,255,255,0.03), 0 0 18px rgba(120,10,25,0.18); }
    50%     { box-shadow: inset 0 0 0 1px rgba(255,255,255,0.03), 0 0 22px rgba(120,10,25,0.26); }
  }
  
  @keyframes rtVampRollGlow{
    0%,100% { box-shadow: inset 0 0 0 1px rgba(255,255,255,0.03), 0 0 14px rgba(0,170,200,0.10); }
    50%     { box-shadow: inset 0 0 0 1px rgba(255,255,255,0.03), 0 0 18px rgba(0,170,200,0.16); }
  }
  
  @keyframes rtGainChipGlow{
    0%,100% { box-shadow: inset 0 0 0 1px rgba(0,0,0,0.25); }
    50%     { box-shadow: inset 0 0 0 1px rgba(0,0,0,0.25), 0 0 16px rgba(0,170,200,0.10); }
  }
  
  @keyframes rtScanDrift{
    0% { transform: translateY(0); }
    100% { transform: translateY(10px); }
  }
  
  @keyframes rtFogDrift{
    0%,100% { transform: translate3d(0,0,0); }
    50%     { transform: translate3d(0,-10px,0); }
  }
  
  @keyframes rtTitleShimmer{
    0%,70% { transform: translateX(0) rotate(18deg); opacity: 0; }
    80%    { opacity: 0.55; }
    100%   { transform: translateX(260%) rotate(18deg); opacity: 0; }
  }
  
  @keyframes rtBatFly{
    0%   { transform: translateX(0); opacity: 0.0; }
    10%  { opacity: 0.18; }
    90%  { opacity: 0.18; }
    100% { transform: translateX(420px); opacity: 0.0; }
  }
  
  @keyframes rtOkGlow{
    0%,100% { box-shadow: inset 0 0 0 1px rgba(255,255,255,0.03), 0 0 14px rgba(0,255,140,0.12); }
    50%     { box-shadow: inset 0 0 0 1px rgba(255,255,255,0.03), 0 0 18px rgba(0,255,140,0.20); }
  }
  
  @keyframes rtBadGlow{
    0%,100% { box-shadow: inset 0 0 0 1px rgba(255,255,255,0.03), 0 0 16px rgba(160,30,45,0.18); }
    50%     { box-shadow: inset 0 0 0 1px rgba(255,255,255,0.03), 0 0 22px rgba(160,30,45,0.26); }
  }
  
  @media (prefers-reduced-motion: reduce){
    .sheet-rolltemplate-vampobt .sheet-template-obtention-container,
    .sheet-rolltemplate-vampobt .sheet-template-obtention-header,
    .sheet-rolltemplate-vampobt .sheet-template-obtention-roll,
    .sheet-rolltemplate-gainpts .sheet-rt-card,
    .sheet-rolltemplate-gainpts .sheet-rt-gain,
    .sheet-rolltemplate-gainpts .sheet-rt-title::after{
      animation: none !important;
    }
  }
  
  /* =====================================================
     BOUTIQUE D'ALUCARNE — CSS ISOLÉ CORRIGÉ
     ===================================================== */
  
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-shop,
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-shop * { box-sizing: border-box; }
  
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-shop{
    font-family: "Trebuchet MS", Arial, sans-serif;
    color: rgba(245,235,235,0.96);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-root{
    border: 1px solid rgba(160,30,45,0.55);
    border-radius: 14px;
    overflow: hidden;
    background:
      radial-gradient(1100px 380px at 15% -10%, rgba(120,10,25,0.22), transparent 60%),
      radial-gradient(900px 340px at 110% 0%, rgba(0,170,200,0.10), transparent 55%),
      linear-gradient(135deg, rgba(16,16,18,0.98), rgba(7,7,10,0.98));
    box-shadow:
      0 10px 26px rgba(0,0,0,0.55),
      inset 0 0 0 1px rgba(255,255,255,0.03);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-root > summary{
    list-style: none;
    cursor: pointer;
    user-select: none;
    padding: 12px 14px;
    background:
      linear-gradient(90deg, rgba(120,10,25,0.32), rgba(10,10,14,0.25) 55%, rgba(0,170,200,0.08));
    border-bottom: 1px solid rgba(255,255,255,0.06);
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,0.02),
      0 0 18px rgba(120,10,25,0.16);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-root > summary::-webkit-details-marker{ display:none; }
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-root > summary::marker{ content:""; }
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-root > summary::before{ content:""; display:none; }
  
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-sumrow{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap: 12px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-sumtitle{
    font-weight: 900;
    letter-spacing: 0.5px;
    font-size: 15px;
    text-transform: uppercase;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-shadow: 0 0 10px rgba(160,30,45,0.20);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-lsbox{
    flex: 0 0 auto;
    display:flex;
    align-items:center;
    gap: 10px;
    padding: 8px 10px;
    border-radius: 12px;
    background: linear-gradient(180deg, rgba(0,0,0,0.22), rgba(0,0,0,0.42));
    border: 1px solid rgba(255,255,255,0.07);
    box-shadow:
      inset 0 0 0 1px rgba(0,0,0,0.25),
      0 0 16px rgba(0,170,200,0.08);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-lslabel{
    font-weight: 900;
    font-size: 12.5px;
    letter-spacing: 0.3px;
    color: rgba(210,245,255,0.92);
    white-space: nowrap;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-lsbox input[type="number"]{
    width: 64px;
    height: 30px;
    text-align: center;
    border-radius: 10px;
    font-weight: 900;
    font-size: 13px;
    color: rgba(255,235,235,0.96);
    background: rgba(10,10,14,0.65);
    border: 1px solid rgba(160,30,45,0.28);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
    pointer-events: none;
    opacity: 0.95;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-root > .sheet-alucarne-intro,
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-root > details.sheet-tier,
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-root > .sheet-alucarne-topbar{
    margin: 14px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-intro{
    padding: 12px 12px;
    border-radius: 14px;
    background:
      radial-gradient(620px 160px at 20% 10%, rgba(160,30,45,0.14), transparent 70%),
      radial-gradient(700px 180px at 95% 30%, rgba(0,170,200,0.10), transparent 72%),
      rgba(0,0,0,0.28);
    border: 1px solid rgba(255,255,255,0.06);
    box-shadow: inset 0 0 0 1px rgba(0,0,0,0.22);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-intro p{
    margin: 0 0 10px 0;
    line-height: 1.35;
    font-size: 13px;
    color: rgba(240,225,210,0.94);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-intro ul{ margin: 8px 0 0 18px; padding:0; }
  .charsheet .sheet-voie-sanguinaire .sheet-alucarne-intro li{ margin: 6px 0; font-size: 13px; }
  
  .charsheet .sheet-voie-sanguinaire details.sheet-tier{
    border-radius: 14px;
    overflow: hidden;
    border: 1px solid rgba(0,170,200,0.18);
    background:
      radial-gradient(900px 260px at 15% -10%, rgba(0,170,200,0.10), transparent 60%),
      radial-gradient(900px 280px at 110% 0%, rgba(120,10,25,0.12), transparent 55%),
      linear-gradient(135deg, rgba(12,12,14,0.96), rgba(8,8,10,0.98));
    box-shadow:
      0 8px 20px rgba(0,0,0,0.45),
      inset 0 0 0 1px rgba(255,255,255,0.02);
  }
  
  .charsheet .sheet-voie-sanguinaire details.sheet-tier > summary.sheet-tier-summary{
    list-style: none;
    cursor: pointer;
    user-select: none;
    padding: 10px 12px;
    font-weight: 950;
    letter-spacing: 0.4px;
    font-size: 14px;
    text-transform: uppercase;
    color: rgba(240,235,235,0.98);
    border-bottom: 1px solid rgba(255,255,255,0.06);
    background: linear-gradient(90deg, rgba(0,170,200,0.10), rgba(0,0,0,0.10) 55%, rgba(120,10,25,0.10));
  }
  
  .charsheet .sheet-voie-sanguinaire details.sheet-tier > summary.sheet-tier-summary::-webkit-details-marker{ display:none; }
  .charsheet .sheet-voie-sanguinaire details.sheet-tier > summary.sheet-tier-summary::marker{ content:""; }
  
  .charsheet .sheet-voie-sanguinaire details.sheet-tier > summary.sheet-tier-summary::before{
    content:"▸";
    margin-right: 10px;
    color: rgba(210,245,255,0.85);
    opacity: 0.9;
  }
  
  .charsheet .sheet-voie-sanguinaire details.sheet-tier[open] > summary.sheet-tier-summary::before{ content:"▾"; }
  
  .charsheet .sheet-voie-sanguinaire .sheet-tier-note{
    padding: 10px 12px;
    font-size: 13px;
    color: rgba(245,235,235,0.90);
    background: rgba(0,0,0,0.20);
    border-bottom: 1px solid rgba(255,255,255,0.06);
  }
  
  .charsheet .sheet-voie-sanguinaire table.sheet-shop-table{
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 8px;
    padding: 10px 12px 14px;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table thead th{
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    font-weight: 950;
    padding: 10px 10px;
    color: rgba(210,245,255,0.90);
    background: rgba(0,0,0,0.22);
    border: 1px solid rgba(255,255,255,0.07);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table thead th:first-child{ border-radius: 12px 0 0 12px; }
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table thead th:last-child{ border-radius: 0 12px 12px 0; }
  
  /* ========== LIGNES NORMALES (par défaut) ========== */
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody tr{
    background:
      linear-gradient(135deg, rgba(255,255,255,0.03), rgba(0,0,0,0.12)),
      radial-gradient(520px 70px at 20% 0%, rgba(120,10,25,0.10), transparent 70%);
    border-radius: 12px;
    box-shadow: inset 0 0 0 1px rgba(0,0,0,0.25);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody td{
    padding: 10px 10px;
    border-top: 1px solid rgba(255,255,255,0.06);
    border-bottom: 1px solid rgba(255,255,255,0.06);
    font-size: 13px;
    vertical-align: middle;
    color: rgba(245,235,235,0.94); /* ✅ Texte normal par défaut */
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody td:first-child{
    border-left: 1px solid rgba(255,255,255,0.06);
    border-radius: 12px 0 0 12px;
    font-weight: 900;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody td:last-child{
    border-right: 1px solid rgba(255,255,255,0.06);
    border-radius: 0 12px 12px 0;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody tr:hover{
    box-shadow:
      0 8px 18px rgba(0,0,0,0.35),
      inset 0 0 0 1px rgba(0,170,200,0.10);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody td:nth-child(2){
    text-align: center;
    font-weight: 950;
    white-space: nowrap;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody td:nth-child(2) .sheet-celltext::before,
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody td:nth-child(2)::before{
    content:"♦ ";
    color: rgba(255,215,140,0.85);
    opacity: 0.9;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody td:nth-child(3){ text-align: center; }
  
  /* ========== CHECKBOXES ========== */
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table input[type="checkbox"]{
    -webkit-appearance: none;
    appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 6px;
    background: rgba(0,0,0,0.35);
    border: 1px solid rgba(255,255,255,0.10);
    box-shadow: inset 0 0 0 1px rgba(0,0,0,0.25);
    cursor: pointer;
    position: relative;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table input[type="checkbox"]:hover{ 
    border-color: rgba(0,170,200,0.22); 
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table input[type="checkbox"]:checked{
    border-color: rgba(0,255,140,0.30);
    box-shadow:
      inset 0 0 0 1px rgba(0,0,0,0.25),
      0 0 14px rgba(0,255,140,0.10);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table input[type="checkbox"]:checked::after{
    content:"✓";
    position:absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -56%);
    font-size: 14px;
    font-weight: 1000;
    color: rgba(185,255,210,0.98);
  }
  
  /* ========== INPUTS CACHÉS ========== */
  .charsheet .sheet-voie-sanguinaire .sheet-canbuy{ 
    position: absolute !important;
    left: -9999px !important;
    width: 1px !important;
    height: 1px !important;
    opacity: 0 !important;
    pointer-events: none !important;
  }
  
  /* ========== CELLULES NORMALES (par défaut - blanc) ========== */
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody td {
    color: rgba(245,235,235,0.94);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody td .sheet-celltext {
    color: rgba(245,235,235,0.94);
  }
  
  /* ========== CELLULES ROUGES (canbuy décoché = pas assez de LS) ========== */
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody td input.sheet-canbuy:not(:checked) ~ .sheet-celltext {
    color: rgba(255, 90, 90, 0.78) !important;
    text-shadow: 0 0 10px rgba(160,30,45,0.18) !important;
  }
  
  /* Réduire l'opacité du diamant rouge */
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody td:nth-child(2) input.sheet-canbuy:not(:checked) ~ .sheet-celltext::before {
    opacity: 0.55 !important;
  }
  
  /* Désactiver le checkbox d'achat si pas assez de LS */
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody td input.sheet-canbuy:not(:checked) ~ .sheet-buywrap input[type="checkbox"] {
    pointer-events: none !important;
    opacity: 0.35 !important;
    filter: grayscale(0.5) !important;
    cursor: not-allowed !important;
  }
  
  /* ========== LIGNES VERTES (item acheté) ========== */
  /* Quand bought est coché, on force tout en vert */
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody tr:has(input[name$="_bought"]:checked) {
    background: rgba(0, 255, 120, 0.10) !important;
  }
  
  /* FALLBACK si :has() ne marche pas : on cible juste les cellules avec bought */
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table input[name$="_bought"]:checked ~ * {
    color: rgba(0, 255, 140, 0.95) !important;
  }
  
  /* Forcer la couleur verte sur toute la ligne via un marqueur */
  .charsheet .sheet-voie-sanguinaire input[name$="_boughtflag"]:checked ~ .sheet-voie-sanguinaire .sheet-shop-table tbody tr .sheet-celltext {
    color: rgba(0, 255, 140, 0.95) !important;
  }
  
  /* ========== LIGNES ROUGES (pas assez de LS ET pas encore acheté) ========== */
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody tr:has(input.sheet-canbuy:not(:checked)):not(:has(input[name$="_bought"]:checked)) td,
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody tr:has(input.sheet-canbuy:not(:checked)):not(:has(input[name$="_bought"]:checked)) .sheet-celltext {
    color: rgba(255, 90, 90, 0.78) !important;
    text-shadow: 0 0 10px rgba(160,30,45,0.18);
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody tr:has(input.sheet-canbuy:not(:checked)):not(:has(input[name$="_bought"]:checked)) td:nth-child(2)::before {
    opacity: 0.55;
  }
  
  /* Désactiver le checkbox d'achat si pas assez de LS */
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody tr:has(input.sheet-canbuy:not(:checked)):not(:has(input[name$="_bought"]:checked)) input[name$="_bought"] {
    pointer-events: none;
    opacity: 0.35;
    filter: grayscale(0.5);
  }
  
  /* ========== LIGNES VERTES (déjà acheté) ========== */
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody tr:has(input[name$="_bought"]:checked) {
    background: rgba(0, 255, 120, 0.10) !important;
    border-color: rgba(0, 255, 120, 0.35) !important;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody tr:has(input[name$="_bought"]:checked) td,
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody tr:has(input[name$="_bought"]:checked) .sheet-celltext {
    color: rgba(0, 255, 140, 0.95) !important;
  }
  
  .charsheet .sheet-voie-sanguinaire .sheet-shop-table tbody tr:has(input[name$="_bought"]:checked) input[type="checkbox"] {
    accent-color: rgba(0, 255, 140, 0.95);
  }
  
  /* ========== RESPONSIVE ========== */
  @media (max-width: 650px){
    .charsheet .sheet-voie-sanguinaire .sheet-alucarne-sumrow{
      flex-direction: column;
      align-items: flex-start;
    }
    .charsheet .sheet-voie-sanguinaire .sheet-alucarne-lsbox{
      width: 100%;
      justify-content: space-between;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* =====================================================
     CSS INITIATIVE - SIMPLIFIÉ (sans lock/unlock)
     ===================================================== */
  
  /* ========== WRAPPER INITIATIVE ========== */
  .charsheet .sheet-initiative-wrapper {
    background: linear-gradient(135deg, #1a0000, #0d0000);
    border: 3px solid #8b0000;
    border-radius: 12px;
    padding: 0;
    margin: 20px 0;
    box-shadow: 0 8px 24px rgba(139, 0, 0, 0.6);
  }
  
  .charsheet .sheet-initiative-header {
    background: linear-gradient(to right, #8b0000, #4a0000);
    color: #ffebcd;
    padding: 15px 20px;
    border-radius: 9px 9px 0 0;
    cursor: pointer;
    font-size: 1.3em;
    font-weight: bold;
    display: flex;
    align-items: center;
    gap: 10px;
    text-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-initiative-header:hover {
    background: linear-gradient(to right, #a52a2a, #6b0000);
    box-shadow: 0 4px 12px rgba(139, 0, 0, 0.8);
  }
  
  .charsheet .sheet-initiative-icon {
    font-size: 1.2em;
    filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.8));
  }
  
  .charsheet .sheet-initiative-title {
    flex: 1;
  }
  
  .charsheet .sheet-initiative-container {
    padding: 20px;
  }
  
  /* ========== FORMULE D'INITIATIVE ========== */
  .charsheet .sheet-initiative-formula-section {
    background: rgba(13, 13, 13, 0.6);
    border: 2px solid rgba(139, 0, 0, 0.4);
    border-radius: 10px;
    padding: 18px;
    margin-bottom: 20px;
  }
  
  .charsheet .sheet-formula-header {
    margin-bottom: 12px;
    border-bottom: 2px solid rgba(139, 0, 0, 0.4);
    padding-bottom: 8px;
  }
  
  .charsheet .sheet-formula-title {
    color: #b8860b;
    font-size: 1.2em;
    font-weight: bold;
    margin: 0;
    text-shadow: 0 0 8px rgba(184, 134, 11, 0.8);
  }
  
  .charsheet .sheet-formula-display {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  
  .charsheet .sheet-formula-text {
    color: #ffebcd;
    font-size: 1.1em;
    line-height: 1.8;
    text-shadow: 0 0 8px rgba(184, 134, 11, 0.6);
    padding: 10px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 6px;
    border: 1px solid rgba(139, 0, 0, 0.3);
  }
  
  /* d20 de base (VERT) */
  .charsheet .sheet-formula-base {
    color: #32cd32;
    font-weight: bold;
    font-size: 1.15em;
    text-shadow: 0 0 10px rgba(50, 205, 50, 0.8);
  }
  
  /* d10 (ORANGE) */
  .charsheet .sheet-formula-value {
    color: #ff8c00;
    font-weight: bold;
    font-size: 1.1em;
    text-shadow: 0 0 10px rgba(255, 140, 0, 0.8);
  }
  
  /* Labels (PER, Réac/10) */
  .charsheet .sheet-formula-label {
    color: #ffebcd;
    font-size: 0.9em;
    opacity: 0.8;
  }
  
  /* Opérateurs (+) */
  .charsheet .sheet-formula-operator {
    color: #b8860b;
    margin: 0 4px;
  }
  
  /* TOUS LES BONUS FIXES (DORÉ) */
  .charsheet .sheet-formula-bonuses {
    color: #ffd700;
    font-weight: bold;
    font-size: 1.1em;
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
  }
  
  .charsheet .sheet-formula-total {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    background: linear-gradient(135deg, rgba(139, 0, 0, 0.2), rgba(75, 0, 130, 0.2));
    border-radius: 8px;
    border: 2px solid rgba(139, 0, 0, 0.4);
  }
  
  .charsheet .sheet-total-label {
    color: #b8860b;
    font-weight: bold;
    font-size: 1.1em;
  }
  
  .charsheet .sheet-total-value {
    color: #ffd700;
    font-weight: bold;
    font-size: 1.3em;
    text-shadow: 0 0 12px rgba(255, 215, 0, 0.8);
  }
  
  /* ========== CONTRÔLES PRINCIPAUX ========== */
  .charsheet .sheet-initiative-controls {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
  }
  
  /* ========== STATS DE BASE ========== */
  .charsheet .sheet-initiative-stats {
    display: flex;
    flex-direction: column;
    gap: 15px;
    background: rgba(13, 13, 13, 0.6);
    border: 2px solid rgba(139, 0, 0, 0.4);
    border-radius: 10px;
    padding: 18px;
  }
  
  .charsheet .sheet-stat-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  
  .charsheet .sheet-stat-label {
    color: #b8860b;
    font-weight: bold;
    font-size: 0.95em;
    text-shadow: 0 0 6px rgba(184, 134, 11, 0.6);
  }
  
  .charsheet .sheet-stat-input {
    background: #000000;
    border: 2px solid #4a0000;
    color: #ffebcd;
    padding: 10px;
    border-radius: 6px;
    font-size: 1.1em;
    text-align: center;
    font-weight: bold;
    box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.7);
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-stat-input:focus {
    border-color: #8b0000;
    box-shadow: 0 0 12px rgba(139, 0, 0, 0.6), inset 0 0 8px rgba(0, 0, 0, 0.7);
    outline: none;
  }
  
  .charsheet .sheet-stat-input[readonly] {
    background: #0a0a0a;
    cursor: not-allowed;
    opacity: 0.8;
  }
  
  .charsheet .sheet-stat-help {
    color: #999;
    font-size: 0.85em;
    font-style: italic;
  }
  
  /* ========== ACTIONS (Avantage/Désavantage/Bouton) ========== */
  .charsheet .sheet-initiative-actions {
    display: flex;
    flex-direction: column;
    gap: 15px;
    background: rgba(13, 13, 13, 0.6);
    border: 2px solid rgba(139, 0, 0, 0.4);
    border-radius: 10px;
    padding: 18px;
  }
  
  .charsheet .sheet-advantage-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  
  .charsheet .sheet-advantage-group {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  
  .charsheet .sheet-advantage-label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    padding: 10px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 6px;
    border: 2px solid rgba(139, 0, 0, 0.3);
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-advantage-label:hover {
    background: rgba(139, 0, 0, 0.2);
    border-color: #8b0000;
  }
  
  .charsheet .sheet-advantage-checkbox {
    width: 20px;
    height: 20px;
    cursor: pointer;
    accent-color: #8b0000;
  }
  
  .charsheet .sheet-advantage-icon {
    font-size: 1.2em;
  }
  
  .charsheet .sheet-advantage-text {
    color: #ffebcd;
    font-weight: bold;
    font-size: 1.05em;
    flex: 1;
  }
  
  .charsheet .sheet-advantage-help {
    color: #999;
    font-size: 0.85em;
    font-style: italic;
    padding-left: 30px;
  }
  
  .charsheet .sheet-whisper-label {
    border-color: rgba(75, 0, 130, 0.4);
  }
  
  .charsheet .sheet-whisper-label:hover {
    background: rgba(75, 0, 130, 0.2);
    border-color: #4b0082;
  }
  
  /* ========== BOUTON LANCER INITIATIVE ========== */
  .charsheet .sheet-initiative-roll-button {
    background: linear-gradient(145deg, #b8860b, #8b6914, #6b4f10);
    border: 3px solid #8b6914;
    border-radius: 8px;
    color: #fffaf0;
    padding: 18px 24px;
    font-size: 1.2em;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
    box-shadow: 0 6px 16px rgba(139, 105, 20, 0.4), inset 0 -4px 8px rgba(0, 0, 0, 0.3);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .charsheet .sheet-initiative-roll-button::before {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transform: rotate(45deg);
    transition: all 0.5s ease;
  }
  
  .charsheet .sheet-initiative-roll-button:hover {
    background: linear-gradient(145deg, #d4a017, #a47d1a, #8b6914);
    box-shadow: 0 8px 20px rgba(139, 105, 20, 0.6), inset 0 -4px 8px rgba(0, 0, 0, 0.4);
    transform: translateY(-2px);
  }
  
  .charsheet .sheet-initiative-roll-button:hover::before {
    left: 100%;
  }
  
  .charsheet .sheet-initiative-roll-button:active {
    transform: translateY(0);
    box-shadow: 0 4px 12px rgba(139, 105, 20, 0.4), inset 0 -2px 4px rgba(0, 0, 0, 0.3);
  }
  
  .charsheet .sheet-button-icon {
    font-size: 1.3em;
    filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.6));
  }
  
  .charsheet .sheet-button-text {
    letter-spacing: 0.5px;
  }
  
  /* ========== BONUS PERSONNALISÉS ========== */
  .charsheet .sheet-initiative-bonuses-section {
    background: rgba(13, 13, 13, 0.6);
    border: 2px solid rgba(139, 0, 0, 0.4);
    border-radius: 10px;
    padding: 18px;
  }
  
  .charsheet .sheet-bonuses-header {
    margin-bottom: 15px;
    border-bottom: 2px solid rgba(139, 0, 0, 0.4);
    padding-bottom: 10px;
  }
  
  .charsheet .sheet-bonuses-title {
    color: #b8860b;
    font-size: 1.2em;
    font-weight: bold;
    margin: 0;
    text-shadow: 0 0 8px rgba(184, 134, 11, 0.8);
  }
  
  .charsheet .sheet-bonuses-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 0;
  }
  
  .charsheet .sheet-bonuses-table thead th {
    background: linear-gradient(to right, #4a0000, #8b0000);
    color: #ffebcd;
    padding: 10px;
    border: 1px solid #8b0000;
    font-size: 0.95em;
    font-weight: bold;
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
  }
  
  /* Colonnes */
  .charsheet .sheet-col-name { width: 35%; }
  .charsheet .sheet-col-type { width: 30%; }
  .charsheet .sheet-col-value { width: 25%; }
  .charsheet .sheet-col-active { width: 10%; text-align: center; }
  
  /* ========== LIGNE DE BASE ========== */
  .charsheet .sheet-bonus-row-base {
    background: linear-gradient(135deg, rgba(139, 0, 0, 0.15), rgba(75, 0, 130, 0.15));
    border: 2px solid rgba(139, 0, 0, 0.4);
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-bonus-row-base:hover {
    background: linear-gradient(135deg, rgba(139, 0, 0, 0.25), rgba(75, 0, 130, 0.25));
    border-color: #8b0000;
    box-shadow: 0 4px 12px rgba(139, 0, 0, 0.5);
  }
  
  .charsheet .sheet-bonus-row-base td {
    padding: 12px 10px;
    border: 1px solid rgba(139, 0, 0, 0.3);
  }
  
  /* ========== LIGNES REPEATING ========== */
  .charsheet .sheet-bonuses-table-repeating {
    margin-top: 8px;
  }
  
  .charsheet .sheet-bonus-row {
    background: linear-gradient(135deg, rgba(139, 0, 0, 0.1), rgba(75, 0, 130, 0.1));
    border: 1px solid rgba(139, 0, 0, 0.3);
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-bonus-row:hover {
    background: linear-gradient(135deg, rgba(139, 0, 0, 0.2), rgba(75, 0, 130, 0.2));
    border-color: #8b0000;
    box-shadow: 0 4px 12px rgba(139, 0, 0, 0.5);
  }
  
  .charsheet .sheet-bonus-row td {
    padding: 10px;
    border: 1px solid rgba(139, 0, 0, 0.3);
  }
  
  .charsheet .sheet-bonus-cell {
    vertical-align: middle;
  }
  
  .charsheet .sheet-bonus-name-input {
    width: 100%;
    background: #000000;
    border: 2px solid #4a0000;
    color: #ffebcd;
    padding: 8px;
    border-radius: 6px;
    font-size: 0.95em;
    box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.7);
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-bonus-name-input:focus {
    border-color: #8b0000;
    box-shadow: 0 0 8px rgba(139, 0, 0, 0.4), inset 0 0 8px rgba(0, 0, 0, 0.7);
    outline: none;
  }
  
  .charsheet .sheet-bonus-type-select {
    width: 100%;
    background: #000000;
    border: 2px solid #4a0000;
    color: #ffebcd;
    padding: 8px;
    border-radius: 6px;
    font-size: 0.95em;
    cursor: pointer;
    box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.7);
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-bonus-type-select:focus {
    border-color: #8b0000;
    box-shadow: 0 0 8px rgba(139, 0, 0, 0.4), inset 0 0 8px rgba(0, 0, 0, 0.7);
    outline: none;
  }
  
  /* ========== CHAMP VALEUR (toujours éditable) ========== */
  .charsheet .sheet-bonus-value-input {
    width: 100%;
    background: #1a0000;
    border: 2px solid #8b0000;
    color: #ffd700;
    padding: 8px;
    border-radius: 6px;
    font-size: 0.95em;
    text-align: center;
    font-weight: bold;
    box-shadow: 0 0 15px rgba(139, 0, 0, 0.4), inset 0 0 8px rgba(0, 0, 0, 0.7);
    transition: all 0.3s ease;
  }
  
  .charsheet .sheet-bonus-value-input:focus {
    border-color: #b22222;
    box-shadow: 0 0 20px rgba(139, 0, 0, 0.6), inset 0 0 12px rgba(139, 0, 0, 0.3);
    outline: none;
  }
  
  .charsheet .sheet-bonus-active-label {
    display: flex;
    justify-content: center;
    cursor: pointer;
  }
  
  .charsheet .sheet-bonus-active-checkbox {
    width: 20px;
    height: 20px;
    cursor: pointer;
    accent-color: #8b0000;
  }
  
  /* ========== RESPONSIVE ========== */
  @media screen and (max-width: 1200px) {
    .charsheet .sheet-initiative-controls {
      grid-template-columns: 1fr;
    }
  }
  
  @media screen and (max-width: 768px) {
    .charsheet .sheet-bonuses-table,
    .charsheet .sheet-bonuses-table-repeating {
      display: block;
      overflow-x: auto;
    }
    
    .charsheet .sheet-formula-text {
      font-size: 0.9em;
    }
    
    .charsheet .sheet-initiative-roll-button {
      padding: 15px 18px;
      font-size: 1em;
    }
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  /* =====================================================
     CSS DU ROLL TEMPLATE INITIATIVE
     À placer dans <style type="text/css">
     Style doré/bronze cohérent avec le template de jets
     ===================================================== */
  
  /* ========== CONTENEUR PRINCIPAL ========== */
  .sheet-rolltemplate-initiative {
    background: linear-gradient(145deg, #3d2914, #2c1e0f, #3d2914);
    border: 3px solid #8b6914;
    border-radius: 12px;
    box-shadow: 
      0 0 0 2px #654321,
      0 6px 16px rgba(0,0,0,0.8),
      inset 0 1px 0 rgba(139,105,20,0.4);
    margin: 8px 0;
    overflow: hidden;
    font-family: 'Georgia', serif;
    max-width: 350px;
  }
  
  .sheet-rolltemplate-initiative .sheet-template-container {
    background: linear-gradient(135deg, rgba(244,230,183,0.15), rgba(230,214,144,0.1));
  }
  
  /* ========== EN-TÊTE DORÉ ========== */
  .sheet-rolltemplate-initiative .sheet-template-header {
    background: linear-gradient(90deg, #8b6914, #6b4f10, #8b6914);
    color: #f4e6b7;
    padding: 12px 16px;
    text-align: center;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }
  
  .sheet-rolltemplate-initiative .sheet-template-title {
    font-size: 16px;
    margin: 0;
  }
  
  /* ========== BADGE WHISPER (JET MJ) ========== */
  .sheet-rolltemplate-initiative .sheet-whisper-badge {
    display: inline-block;
    background: linear-gradient(135deg, #4b0082, #301934);
    color: #fff;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    margin-left: 6px;
    border: 1px solid #663399;
    box-shadow: 0 2px 4px rgba(0,0,0,0.5);
    text-transform: uppercase;
    letter-spacing: 0.3px;
  }
  
  /* ========== CONTENU ========== */
  .sheet-rolltemplate-initiative .sheet-template-content {
    padding: 16px;
  }
  
  /* ========== NOM DU PERSONNAGE ========== */
  .sheet-rolltemplate-initiative .sheet-initiative-character-name {
    color: #f5e6c8 !important;
    font-weight: bold;
    font-size: 14px;
    text-align: center;
    margin-bottom: 10px;
    text-shadow: 2px 2px 3px rgba(0,0,0,0.9) !important;
    background: rgba(139,69,19,0.2);
    padding: 6px 10px;
    border-radius: 6px;
    border: 1px solid rgba(245,230,200,0.3);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  /* ========== SECTION RÉSULTAT ========== */
  .sheet-rolltemplate-initiative .sheet-initiative-result {
    background: linear-gradient(135deg, rgba(139,69,19,0.15), rgba(101,67,33,0.1));
    border: 2px solid #8b4513;
    border-radius: 8px;
    padding: 12px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  .sheet-rolltemplate-initiative .sheet-initiative-result:hover {
    background: linear-gradient(135deg, rgba(139,69,19,0.25), rgba(101,67,33,0.2));
    border-color: #a0522d;
    transform: translateY(-1px);
    box-shadow: 0 4px 10px rgba(160,82,45,0.4);
  }
  
  /* ========== RÉSULTAT DU DÉ (RÉDUIT 24px) ========== */
  .sheet-rolltemplate-initiative .sheet-initiative-roll {
    background: linear-gradient(145deg, #b8860b, #8b6914, #6b4f10);
    border: 2px solid #654321;
    border-radius: 6px;
    padding: 10px 20px;
    text-align: center;
    font-size: 24px;
    font-weight: bold;
    color: #f4e6b7;
    text-shadow: 
      1px 1px 2px rgba(0,0,0,0.8),
      0 0 8px rgba(184,134,11,0.4);
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.3),
      0 2px 6px rgba(0,0,0,0.5),
      0 0 8px rgba(139,105,20,0.5);
    min-width: 80px;
    min-height: 45px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
  }
  
  .sheet-rolltemplate-initiative .sheet-initiative-roll:hover {
    background: linear-gradient(145deg, #cd853f, #b8860b, #8b6914);
    transform: scale(1.05);
    box-shadow: 
      inset 0 1px 3px rgba(0,0,0,0.3),
      0 3px 8px rgba(0,0,0,0.6),
      0 0 12px rgba(205,133,63,0.6);
  }
  
  /* Effet de brillance au survol */
  .sheet-rolltemplate-initiative .sheet-initiative-roll::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent, 
      rgba(244,230,183,0.5), 
      transparent);
    transition: left 0.6s ease;
  }
  
  .sheet-rolltemplate-initiative .sheet-initiative-roll:hover::before {
    left: 100%;
  }
  
  /* ========== OVERRIDE DES STYLES ROLL20 ========== */
  .sheet-rolltemplate-initiative .sheet-initiative-roll span.inlinerollresult,
  .sheet-rolltemplate-initiative .sheet-initiative-roll .inlinerollresult,
  .sheet-rolltemplate-initiative .sheet-initiative-roll .a,
  .sheet-rolltemplate-initiative .sheet-initiative-roll .fa,
  .sheet-rolltemplate-initiative .sheet-initiative-roll .fc,
  .sheet-rolltemplate-initiative .sheet-initiative-roll .fb,
  .sheet-rolltemplate-initiative .sheet-initiative-roll .fd,
  .sheet-rolltemplate-initiative .sheet-initiative-roll .didroll,
  .sheet-rolltemplate-initiative .sheet-initiative-roll .computedarr,
  .sheet-rolltemplate-initiative .sheet-initiative-roll .computed,
  .sheet-rolltemplate-initiative .sheet-initiative-roll * {
    background: transparent !important;
    border: none !important;
    color: #f4e6b7 !important;
    font-weight: bold !important;
    font-size: 24px !important;
    text-shadow: 
      1px 1px 2px rgba(0,0,0,0.8),
      0 0 8px rgba(184,134,11,0.4) !important;
    padding: 0 !important;
    margin: 0 !important;
    border-radius: 0 !important;
    box-shadow: none !important;
  }
  
  /* ========== ANIMATION (Pulsation dorée) ========== */
  .sheet-rolltemplate-initiative .sheet-initiative-roll {
    animation: pulse-gold-initiative 2s ease-in-out infinite;
  }
  
  @keyframes pulse-gold-initiative {
    0%, 100% { 
      box-shadow: 
        inset 0 1px 3px rgba(0,0,0,0.3),
        0 2px 6px rgba(0,0,0,0.5),
        0 0 8px rgba(139,105,20,0.5);
    }
    50% { 
      box-shadow: 
        inset 0 1px 3px rgba(0,0,0,0.3),
        0 2px 6px rgba(0,0,0,0.5),
        0 0 16px rgba(139,105,20,0.8);
    }
  }
  
  /* ========== RESPONSIVE ========== */
  @media (max-width: 768px) {
    .sheet-rolltemplate-initiative {
      max-width: 100%;
      margin: 4px 0;
    }
    
    .sheet-rolltemplate-initiative .sheet-template-content {
      padding: 12px;
    }
    
    .sheet-rolltemplate-initiative .sheet-initiative-roll {
      font-size: 20px;
      padding: 8px 16px;
      min-width: 60px;
      min-height: 36px;
    }
    
    .sheet-rolltemplate-initiative .sheet-initiative-character-name {
      font-size: 12px;
      padding: 4px 8px;
    }
    
    .sheet-rolltemplate-initiative .sheet-whisper-badge {
      font-size: 10px;
      padding: 3px 6px;
    }
  }
  
  @media (max-width: 480px) {
    .sheet-rolltemplate-initiative .sheet-initiative-roll {
      font-size: 18px;
      padding: 6px 12px;
      min-width: 50px;
      min-height: 30px;
    }
    
    .sheet-rolltemplate-initiative .sheet-template-header {
      padding: 8px 12px;
    }
    
    .sheet-rolltemplate-initiative .sheet-template-title {
      font-size: 14px;
    }
  }